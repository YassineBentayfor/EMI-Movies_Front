var Wj=Object.defineProperty,qj=Object.defineProperties;var Gj=Object.getOwnPropertyDescriptors;var OD=Object.getOwnPropertySymbols,Kj=Object.getPrototypeOf,Yj=Object.prototype.hasOwnProperty,Qj=Object.prototype.propertyIsEnumerable,Jj=Reflect.get;var FD=(t,e,n)=>e in t?Wj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,C=(t,e)=>{for(var n in e||={})Yj.call(e,n)&&FD(t,n,e[n]);if(OD)for(var n of OD(e))Qj.call(e,n)&&FD(t,n,e[n]);return t},oe=(t,e)=>qj(t,Gj(e));var as=(t,e,n)=>Jj(Kj(t),n,e);var E=(t,e,n)=>new Promise((i,r)=>{var s=l=>{try{a(n.next(l))}catch(c){r(c)}},o=l=>{try{a(n.throw(l))}catch(c){r(c)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(s,o);a((n=n.apply(t,e)).next())});var LD=null;var Sy=1;function Kt(t){let e=LD;return LD=t,e}var VD={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Xj(t){if(!(Ay(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Sy)){if(!t.producerMustRecompute(t)&&!Dy(t)){t.dirty=!1,t.lastCleanEpoch=Sy;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Sy}}function BD(t){return t&&(t.nextProducerIndex=0),Kt(t)}function jD(t,e){if(Kt(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Ay(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)xy(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function Dy(t){hf(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],i=t.producerLastReadVersion[e];if(i!==n.version||(Xj(n),i!==n.version))return!0}return!1}function UD(t){if(hf(t),Ay(t))for(let e=0;e<t.producerNode.length;e++)xy(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function xy(t,e){if(Zj(t),hf(t),t.liveConsumerNode.length===1)for(let i=0;i<t.producerNode.length;i++)xy(t.producerNode[i],t.producerIndexOfThis[i]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let i=t.liveConsumerIndexOfThis[e],r=t.liveConsumerNode[e];hf(r),r.producerIndexOfThis[i]=e}}function Ay(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function hf(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function Zj(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function eU(){throw new Error}var tU=eU;function zD(t){tU=t}function q(t){return typeof t=="function"}function Ja(t){let n=t(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ff=Ja(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function _o(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Fe=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(q(i))try{i()}catch(s){e=s instanceof ff?s.errors:[s]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let s of r)try{$D(s)}catch(o){e=e??[],o instanceof ff?e=[...e,...o.errors]:e.push(o)}}if(e)throw new ff(e)}}add(e){var n;if(e&&e!==this)if(this.closed)$D(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&_o(n,e)}remove(e){let{_finalizers:n}=this;n&&_o(n,e),e instanceof t&&e._removeParent(this)}};Fe.EMPTY=(()=>{let t=new Fe;return t.closed=!0,t})();var My=Fe.EMPTY;function pf(t){return t instanceof Fe||t&&"closed"in t&&q(t.remove)&&q(t.add)&&q(t.unsubscribe)}function $D(t){q(t)?t():t.unsubscribe()}var ii={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Xa={setTimeout(t,e,...n){let{delegate:i}=Xa;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Xa;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function mf(t){Xa.setTimeout(()=>{let{onUnhandledError:e}=ii;if(e)e(t);else throw t})}function tu(){}var HD=(()=>ky("C",void 0,void 0))();function WD(t){return ky("E",void 0,t)}function qD(t){return ky("N",t,void 0)}function ky(t,e,n){return{kind:t,value:e,error:n}}var yo=null;function Za(t){if(ii.useDeprecatedSynchronousErrorHandling){let e=!yo;if(e&&(yo={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:i}=yo;if(yo=null,n)throw i}}else t()}function GD(t){ii.useDeprecatedSynchronousErrorHandling&&yo&&(yo.errorThrown=!0,yo.error=t)}var vo=class extends Fe{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,pf(e)&&e.add(this)):this.destination=rU}static create(e,n,i){return new br(e,n,i)}next(e){this.isStopped?Ny(qD(e),this):this._next(e)}error(e){this.isStopped?Ny(WD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ny(HD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},nU=Function.prototype.bind;function Ry(t,e){return nU.call(t,e)}var Py=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){gf(i)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){gf(i)}else gf(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){gf(n)}}},br=class extends vo{constructor(e,n,i){super();let r;if(q(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let s;this&&ii.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Ry(e.next,s),error:e.error&&Ry(e.error,s),complete:e.complete&&Ry(e.complete,s)}):r=e}this.destination=new Py(r)}};function gf(t){ii.useDeprecatedSynchronousErrorHandling?GD(t):mf(t)}function iU(t){throw t}function Ny(t,e){let{onStoppedNotification:n}=ii;n&&Xa.setTimeout(()=>n(t,e))}var rU={closed:!0,next:tu,error:iU,complete:tu};var el=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")();function Yt(t){return t}function Oy(...t){return Fy(t)}function Fy(t){return t.length===0?Yt:t.length===1?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}var X=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){let s=oU(n)?n:new br(n,i,r);return Za(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=KD(i),new i((r,s)=>{let o=new br({next:a=>{try{n(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});this.subscribe(o)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[el](){return this}pipe(...n){return Fy(n)(this)}toPromise(n){return n=KD(n),new n((i,r)=>{let s;this.subscribe(o=>s=o,o=>r(o),()=>i(s))})}}return t.create=e=>new t(e),t})();function KD(t){var e;return(e=t??ii.Promise)!==null&&e!==void 0?e:Promise}function sU(t){return t&&q(t.next)&&q(t.error)&&q(t.complete)}function oU(t){return t&&t instanceof vo||sU(t)&&pf(t)}function Ly(t){return q(t?.lift)}function ae(t){return e=>{if(Ly(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ie(t,e,n,i,r){return new Vy(t,e,n,i,r)}var Vy=class extends vo{constructor(e,n,i,r,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function tl(){return ae((t,e)=>{let n=null;t._refCount++;let i=ie(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let r=t._connection,s=n;n=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}var nl=class extends X{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Ly(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Fe;let n=this.getSubject();e.add(this.source.subscribe(ie(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Fe.EMPTY)}return e}refCount(){return tl()(this)}};var YD=Ja(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Z=(()=>{class t extends X{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new _f(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new YD}next(n){Za(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){Za(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){Za(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:s}=this;return i||r?My:(this.currentObservers=null,s.push(n),new Fe(()=>{this.currentObservers=null,_o(s,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:s}=this;i?n.error(r):s&&n.complete()}asObservable(){let n=new X;return n.source=this,n}}return t.create=(e,n)=>new _f(e,n),t})(),_f=class extends Z{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,e)}error(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&i!==void 0?i:My}};var ot=class extends Z{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var By={now(){return(By.delegate||Date).now()},delegate:void 0};var yf=class extends Fe{constructor(e,n){super()}schedule(e,n=0){return this}};var nu={setInterval(t,e,...n){let{delegate:i}=nu;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=nu;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var il=class extends yf{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;let r=this.id,s=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(s,r,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,i=0){return nu.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&nu.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i=!1,r;try{this.work(e)}catch(s){i=!0,r=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,_o(i,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var rl=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}};rl.now=By.now;var sl=class extends rl{constructor(e,n=rl.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}};var wr=new sl(il),jy=wr;var vf=class extends il{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,i=0){return i!=null&&i>0||i==null&&this.delay>0?super.requestAsyncId(e,n,i):(e.flush(this),0)}};var bf=class extends sl{};var Uy=new bf(vf);var an=new X(t=>t.complete());function wf(t){return t&&q(t.schedule)}function zy(t){return t[t.length-1]}function Ef(t){return q(zy(t))?t.pop():void 0}function ki(t){return wf(zy(t))?t.pop():void 0}function QD(t,e){return typeof zy(t)=="number"?t.pop():e}function $y(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function XD(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(d){o(d)}}function l(u){try{c(i.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})}function JD(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function bo(t){return this instanceof bo?(this.v=t,this):new bo(t)}function ZD(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(h){i[h]&&(r[h]=function(p){return new Promise(function(f,m){s.push([h,p,f,m])>1||a(h,p)})})}function a(h,p){try{l(i[h](p))}catch(f){d(s[0][3],f)}}function l(h){h.value instanceof bo?Promise.resolve(h.value.v).then(c,u):d(s[0][2],h)}function c(h){a("next",h)}function u(h){a("throw",h)}function d(h,p){h(p),s.shift(),s.length&&a(s[0][0],s[0][1])}}function ex(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof JD=="function"?JD(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),r(a,l,o.done,o.value)})}}function r(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}var ol=t=>t&&typeof t.length=="number"&&typeof t!="function";function If(t){return q(t?.then)}function Cf(t){return q(t[el])}function Tf(t){return Symbol.asyncIterator&&q(t?.[Symbol.asyncIterator])}function Sf(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function aU(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Df=aU();function xf(t){return q(t?.[Df])}function Af(t){return ZD(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:i,done:r}=yield bo(n.read());if(r)return yield bo(void 0);yield yield bo(i)}}finally{n.releaseLock()}})}function Mf(t){return q(t?.getReader)}function ke(t){if(t instanceof X)return t;if(t!=null){if(Cf(t))return lU(t);if(ol(t))return cU(t);if(If(t))return uU(t);if(Tf(t))return tx(t);if(xf(t))return dU(t);if(Mf(t))return hU(t)}throw Sf(t)}function lU(t){return new X(e=>{let n=t[el]();if(q(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function cU(t){return new X(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function uU(t){return new X(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,mf)})}function dU(t){return new X(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function tx(t){return new X(e=>{fU(t,e).catch(n=>e.error(n))})}function hU(t){return tx(Af(t))}function fU(t,e){var n,i,r,s;return XD(this,void 0,void 0,function*(){try{for(n=ex(t);i=yield n.next(),!i.done;){let o=i.value;if(e.next(o),e.closed)return}}catch(o){r={error:o}}finally{try{i&&!i.done&&(s=n.return)&&(yield s.call(n))}finally{if(r)throw r.error}}e.complete()})}function ln(t,e,n,i=0,r=!1){let s=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(s),!r)return s}function ls(t,e=0){return ae((n,i)=>{n.subscribe(ie(i,r=>ln(i,t,()=>i.next(r),e),()=>ln(i,t,()=>i.complete(),e),r=>ln(i,t,()=>i.error(r),e)))})}function cs(t,e=0){return ae((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function nx(t,e){return ke(t).pipe(cs(e),ls(e))}function ix(t,e){return ke(t).pipe(cs(e),ls(e))}function rx(t,e){return new X(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function sx(t,e){return new X(n=>{let i;return ln(n,e,()=>{i=t[Df](),ln(n,e,()=>{let r,s;try{({value:r,done:s}=i.next())}catch(o){n.error(o);return}s?n.complete():n.next(r)},0,!0)}),()=>q(i?.return)&&i.return()})}function kf(t,e){if(!t)throw new Error("Iterable cannot be null");return new X(n=>{ln(n,e,()=>{let i=t[Symbol.asyncIterator]();ln(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function ox(t,e){return kf(Af(t),e)}function ax(t,e){if(t!=null){if(Cf(t))return nx(t,e);if(ol(t))return rx(t,e);if(If(t))return ix(t,e);if(Tf(t))return kf(t,e);if(xf(t))return sx(t,e);if(Mf(t))return ox(t,e)}throw Sf(t)}function Le(t,e){return e?ax(t,e):ke(t)}function F(...t){let e=ki(t);return Le(t,e)}function ri(t,e){let n=q(t)?t:()=>t,i=r=>r.error(n());return new X(e?r=>e.schedule(i,0,r):i)}function al(t){return!!t&&(t instanceof X||q(t.lift)&&q(t.subscribe))}var Er=Ja(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function lx(t){return t instanceof Date&&!isNaN(t)}function U(t,e){return ae((n,i)=>{let r=0;n.subscribe(ie(i,s=>{i.next(t.call(e,s,r++))}))})}var{isArray:pU}=Array;function mU(t,e){return pU(e)?t(...e):t(e)}function ll(t){return U(e=>mU(t,e))}var{isArray:gU}=Array,{getPrototypeOf:_U,prototype:yU,keys:vU}=Object;function Rf(t){if(t.length===1){let e=t[0];if(gU(e))return{args:e,keys:null};if(bU(e)){let n=vU(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}function bU(t){return t&&typeof t=="object"&&_U(t)===yU}function Nf(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function wo(...t){let e=ki(t),n=Ef(t),{args:i,keys:r}=Rf(t);if(i.length===0)return Le([],e);let s=new X(wU(i,e,r?o=>Nf(r,o):Yt));return n?s.pipe(ll(n)):s}function wU(t,e,n=Yt){return i=>{cx(e,()=>{let{length:r}=t,s=new Array(r),o=r,a=r;for(let l=0;l<r;l++)cx(e,()=>{let c=Le(t[l],e),u=!1;c.subscribe(ie(i,d=>{s[l]=d,u||(u=!0,a--),a||i.next(n(s.slice()))},()=>{--o||i.complete()}))},i)},i)}}function cx(t,e,n){t?ln(n,t,e):e()}function ux(t,e,n,i,r,s,o,a){let l=[],c=0,u=0,d=!1,h=()=>{d&&!l.length&&!c&&e.complete()},p=m=>c<i?f(m):l.push(m),f=m=>{s&&e.next(m),c++;let g=!1;ke(n(m,u++)).subscribe(ie(e,w=>{r?.(w),s?p(w):e.next(w)},()=>{g=!0},void 0,()=>{if(g)try{for(c--;l.length&&c<i;){let w=l.shift();o?ln(e,o,()=>f(w)):f(w)}h()}catch(w){e.error(w)}}))};return t.subscribe(ie(e,p,()=>{d=!0,h()})),()=>{a?.()}}function rt(t,e,n=1/0){return q(e)?rt((i,r)=>U((s,o)=>e(i,s,r,o))(ke(t(i,r))),n):(typeof e=="number"&&(n=e),ae((i,r)=>ux(i,r,t,n)))}function us(t=1/0){return rt(Yt,t)}function dx(){return us(1)}function ds(...t){return dx()(Le(t,ki(t)))}function hs(t){return new X(e=>{ke(t()).subscribe(e)})}function wn(...t){let e=Ef(t),{args:n,keys:i}=Rf(t),r=new X(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),l=o,c=o;for(let u=0;u<o;u++){let d=!1;ke(n[u]).subscribe(ie(s,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||s.next(i?Nf(i,a):a),s.complete())}))}});return e?r.pipe(ll(e)):r}var EU=["addListener","removeListener"],IU=["addEventListener","removeEventListener"],CU=["on","off"];function cl(t,e,n,i){if(q(n)&&(i=n,n=void 0),i)return cl(t,e,n).pipe(ll(i));let[r,s]=DU(t)?IU.map(o=>a=>t[o](e,a,n)):TU(t)?EU.map(hx(t,e)):SU(t)?CU.map(hx(t,e)):[];if(!r&&ol(t))return rt(o=>cl(o,e,n))(ke(t));if(!r)throw new TypeError("Invalid event target");return new X(o=>{let a=(...l)=>o.next(1<l.length?l:l[0]);return r(a),()=>s(a)})}function hx(t,e){return n=>i=>t[n](e,i)}function TU(t){return q(t.addListener)&&q(t.removeListener)}function SU(t){return q(t.on)&&q(t.off)}function DU(t){return q(t.addEventListener)&&q(t.removeEventListener)}function fx(t=0,e,n=jy){let i=-1;return e!=null&&(wf(e)?n=e:i=e),new X(r=>{let s=lx(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){r.closed||(r.next(o++),0<=i?this.schedule(void 0,i):r.complete())},s)})}function Eo(...t){let e=ki(t),n=QD(t,1/0),i=t;return i.length?i.length===1?ke(i[0]):us(n)(Le(i,e)):an}function Ue(t,e){return ae((n,i)=>{let r=0;n.subscribe(ie(i,s=>t.call(e,s,r++)&&i.next(s)))})}function px(t){return ae((e,n)=>{let i=!1,r=null,s=null,o=!1,a=()=>{if(s?.unsubscribe(),s=null,i){i=!1;let c=r;r=null,n.next(c)}o&&n.complete()},l=()=>{s=null,o&&n.complete()};e.subscribe(ie(n,c=>{i=!0,r=c,s||ke(t(c)).subscribe(s=ie(n,a,l))},()=>{o=!0,(!i||!s||s.closed)&&n.complete()}))})}function Pf(t,e=wr){return px(()=>fx(t,e))}function cn(t){return ae((e,n)=>{let i=null,r=!1,s;i=e.subscribe(ie(n,void 0,void 0,o=>{s=ke(t(o,cn(t)(e))),i?(i.unsubscribe(),i=null,s.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(n))})}function mx(t,e,n,i,r){return(s,o)=>{let a=n,l=e,c=0;s.subscribe(ie(o,u=>{let d=c++;l=a?t(l,u,d):(a=!0,u),i&&o.next(l)},r&&(()=>{a&&o.next(l),o.complete()})))}}function Ir(t,e){return q(e)?rt(t,e,1):rt(t,1)}function Of(t,e=wr){return ae((n,i)=>{let r=null,s=null,o=null,a=()=>{if(r){r.unsubscribe(),r=null;let c=s;s=null,i.next(c)}};function l(){let c=o+t,u=e.now();if(u<c){r=this.schedule(void 0,c-u),i.add(r);return}a()}n.subscribe(ie(i,c=>{s=c,o=e.now(),r||(r=e.schedule(l,t),i.add(r))},()=>{a(),i.complete()},void 0,()=>{s=r=null}))})}function fs(t){return ae((e,n)=>{let i=!1;e.subscribe(ie(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function qe(t){return t<=0?()=>an:ae((e,n)=>{let i=0;e.subscribe(ie(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function Hy(t){return U(()=>t)}function ul(t,e=Yt){return t=t??xU,ae((n,i)=>{let r,s=!0;n.subscribe(ie(i,o=>{let a=e(o);(s||!t(r,a))&&(s=!1,r=a,i.next(o))}))})}function xU(t,e){return t===e}function Ff(t=AU){return ae((e,n)=>{let i=!1;e.subscribe(ie(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function AU(){return new Er}function Ri(t){return ae((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Ni(t,e){let n=arguments.length>=2;return i=>i.pipe(t?Ue((r,s)=>t(r,s,i)):Yt,qe(1),n?fs(e):Ff(()=>new Er))}function dl(t){return t<=0?()=>an:ae((e,n)=>{let i=[];e.subscribe(ie(n,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(let r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function Wy(t,e){let n=arguments.length>=2;return i=>i.pipe(t?Ue((r,s)=>t(r,s,i)):Yt,dl(1),n?fs(e):Ff(()=>new Er))}function qy(t,e){return ae(mx(t,e,arguments.length>=2,!0))}function hl(t={}){let{connector:e=()=>new Z,resetOnError:n=!0,resetOnComplete:i=!0,resetOnRefCountZero:r=!0}=t;return s=>{let o,a,l,c=0,u=!1,d=!1,h=()=>{a?.unsubscribe(),a=void 0},p=()=>{h(),o=l=void 0,u=d=!1},f=()=>{let m=o;p(),m?.unsubscribe()};return ae((m,g)=>{c++,!d&&!u&&h();let w=l=l??e();g.add(()=>{c--,c===0&&!d&&!u&&(a=Gy(f,r))}),w.subscribe(g),!o&&c>0&&(o=new br({next:O=>w.next(O),error:O=>{d=!0,h(),a=Gy(p,n,O),w.error(O)},complete:()=>{u=!0,h(),a=Gy(p,i),w.complete()}}),ke(m).subscribe(o))})(s)}}function Gy(t,e,...n){if(e===!0){t();return}if(e===!1)return;let i=new br({next:()=>{i.unsubscribe(),t()}});return ke(e(...n)).subscribe(i)}function iu(t){return Ue((e,n)=>t<=n)}function Pi(...t){let e=ki(t);return ae((n,i)=>{(e?ds(t,n,e):ds(t,n)).subscribe(i)})}function St(t,e){return ae((n,i)=>{let r=null,s=0,o=!1,a=()=>o&&!r&&i.complete();n.subscribe(ie(i,l=>{r?.unsubscribe();let c=0,u=s++;ke(t(l,u)).subscribe(r=ie(i,d=>i.next(e?e(l,d,u,c++):d),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function jn(t){return ae((e,n)=>{ke(t).subscribe(ie(n,()=>n.complete(),tu)),!n.closed&&e.subscribe(n)})}function xe(t,e,n){let i=q(t)||e||n?{next:t,error:e,complete:n}:t;return i?ae((r,s)=>{var o;(o=i.subscribe)===null||o===void 0||o.call(i);let a=!0;r.subscribe(ie(s,l=>{var c;(c=i.next)===null||c===void 0||c.call(i,l),s.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),s.complete()},l=>{var c;a=!1,(c=i.error)===null||c===void 0||c.call(i,l),s.error(l)},()=>{var l,c;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(c=i.finalize)===null||c===void 0||c.call(i)}))}):Yt}function Ve(t){for(let e in t)if(t[e]===Ve)return e;throw Error("Could not find renamed property on target object.")}function Lf(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Ft(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Ft).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function cv(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var MU=Ve({__forward_ref__:Ve});function $n(t){return t.__forward_ref__=$n,t.toString=function(){return Ft(this())},t}function Qt(t){return nA(t)?t():t}function nA(t){return typeof t=="function"&&t.hasOwnProperty(MU)&&t.__forward_ref__===$n}function iA(t){return t&&!!t.\u0275providers}var rA="https://g.co/ng/security#xss",x=class extends Error{constructor(e,n){super(gp(e,n)),this.code=e}};function gp(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var kU=Ve({\u0275cmp:Ve}),RU=Ve({\u0275dir:Ve}),NU=Ve({\u0275pipe:Ve}),PU=Ve({\u0275mod:Ve}),Qf=Ve({\u0275fac:Ve}),ru=Ve({__NG_ELEMENT_ID__:Ve}),gx=Ve({__NG_ENV_ID__:Ve});function hu(t){return typeof t=="string"?t:t==null?"":String(t)}function OU(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():hu(t)}function FU(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new x(-200,`Circular dependency in DI detected for ${t}${n}`)}function db(t,e){let n=e?` in ${e}`:"";throw new x(-201,!1)}function LU(t,e){t==null&&VU(e,t,null,"!=")}function VU(t,e,n,i){throw new Error(`ASSERTION ERROR: ${t}`+(i==null?"":` [Expected=> ${n} ${i} ${e} <=Actual]`))}function T(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function $(t){return{providers:t.providers||[],imports:t.imports||[]}}function _p(t){return _x(t,oA)||_x(t,aA)}function sA(t){return _p(t)!==null}function _x(t,e){return t.hasOwnProperty(e)?t[e]:null}function BU(t){let e=t&&(t[oA]||t[aA]);return e||null}function yx(t){return t&&(t.hasOwnProperty(vx)||t.hasOwnProperty(jU))?t[vx]:null}var oA=Ve({\u0275prov:Ve}),vx=Ve({\u0275inj:Ve}),aA=Ve({ngInjectableDef:Ve}),jU=Ve({ngInjectorDef:Ve}),me=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(me||{}),uv;function lA(){return uv}function un(t){let e=uv;return uv=t,e}function cA(t,e,n){let i=_p(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&me.Optional)return null;if(e!==void 0)return e;db(Ft(t),"Injector")}var Lt=globalThis;var M=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=T({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var UU={},su=UU,dv="__NG_DI_FLAG__",Jf="ngTempTokenPath",zU="ngTokenPath",$U=/\n/gm,HU="\u0275",bx="__source",_l;function WU(){return _l}function ps(t){let e=_l;return _l=t,e}function qU(t,e=me.Default){if(_l===void 0)throw new x(-203,!1);return _l===null?cA(t,void 0,e):_l.get(t,e&me.Optional?null:void 0,e)}function _(t,e=me.Default){return(lA()||qU)(Qt(t),e)}function D(t,e=me.Default){return _(t,yp(e))}function yp(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function hv(t){let e=[];for(let n=0;n<t.length;n++){let i=Qt(t[n]);if(Array.isArray(i)){if(i.length===0)throw new x(900,!1);let r,s=me.Default;for(let o=0;o<i.length;o++){let a=i[o],l=GU(a);typeof l=="number"?l===-1?r=a.token:s|=l:r=a}e.push(_(r,s))}else e.push(_(i))}return e}function uA(t,e){return t[dv]=e,t.prototype[dv]=e,t}function GU(t){return t[dv]}function KU(t,e,n,i){let r=t[Jf];throw e[bx]&&r.unshift(e[bx]),t.message=YU(`
`+t.message,r,n,i),t[zU]=r,t[Jf]=null,t}function YU(t,e,n,i=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==HU?t.slice(2):t;let r=Ft(e);if(Array.isArray(e))r=e.map(Ft).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Ft(a)))}r=`{${s.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace($U,`
  `)}`}function fu(t){return{toString:t}.toString()}var dA=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(dA||{}),Vi=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Vi||{}),vl={},dn=[];function hA(t,e,n){let i=t.length;for(;;){let r=t.indexOf(e,n);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let s=e.length;if(r+s===i||t.charCodeAt(r+s)<=32)return r}n=r+1}}function fv(t,e,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let s=n[i++],o=n[i++],a=n[i++];t.setAttribute(e,o,a,s)}else{let s=r,o=n[++i];QU(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),i++}}return i}function fA(t){return t===3||t===4||t===6}function QU(t){return t.charCodeAt(0)===64}function ou(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?wx(t,n,r,null,e[++i]):wx(t,n,r,null,null))}}return t}function wx(t,e,n,i,r){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(i===null){r!==null&&(t[s+1]=r);return}else if(i===t[s+1]){t[s+2]=r;return}}s++,i!==null&&s++,r!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),i!==null&&t.splice(s++,0,i),r!==null&&t.splice(s++,0,r)}var pA="ng-template";function JU(t,e,n){let i=0,r=!0;for(;i<t.length;){let s=t[i++];if(typeof s=="string"&&r){let o=t[i++];if(n&&s==="class"&&hA(o.toLowerCase(),e,0)!==-1)return!0}else if(s===1){for(;i<t.length&&typeof(s=t[i++])=="string";)if(s.toLowerCase()===e)return!0;return!1}else typeof s=="number"&&(r=!1)}return!1}function mA(t){return t.type===4&&t.value!==pA}function XU(t,e,n){let i=t.type===4&&!n?pA:t.value;return e===i}function ZU(t,e,n){let i=4,r=t.attrs||[],s=nz(r),o=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!o&&!si(i)&&!si(l))return!1;if(o&&si(l))continue;o=!1,i=l|i&1;continue}if(!o)if(i&4){if(i=2|i&1,l!==""&&!XU(t,l,n)||l===""&&e.length===1){if(si(i))return!1;o=!0}}else{let c=i&8?l:e[++a];if(i&8&&t.attrs!==null){if(!JU(t.attrs,c,n)){if(si(i))return!1;o=!0}continue}let u=i&8?"class":l,d=ez(u,r,mA(t),n);if(d===-1){if(si(i))return!1;o=!0;continue}if(c!==""){let h;d>s?h="":h=r[d+1].toLowerCase();let p=i&8?h:null;if(p&&hA(p,c,0)!==-1||i&2&&c!==h){if(si(i))return!1;o=!0}}}}return si(i)||o}function si(t){return(t&1)===0}function ez(t,e,n,i){if(e===null)return-1;let r=0;if(i||!n){let s=!1;for(;r<e.length;){let o=e[r];if(o===t)return r;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(o===4)break;if(o===0){r+=4;continue}}r+=s?1:2}return-1}else return iz(e,t)}function gA(t,e,n=!1){for(let i=0;i<e.length;i++)if(ZU(t,e[i],n))return!0;return!1}function tz(t){let e=t.attrs;if(e!=null){let n=e.indexOf(5);if(!(n&1))return e[n+1]}return null}function nz(t){for(let e=0;e<t.length;e++){let n=t[e];if(fA(n))return e}return t.length}function iz(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let i=t[n];if(typeof i=="number")return-1;if(i===e)return n;n++}return-1}function rz(t,e){e:for(let n=0;n<e.length;n++){let i=e[n];if(t.length===i.length){for(let r=0;r<t.length;r++)if(t[r]!==i[r])continue e;return!0}}return!1}function Ex(t,e){return t?":not("+e.trim()+")":e}function sz(t){let e=t[0],n=1,i=2,r="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(i&2){let a=t[++n];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+o:i&4&&(r+=" "+o);else r!==""&&!si(o)&&(e+=Ex(s,r),r=""),i=o,s=s||!si(i);n++}return r!==""&&(e+=Ex(s,r)),e}function oz(t){return t.map(sz).join(",")}function az(t){let e=[],n=[],i=1,r=2;for(;i<t.length;){let s=t[i];if(typeof s=="string")r===2?s!==""&&e.push(s,t[++i]):r===8&&n.push(s);else{if(!si(r))break;r=s}i++}return{attrs:e,classes:n}}function le(t){return fu(()=>{let e=wA(t),n=oe(C({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===dA.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Vi.Emulated,styles:t.styles||dn,_:null,schemas:t.schemas||null,tView:null,id:""});EA(n);let i=t.dependencies;return n.directiveDefs=Cx(i,!1),n.pipeDefs=Cx(i,!0),n.id=uz(n),n})}function lz(t){return Cr(t)||_A(t)}function cz(t){return t!==null}function H(t){return fu(()=>({type:t.type,bootstrap:t.bootstrap||dn,declarations:t.declarations||dn,imports:t.imports||dn,exports:t.exports||dn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Ix(t,e){if(t==null)return vl;let n={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),n[r]=i,e&&(e[r]=s)}return n}function ve(t){return fu(()=>{let e=wA(t);return EA(e),e})}function pu(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function Cr(t){return t[kU]||null}function _A(t){return t[RU]||null}function yA(t){return t[NU]||null}function vA(t){let e=Cr(t)||_A(t)||yA(t);return e!==null?e.standalone:!1}function bA(t,e){let n=t[PU]||null;if(!n&&e===!0)throw new Error(`Type ${Ft(t)} does not have '\u0275mod' property.`);return n}function wA(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||vl,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||dn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Ix(t.inputs,e),outputs:Ix(t.outputs),debugInfo:null}}function EA(t){t.features?.forEach(e=>e(t))}function Cx(t,e){if(!t)return null;let n=e?yA:lz;return()=>(typeof t=="function"?t():t).map(i=>n(i)).filter(cz)}function uz(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483647+1,"c"+e}var Dr=0,de=1,te=2,ut=3,ai=4,Cn=5,Xf=6,au=7,Un=8,bl=9,wl=10,Je=11,lu=12,Tx=13,Dl=14,li=15,mu=16,fl=17,Li=18,vp=19,IA=20,ms=21,Ky=22,Co=23,In=25,CA=1;var To=7,Zf=8,El=9,En=10,Il=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t[t.HasChildViewsToRefresh=4]="HasChildViewsToRefresh",t}(Il||{});function gs(t){return Array.isArray(t)&&typeof t[CA]=="object"}function ci(t){return Array.isArray(t)&&t[CA]===!0}function hb(t){return(t.flags&4)!==0}function bp(t){return t.componentOffset>-1}function wp(t){return(t.flags&1)===1}function _s(t){return!!t.template}function dz(t){return(t[te]&512)!==0}function So(t,e){let n=t.hasOwnProperty(Qf);return n?t[Qf]:null}var pv=class{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function Dt(){return TA}function TA(t){return t.type.prototype.ngOnChanges&&(t.setInput=fz),hz}Dt.ngInherit=!0;function hz(){let t=DA(this),e=t?.current;if(e){let n=t.previous;if(n===vl)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function fz(t,e,n,i){let r=this.declaredInputs[n],s=DA(t)||pz(t,{previous:vl,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[r];o[r]=new pv(l&&l.currentValue,e,a===vl),t[i]=e}var SA="__ngSimpleChanges__";function DA(t){return t[SA]||null}function pz(t,e){return t[SA]=e}var Sx=null;var Oi=function(t,e,n){Sx?.(t,e,n)},mz="svg",gz="math";function Bi(t){for(;Array.isArray(t);)t=t[Dr];return t}function xA(t,e){return Bi(e[t])}function Hn(t,e){return Bi(e[t.index])}function AA(t,e){return t.data[e]}function MA(t,e){return t[e]}function bs(t,e){let n=e[t];return gs(n)?n:n[Dr]}function _z(t){return(t[te]&4)===4}function fb(t){return(t[te]&128)===128}function yz(t){return ci(t[ut])}function Cl(t,e){return e==null?null:t[e]}function kA(t){t[fl]=0}function vz(t){t[te]&1024||(t[te]|=1024,fb(t)&&Ep(t))}function bz(t,e){for(;t>0;)e=e[Dl],t--;return e}function RA(t){return t[te]&9216||t[Co]?.dirty}function NA(t){RA(t)&&Ep(t)}function Ep(t){let e=t[ut];for(;e!==null&&!(ci(e)&&e[te]&Il.HasChildViewsToRefresh||gs(e)&&e[te]&8192);){if(ci(e))e[te]|=Il.HasChildViewsToRefresh;else if(e[te]|=8192,!fb(e))break;e=e[ut]}}function PA(t,e){if((t[te]&256)===256)throw new x(911,!1);t[ms]===null&&(t[ms]=[]),t[ms].push(e)}function wz(t,e){if(t[ms]===null)return;let n=t[ms].indexOf(e);n!==-1&&t[ms].splice(n,1)}var fe={lFrame:zA(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function Ez(){return fe.lFrame.elementDepthCount}function Iz(){fe.lFrame.elementDepthCount++}function Cz(){fe.lFrame.elementDepthCount--}function OA(){return fe.bindingsEnabled}function FA(){return fe.skipHydrationRootTNode!==null}function Tz(t){return fe.skipHydrationRootTNode===t}function Sz(){fe.skipHydrationRootTNode=null}function _e(){return fe.lFrame.lView}function dt(){return fe.lFrame.tView}function Ge(t){return fe.lFrame.contextLView=t,t[Un]}function Ke(t){return fe.lFrame.contextLView=null,t}function fn(){let t=LA();for(;t!==null&&t.type===64;)t=t.parent;return t}function LA(){return fe.lFrame.currentTNode}function Dz(){let t=fe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Po(t,e){let n=fe.lFrame;n.currentTNode=t,n.isParent=e}function pb(){return fe.lFrame.isParent}function mb(){fe.lFrame.isParent=!1}function xz(){return fe.lFrame.contextLView}function Ip(){let t=fe.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Az(t){return fe.lFrame.bindingIndex=t}function Cp(){return fe.lFrame.bindingIndex++}function VA(t){let e=fe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Mz(){return fe.lFrame.inI18n}function kz(t,e){let n=fe.lFrame;n.bindingIndex=n.bindingRootIndex=t,mv(e)}function Rz(){return fe.lFrame.currentDirectiveIndex}function mv(t){fe.lFrame.currentDirectiveIndex=t}function Nz(t){let e=fe.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function BA(){return fe.lFrame.currentQueryIndex}function gb(t){fe.lFrame.currentQueryIndex=t}function Pz(t){let e=t[de];return e.type===2?e.declTNode:e.type===1?t[Cn]:null}function jA(t,e,n){if(n&me.SkipSelf){let r=e,s=t;for(;r=r.parent,r===null&&!(n&me.Host);)if(r=Pz(s),r===null||(s=s[Dl],r.type&10))break;if(r===null)return!1;e=r,t=s}let i=fe.lFrame=UA();return i.currentTNode=e,i.lView=t,!0}function _b(t){let e=UA(),n=t[de];fe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function UA(){let t=fe.lFrame,e=t===null?null:t.child;return e===null?zA(t):e}function zA(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function $A(){let t=fe.lFrame;return fe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var HA=$A;function yb(){let t=$A();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Oz(t){return(fe.lFrame.contextLView=bz(t,fe.lFrame.contextLView))[Un]}function Oo(){return fe.lFrame.selectedIndex}function Do(t){fe.lFrame.selectedIndex=t}function Tp(){let t=fe.lFrame;return AA(t.tView,t.selectedIndex)}function Fz(){return fe.lFrame.currentNamespace}var WA=!0;function Sp(){return WA}function Dp(t){WA=t}function Lz(t,e,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){let o=TA(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}r&&(n.preOrderHooks??=[]).push(0-t,r),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function xp(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function Hf(t,e,n){qA(t,e,3,n)}function Wf(t,e,n,i){(t[te]&3)===n&&qA(t,e,n,i)}function Yy(t,e){let n=t[te];(n&3)===e&&(n&=16383,n+=1,t[te]=n)}function qA(t,e,n,i){let r=i!==void 0?t[fl]&65535:0,s=i??-1,o=e.length-1,a=0;for(let l=r;l<o;l++)if(typeof e[l+1]=="number"){if(a=e[l],i!=null&&a>=i)break}else e[l]<0&&(t[fl]+=65536),(a<s||s==-1)&&(Vz(t,n,e,l),t[fl]=(t[fl]&4294901760)+l+2),l++}function Dx(t,e){Oi(4,t,e);let n=Kt(null);try{e.call(t)}finally{Kt(n),Oi(5,t,e)}}function Vz(t,e,n,i){let r=n[i]<0,s=n[i+1],o=r?-n[i]:n[i],a=t[o];r?t[te]>>14<t[fl]>>16&&(t[te]&3)===e&&(t[te]+=16384,Dx(a,s)):Dx(a,s)}var yl=-1,xo=class{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}};function Bz(t){return t instanceof xo}function jz(t){return(t.flags&8)!==0}function Uz(t){return(t.flags&16)!==0}function GA(t){return t!==yl}function ep(t){let e=t&32767;return t&32767}function zz(t){return t>>16}function tp(t,e){let n=zz(t),i=e;for(;n>0;)i=i[Dl],n--;return i}var gv=!0;function np(t){let e=gv;return gv=t,e}var $z=256,KA=$z-1,YA=5,Hz=0,Fi={};function Wz(t,e,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(ru)&&(i=n[ru]),i==null&&(i=n[ru]=Hz++);let r=i&KA,s=1<<r;e.data[t+(r>>YA)]|=s}function ip(t,e){let n=QA(t,e);if(n!==-1)return n;let i=e[de];i.firstCreatePass&&(t.injectorIndex=e.length,Qy(i.data,t),Qy(e,null),Qy(i.blueprint,null));let r=vb(t,e),s=t.injectorIndex;if(GA(r)){let o=ep(r),a=tp(r,e),l=a[de].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=r,s}function Qy(t,e){t.push(0,0,0,0,0,0,0,0,e)}function QA(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function vb(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;r!==null;){if(i=tM(r),i===null)return yl;if(n++,r=r[Dl],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return yl}function _v(t,e,n){Wz(t,e,n)}function qz(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let i=n.length,r=0;for(;r<i;){let s=n[r];if(fA(s))break;if(s===0)r=r+2;else if(typeof s=="number")for(r++;r<i&&typeof n[r]=="string";)r++;else{if(s===e)return n[r+1];r=r+2}}}return null}function JA(t,e,n){if(n&me.Optional||t!==void 0)return t;db(e,"NodeInjector")}function XA(t,e,n,i){if(n&me.Optional&&i===void 0&&(i=null),!(n&(me.Self|me.Host))){let r=t[bl],s=un(void 0);try{return r?r.get(e,i,n&me.Optional):cA(e,i,n&me.Optional)}finally{un(s)}}return JA(i,e,n)}function ZA(t,e,n,i=me.Default,r){if(t!==null){if(e[te]&2048&&!(i&me.Self)){let o=Qz(t,e,n,i,Fi);if(o!==Fi)return o}let s=eM(t,e,n,i,Fi);if(s!==Fi)return s}return XA(e,n,i,r)}function eM(t,e,n,i,r){let s=Kz(n);if(typeof s=="function"){if(!jA(e,t,i))return i&me.Host?JA(r,n,i):XA(e,n,i,r);try{let o;if(o=s(i),o==null&&!(i&me.Optional))db(n);else return o}finally{HA()}}else if(typeof s=="number"){let o=null,a=QA(t,e),l=yl,c=i&me.Host?e[li][Cn]:null;for((a===-1||i&me.SkipSelf)&&(l=a===-1?vb(t,e):e[a+8],l===yl||!Ax(i,!1)?a=-1:(o=e[de],a=ep(l),e=tp(l,e)));a!==-1;){let u=e[de];if(xx(s,a,u.data)){let d=Gz(a,e,n,o,i,c);if(d!==Fi)return d}l=e[a+8],l!==yl&&Ax(i,e[de].data[a+8]===c)&&xx(s,a,e)?(o=u,a=ep(l),e=tp(l,e)):a=-1}}return r}function Gz(t,e,n,i,r,s){let o=e[de],a=o.data[t+8],l=i==null?bp(a)&&gv:i!=o&&(a.type&3)!==0,c=r&me.Host&&s===a,u=qf(a,o,n,l,c);return u!==null?Ao(e,o,u,a):Fi}function qf(t,e,n,i,r){let s=t.providerIndexes,o=e.data,a=s&1048575,l=t.directiveStart,c=t.directiveEnd,u=s>>20,d=i?a:a+u,h=r?a+u:c;for(let p=d;p<h;p++){let f=o[p];if(p<l&&n===f||p>=l&&f.type===n)return p}if(r){let p=o[l];if(p&&_s(p)&&p.type===n)return l}return null}function Ao(t,e,n,i){let r=t[n],s=e.data;if(Bz(r)){let o=r;o.resolving&&FU(OU(s[n]));let a=np(o.canSeeViewProviders);o.resolving=!0;let l,c=o.injectImpl?un(o.injectImpl):null,u=jA(t,i,me.Default);try{r=t[n]=o.factory(void 0,s,t,i),e.firstCreatePass&&n>=i.directiveStart&&Lz(n,s[n],e)}finally{c!==null&&un(c),np(a),o.resolving=!1,HA()}}return r}function Kz(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(ru)?t[ru]:void 0;return typeof e=="number"?e>=0?e&KA:Yz:e}function xx(t,e,n){let i=1<<t;return!!(n[e+(t>>YA)]&i)}function Ax(t,e){return!(t&me.Self)&&!(t&me.Host&&e)}var Io=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return ZA(this._tNode,this._lView,e,yp(i),n)}};function Yz(){return new Io(fn(),_e())}function ws(t){return fu(()=>{let e=t.prototype.constructor,n=e[Qf]||yv(e),i=Object.prototype,r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){let s=r[Qf]||yv(r);if(s&&s!==n)return s;r=Object.getPrototypeOf(r)}return s=>new s})}function yv(t){return nA(t)?()=>{let e=yv(Qt(t));return e&&e()}:So(t)}function Qz(t,e,n,i,r){let s=t,o=e;for(;s!==null&&o!==null&&o[te]&2048&&!(o[te]&512);){let a=eM(s,o,n,i|me.Self,Fi);if(a!==Fi)return a;let l=s.parent;if(!l){let c=o[IA];if(c){let u=c.get(n,Fi,i);if(u!==Fi)return u}l=tM(o),o=o[Dl]}s=l}return r}function tM(t){let e=t[de],n=e.type;return n===2?e.declTNode:n===1?t[Cn]:null}function gu(t){return qz(fn(),t)}var Vf="__parameters__";function Jz(t){return function(...n){if(t){let i=t(...n);for(let r in i)this[r]=i[r]}}}function nM(t,e,n){return fu(()=>{let i=Jz(e);function r(...s){if(this instanceof r)return i.apply(this,s),this;let o=new r(...s);return a.annotation=o,a;function a(l,c,u){let d=l.hasOwnProperty(Vf)?l[Vf]:Object.defineProperty(l,Vf,{value:[]})[Vf];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(o),l}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}function Xz(t){return typeof t=="function"}function Zz(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],s=e[i];if(n&&(r=n(r),s=n(s)),s!==r)return!1}return!0}function e$(t){return t.flat(Number.POSITIVE_INFINITY)}function bb(t,e){t.forEach(n=>Array.isArray(n)?bb(n,e):e(n))}function iM(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function rp(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function rM(t,e){let n=[];for(let i=0;i<t;i++)n.push(e);return n}function t$(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(r===1)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;){let s=r-2;t[r]=t[s],r--}t[e]=n,t[e+1]=i}}function wb(t,e,n){let i=_u(t,e);return i>=0?t[i|1]=n:(i=~i,t$(t,i,e,n)),i}function Jy(t,e){let n=_u(t,e);if(n>=0)return t[n|1]}function _u(t,e){return n$(t,e,1)}function n$(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){let s=i+(r-i>>1),o=t[s<<n];if(e===o)return s<<n;o>e?r=s:i=s+1}return~(r<<n)}var Xe=uA(nM("Optional"),8);var yu=uA(nM("SkipSelf"),4);var vu=new M("ENVIRONMENT_INITIALIZER"),sM=new M("INJECTOR",-1),oM=new M("INJECTOR_DEF_TYPES"),sp=class{get(e,n=su){if(n===su){let i=new Error(`NullInjectorError: No provider for ${Ft(e)}!`);throw i.name="NullInjectorError",i}return n}};function xl(t){return{\u0275providers:t}}function Ap(...t){return{\u0275providers:aM(!0,t),\u0275fromNgModule:!0}}function aM(t,...e){let n=[],i=new Set,r,s=o=>{n.push(o)};return bb(e,o=>{let a=o;vv(a,s,[],i)&&(r||=[],r.push(a))}),r!==void 0&&lM(r,s),n}function lM(t,e){for(let n=0;n<t.length;n++){let{ngModule:i,providers:r}=t[n];Eb(r,s=>{e(s,i)})}}function vv(t,e,n,i){if(t=Qt(t),!t)return!1;let r=null,s=yx(t),o=!s&&Cr(t);if(!s&&!o){let l=t.ngModule;if(s=yx(l),s)r=l;else return!1}else{if(o&&!o.standalone)return!1;r=t}let a=i.has(r);if(o){if(a)return!1;if(i.add(r),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let c of l)vv(c,e,n,i)}}else if(s){if(s.imports!=null&&!a){i.add(r);let c;try{bb(s.imports,u=>{vv(u,e,n,i)&&(c||=[],c.push(u))})}finally{}c!==void 0&&lM(c,e)}if(!a){let c=So(r)||(()=>new r);e({provide:r,useFactory:c,deps:dn},r),e({provide:oM,useValue:r,multi:!0},r),e({provide:vu,useValue:()=>_(r),multi:!0},r)}let l=s.providers;if(l!=null&&!a){let c=t;Eb(l,u=>{e(u,c)})}}else return!1;return r!==t&&t.providers!==void 0}function Eb(t,e){for(let n of t)iA(n)&&(n=n.\u0275providers),Array.isArray(n)?Eb(n,e):e(n)}var i$=Ve({provide:String,useValue:Ve});function cM(t){return t!==null&&typeof t=="object"&&i$ in t}function r$(t){return!!(t&&t.useExisting)}function s$(t){return!!(t&&t.useFactory)}function Tl(t){return typeof t=="function"}function o$(t){return!!t.useClass}var Mp=new M("Set Injector scope."),Gf={},a$={},Xy;function kp(){return Xy===void 0&&(Xy=new sp),Xy}var Jt=class{},cu=class extends Jt{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,wv(e,o=>this.processProvider(o)),this.records.set(sM,pl(void 0,this)),r.has("environment")&&this.records.set(Jt,pl(void 0,this));let s=this.records.get(Mp);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(oM,dn,me.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=ps(this),i=un(void 0),r;try{return e()}finally{ps(n),un(i)}}get(e,n=su,i=me.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(gx))return e[gx](this);i=yp(i);let r,s=ps(this),o=un(void 0);try{if(!(i&me.SkipSelf)){let l=this.records.get(e);if(l===void 0){let c=h$(e)&&_p(e);c&&this.injectableDefInScope(c)?l=pl(bv(e),Gf):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=i&me.Self?kp():this.parent;return n=i&me.Optional&&n===su?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Jf]=a[Jf]||[]).unshift(Ft(e)),s)throw a;return KU(a,e,"R3InjectorError",this.source)}else throw a}finally{un(o),ps(s)}}resolveInjectorInitializers(){let e=ps(this),n=un(void 0),i;try{let r=this.get(vu,dn,me.Self);for(let s of r)s()}finally{ps(e),un(n)}}toString(){let e=[],n=this.records;for(let i of n.keys())e.push(Ft(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new x(205,!1)}processProvider(e){e=Qt(e);let n=Tl(e)?e:Qt(e&&e.provide),i=c$(e);if(!Tl(e)&&e.multi===!0){let r=this.records.get(n);r||(r=pl(void 0,Gf,!0),r.factory=()=>hv(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}else{let r=this.records.get(n)}this.records.set(n,i)}hydrate(e,n){return n.value===Gf&&(n.value=a$,n.value=n.factory()),typeof n.value=="object"&&n.value&&d$(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Qt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function bv(t){let e=_p(t),n=e!==null?e.factory:So(t);if(n!==null)return n;if(t instanceof M)throw new x(204,!1);if(t instanceof Function)return l$(t);throw new x(204,!1)}function l$(t){let e=t.length;if(e>0){let i=rM(e,"?");throw new x(204,!1)}let n=BU(t);return n!==null?()=>n.factory(t):()=>new t}function c$(t){if(cM(t))return pl(void 0,t.useValue);{let e=uM(t);return pl(e,Gf)}}function uM(t,e,n){let i;if(Tl(t)){let r=Qt(t);return So(r)||bv(r)}else if(cM(t))i=()=>Qt(t.useValue);else if(s$(t))i=()=>t.useFactory(...hv(t.deps||[]));else if(r$(t))i=()=>_(Qt(t.useExisting));else{let r=Qt(t&&(t.useClass||t.provide));if(u$(t))i=()=>new r(...hv(t.deps));else return So(r)||bv(r)}return i}function pl(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function u$(t){return!!t.deps}function d$(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function h$(t){return typeof t=="function"||typeof t=="object"&&t instanceof M}function wv(t,e){for(let n of t)Array.isArray(n)?wv(n,e):n&&iA(n)?wv(n.\u0275providers,e):e(n)}function zi(t,e){t instanceof cu&&t.assertNotDestroyed();let n,i=ps(t),r=un(void 0);try{return e()}finally{ps(i),un(r)}}function f$(t){if(!lA()&&!WU())throw new x(-203,!1)}function Mx(t,e=null,n=null,i){let r=dM(t,e,n,i);return r.resolveInjectorInitializers(),r}function dM(t,e=null,n=null,i,r=new Set){let s=[n||dn,Ap(t)];return i=i||(typeof t=="object"?void 0:Ft(t)),new cu(s,e||kp(),i||null,r)}var Se=(()=>{let e=class e{static create(i,r){if(Array.isArray(i))return Mx({name:""},r,i,"");{let s=i.name??"";return Mx({name:s},i.parent,i.providers,s)}}};e.THROW_IF_NOT_FOUND=su,e.NULL=new sp,e.\u0275prov=T({token:e,providedIn:"any",factory:()=>_(sM)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var Ev;function hM(t){Ev=t}function fM(){if(Ev!==void 0)return Ev;if(typeof document<"u")return document;throw new x(210,!1)}var bu=new M("AppId",{providedIn:"root",factory:()=>p$}),p$="ng",Ib=new M("Platform Initializer"),Tn=new M("Platform ID",{providedIn:"platform",factory:()=>"unknown"});var Vt=new M("AnimationModuleType"),wu=new M("CSP nonce",{providedIn:"root",factory:()=>fM().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function Eu(t){return t.ownerDocument}function pM(t){return t instanceof Function?t():t}function m$(t){return(t??D(Se)).get(Tn)==="browser"}function mM(t){return(t.flags&128)===128}var ji=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(ji||{}),g$=/^>|^->|<!--|-->|--!>|<!-$/g,_$=/(<|>)/g,y$="\u200B$1\u200B";function v$(t){return t.replace(g$,e=>e.replace(_$,y$))}var gM=new Map,b$=0;function w$(){return b$++}function E$(t){gM.set(t[vp],t)}function I$(t){gM.delete(t[vp])}var kx="__ngContext__";function ys(t,e){gs(e)?(t[kx]=e[vp],E$(e)):t[kx]=e}var C$;function Cb(t,e){return C$(t,e)}function Tb(t){let e=t[ut];return ci(e)?e[ut]:e}function _M(t){return vM(t[lu])}function yM(t){return vM(t[ai])}function vM(t){for(;t!==null&&!ci(t);)t=t[ai];return t}function ml(t,e,n,i,r){if(i!=null){let s,o=!1;ci(i)?s=i:gs(i)&&(o=!0,i=i[Dr]);let a=Bi(i);t===0&&n!==null?r==null?CM(e,n,a):op(e,n,a,r||null,!0):t===1&&n!==null?op(e,n,a,r||null,!0):t===2?U$(e,a,o):t===3&&e.destroyNode(a),s!=null&&$$(e,t,s,n,r)}}function T$(t,e){return t.createText(e)}function S$(t,e,n){t.setValue(e,n)}function D$(t,e){return t.createComment(v$(e))}function bM(t,e,n){return t.createElement(e,n)}function x$(t,e){let n=e[Je];Iu(t,e,n,2,null,null),e[Dr]=null,e[Cn]=null}function A$(t,e,n,i,r,s){i[Dr]=r,i[Cn]=e,Iu(t,i,n,1,r,s)}function M$(t,e){Iu(t,e,e[Je],2,null,null)}function k$(t){let e=t[lu];if(!e)return Zy(t[de],t);for(;e;){let n=null;if(gs(e))n=e[lu];else{let i=e[En];i&&(n=i)}if(!n){for(;e&&!e[ai]&&e!==t;)gs(e)&&Zy(e[de],e),e=e[ut];e===null&&(e=t),gs(e)&&Zy(e[de],e),n=e&&e[ai]}e=n}}function R$(t,e,n,i){let r=En+i,s=n.length;i>0&&(n[r-1][ai]=e),i<s-En?(e[ai]=n[r],iM(n,En+i,e)):(n.push(e),e[ai]=null),e[ut]=n;let o=e[mu];o!==null&&n!==o&&N$(o,e);let a=e[Li];a!==null&&a.insertView(t),NA(e),e[te]|=128}function N$(t,e){let n=t[El],r=e[ut][ut][li];e[li]!==r&&(t[te]|=Il.HasTransplantedViews),n===null?t[El]=[e]:n.push(e)}function wM(t,e){let n=t[El],i=n.indexOf(e),r=e[ut];n.splice(i,1)}function Iv(t,e){if(t.length<=En)return;let n=En+e,i=t[n];if(i){let r=i[mu];r!==null&&r!==t&&wM(r,i),e>0&&(t[n-1][ai]=i[ai]);let s=rp(t,En+e);x$(i[de],i);let o=s[Li];o!==null&&o.detachView(s[de]),i[ut]=null,i[ai]=null,i[te]&=-129}return i}function EM(t,e){if(!(e[te]&256)){let n=e[Je];e[Co]&&UD(e[Co]),n.destroyNode&&Iu(t,e,n,3,null,null),k$(e)}}function Zy(t,e){if(!(e[te]&256)){e[te]&=-129,e[te]|=256,O$(t,e),P$(t,e),e[de].type===1&&e[Je].destroy();let n=e[mu];if(n!==null&&ci(e[ut])){n!==e[ut]&&wM(n,e);let i=e[Li];i!==null&&i.detachView(t)}I$(e)}}function P$(t,e){let n=t.cleanup,i=e[au];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?i[o]():i[-o].unsubscribe(),s+=2}else{let o=i[n[s+1]];n[s].call(o)}i!==null&&(e[au]=null);let r=e[ms];if(r!==null){e[ms]=null;for(let s=0;s<r.length;s++){let o=r[s];o()}}}function O$(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=e[n[i]];if(!(r instanceof xo)){let s=n[i+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=r[s[o]],l=s[o+1];Oi(4,a,l);try{l.call(a)}finally{Oi(5,a,l)}}else{Oi(4,r,s);try{s.call(r)}finally{Oi(5,r,s)}}}}}function IM(t,e,n){return F$(t,e.parent,n)}function F$(t,e,n){let i=e;for(;i!==null&&i.type&40;)e=i,i=e.parent;if(i===null)return n[Dr];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:s}=t.data[i.directiveStart+r];if(s===Vi.None||s===Vi.Emulated)return null}return Hn(i,n)}}function op(t,e,n,i,r){t.insertBefore(e,n,i,r)}function CM(t,e,n){t.appendChild(e,n)}function Rx(t,e,n,i,r){i!==null?op(t,e,n,i,r):CM(t,e,n)}function L$(t,e,n,i){t.removeChild(e,n,i)}function Sb(t,e){return t.parentNode(e)}function V$(t,e){return t.nextSibling(e)}function TM(t,e,n){return j$(t,e,n)}function B$(t,e,n){return t.type&40?Hn(t,n):null}var j$=B$,Nx;function Rp(t,e,n,i){let r=IM(t,i,e),s=e[Je],o=i.parent||e[Cn],a=TM(o,i,e);if(r!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)Rx(s,r,n[l],a,!1);else Rx(s,r,n,a,!1);Nx!==void 0&&Nx(s,i,e,n,r)}function Kf(t,e){if(e!==null){let n=e.type;if(n&3)return Hn(e,t);if(n&4)return Cv(-1,t[e.index]);if(n&8){let i=e.child;if(i!==null)return Kf(t,i);{let r=t[e.index];return ci(r)?Cv(-1,r):Bi(r)}}else{if(n&32)return Cb(e,t)()||Bi(t[e.index]);{let i=SM(t,e);if(i!==null){if(Array.isArray(i))return i[0];let r=Tb(t[li]);return Kf(r,i)}else return Kf(t,e.next)}}}return null}function SM(t,e){if(e!==null){let i=t[li][Cn],r=e.projection;return i.projection[r]}return null}function Cv(t,e){let n=En+t+1;if(n<e.length){let i=e[n],r=i[de].firstChild;if(r!==null)return Kf(i,r)}return e[To]}function U$(t,e,n){let i=Sb(t,e);i&&L$(t,i,e,n)}function Db(t,e,n,i,r,s,o){for(;n!=null;){let a=i[n.index],l=n.type;if(o&&e===0&&(a&&ys(Bi(a),i),n.flags|=2),(n.flags&32)!==32)if(l&8)Db(t,e,n.child,i,r,s,!1),ml(e,t,r,a,s);else if(l&32){let c=Cb(n,i),u;for(;u=c();)ml(e,t,r,u,s);ml(e,t,r,a,s)}else l&16?DM(t,e,i,n,r,s):ml(e,t,r,a,s);n=o?n.projectionNext:n.next}}function Iu(t,e,n,i,r,s){Db(n,i,t.firstChild,e,r,s,!1)}function z$(t,e,n){let i=e[Je],r=IM(t,n,e),s=n.parent||e[Cn],o=TM(s,n,e);DM(i,0,e,n,r,o)}function DM(t,e,n,i,r,s){let o=n[li],l=o[Cn].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];ml(e,t,r,u,s)}else{let c=l,u=o[ut];mM(i)&&(c.flags|=128),Db(t,e,c,u,r,s,!0)}}function $$(t,e,n,i,r){let s=n[To],o=Bi(n);s!==o&&ml(e,t,i,s,r);for(let a=En;a<n.length;a++){let l=n[a];Iu(l[de],l,t,e,i,s)}}function H$(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let s=i.indexOf("-")===-1?void 0:ji.DashCase;r==null?t.removeStyle(n,i,s):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),s|=ji.Important),t.setStyle(n,i,r,s))}}function W$(t,e,n){t.setAttribute(e,"style",n)}function xM(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function AM(t,e,n){let{mergedAttrs:i,classes:r,styles:s}=n;i!==null&&fv(t,e,i),r!==null&&xM(t,e,r),s!==null&&W$(t,e,s)}var Bf;function q$(){if(Bf===void 0&&(Bf=null,Lt.trustedTypes))try{Bf=Lt.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Bf}function Np(t){return q$()?.createHTML(t)||t}var jf;function MM(){if(jf===void 0&&(jf=null,Lt.trustedTypes))try{jf=Lt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return jf}function Px(t){return MM()?.createHTML(t)||t}function Ox(t){return MM()?.createScriptURL(t)||t}var Tr=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${rA})`}},Tv=class extends Tr{getTypeName(){return"HTML"}},Sv=class extends Tr{getTypeName(){return"Style"}},Dv=class extends Tr{getTypeName(){return"Script"}},xv=class extends Tr{getTypeName(){return"URL"}},Av=class extends Tr{getTypeName(){return"ResourceURL"}};function Wn(t){return t instanceof Tr?t.changingThisBreaksApplicationSecurity:t}function xr(t,e){let n=G$(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${rA})`)}return n===e}function G$(t){return t instanceof Tr&&t.getTypeName()||null}function kM(t){return new Tv(t)}function RM(t){return new Sv(t)}function NM(t){return new Dv(t)}function PM(t){return new xv(t)}function OM(t){return new Av(t)}function K$(t){let e=new kv(t);return Y$()?new Mv(e):e}var Mv=class{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{let n=new window.DOMParser().parseFromString(Np(e),"text/html").body;return n===null?this.inertDocumentHelper.getInertBodyElement(e):(n.removeChild(n.firstChild),n)}catch{return null}}},kv=class{constructor(e){this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(e){let n=this.inertDocument.createElement("template");return n.innerHTML=Np(e),n}};function Y$(){try{return!!new window.DOMParser().parseFromString(Np(""),"text/html")}catch{return!1}}var Q$=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Pp(t){return t=String(t),t.match(Q$)?t:"unsafe:"+t}function Ar(t){let e={};for(let n of t.split(","))e[n]=!0;return e}function Cu(...t){let e={};for(let n of t)for(let i in n)n.hasOwnProperty(i)&&(e[i]=!0);return e}var FM=Ar("area,br,col,hr,img,wbr"),LM=Ar("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),VM=Ar("rp,rt"),J$=Cu(VM,LM),X$=Cu(LM,Ar("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Z$=Cu(VM,Ar("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Fx=Cu(FM,X$,Z$,J$),BM=Ar("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),eH=Ar("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),tH=Ar("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),nH=Cu(BM,eH,tH),iH=Ar("script,style,template"),Rv=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let n=e.firstChild,i=!0;for(;n;){if(n.nodeType===Node.ELEMENT_NODE?i=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,i&&n.firstChild){n=n.firstChild;continue}for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let r=this.checkClobberedElement(n,n.nextSibling);if(r){n=r;break}n=this.checkClobberedElement(n,n.parentNode)}}return this.buf.join("")}startElement(e){let n=e.nodeName.toLowerCase();if(!Fx.hasOwnProperty(n))return this.sanitizedSomething=!0,!iH.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);let i=e.attributes;for(let r=0;r<i.length;r++){let s=i.item(r),o=s.name,a=o.toLowerCase();if(!nH.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let l=s.value;BM[a]&&(l=Pp(l)),this.buf.push(" ",o,'="',Lx(l),'"')}return this.buf.push(">"),!0}endElement(e){let n=e.nodeName.toLowerCase();Fx.hasOwnProperty(n)&&!FM.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(e){this.buf.push(Lx(e))}checkClobberedElement(e,n){if(n&&(e.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return n}},rH=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,sH=/([^\#-~ |!])/g;function Lx(t){return t.replace(/&/g,"&amp;").replace(rH,function(e){let n=e.charCodeAt(0),i=e.charCodeAt(1);return"&#"+((n-55296)*1024+(i-56320)+65536)+";"}).replace(sH,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Uf;function xb(t,e){let n=null;try{Uf=Uf||K$(t);let i=e?String(e):"";n=Uf.getInertBodyElement(i);let r=5,s=i;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,i=s,s=n.innerHTML,n=Uf.getInertBodyElement(i)}while(i!==s);let a=new Rv().sanitizeChildren(Vx(n)||n);return Np(a)}finally{if(n){let i=Vx(n)||n;for(;i.firstChild;)i.removeChild(i.firstChild)}}}function Vx(t){return"content"in t&&oH(t)?t.content:null}function oH(t){return t.nodeType===Node.ELEMENT_NODE&&t.nodeName==="TEMPLATE"}var xt=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(xt||{});function Es(t){let e=Ab();return e?Px(e.sanitize(xt.HTML,t)||""):xr(t,"HTML")?Px(Wn(t)):xb(fM(),hu(t))}function Fo(t){let e=Ab();return e?e.sanitize(xt.URL,t)||"":xr(t,"URL")?Wn(t):Pp(hu(t))}function aH(t){let e=Ab();if(e)return Ox(e.sanitize(xt.RESOURCE_URL,t)||"");if(xr(t,"ResourceURL"))return Ox(Wn(t));throw new x(904,!1)}function lH(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?aH:Fo}function jM(t,e,n){return lH(e,n)(t)}function Ab(){let t=_e();return t&&t[wl].sanitizer}var cH="h",uH="b";var dH=(t,e,n)=>null;function Mb(t,e,n=!1){return dH(t,e,n)}var Nv=class{},ap=class{};function hH(t){let e=Error(`No component factory found for ${Ft(t)}.`);return e[fH]=t,e}var fH="ngComponent";var Pv=class{resolveComponentFactory(e){throw hH(e)}},Is=(()=>{let e=class e{};e.NULL=new Pv;let t=e;return t})();function pH(){return Al(fn(),_e())}function Al(t,e){return new ce(Hn(t,e))}var ce=(()=>{let e=class e{constructor(i){this.nativeElement=i}};e.__NG_ELEMENT_ID__=pH;let t=e;return t})();function mH(t){return t instanceof ce?t.nativeElement:t}var Mo=class{},ui=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>gH();let t=e;return t})();function gH(){let t=_e(),e=fn(),n=bs(e.index,t);return(gs(n)?n:t)[Je]}var _H=(()=>{let e=class e{};e.\u0275prov=T({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Ui=class{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}},kb=new Ui("17.0.5"),ev={};function Rb(t){let e=Kt(null);try{return t()}finally{Kt(e)}}function UM(t){return Nb(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function yH(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),i;for(;!(i=n.next()).done;)e(i.value)}}function Nb(t){return t!==null&&(typeof t=="function"||typeof t=="object")}var Ov=class{constructor(){}supports(e){return UM(e)}create(e){return new Fv(e)}},vH=(t,e)=>e,Fv=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||vH}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,i=this._removalsHead,r=0,s=null;for(;n||i;){let o=!i||n&&n.currentIndex<Bx(i,r,s)?n:i,a=Bx(o,r,s),l=o.currentIndex;if(o===i)r--,i=i._nextRemoved;else if(n=n._next,o.previousIndex==null)r++;else{s||(s=[]);let c=a-r,u=l-r;if(c!=u){for(let h=0;h<c;h++){let p=h<s.length?s[h]:s[h]=0,f=p+h;u<=f&&f<c&&(s[h]=p+1)}let d=o.previousIndex;s[d]=u-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!UM(e))throw new x(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,i=!1,r,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),i=!0):(i&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else r=0,yH(e,a=>{o=this._trackByFn(r,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,r),i=!0):(i&&(n=this._verifyReinsertion(n,a,o,r)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,r++}),this.length=r;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,i,r){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,r)):(e=this._linkedRecords===null?null:this._linkedRecords.get(i,r),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,r)):e=this._addAfter(new Lv(n,i),s,r)),e}_verifyReinsertion(e,n,i,r){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(i,null);return s!==null?e=this._reinsertAfter(s,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,i){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let r=e._prevRemoved,s=e._nextRemoved;return r===null?this._removalsHead=s:r._nextRemoved=s,s===null?this._removalsTail=r:s._prevRemoved=r,this._insertAfter(e,n,i),this._addToMoves(e,i),e}_moveAfter(e,n,i){return this._unlink(e),this._insertAfter(e,n,i),this._addToMoves(e,i),e}_addAfter(e,n,i){return this._insertAfter(e,n,i),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,i){let r=n===null?this._itHead:n._next;return e._next=r,e._prev=n,r===null?this._itTail=e:r._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new lp),this._linkedRecords.put(e),e.currentIndex=i,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,i=e._next;return n===null?this._itHead=i:n._next=i,i===null?this._itTail=n:i._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new lp),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Lv=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Vv=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let i;for(i=this._head;i!==null;i=i._nextDup)if((n===null||n<=i.currentIndex)&&Object.is(i.trackById,e))return i;return null}remove(e){let n=e._prevDup,i=e._nextDup;return n===null?this._head=i:n._nextDup=i,i===null?this._tail=n:i._prevDup=n,this._head===null}},lp=class{constructor(){this.map=new Map}put(e){let n=e.trackById,i=this.map.get(n);i||(i=new Vv,this.map.set(n,i)),i.add(e)}get(e,n){let i=e,r=this.map.get(i);return r?r.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Bx(t,e,n){let i=t.previousIndex;if(i===null)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}var Bv=class{constructor(){}supports(e){return e instanceof Map||Nb(e)}create(){return new jv}},jv=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let n;for(n=this._mapHead;n!==null;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;n!==null;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;n!==null;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||Nb(e)))throw new x(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(i,r)=>{if(n&&n.key===r)this._maybeAddToChanges(n,i),this._appendAfter=n,n=n._next;else{let s=this._getOrCreateRecordForKey(r,i);n=this._insertBeforeOrAppend(n,s)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let i=n;i!==null;i=i._nextRemoved)i===this._mapHead&&(this._mapHead=null),this._records.delete(i.key),i._nextRemoved=i._next,i.previousValue=i.currentValue,i.currentValue=null,i._prev=null,i._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){let i=e._prev;return n._next=e,n._prev=i,e._prev=n,i&&(i._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){let r=this._records.get(e);this._maybeAddToChanges(r,n);let s=r._prev,o=r._next;return s&&(s._next=o),o&&(o._prev=s),r._next=null,r._prev=null,r}let i=new Uv(e);return this._records.set(e,i),i.currentValue=n,this._addToAdditions(i),i}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(i=>n(e[i],i))}},Uv=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function jx(){return new Tu([new Ov])}var Tu=(()=>{let e=class e{constructor(i){this.factories=i}static create(i,r){if(r!=null){let s=r.factories.slice();i=i.concat(s)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||jx()),deps:[[e,new yu,new Xe]]}}find(i){let r=this.factories.find(s=>s.supports(i));if(r!=null)return r;throw new x(901,!1)}};e.\u0275prov=T({token:e,providedIn:"root",factory:jx});let t=e;return t})();function Ux(){return new Su([new Bv])}var Su=(()=>{let e=class e{constructor(i){this.factories=i}static create(i,r){if(r){let s=r.factories.slice();i=i.concat(s)}return new e(i)}static extend(i){return{provide:e,useFactory:r=>e.create(i,r||Ux()),deps:[[e,new yu,new Xe]]}}find(i){let r=this.factories.find(s=>s.supports(i));if(r)return r;throw new x(901,!1)}};e.\u0275prov=T({token:e,providedIn:"root",factory:Ux});let t=e;return t})();function cp(t,e,n,i,r=!1){for(;n!==null;){let s=e[n.index];s!==null&&i.push(Bi(s)),ci(s)&&bH(s,i);let o=n.type;if(o&8)cp(t,e,n.child,i);else if(o&32){let a=Cb(n,e),l;for(;l=a();)i.push(l)}else if(o&16){let a=SM(e,n);if(Array.isArray(a))i.push(...a);else{let l=Tb(e[li]);cp(l[de],l,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function bH(t,e){for(let n=En;n<t.length;n++){let i=t[n],r=i[de].firstChild;r!==null&&cp(i[de],i,r,e)}t[To]!==t[Dr]&&e.push(t[To])}var zM=[];function wH(t){return t[Co]??EH(t)}function EH(t){let e=zM.pop()??Object.create(CH);return e.lView=t,e}function IH(t){t.lView[Co]!==t&&(t.lView=null,zM.push(t))}var CH=oe(C({},VD),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ep(t.lView)},consumerOnSignalRead(){this.lView[Co]=this}}),TH="ngOriginalError";function tv(t){return t[TH]}var hn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&tv(e);for(;n&&tv(n);)n=tv(n);return n||null}};var $M=!1,SH=new M("",{providedIn:"root",factory:()=>$M});var di={};function I(t){HM(dt(),_e(),Oo()+t,!1)}function HM(t,e,n,i){if(!i)if((e[te]&3)===3){let s=t.preOrderCheckHooks;s!==null&&Hf(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Wf(e,s,0,n)}Do(n)}function y(t,e=me.Default){let n=_e();if(n===null)return _(t,e);let i=fn();return ZA(i,n,Qt(t),e)}function Op(){let t="invalid";throw new Error(t)}function DH(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)Do(~r);else{let s=r,o=n[++i],a=n[++i];kz(o,s);let l=e[s];a(2,l)}}}finally{Do(-1)}}function Fp(t,e,n,i,r,s,o,a,l,c,u){let d=e.blueprint.slice();return d[Dr]=r,d[te]=i|4|128|8,(c!==null||t&&t[te]&2048)&&(d[te]|=2048),kA(d),d[ut]=d[Dl]=t,d[Un]=n,d[wl]=o||t&&t[wl],d[Je]=a||t&&t[Je],d[bl]=l||t&&t[bl]||null,d[Cn]=s,d[vp]=w$(),d[Xf]=u,d[IA]=c,d[li]=e.type==2?t[li]:d,d}function Ml(t,e,n,i,r){let s=t.data[e];if(s===null)s=xH(t,e,n,i,r),Mz()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=i,s.attrs=r;let o=Dz();s.injectorIndex=o===null?-1:o.injectorIndex}return Po(s,!0),s}function xH(t,e,n,i,r){let s=LA(),o=pb(),a=o?s:s&&s.parent,l=t.data[e]=PH(t,a,n,e,i,r);return t.firstChild===null&&(t.firstChild=l),s!==null&&(o?s.child==null&&l.parent!==null&&(s.child=l):s.next===null&&(s.next=l,l.prev=s)),l}function WM(t,e,n,i){if(n===0)return-1;let r=e.length;for(let s=0;s<n;s++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function qM(t,e,n,i,r){let s=Oo(),o=i&2;try{Do(-1),o&&e.length>In&&HM(t,e,In,!1),Oi(o?2:0,r),n(i,r)}finally{Do(s),Oi(o?3:1,r)}}function Pb(t,e,n){if(hb(e)){let i=Kt(null);try{let r=e.directiveStart,s=e.directiveEnd;for(let o=r;o<s;o++){let a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{Kt(i)}}}function Ob(t,e,n){OA()&&(jH(t,e,n,Hn(n,e)),(n.flags&64)===64&&YM(t,e,n))}function Fb(t,e,n=Hn){let i=e.localNames;if(i!==null){let r=e.index+1;for(let s=0;s<i.length;s+=2){let o=i[s+1],a=o===-1?n(e,t):t[o];t[r++]=a}}}function GM(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Lb(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Lb(t,e,n,i,r,s,o,a,l,c,u){let d=In+i,h=d+r,p=AH(d,h),f=typeof c=="function"?c():c;return p[de]={type:t,blueprint:p,template:n,queries:null,viewQuery:a,declTNode:e,data:p.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1,ssrId:u}}function AH(t,e){let n=[];for(let i=0;i<e;i++)n.push(i<t?null:di);return n}function MH(t,e,n,i){let s=i.get(SH,$M)||n===Vi.ShadowDom,o=t.selectRootElement(e,s);return kH(o),o}function kH(t){RH(t)}var RH=t=>null;function NH(t,e,n,i){let r=ZM(e);r.push(n),t.firstCreatePass&&e1(t).push(i,r.length-1)}function PH(t,e,n,i,r,s){let o=e?e.injectorIndex:-1,a=0;return FA()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function zx(t,e,n,i){for(let r in t)if(t.hasOwnProperty(r)){n=n===null?{}:n;let s=t[r];i===null?$x(n,e,r,s):i.hasOwnProperty(r)&&$x(n,e,i[r],s)}return n}function $x(t,e,n,i){t.hasOwnProperty(n)?t[n].push(e,i):t[n]=[e,i]}function OH(t,e,n){let i=e.directiveStart,r=e.directiveEnd,s=t.data,o=e.attrs,a=[],l=null,c=null;for(let u=i;u<r;u++){let d=s[u],h=n?n.get(d):null,p=h?h.inputs:null,f=h?h.outputs:null;l=zx(d.inputs,u,l,p),c=zx(d.outputs,u,c,f);let m=l!==null&&o!==null&&!mA(e)?JH(l,u,o):null;a.push(m)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}function FH(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Vb(t,e,n,i,r,s,o,a){let l=Hn(e,n),c=e.inputs,u;!a&&c!=null&&(u=c[i])?(jb(t,n,u,i,r),bp(e)&&LH(n,e.index)):e.type&3?(i=FH(i),r=o!=null?o(r,e.value||"",i):r,s.setProperty(l,i,r)):e.type&12}function LH(t,e){let n=bs(e,t);n[te]&16||(n[te]|=64)}function Bb(t,e,n,i){if(OA()){let r=i===null?null:{"":-1},s=zH(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&KM(t,e,n,o,r,a),r&&$H(n,i,r)}n.mergedAttrs=ou(n.mergedAttrs,n.attrs)}function KM(t,e,n,i,r,s){for(let c=0;c<i.length;c++)_v(ip(n,e),t,i[c].type);WH(n,t.data.length,i.length);for(let c=0;c<i.length;c++){let u=i[c];u.providersResolver&&u.providersResolver(u)}let o=!1,a=!1,l=WM(t,e,i.length,null);for(let c=0;c<i.length;c++){let u=i[c];n.mergedAttrs=ou(n.mergedAttrs,u.hostAttrs),qH(t,n,e,l,u),HH(l,u,r),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}OH(t,n,s)}function VH(t,e,n,i,r){let s=r.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;BH(o)!=a&&o.push(a),o.push(n,i,s)}}function BH(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function jH(t,e,n,i){let r=n.directiveStart,s=n.directiveEnd;bp(n)&&GH(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||ip(n,e),ys(i,e);let o=n.initialInputs;for(let a=r;a<s;a++){let l=t.data[a],c=Ao(e,t,a,n);if(ys(c,e),o!==null&&QH(e,a-r,c,l,n,o),_s(l)){let u=bs(n.index,e);u[Un]=Ao(e,t,a,n)}}}function YM(t,e,n){let i=n.directiveStart,r=n.directiveEnd,s=n.index,o=Rz();try{Do(s);for(let a=i;a<r;a++){let l=t.data[a],c=e[a];mv(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&UH(l,c)}}finally{Do(-1),mv(o)}}function UH(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function zH(t,e){let n=t.directiveRegistry,i=null,r=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(gA(e,o.selectors,!1))if(i||(i=[]),_s(o))if(o.findHostDirectiveDefs!==null){let a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),i.unshift(...a,o);let l=a.length;zv(t,e,l)}else i.unshift(o),zv(t,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,i,r),i.push(o)}return i===null?null:[i,r]}function zv(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function $H(t,e,n){if(e){let i=t.localNames=[];for(let r=0;r<e.length;r+=2){let s=n[e[r+1]];if(s==null)throw new x(-301,!1);i.push(e[r],s)}}}function HH(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;_s(e)&&(n[""]=t)}}function WH(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function qH(t,e,n,i,r){t.data[i]=r;let s=r.factory||(r.factory=So(r.type,!0)),o=new xo(s,_s(r),y);t.blueprint[i]=o,n[i]=o,VH(t,e,i,WM(t,n,r.hostVars,di),r)}function GH(t,e,n){let i=Hn(e,t),r=GM(n),s=t[wl].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Lp(t,Fp(t,r,null,o,i,e,null,s.createRenderer(i,n),null,null,null));t[e.index]=a}function KH(t,e,n,i,r,s){let o=Hn(t,e);YH(e[Je],o,s,t.value,n,i,r)}function YH(t,e,n,i,r,s,o){if(s==null)t.removeAttribute(e,r,n);else{let a=o==null?hu(s):o(s,i||"",r);t.setAttribute(e,r,a,n)}}function QH(t,e,n,i,r,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let l=o[a++],c=o[a++],u=o[a++];QM(i,n,l,c,u)}}function QM(t,e,n,i,r){let s=Kt(null);try{let o=t.inputTransforms;o!==null&&o.hasOwnProperty(i)&&(r=o[i].call(e,r)),t.setInput!==null?t.setInput(e,r,n,i):e[i]=r}finally{Kt(s)}}function JH(t,e,n){let i=null,r=0;for(;r<n.length;){let s=n[r];if(s===0){r+=4;continue}else if(s===5){r+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){i===null&&(i=[]);let o=t[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){i.push(s,o[a+1],n[r+1]);break}}r+=2}return i}function JM(t,e,n,i){return[t,!0,0,e,null,i,null,n,null,null]}function XM(t,e){let n=t.contentQueries;if(n!==null){let i=Kt(null);try{for(let r=0;r<n.length;r+=2){let s=n[r],o=n[r+1];if(o!==-1){let a=t.data[o];gb(s),a.contentQueries(2,e[o],o)}}}finally{Kt(i)}}}function Lp(t,e){return t[lu]?t[Tx][ai]=e:t[lu]=e,t[Tx]=e,e}function $v(t,e,n){gb(0);let i=Kt(null);try{e(t,n)}finally{Kt(i)}}function ZM(t){return t[au]||(t[au]=[])}function e1(t){return t.cleanup||(t.cleanup=[])}function t1(t,e){let n=t[bl],i=n?n.get(hn,null):null;i&&i.handleError(e)}function jb(t,e,n,i,r){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],l=e[o],c=t.data[o];QM(c,l,i,a,r)}}function XH(t,e,n){let i=xA(e,t);S$(t[Je],i,n)}var ZH=100;function e4(t,e=!0){let n=t[wl],i=n.rendererFactory,r=n.afterRenderEventManager,s=!1;s||(i.begin?.(),r?.begin());try{let o=t[de],a=t[Un];n1(o,t,o.template,a),t4(t)}catch(o){throw e&&t1(t,o),o}finally{s||(i.end?.(),n.inlineEffectRunner?.flush(),r?.end())}}function t4(t){let e=0;for(;RA(t);){if(e===ZH)throw new x(103,!1);e++,s1(t,1)}}function n1(t,e,n,i){let r=e[te];if((r&256)===256)return;let s=!1;!s&&e[wl].inlineEffectRunner?.flush(),_b(e);let o=null,a=null;!s&&n4(t)&&(a=wH(e),o=BD(a));try{kA(e),Az(t.bindingStartIndex),n!==null&&qM(t,e,n,2,i);let l=(r&3)===3;if(!s)if(l){let d=t.preOrderCheckHooks;d!==null&&Hf(e,d,null)}else{let d=t.preOrderHooks;d!==null&&Wf(e,d,0,null),Yy(e,0)}if(i4(e),i1(e,0),t.contentQueries!==null&&XM(t,e),!s)if(l){let d=t.contentCheckHooks;d!==null&&Hf(e,d)}else{let d=t.contentHooks;d!==null&&Wf(e,d,1),Yy(e,1)}DH(t,e);let c=t.components;c!==null&&o1(e,c,0);let u=t.viewQuery;if(u!==null&&$v(2,u,i),!s)if(l){let d=t.viewCheckHooks;d!==null&&Hf(e,d)}else{let d=t.viewHooks;d!==null&&Wf(e,d,2),Yy(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Ky]){for(let d of e[Ky])d();e[Ky]=null}s||(e[te]&=-73)}catch(l){throw Ep(e),l}finally{a!==null&&(jD(a,o),IH(a)),yb()}}function n4(t){return t.type!==2}function i1(t,e){for(let n=_M(t);n!==null;n=yM(n)){n[te]&=~Il.HasChildViewsToRefresh;for(let i=En;i<n.length;i++){let r=n[i];r1(r,e)}}}function i4(t){for(let e=_M(t);e!==null;e=yM(e)){if(!(e[te]&Il.HasTransplantedViews))continue;let n=e[El];for(let i=0;i<n.length;i++){let r=n[i],s=r[ut];vz(r)}}}function r4(t,e,n){let i=bs(e,t);r1(i,n)}function r1(t,e){fb(t)&&s1(t,e)}function s1(t,e){let i=t[de],r=t[te],s=t[Co],o=!!(e===0&&r&16);if(o||=!!(r&64&&e===0),o||=!!(r&1024),o||=!!(s?.dirty&&Dy(s)),s&&(s.dirty=!1),t[te]&=-9217,o)n1(i,t,i.template,t[Un]);else if(r&8192){i1(t,1);let a=i.components;a!==null&&o1(t,a,1)}}function o1(t,e,n){for(let i=0;i<e.length;i++)r4(t,e[i],n)}function Ub(t){for(;t;){t[te]|=64;let e=Tb(t);if(dz(t)&&!e)return t;t=e}return null}var ko=class{get rootNodes(){let e=this._lView,n=e[de];return cp(n,e,n.firstChild,[])}constructor(e,n,i=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Un]}set context(e){this._lView[Un]=e}get destroyed(){return(this._lView[te]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ut];if(ci(e)){let n=e[Zf],i=n?n.indexOf(this):-1;i>-1&&(Iv(e,i),rp(n,i))}this._attachedToViewContainer=!1}EM(this._lView[de],this._lView)}onDestroy(e){PA(this._lView,e)}markForCheck(){Ub(this._cdRefInjectingView||this._lView)}detach(){this._lView[te]&=-129}reattach(){NA(this._lView),this._lView[te]|=128}detectChanges(){e4(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new x(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,M$(this._lView[de],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new x(902,!1);this._appRef=e}},Mr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=s4;let t=e;return t})();function s4(t){return o4(fn(),_e(),(t&16)===16)}function o4(t,e,n){if(bp(t)&&!n){let i=bs(t.index,e);return new ko(i,i)}else if(t.type&47){let i=e[li];return new ko(i,e)}return null}var a1=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=a4,e.__NG_ENV_ID__=i=>i;let t=e;return t})(),Hv=class extends a1{constructor(e){super(),this._lView=e}onDestroy(e){return PA(this._lView,e),()=>wz(this._lView,e)}};function a4(){return new Hv(_e())}var Hx=new Set;function Vp(t){Hx.has(t)||(Hx.add(t),performance?.mark?.("mark_use_counter",{detail:{feature:t}}))}var Wv=class extends Z{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,i){let r=e,s=n||(()=>null),o=i;if(e&&typeof e=="object"){let l=e;r=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=nv(s),r&&(r=nv(r)),o&&(o=nv(o)));let a=super.subscribe({next:r,error:s,complete:o});return e instanceof Fe&&e.add(a),a}};function nv(t){return e=>{setTimeout(t,void 0,e)}}var ye=Wv;function Wx(...t){}function l4(){let t=typeof Lt.requestAnimationFrame=="function",e=Lt[t?"requestAnimationFrame":"setTimeout"],n=Lt[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i);let r=n[Zone.__symbol__("OriginalDelegate")];r&&(n=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var L=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ye(!1),this.onMicrotaskEmpty=new ye(!1),this.onStable=new ye(!1),this.onError=new ye(!1),typeof Zone>"u")throw new x(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=l4().nativeRequestAnimationFrame,d4(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new x(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new x(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+r,e,c4,Wx,Wx);try{return s.runTask(o,n,i)}finally{s.cancelTask(o)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}},c4={};function zb(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function u4(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Lt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,qv(t),t.isCheckStableRunning=!0,zb(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),qv(t))}function d4(t){let e=()=>{u4(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,s,o,a)=>{if(h4(a))return n.invokeTask(r,s,o,a);try{return qx(t),n.invokeTask(r,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Gx(t)}},onInvoke:(n,i,r,s,o,a,l)=>{try{return qx(t),n.invoke(r,s,o,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),Gx(t)}},onHasTask:(n,i,r,s)=>{n.hasTask(r,s),i===r&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,qv(t),zb(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,i,r,s)=>(n.handleError(r,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function qv(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function qx(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Gx(t){t._nesting--,zb(t)}var l1=new M("",{providedIn:"root",factory:c1});function c1(){let t=D(L),e=!0,n=new X(r=>{e=t.isStable&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks,t.runOutsideAngular(()=>{r.next(e),r.complete()})}),i=new X(r=>{let s;t.runOutsideAngular(()=>{s=t.onStable.subscribe(()=>{L.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!t.hasPendingMacrotasks&&!t.hasPendingMicrotasks&&(e=!0,r.next(!0))})})});let o=t.onUnstable.subscribe(()=>{L.assertInAngularZone(),e&&(e=!1,t.runOutsideAngular(()=>{r.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}});return Eo(n,i.pipe(hl()))}function h4(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var gl=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(gl||{}),f4={destroy(){}};function $b(t,e){!e&&f$($b);let n=e?.injector??D(Se);if(!m$(n))return f4;Vp("NgAfterNextRender");let i=n.get(u1),r=i.handler??=new Kv,s=e?.phase??gl.MixedReadWrite,o=()=>{r.unregister(l),a()},a=n.get(a1).onDestroy(o),l=new Gv(n,s,()=>{o(),t()});return r.register(l),{destroy:o}}var Gv=class{constructor(e,n,i){this.phase=n,this.callbackFn=i,this.zone=e.get(L),this.errorHandler=e.get(hn,null,{optional:!0})}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},Kv=class{constructor(){this.executingCallbacks=!1,this.buckets={[gl.EarlyRead]:new Set,[gl.Write]:new Set,[gl.MixedReadWrite]:new Set,[gl.Read]:new Set},this.deferredCallbacks=new Set}validateBegin(){if(this.executingCallbacks)throw new x(102,!1)}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},u1=(()=>{let e=class e{constructor(){this.renderDepth=0,this.handler=null,this.internalCallbacks=[]}begin(){this.handler?.validateBegin(),this.renderDepth++}end(){if(this.renderDepth--,this.renderDepth===0){for(let i of this.internalCallbacks)i();this.internalCallbacks.length=0,this.handler?.execute()}}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=T({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function p4(t,e){let n=bs(e,t),i=n[de];m4(i,n);let r=n[Dr];r!==null&&n[Xf]===null&&(n[Xf]=Mb(r,n[bl])),Hb(i,n,n[Un])}function m4(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Hb(t,e,n){_b(e);try{let i=t.viewQuery;i!==null&&$v(1,i,n);let r=t.template;r!==null&&qM(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&XM(t,e),t.staticViewQueries&&$v(2,t.viewQuery,n);let s=t.components;s!==null&&g4(e,s)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[te]&=-5,yb()}}function g4(t,e){for(let n=0;n<e.length;n++)p4(t,e[n])}function up(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)r=cv(r,a);else if(s==2){let l=a,c=e[++o];i=cv(i,l+": "+c+";")}}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}var dp=class extends Is{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Cr(e);return new Ro(n,this.ngModule)}};function Kx(t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let i=t[n];e.push({propName:i,templateName:n})}return e}function _4(t){let e=t.toLowerCase();return e==="svg"?mz:e==="math"?gz:null}var Yv=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=yp(i);let r=this.injector.get(e,ev,i);return r!==ev||n===ev?r:this.parentInjector.get(e,n,i)}},Ro=class extends ap{get inputs(){let e=this.componentDef,n=e.inputTransforms,i=Kx(e.inputs);if(n!==null)for(let r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return Kx(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=oz(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){r=r||this.ngModule;let s=r instanceof Jt?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let o=s?new Yv(e,s):e,a=o.get(Mo,null);if(a===null)throw new x(407,!1);let l=o.get(_H,null),c=o.get(u1,null),u={rendererFactory:a,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:c},d=a.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",p=i?MH(d,i,this.componentDef.encapsulation,o):bM(d,h,_4(h)),f=4608,m=this.componentDef.onPush?576:528,g=this.componentDef.signals?f:m,w=null;p!==null&&(w=Mb(p,o,!0));let O=Lb(0,null,null,1,0,null,null,null,null,null,null),Y=Fp(null,O,null,g,null,null,u,d,o,null,w);_b(Y);let j,Ne;try{let se=this.componentDef,De,ct=null;se.findHostDirectiveDefs?(De=[],ct=new Map,se.findHostDirectiveDefs(se,De,ct),De.push(se)):De=[se];let W=y4(Y,p),it=v4(W,p,se,De,Y,u,d);Ne=AA(O,In),p&&E4(d,se,p,i),n!==void 0&&I4(Ne,this.ngContentSelectors,n),j=w4(it,se,De,ct,Y,[C4]),Hb(O,Y,null)}finally{yb()}return new Qv(this.componentType,j,Al(Ne,Y),Y,Ne)}},Qv=class extends Nv{constructor(e,n,i,r,s){super(),this.location=i,this._rootLView=r,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new ko(r,void 0,!1),this.componentType=e}setInput(e,n){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;jb(s[de],s,r,e,n),this.previousInputValues.set(e,n);let o=bs(this._tNode.index,s);Ub(o)}}get injector(){return new Io(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function y4(t,e){let n=t[de],i=In;return t[i]=e,Ml(n,i,2,"#host",null)}function v4(t,e,n,i,r,s,o){let a=r[de];b4(i,t,e,o);let l=null;e!==null&&(l=Mb(e,r[bl]));let c=s.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=Fp(r,GM(n),null,u,r[t.index],t,s,c,null,null,l);return a.firstCreatePass&&zv(a,t,i.length-1),Lp(r,d),r[t.index]=d}function b4(t,e,n,i){for(let r of t)e.mergedAttrs=ou(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(up(e,e.mergedAttrs,!0),n!==null&&AM(i,n,e))}function w4(t,e,n,i,r,s){let o=fn(),a=r[de],l=Hn(o,r);KM(a,r,o,n,null,i);for(let u=0;u<n.length;u++){let d=o.directiveStart+u,h=Ao(r,a,d,o);ys(h,r)}YM(a,r,o),l&&ys(l,r);let c=Ao(r,a,o.directiveStart+o.componentOffset,o);if(t[Un]=r[Un]=c,s!==null)for(let u of s)u(c,e);return Pb(a,o,t),c}function E4(t,e,n,i){if(i)fv(t,n,["ng-version",kb.full]);else{let{attrs:r,classes:s}=az(e.selectors[0]);r&&fv(t,n,r),s&&s.length>0&&xM(t,n,s.join(" "))}}function I4(t,e,n){let i=t.projection=[];for(let r=0;r<e.length;r++){let s=n[r];i.push(s!=null?Array.from(s):null)}}function C4(){let t=fn();xp(_e()[de],t)}function T4(t){return Object.getPrototypeOf(t.prototype).constructor}function Ze(t){let e=T4(t.type),n=!0,i=[t];for(;e;){let r;if(_s(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new x(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);let o=t;o.inputs=zf(t.inputs),o.inputTransforms=zf(t.inputTransforms),o.declaredInputs=zf(t.declaredInputs),o.outputs=zf(t.outputs);let a=r.hostBindings;a&&A4(t,a);let l=r.viewQuery,c=r.contentQueries;if(l&&D4(t,l),c&&x4(t,c),Lf(t.inputs,r.inputs),Lf(t.declaredInputs,r.declaredInputs),Lf(t.outputs,r.outputs),r.inputTransforms!==null&&(o.inputTransforms===null&&(o.inputTransforms={}),Lf(o.inputTransforms,r.inputTransforms)),_s(r)&&r.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let s=r.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Ze&&(n=!1)}}e=Object.getPrototypeOf(e)}S4(i)}function S4(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){let r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=ou(r.hostAttrs,n=ou(n,r.hostAttrs))}}function zf(t){return t===vl?{}:t===dn?[]:t}function D4(t,e){let n=t.viewQuery;n?t.viewQuery=(i,r)=>{e(i,r),n(i,r)}:t.viewQuery=e}function x4(t,e){let n=t.contentQueries;n?t.contentQueries=(i,r,s)=>{e(i,r,s),n(i,r,s)}:t.contentQueries=e}function A4(t,e){let n=t.hostBindings;n?t.hostBindings=(i,r)=>{e(i,r),n(i,r)}:t.hostBindings=e}function $i(t){let e=t.inputConfig,n={};for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];Array.isArray(r)&&r[2]&&(n[i]=r[2])}t.inputTransforms=n}function Wb(t,e,n){return t[e]=n}function M4(t,e){return t[e]}function Sr(t,e,n){let i=t[e];return Object.is(i,n)?!1:(t[e]=n,!0)}function k4(t,e,n,i){let r=Sr(t,e,n);return Sr(t,e+1,i)||r}function Xt(t,e,n,i){let r=_e(),s=Cp();if(Sr(r,s,e)){let o=dt(),a=Tp();KH(a,r,t,e,n,i)}return Xt}function d1(t,e,n,i){return Sr(t,Cp(),n)?e+hu(n)+i:di}function $f(t,e){return t<<17|e<<2}function No(t){return t>>17&32767}function R4(t){return(t&2)==2}function N4(t,e){return t&131071|e<<17}function Jv(t){return t|2}function Sl(t){return(t&131068)>>2}function iv(t,e){return t&-131069|e<<2}function P4(t){return(t&1)===1}function Xv(t){return t|1}function O4(t,e,n,i,r,s){let o=s?e.classBindings:e.styleBindings,a=No(o),l=Sl(o);t[i]=n;let c=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||_u(d,u)>0)&&(c=!0)}else u=n;if(r)if(l!==0){let h=No(t[a+1]);t[i+1]=$f(h,a),h!==0&&(t[h+1]=iv(t[h+1],i)),t[a+1]=N4(t[a+1],i)}else t[i+1]=$f(a,0),a!==0&&(t[a+1]=iv(t[a+1],i)),a=i;else t[i+1]=$f(l,0),a===0?a=i:t[l+1]=iv(t[l+1],i),l=i;c&&(t[i+1]=Jv(t[i+1])),Yx(t,u,i,!0,s),Yx(t,u,i,!1,s),F4(e,u,t,i,s),o=$f(a,l),s?e.classBindings=o:e.styleBindings=o}function F4(t,e,n,i,r){let s=r?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&_u(s,e)>=0&&(n[i+1]=Xv(n[i+1]))}function Yx(t,e,n,i,r){let s=t[n+1],o=e===null,a=i?No(s):Sl(s),l=!1;for(;a!==0&&(l===!1||o);){let c=t[a],u=t[a+1];L4(c,e)&&(l=!0,t[a+1]=i?Xv(u):Jv(u)),a=i?No(u):Sl(u)}l&&(t[n+1]=i?Jv(s):Xv(s))}function L4(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?_u(t,e)>=0:!1}var oi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function V4(t){return t.substring(oi.key,oi.keyEnd)}function B4(t){return j4(t),h1(t,f1(t,0,oi.textEnd))}function h1(t,e){let n=oi.textEnd;return n===e?-1:(e=oi.keyEnd=U4(t,oi.key=e,n),f1(t,e,n))}function j4(t){oi.key=0,oi.keyEnd=0,oi.value=0,oi.valueEnd=0,oi.textEnd=t.length}function f1(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function U4(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function A(t,e,n){let i=_e(),r=Cp();if(Sr(i,r,e)){let s=dt(),o=Tp();Vb(s,o,i,t,e,i[Je],n,!1)}return A}function Zv(t,e,n,i,r){let s=e.inputs,o=r?"class":"style";jb(t,n,s[o],o,i)}function Du(t,e,n){return p1(t,e,n,!1),Du}function ht(t,e){return p1(t,e,null,!0),ht}function hi(t){$4(Y4,z4,t,!0)}function z4(t,e){for(let n=B4(e);n>=0;n=h1(e,n))wb(t,V4(e),!0)}function p1(t,e,n,i){let r=_e(),s=dt(),o=VA(2);if(s.firstUpdatePass&&g1(s,t,o,i),e!==di&&Sr(r,o,e)){let a=s.data[Oo()];_1(s,a,r,r[Je],t,r[o+1]=J4(e,n),i,o)}}function $4(t,e,n,i){let r=dt(),s=VA(2);r.firstUpdatePass&&g1(r,null,s,i);let o=_e();if(n!==di&&Sr(o,s,n)){let a=r.data[Oo()];if(y1(a,i)&&!m1(r,s)){let l=i?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(n=cv(l,n||"")),Zv(r,a,o,n,i)}else Q4(r,a,o,o[Je],o[s+1],o[s+1]=K4(t,e,n),i,s)}}function m1(t,e){return e>=t.expandoStartIndex}function g1(t,e,n,i){let r=t.data;if(r[n+1]===null){let s=r[Oo()],o=m1(t,n);y1(s,i)&&e===null&&!o&&(e=!1),e=H4(r,s,e,i),O4(r,s,e,n,o,i)}}function H4(t,e,n,i){let r=Nz(t),s=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(n=rv(null,t,e,n,i),n=uu(n,e.attrs,i),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==r)if(n=rv(r,t,e,n,i),s===null){let l=W4(t,e,i);l!==void 0&&Array.isArray(l)&&(l=rv(null,t,e,l[1],i),l=uu(l,e.attrs,i),q4(t,e,i,l))}else s=G4(t,e,i)}return s!==void 0&&(i?e.residualClasses=s:e.residualStyles=s),n}function W4(t,e,n){let i=n?e.classBindings:e.styleBindings;if(Sl(i)!==0)return t[No(i)]}function q4(t,e,n,i){let r=n?e.classBindings:e.styleBindings;t[No(r)]=i}function G4(t,e,n){let i,r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++){let o=t[s].hostAttrs;i=uu(i,o,n)}return uu(i,e.attrs,n)}function rv(t,e,n,i,r){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],i=uu(i,s.hostAttrs,r),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),i}function uu(t,e,n){let i=n?1:2,r=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?r=o:r===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),wb(t,o,n?!0:e[++s]))}return t===void 0?null:t}function K4(t,e,n){if(n==null||n==="")return dn;let i=[],r=Wn(n);if(Array.isArray(r))for(let s=0;s<r.length;s++)t(i,r[s],!0);else if(typeof r=="object")for(let s in r)r.hasOwnProperty(s)&&t(i,s,r[s]);else typeof r=="string"&&e(i,r);return i}function Y4(t,e,n){let i=String(e);i!==""&&!i.includes(" ")&&wb(t,i,n)}function Q4(t,e,n,i,r,s,o,a){r===di&&(r=dn);let l=0,c=0,u=0<r.length?r[0]:null,d=0<s.length?s[0]:null;for(;u!==null||d!==null;){let h=l<r.length?r[l+1]:void 0,p=c<s.length?s[c+1]:void 0,f=null,m;u===d?(l+=2,c+=2,h!==p&&(f=d,m=p)):d===null||u!==null&&u<d?(l+=2,f=u):(c+=2,f=d,m=p),f!==null&&_1(t,e,n,i,f,m,o,a),u=l<r.length?r[l]:null,d=c<s.length?s[c]:null}}function _1(t,e,n,i,r,s,o,a){if(!(e.type&3))return;let l=t.data,c=l[a+1],u=P4(c)?Qx(l,e,n,r,Sl(c),o):void 0;if(!hp(u)){hp(s)||R4(c)&&(s=Qx(l,null,n,r,a,o));let d=xA(Oo(),n);H$(i,o,d,r,s)}}function Qx(t,e,n,i,r,s){let o=e===null,a;for(;r>0;){let l=t[r],c=Array.isArray(l),u=c?l[1]:l,d=u===null,h=n[r+1];h===di&&(h=d?dn:void 0);let p=d?Jy(h,i):u===i?h:void 0;if(c&&!hp(p)&&(p=Jy(l,i)),hp(p)&&(a=p,o))return a;let f=t[r+1];r=o?No(f):Sl(f)}if(e!==null){let l=s?e.residualClasses:e.residualStyles;l!=null&&(a=Jy(l,i))}return a}function hp(t){return t!==void 0}function J4(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Ft(Wn(t)))),t}function y1(t,e){return(t.flags&(e?8:16))!==0}var Rfe=new RegExp(`^(\\d+)*(${uH}|${cH})*(.*)`);var X4=(t,e)=>null;function Jx(t,e){return X4(t,e)}function Z4(t,e,n,i){let r=e.tView,o=t[te]&4096?4096:16,a=Fp(t,r,n,o,null,e,null,null,null,i?.injector??null,i?.dehydratedView??null),l=t[e.index];a[mu]=l;let c=t[Li];return c!==null&&(a[Li]=c.createEmbeddedView(r)),Hb(r,a,n),a}function Xx(t,e){return!e||mM(t)}function e3(t,e,n,i=!0){let r=e[de];if(R$(r,e,t,n),i){let s=Cv(n,t),o=e[Je],a=Sb(o,t[To]);a!==null&&A$(r,t[Cn],o,e,a,s)}}var Sn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=t3;let t=e;return t})();function t3(){let t=fn();return b1(t,_e())}var n3=Sn,v1=class extends n3{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return Al(this._hostTNode,this._hostLView)}get injector(){return new Io(this._hostTNode,this._hostLView)}get parentInjector(){let e=vb(this._hostTNode,this._hostLView);if(GA(e)){let n=tp(e,this._hostLView),i=ep(e),r=n[de].data[i+8];return new Io(r,n)}else return new Io(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=Zx(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-En}createEmbeddedView(e,n,i){let r,s;typeof i=="number"?r=i:i!=null&&(r=i.index,s=i.injector);let o=Jx(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,r,Xx(this._hostTNode,o)),a}createComponent(e,n,i,r,s){let o=e&&!Xz(e),a;if(o)a=n;else{let f=n||{};a=f.index,i=f.injector,r=f.projectableNodes,s=f.environmentInjector||f.ngModuleRef}let l=o?e:new Ro(Cr(e)),c=i||this.parentInjector;if(!s&&l.ngModule==null){let m=(o?c:this.parentInjector).get(Jt,null);m&&(s=m)}let u=Cr(l.componentType??{}),d=Jx(this._lContainer,u?.id??null),h=d?.firstChild??null,p=l.create(c,r,h,s);return this.insertImpl(p.hostView,a,Xx(this._hostTNode,d)),p}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,i){let r=e._lView;if(yz(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=r[ut],c=new v1(l,l[Cn],l[ut]);c.detach(c.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return e3(o,r,s,i),e.attachToViewContainerRef(),iM(sv(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=Zx(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),i=Iv(this._lContainer,n);i&&(rp(sv(this._lContainer),n),EM(i[de],i))}detach(e){let n=this._adjustIndex(e,-1),i=Iv(this._lContainer,n);return i&&rp(sv(this._lContainer),n)!=null?new ko(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function Zx(t){return t[Zf]}function sv(t){return t[Zf]||(t[Zf]=[])}function b1(t,e){let n,i=e[t.index];return ci(i)?n=i:(n=JM(i,e,null,t),e[t.index]=n,Lp(e,n)),r3(n,e,t,i),new v1(n,t,e)}function i3(t,e){let n=t[Je],i=n.createComment(""),r=Hn(e,t),s=Sb(n,r);return op(n,s,i,V$(n,r),!1),i}var r3=a3,s3=(t,e,n)=>!1;function o3(t,e,n){return s3(t,e,n)}function a3(t,e,n,i){if(t[To])return;let r;n.type&8?r=Bi(i):r=i3(e,n),t[To]=r}function l3(t,e,n,i,r,s,o,a,l){let c=e.consts,u=Ml(e,t,4,o||null,Cl(c,a));Bb(e,n,u,Cl(c,l)),xp(e,u);let d=u.tView=Lb(2,u,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function he(t,e,n,i,r,s,o,a){let l=_e(),c=dt(),u=t+In,d=c.firstCreatePass?l3(u,c,l,e,n,i,r,s,o):c.data[u];Po(d,!1);let h=c3(c,l,d,t);Sp()&&Rp(c,l,h,d),ys(h,l);let p=JM(h,l,h,d);return l[u]=p,Lp(l,p),o3(p,d,l),wp(d)&&Ob(c,l,d),o!=null&&Fb(l,d,a),he}var c3=u3;function u3(t,e,n,i){return Dp(!0),e[Je].createComment("")}function d3(t,e,n,i,r,s){let o=e.consts,a=Cl(o,r),l=Ml(e,t,2,i,a);return Bb(e,n,l,Cl(o,s)),l.attrs!==null&&up(l,l.attrs,!1),l.mergedAttrs!==null&&up(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function b(t,e,n,i){let r=_e(),s=dt(),o=In+t,a=r[Je],l=s.firstCreatePass?d3(o,s,r,e,n,i):s.data[o],c=h3(s,r,l,a,e,t);r[o]=c;let u=wp(l);return Po(l,!0),AM(a,c,l),(l.flags&32)!==32&&Sp()&&Rp(s,r,c,l),Ez()===0&&ys(c,r),Iz(),u&&(Ob(s,r,l),Pb(s,l,r)),i!==null&&Fb(r,l),b}function v(){let t=fn();pb()?mb():(t=t.parent,Po(t,!1));let e=t;Tz(e)&&Sz(),Cz();let n=dt();return n.firstCreatePass&&(xp(n,t),hb(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&jz(e)&&Zv(n,e,_e(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Uz(e)&&Zv(n,e,_e(),e.stylesWithoutHost,!1),v}function J(t,e,n,i){return b(t,e,n,i),v(),J}var h3=(t,e,n,i,r,s)=>(Dp(!0),bM(i,r,Fz()));function f3(t,e,n,i,r){let s=e.consts,o=Cl(s,i),a=Ml(e,t,8,"ng-container",o);o!==null&&up(a,o,!0);let l=Cl(s,r);return Bb(e,n,a,l),e.queries!==null&&e.queries.elementStart(e,a),a}function Lo(t,e,n){let i=_e(),r=dt(),s=t+In,o=r.firstCreatePass?f3(s,r,i,e,n):r.data[s];Po(o,!0);let a=p3(r,i,o,t);return i[s]=a,Sp()&&Rp(r,i,a,o),ys(a,i),wp(o)&&(Ob(r,i,o),Pb(r,o,i)),n!=null&&Fb(i,o),Lo}function Vo(){let t=fn(),e=dt();return pb()?mb():(t=t.parent,Po(t,!1)),e.firstCreatePass&&(xp(e,t),hb(t)&&e.queries.elementEnd(t)),Vo}function qb(t,e,n){return Lo(t,e,n),Vo(),qb}var p3=(t,e,n,i)=>(Dp(!0),D$(e[Je],""));function ft(){return _e()}function Bp(t,e,n){let i=_e(),r=Cp();if(Sr(i,r,e)){let s=dt(),o=Tp();Vb(s,o,i,t,e,i[Je],n,!0)}return Bp}var fp="en-US";var m3=fp;function g3(t){LU(t,"Expected localeId to be defined"),typeof t=="string"&&(m3=t.toLowerCase().replace(/_/g,"-"))}function Cs(t){return!!t&&typeof t.then=="function"}function Gb(t){return!!t&&typeof t.subscribe=="function"}function B(t,e,n,i){let r=_e(),s=dt(),o=fn();return y3(s,r,r[Je],o,t,e,i),B}function _3(t,e,n,i){let r=t.cleanup;if(r!=null)for(let s=0;s<r.length-1;s+=2){let o=r[s];if(o===n&&r[s+1]===i){let a=e[au],l=r[s+2];return a.length>l?a[l]:null}typeof o=="string"&&(s+=2)}return null}function y3(t,e,n,i,r,s,o){let a=wp(i),c=t.firstCreatePass&&e1(t),u=e[Un],d=ZM(e),h=!0;if(i.type&3||o){let m=Hn(i,e),g=o?o(m):m,w=d.length,O=o?j=>o(Bi(j[i.index])):i.index,Y=null;if(!o&&a&&(Y=_3(t,e,r,i.index)),Y!==null){let j=Y.__ngLastListenerFn__||Y;j.__ngNextListenerFn__=s,Y.__ngLastListenerFn__=s,h=!1}else{s=tA(i,e,u,s,!1);let j=n.listen(g,r,s);d.push(s,j),c&&c.push(r,O,w,w+1)}}else s=tA(i,e,u,s,!1);let p=i.outputs,f;if(h&&p!==null&&(f=p[r])){let m=f.length;if(m)for(let g=0;g<m;g+=2){let w=f[g],O=f[g+1],Ne=e[w][O].subscribe(s),se=d.length;d.push(s,Ne),c&&c.push(r,i.index,se,-(se+1))}}}function eA(t,e,n,i){try{return Oi(6,e,n),n(i)!==!1}catch(r){return t1(t,r),!1}finally{Oi(7,e,n)}}function tA(t,e,n,i,r){return function s(o){if(o===Function)return i;let a=t.componentOffset>-1?bs(t.index,e):e;Ub(a);let l=eA(e,n,i,o),c=s.__ngNextListenerFn__;for(;c;)l=eA(e,n,c,o)&&l,c=c.__ngNextListenerFn__;return r&&l===!1&&o.preventDefault(),l}}function G(t=1){return Oz(t)}function v3(t,e){let n=null,i=tz(t);for(let r=0;r<e.length;r++){let s=e[r];if(s==="*"){n=r;continue}if(i===null?gA(t,s,!0):rz(i,s))return r}return n}function Ts(t){let e=_e()[li][Cn];if(!e.projection){let n=t?t.length:1,i=e.projection=rM(n,null),r=i.slice(),s=e.child;for(;s!==null;){let o=t?v3(s,t):0;o!==null&&(r[o]?r[o].projectionNext=s:i[o]=s,r[o]=s),s=s.next}}}function Ss(t,e=0,n){let i=_e(),r=dt(),s=Ml(r,In+t,16,null,n||null);s.projection===null&&(s.projection=e),mb(),(!i[Xf]||FA())&&(s.flags&32)!==32&&z$(r,i,s)}function xu(t,e,n){return jp(t,"",e,"",n),xu}function jp(t,e,n,i,r){let s=_e(),o=d1(s,e,n,i);if(o!==di){let a=dt(),l=Tp();Vb(a,l,s,t,o,s[Je],r,!1)}return jp}function b3(t,e,n,i){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=i}function kl(t){let e=xz();return MA(e,In+t)}function S(t,e=""){let n=_e(),i=dt(),r=t+In,s=i.firstCreatePass?Ml(i,r,1,e,null):i.data[r],o=w3(i,n,s,e,t);n[r]=o,Sp()&&Rp(i,n,o,s),Po(s,!1)}var w3=(t,e,n,i,r)=>(Dp(!0),T$(e[Je],i));function at(t){return ze("",t,""),at}function ze(t,e,n){let i=_e(),r=d1(i,t,e,n);return r!==di&&XH(i,Oo(),r),ze}function E3(t,e,n){let i=dt();if(i.firstCreatePass){let r=_s(t);eb(n,i.data,i.blueprint,r,!0),eb(e,i.data,i.blueprint,r,!1)}}function eb(t,e,n,i,r){if(t=Qt(t),Array.isArray(t))for(let s=0;s<t.length;s++)eb(t[s],e,n,i,r);else{let s=dt(),o=_e(),a=fn(),l=Tl(t)?t:Qt(t.provide),c=uM(t),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Tl(t)||!t.multi){let p=new xo(c,r,y),f=av(l,e,r?u:u+h,d);f===-1?(_v(ip(a,o),s,l),ov(s,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(p),o.push(p)):(n[f]=p,o[f]=p)}else{let p=av(l,e,u+h,d),f=av(l,e,u,u+h),m=p>=0&&n[p],g=f>=0&&n[f];if(r&&!g||!r&&!m){_v(ip(a,o),s,l);let w=T3(r?C3:I3,n.length,r,i,c);!r&&g&&(n[f].providerFactory=w),ov(s,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(w),o.push(w)}else{let w=w1(n[r?f:p],c,!r&&i);ov(s,t,p>-1?p:f,w)}!r&&i&&g&&n[f].componentProviders++}}}function ov(t,e,n,i){let r=Tl(e),s=o$(e);if(r||s){let l=(s?Qt(e.useClass):e).prototype.ngOnDestroy;if(l){let c=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){let u=c.indexOf(n);u===-1?c.push(n,[i,l]):c[u+1].push(i,l)}else c.push(n,l)}}}function w1(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function av(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function I3(t,e,n,i){return tb(this.multi,[])}function C3(t,e,n,i){let r=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Ao(n,n[de],this.providerFactory.index,i);s=a.slice(0,o),tb(r,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],tb(r,s);return s}function tb(t,e){for(let n=0;n<t.length;n++){let i=t[n];e.push(i())}return e}function T3(t,e,n,i,r){let s=new xo(t,n,y);return s.multi=[],s.index=e,s.componentProviders=0,w1(s,r,i&&!n),s}function Zt(t,e=[]){return n=>{n.providersResolver=(i,r)=>E3(i,r?r(t):t,e)}}var vs=class{},du=class{};var nb=class extends vs{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new dp(this);let r=bA(e);this._bootstrapComponents=pM(r.bootstrap),this._r3Injector=dM(e,n,[{provide:vs,useValue:this},{provide:Is,useValue:this.componentFactoryResolver},...i],Ft(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},ib=class extends du{constructor(e){super(),this.moduleType=e}create(e){return new nb(this.moduleType,e,[])}};var pp=class extends vs{constructor(e){super(),this.componentFactoryResolver=new dp(this),this.instance=null;let n=new cu([...e.providers,{provide:vs,useValue:this},{provide:Is,useValue:this.componentFactoryResolver}],e.parent||kp(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Up(t,e,n=null){return new pp({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var S3=(()=>{let e=class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let r=aM(!1,i.type),s=r.length>0?Up([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,s)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=T({token:e,providedIn:"environment",factory:()=>new e(_(Jt))});let t=e;return t})();function Be(t){Vp("NgStandalone"),t.getStandaloneInjector=e=>e.get(S3).getOrCreateStandaloneInjector(t)}function kr(t,e,n){let i=Ip()+t,r=_e();return r[i]===di?Wb(r,i,n?e.call(n):e()):M4(r,i)}function Au(t,e,n,i){return I1(_e(),Ip(),t,e,n,i)}function zp(t,e,n,i,r){return D3(_e(),Ip(),t,e,n,i,r)}function E1(t,e){let n=t[e];return n===di?void 0:n}function I1(t,e,n,i,r,s){let o=e+n;return Sr(t,o,r)?Wb(t,o+1,s?i.call(s,r):i(r)):E1(t,o+1)}function D3(t,e,n,i,r,s,o){let a=e+n;return k4(t,a,r,s)?Wb(t,a+2,o?i.call(o,r,s):i(r,s)):E1(t,a+2)}function et(t,e){let n=dt(),i,r=t+In;n.firstCreatePass?(i=x3(e,n.pipeRegistry),n.data[r]=i,i.onDestroy&&(n.destroyHooks??=[]).push(r,i.onDestroy)):i=n.data[r];let s=i.factory||(i.factory=So(i.type,!0)),o,a=un(y);try{let l=np(!1),c=s();return np(l),b3(n,_e(),r,c),c}finally{un(a)}}function x3(t,e){if(e)for(let n=e.length-1;n>=0;n--){let i=e[n];if(t===i.name)return i}}function tt(t,e,n){let i=t+In,r=_e(),s=MA(r,i);return A3(r,i)?I1(r,Ip(),e,s.transform,n,s):s.transform(n)}function A3(t,e){return t[de].data[e].pure}function M3(){return this._results[Symbol.iterator]()}var mp=class t{get changes(){return this._changes||(this._changes=new ye)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=M3)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let i=e$(e);(this._changesDetected=!Zz(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}},zn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=N3;let t=e;return t})(),k3=zn,R3=class extends k3{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){let r=Z4(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:i});return new ko(r)}};function N3(){return Kb(fn(),_e())}function Kb(t,e){return t.type&4?new R3(e,t,Al(t,e)):null}var rb=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},sb=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let i=e.contentQueries!==null?e.contentQueries[0]:n.length,r=[];for(let s=0;s<i;s++){let o=n.getByIndex(s),a=this.queries[o.indexInDeclarationView];r.push(a.clone())}return new t(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)T1(e,n).matches!==null&&this.queries[n].setDirty()}},ob=class{constructor(e,n,i=null){this.predicate=e,this.flags=n,this.read=i}},ab=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){let r=n!==null?n.length:0,s=this.getByIndex(i).embeddedTView(e,r);s&&(s.indexInDeclarationView=i,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},lb=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let s=i[r];this.matchTNodeWithReadOption(e,n,P3(n,s)),this.matchTNodeWithReadOption(e,n,qf(n,e,s,!1,!1))}else i===zn?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,qf(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===ce||r===Sn||r===zn&&n.type&4)this.addMatch(n.index,-2);else{let s=qf(n,e,r,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,i)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function P3(t,e){let n=t.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1]}return null}function O3(t,e){return t.type&11?Al(t,e):t.type&4?Kb(t,e):null}function F3(t,e,n,i){return n===-1?O3(e,t):n===-2?L3(t,e,i):Ao(t,t[de],n,e)}function L3(t,e,n){if(n===ce)return Al(e,t);if(n===zn)return Kb(e,t);if(n===Sn)return b1(e,t)}function C1(t,e,n,i){let r=e[Li].queries[i];if(r.matches===null){let s=t.data,o=n.matches,a=[];for(let l=0;l<o.length;l+=2){let c=o[l];if(c<0)a.push(null);else{let u=s[c];a.push(F3(e,u,o[l+1],n.metadata.read))}}r.matches=a}return r.matches}function cb(t,e,n,i){let r=t.queries.getByIndex(n),s=r.matches;if(s!==null){let o=C1(t,e,r,n);for(let a=0;a<s.length;a+=2){let l=s[a];if(l>0)i.push(o[a/2]);else{let c=s[a+1],u=e[-l];for(let d=En;d<u.length;d++){let h=u[d];h[mu]===h[ut]&&cb(h[de],h,c,i)}if(u[El]!==null){let d=u[El];for(let h=0;h<d.length;h++){let p=d[h];cb(p[de],p,c,i)}}}}}return i}function Ds(t){let e=_e(),n=dt(),i=BA();gb(i+1);let r=T1(n,i);if(t.dirty&&_z(e)===((r.metadata.flags&2)===2)){if(r.matches===null)t.reset([]);else{let s=r.crossesNgTemplate?cb(n,e,i,[]):C1(n,e,r,i);t.reset(s,mH),t.notifyOnChanges()}return!0}return!1}function Bo(t,e,n){let i=dt();i.firstCreatePass&&(j3(i,new ob(t,e,n),-1),(e&2)===2&&(i.staticViewQueries=!0)),B3(i,_e(),e)}function xs(){return V3(_e(),BA())}function V3(t,e){return t[Li].queries[e].queryList}function B3(t,e,n){let i=new mp((n&4)===4);NH(t,e,i,i.destroy),e[Li]===null&&(e[Li]=new sb),e[Li].queries.push(new rb(i))}function j3(t,e,n){t.queries===null&&(t.queries=new ab),t.queries.track(new lb(e,n))}function T1(t,e){return t.queries.getByIndex(e)}var $p=new M("Application Initializer"),S1=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=D($p,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let s of this.appInits){let o=s();if(Cs(o))i.push(o);else if(Gb(o)){let a=new Promise((l,c)=>{o.subscribe({complete:l,error:c})});i.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(s=>{this.reject(s)}),i.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Hp=(()=>{let e=class e{log(i){console.log(i)}warn(i){console.warn(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function U3(){return typeof $localize<"u"&&$localize.locale||fp}var Wp=new M("LocaleId",{providedIn:"root",factory:()=>D(Wp,me.Optional|me.SkipSelf)||U3()});var Rl=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ot(!1)}add(){this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ub=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},qp=(()=>{let e=class e{compileModuleSync(i){return new ib(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let r=this.compileModuleSync(i),s=bA(i),o=pM(s.declarations).reduce((a,l)=>{let c=Cr(l);return c&&a.push(new Ro(c)),a},[]);return new ub(r,o)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Yb=new M(""),Mu=new M(""),Gp=(()=>{let e=class e{constructor(i,r,s){this._ngZone=i,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Qb||(z3(s),s.addToWindow(r)),this._watchAngularEvents(),i.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{L.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let i=this._callbacks.pop();clearTimeout(i.timeoutId),i.doneCb(this._didWork)}this._didWork=!1});else{let i=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(i)?(clearTimeout(r.timeoutId),!1):!0),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(i=>({source:i.source,creationLocation:i.creationLocation,data:i.data})):[]}addCallback(i,r,s){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),i(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:i,timeoutId:o,updateCb:s})}whenStable(i,r,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(i,r,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(i){this.registry.registerApplication(i,this)}unregisterApplication(i){this.registry.unregisterApplication(i)}findProviders(i,r,s){return[]}};e.\u0275fac=function(r){return new(r||e)(_(L),_(Kp),_(Mu))},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})(),Kp=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(i,r){this._applications.set(i,r)}unregisterApplication(i){this._applications.delete(i)}unregisterAllApplications(){this._applications.clear()}getTestability(i){return this._applications.get(i)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(i,r=!0){return Qb?.findTestabilityInTree(this,i,r)??null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function z3(t){Qb=t}var Qb,Yf=null;var D1=new M("PlatformDestroyListeners"),ku=new M("appBootstrapListener");function $3(){zD(()=>{throw new x(600,!1)})}function H3(t){return t.isBoundToModule}function W3(t=[]){if(Yf)return Yf;let e=G3(t);return Yf=e,$3(),q3(e),e}function q3(t){t.get(Ib,null)?.forEach(n=>n())}function x1(t){try{let{rootComponent:e,appProviders:n,platformProviders:i}=t,r=W3(i),s=[Z3(),...n||[]],a=new pp({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(L);return l.run(()=>{a.resolveInjectorInitializers();let c=a.get(hn,null),u;l.runOutsideAngular(()=>{u=l.onError.subscribe({next:p=>{c.handleError(p)}})});let d=()=>a.destroy(),h=r.get(D1);return h.add(d),a.onDestroy(()=>{u.unsubscribe(),h.delete(d)}),Y3(c,l,()=>{let p=a.get(S1);return p.runInitializers(),p.donePromise.then(()=>{let f=a.get(Wp,fp);g3(f||fp);let m=a.get(Dn);return e!==void 0&&m.bootstrap(e),m})})})}catch(e){return Promise.reject(e)}}function G3(t=[],e){return Se.create({name:e,providers:[{provide:Mp,useValue:"platform"},{provide:D1,useValue:new Set([()=>Yf=null])},...t]})}function K3(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}function Y3(t,e,n){try{let i=n();return Cs(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}var Dn=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=D(A1),this.zoneIsStable=D(l1),this.componentTypes=[],this.components=[],this.isStable=D(Rl).hasPendingTasks.pipe(St(i=>i?F(!1):this.zoneIsStable),ul(),hl()),this._injector=D(Jt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){let s=i instanceof ap;if(!this._injector.get(S1).done){let f="Cannot bootstrap as there are still asynchronous initializers running."+(!s&&vA(i)?"":" Bootstrap components in the `ngDoBootstrap` method of the root module.");throw new x(405,!1)}let a;s?a=i:a=this._injector.get(Is).resolveComponentFactory(i),this.componentTypes.push(a.componentType);let l=H3(a)?void 0:this._injector.get(vs),c=r||a.selector,u=a.create(Se.NULL,[],c,l),d=u.location.nativeElement,h=u.injector.get(Yb,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),lv(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new x(101,!1);try{this._runningTick=!0;for(let i of this._views)i.detectChanges()}catch(i){this.internalErrorHandler(i)}finally{this._runningTick=!1}}attachView(i){let r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){let r=i;lv(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let r=this._injector.get(ku,[]);[...this._bootstrapListeners,...r].forEach(s=>s(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>lv(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new x(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function lv(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var A1=new M("",{providedIn:"root",factory:()=>D(hn).handleError.bind(void 0)});function Q3(){let t=D(L),e=D(hn);return n=>t.runOutsideAngular(()=>e.handleError(n))}var J3=(()=>{let e=class e{constructor(){this.zone=D(L),this.applicationRef=D(Dn)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function X3(t){return[{provide:L,useFactory:t},{provide:vu,multi:!0,useFactory:()=>{let e=D(J3,{optional:!0});return()=>e.initialize()}},{provide:A1,useFactory:Q3},{provide:l1,useFactory:c1}]}function Z3(t){let e=X3(()=>new L(K3(t)));return xl([[],e])}var M1=(()=>{let e=class e{constructor(i){}};e.\u0275fac=function(r){return new(r||e)(_(Dn))},e.\u0275mod=H({type:e}),e.\u0275inj=$({});let t=e;return t})();function pn(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function k1(t,e){let n=Cr(t),i=e.elementInjector||kp();return new Ro(n).create(i,e.projectableNodes,e.hostElement,e.environmentInjector)}function R1(t){let e=Cr(t);if(!e)return null;let n=new Ro(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Xb=null;function Hi(){return Xb}function B1(t){Xb||(Xb=t)}var Yp=class{},K=new M("DocumentToken"),r0=(()=>{let e=class e{historyGo(i){throw new Error("Not implemented")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=T({token:e,factory:()=>(()=>D(t5))(),providedIn:"platform"});let t=e;return t})(),j1=new M("Location Initialized"),t5=(()=>{let e=class e extends r0{constructor(){super(),this._doc=D(K),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Hi().getBaseHref(this._doc)}onPopState(i){let r=Hi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){let r=Hi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,s){this._history.pushState(i,r,s)}replaceState(i,r,s){this._history.replaceState(i,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=T({token:e,factory:()=>(()=>new e)(),providedIn:"platform"});let t=e;return t})();function s0(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function N1(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,i=n-(t[n-1]==="/"?1:0);return t.slice(0,i)+t.slice(n)}function Rr(t){return t&&t[0]!=="?"?"?"+t:t}var Nr=(()=>{let e=class e{historyGo(i){throw new Error("Not implemented")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=T({token:e,factory:()=>(()=>D(o0))(),providedIn:"root"});let t=e;return t})(),U1=new M("appBaseHref"),o0=(()=>{let e=class e extends Nr{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??D(K).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return s0(this._baseHref,i)}path(i=!1){let r=this._platformLocation.pathname+Rr(this._platformLocation.search),s=this._platformLocation.hash;return s&&i?`${r}${s}`:r}pushState(i,r,s,o){let a=this.prepareExternalUrl(s+Rr(o));this._platformLocation.pushState(i,r,a)}replaceState(i,r,s,o){let a=this.prepareExternalUrl(s+Rr(o));this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(_(r0),_(U1,8))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),z1=(()=>{let e=class e extends Nr{constructor(i,r){super(),this._platformLocation=i,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}path(i=!1){let r=this._platformLocation.hash;return r==null&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(i){let r=s0(this._baseHref,i);return r.length>0?"#"+r:r}pushState(i,r,s,o){let a=this.prepareExternalUrl(s+Rr(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(i,r,a)}replaceState(i,r,s,o){let a=this.prepareExternalUrl(s+Rr(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(_(r0),_(U1,8))},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})(),Wi=(()=>{let e=class e{constructor(i){this._subject=new ye,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let r=this._locationStrategy.getBaseHref();this._basePath=r5(N1(P1(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+Rr(r))}normalize(i){return e.stripTrailingSlash(i5(this._basePath,P1(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",s=null){this._locationStrategy.pushState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Rr(r)),s)}replaceState(i,r="",s=null){this._locationStrategy.replaceState(s,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+Rr(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{let r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(s=>s(i,r))}subscribe(i,r,s){return this._subject.subscribe({next:i,error:r,complete:s})}};e.normalizeQueryParams=Rr,e.joinWithSlash=s0,e.stripTrailingSlash=N1,e.\u0275fac=function(r){return new(r||e)(_(Nr))},e.\u0275prov=T({token:e,factory:()=>n5(),providedIn:"root"});let t=e;return t})();function n5(){return new Wi(_(Nr))}function i5(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function P1(t){return t.replace(/\/index.html$/,"")}function r5(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Qp(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let i=n.indexOf("="),[r,s]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}var Jb=/\s+/,O1=[],Ru=(()=>{let e=class e{constructor(i,r,s,o){this._iterableDiffers=i,this._keyValueDiffers=r,this._ngEl=s,this._renderer=o,this.initialClasses=O1,this.stateMap=new Map}set klass(i){this.initialClasses=i!=null?i.trim().split(Jb):O1}set ngClass(i){this.rawClass=typeof i=="string"?i.trim().split(Jb):i}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let i=this.rawClass;if(Array.isArray(i)||i instanceof Set)for(let r of i)this._updateState(r,!0);else if(i!=null)for(let r of Object.keys(i))this._updateState(r,!!i[r]);this._applyStateDiff()}_updateState(i,r){let s=this.stateMap.get(i);s!==void 0?(s.enabled!==r&&(s.changed=!0,s.enabled=r),s.touched=!0):this.stateMap.set(i,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let i of this.stateMap){let r=i[0],s=i[1];s.changed?(this._toggleClass(r,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),s.touched=!1}}_toggleClass(i,r){i=i.trim(),i.length>0&&i.split(Jb).forEach(s=>{r?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(r){return new(r||e)(y(Tu),y(Su),y(ce),y(ui))},e.\u0275dir=ve({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var Zb=class{constructor(e,n,i,r){this.$implicit=e,this.ngForOf=n,this.index=i,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},qi=(()=>{let e=class e{set ngForOf(i){this._ngForOf=i,this._ngForOfDirty=!0}set ngForTrackBy(i){this._trackByFn=i}get ngForTrackBy(){return this._trackByFn}constructor(i,r,s){this._viewContainer=i,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(i){i&&(this._template=i)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let i=this._ngForOf;if(!this._differ&&i)if(!1)try{}catch{}else this._differ=this._differs.find(i).create(this.ngForTrackBy)}if(this._differ){let i=this._differ.diff(this._ngForOf);i&&this._applyChanges(i)}}_applyChanges(i){let r=this._viewContainer;i.forEachOperation((s,o,a)=>{if(s.previousIndex==null)r.createEmbeddedView(this._template,new Zb(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)r.remove(o===null?void 0:o);else if(o!==null){let l=r.get(o);r.move(l,a),F1(l,s)}});for(let s=0,o=r.length;s<o;s++){let l=r.get(s).context;l.index=s,l.count=o,l.ngForOf=this._ngForOf}i.forEachIdentityChange(s=>{let o=r.get(s.currentIndex);F1(o,s)})}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(y(Sn),y(zn),y(Tu))},e.\u0275dir=ve({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function F1(t,e){t.context.$implicit=e.item}var xn=(()=>{let e=class e{constructor(i,r){this._viewContainer=i,this._context=new e0,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(i){this._context.$implicit=this._context.ngIf=i,this._updateView()}set ngIfThen(i){L1("ngIfThen",i),this._thenTemplateRef=i,this._thenViewRef=null,this._updateView()}set ngIfElse(i){L1("ngIfElse",i),this._elseTemplateRef=i,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(i,r){return!0}};e.\u0275fac=function(r){return new(r||e)(y(Sn),y(zn))},e.\u0275dir=ve({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),e0=class{constructor(){this.$implicit=null,this.ngIf=null}};function L1(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Ft(e)}'.`)}var $1=(()=>{let e=class e{constructor(i,r,s){this._ngEl=i,this._differs=r,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(i){this._ngStyle=i,!this._differ&&i&&(this._differ=this._differs.find(i).create())}ngDoCheck(){if(this._differ){let i=this._differ.diff(this._ngStyle);i&&this._applyChanges(i)}}_setStyle(i,r){let[s,o]=i.split("."),a=s.indexOf("-")===-1?void 0:ji.DashCase;r!=null?this._renderer.setStyle(this._ngEl.nativeElement,s,o?`${r}${o}`:r,a):this._renderer.removeStyle(this._ngEl.nativeElement,s,a)}_applyChanges(i){i.forEachRemovedItem(r=>this._setStyle(r.key,null)),i.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),i.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}};e.\u0275fac=function(r){return new(r||e)(y(ce),y(Su),y(ui))},e.\u0275dir=ve({type:e,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0});let t=e;return t})(),H1=(()=>{let e=class e{constructor(i){this._viewContainerRef=i,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(i){if(this._shouldRecreateView(i)){let r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let s=this._createContextForwardProxy();this._viewRef=r.createEmbeddedView(this.ngTemplateOutlet,s,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(i){return!!i.ngTemplateOutlet||!!i.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(i,r,s)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,r,s):!1,get:(i,r,s)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,r,s)}})}};e.\u0275fac=function(r){return new(r||e)(y(Sn))},e.\u0275dir=ve({type:e,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Dt]});let t=e;return t})();function s5(t,e){return new x(2100,!1)}var t0=class{createSubscription(e,n){return Rb(()=>e.subscribe({next:n,error:i=>{throw i}}))}dispose(e){Rb(()=>e.unsubscribe())}},n0=class{createSubscription(e,n){return e.then(n,i=>{throw i})}dispose(e){}},o5=new n0,a5=new t0,jo=(()=>{let e=class e{constructor(i){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=i}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(i){return this._obj?i!==this._obj?(this._dispose(),this.transform(i)):this._latestValue:(i&&this._subscribe(i),this._latestValue)}_subscribe(i){this._obj=i,this._strategy=this._selectStrategy(i),this._subscription=this._strategy.createSubscription(i,r=>this._updateLatestValue(i,r))}_selectStrategy(i){if(Cs(i))return o5;if(Gb(i))return a5;throw s5(e,i)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(i,r){i===this._obj&&(this._latestValue=r,this._ref.markForCheck())}};e.\u0275fac=function(r){return new(r||e)(y(Mr,16))},e.\u0275pipe=pu({name:"async",type:e,pure:!1,standalone:!0});let t=e;return t})();function l5(t,e){return{key:t,value:e}}var W1=(()=>{let e=class e{constructor(i){this.differs=i,this.keyValues=[],this.compareFn=V1}transform(i,r=V1){if(!i||!(i instanceof Map)&&typeof i!="object")return null;this.differ||(this.differ=this.differs.find(i).create());let s=this.differ.diff(i),o=r!==this.compareFn;return s&&(this.keyValues=[],s.forEachItem(a=>{this.keyValues.push(l5(a.key,a.currentValue))})),(s||o)&&(this.keyValues.sort(r),this.compareFn=r),this.keyValues}};e.\u0275fac=function(r){return new(r||e)(y(Su,16))},e.\u0275pipe=pu({name:"keyvalue",type:e,pure:!1,standalone:!0});let t=e;return t})();function V1(t,e){let n=t.key,i=e.key;if(n===i)return 0;if(n===void 0)return 1;if(i===void 0)return-1;if(n===null)return 1;if(i===null)return-1;if(typeof n=="string"&&typeof i=="string")return n<i?-1:1;if(typeof n=="number"&&typeof i=="number")return n-i;if(typeof n=="boolean"&&typeof i=="boolean")return n<i?-1:1;let r=String(n),s=String(i);return r==s?0:r<s?-1:1}var fi=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=$({});let t=e;return t})(),a0="browser",c5="server";function q1(t){return t===a0}function l0(t){return t===c5}var G1=(()=>{let e=class e{};e.\u0275prov=T({token:e,providedIn:"root",factory:()=>new i0(_(K),window)});let t=e;return t})(),i0=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;let n=u5(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){let n=e.getBoundingClientRect(),i=n.left+this.window.pageXOffset,r=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}};function u5(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let s=r.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=i.nextNode()}}return null}var Nl=class{};var Pu=class{},Xp=class{},Uo=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let i=n.indexOf(":");if(i>0){let r=n.slice(0,i),s=r.toLowerCase(),o=n.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,i)=>{this.setHeaderEntries(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,n);let r=(e.op==="a"?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let i=(Array.isArray(n)?n:[n]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var u0=class{encodeKey(e){return K1(e)}encodeValue(e){return K1(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function f5(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,a]=s==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=n.get(o)||[];l.push(a),n.set(o,l)}),n}var p5=/%(\d[a-f0-9])/gi,m5={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function K1(t){return encodeURIComponent(t).replace(p5,(e,n)=>m5[n]??e)}function Jp(t){return`${t}`}var Ms=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new u0,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=f5(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let i=e.fromObject[n],r=Array.isArray(i)?i.map(Jp):[Jp(i)];this.map.set(n,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(s=>{n.push({param:i,value:s,op:"a"})}):n.push({param:i,value:r,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Jp(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(Jp(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var d0=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function g5(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Y1(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function Q1(t){return typeof Blob<"u"&&t instanceof Blob}function J1(t){return typeof FormData<"u"&&t instanceof FormData}function _5(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var Nu=class t{constructor(e,n,i,r){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(g5(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers||(this.headers=new Uo),this.context||(this.context=new d0),!this.params)this.params=new Ms,this.urlWithParams=n;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),l=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+l+o}}}serializeBody(){return this.body===null?null:Y1(this.body)||Q1(this.body)||J1(this.body)||_5(this.body)||typeof this.body=="string"?this.body:this.body instanceof Ms?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||J1(this.body)?null:Q1(this.body)?this.body.type||null:Y1(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Ms?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.body!==void 0?e.body:this.body,o=e.withCredentials!==void 0?e.withCredentials:this.withCredentials,a=e.reportProgress!==void 0?e.reportProgress:this.reportProgress,l=e.headers||this.headers,c=e.params||this.params,u=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),c)),new t(n,i,s,{params:c,headers:l,context:u,reportProgress:a,responseType:r,withCredentials:o})}},Pl=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Pl||{}),Ou=class{constructor(e,n=200,i="OK"){this.headers=e.headers||new Uo,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},h0=class t extends Ou{constructor(e={}){super(e),this.type=Pl.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Zp=class t extends Ou{constructor(e={}){super(e),this.type=Pl.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},em=class extends Ou{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}};function c0(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var zo=(()=>{let e=class e{constructor(i){this.handler=i}request(i,r,s={}){let o;if(i instanceof Nu)o=i;else{let c;s.headers instanceof Uo?c=s.headers:c=new Uo(s.headers);let u;s.params&&(s.params instanceof Ms?u=s.params:u=new Ms({fromObject:s.params})),o=new Nu(i,r,s.body!==void 0?s.body:null,{headers:c,context:s.context,params:u,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=F(o).pipe(Ir(c=>this.handler.handle(c)));if(i instanceof Nu||s.observe==="events")return a;let l=a.pipe(Ue(c=>c instanceof Zp));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return l.pipe(U(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return l.pipe(U(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return l.pipe(U(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return l.pipe(U(c=>c.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(i,r={}){return this.request("DELETE",i,r)}get(i,r={}){return this.request("GET",i,r)}head(i,r={}){return this.request("HEAD",i,r)}jsonp(i,r){return this.request("JSONP",i,{params:new Ms().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,r={}){return this.request("OPTIONS",i,r)}patch(i,r,s={}){return this.request("PATCH",i,c0(s,r))}post(i,r,s={}){return this.request("POST",i,c0(s,r))}put(i,r,s={}){return this.request("PUT",i,c0(s,r))}};e.\u0275fac=function(r){return new(r||e)(_(Pu))},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})();function tk(t,e){return e(t)}function y5(t,e){return(n,i)=>e.intercept(n,{handle:r=>t(r,i)})}function v5(t,e,n){return(i,r)=>zi(n,()=>e(i,s=>t(s,r)))}var b5=new M(""),f0=new M(""),w5=new M(""),E5=new M("");function I5(){let t=null;return(e,n)=>{t===null&&(t=(D(b5,{optional:!0})??[]).reduceRight(y5,tk));let i=D(Rl),r=i.add();return t(e,n).pipe(Ri(()=>i.remove(r)))}}var X1=(()=>{let e=class e extends Pu{constructor(i,r){super(),this.backend=i,this.injector=r,this.chain=null,this.pendingTasks=D(Rl);let s=D(E5,{optional:!0});this.backend=s??i}handle(i){if(this.chain===null){let s=Array.from(new Set([...this.injector.get(f0),...this.injector.get(w5,[])]));this.chain=s.reduceRight((o,a)=>v5(o,a,this.injector),tk)}let r=this.pendingTasks.add();return this.chain(i,s=>this.backend.handle(s)).pipe(Ri(()=>this.pendingTasks.remove(r)))}};e.\u0275fac=function(r){return new(r||e)(_(Xp),_(Jt))},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})();var C5=/^\)\]\}',?\n/;function T5(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var Z1=(()=>{let e=class e{constructor(i){this.xhrFactory=i}handle(i){if(i.method==="JSONP")throw new x(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Le(r.\u0275loadImpl()):F(null)).pipe(St(()=>new X(o=>{let a=r.build();if(a.open(i.method,i.urlWithParams),i.withCredentials&&(a.withCredentials=!0),i.headers.forEach((g,w)=>a.setRequestHeader(g,w.join(","))),i.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!i.headers.has("Content-Type")){let g=i.detectContentTypeHeader();g!==null&&a.setRequestHeader("Content-Type",g)}if(i.responseType){let g=i.responseType.toLowerCase();a.responseType=g!=="json"?g:"text"}let l=i.serializeBody(),c=null,u=()=>{if(c!==null)return c;let g=a.statusText||"OK",w=new Uo(a.getAllResponseHeaders()),O=T5(a)||i.url;return c=new h0({headers:w,status:a.status,statusText:g,url:O}),c},d=()=>{let{headers:g,status:w,statusText:O,url:Y}=u(),j=null;w!==204&&(j=typeof a.response>"u"?a.responseText:a.response),w===0&&(w=j?200:0);let Ne=w>=200&&w<300;if(i.responseType==="json"&&typeof j=="string"){let se=j;j=j.replace(C5,"");try{j=j!==""?JSON.parse(j):null}catch(De){j=se,Ne&&(Ne=!1,j={error:De,text:j})}}Ne?(o.next(new Zp({body:j,headers:g,status:w,statusText:O,url:Y||void 0})),o.complete()):o.error(new em({error:j,headers:g,status:w,statusText:O,url:Y||void 0}))},h=g=>{let{url:w}=u(),O=new em({error:g,status:a.status||0,statusText:a.statusText||"Unknown Error",url:w||void 0});o.error(O)},p=!1,f=g=>{p||(o.next(u()),p=!0);let w={type:Pl.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(w.total=g.total),i.responseType==="text"&&a.responseText&&(w.partialText=a.responseText),o.next(w)},m=g=>{let w={type:Pl.UploadProgress,loaded:g.loaded};g.lengthComputable&&(w.total=g.total),o.next(w)};return a.addEventListener("load",d),a.addEventListener("error",h),a.addEventListener("timeout",h),a.addEventListener("abort",h),i.reportProgress&&(a.addEventListener("progress",f),l!==null&&a.upload&&a.upload.addEventListener("progress",m)),a.send(l),o.next({type:Pl.Sent}),()=>{a.removeEventListener("error",h),a.removeEventListener("abort",h),a.removeEventListener("load",d),a.removeEventListener("timeout",h),i.reportProgress&&(a.removeEventListener("progress",f),l!==null&&a.upload&&a.upload.removeEventListener("progress",m)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(r){return new(r||e)(_(Nl))},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})(),nk=new M("XSRF_ENABLED"),S5="XSRF-TOKEN",D5=new M("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>S5}),x5="X-XSRF-TOKEN",A5=new M("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>x5}),tm=class{},M5=(()=>{let e=class e{constructor(i,r,s){this.doc=i,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let i=this.doc.cookie||"";return i!==this.lastCookieString&&(this.parseCount++,this.lastToken=Qp(i,this.cookieName),this.lastCookieString=i),this.lastToken}};e.\u0275fac=function(r){return new(r||e)(_(K),_(Tn),_(D5))},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})();function k5(t,e){let n=t.url.toLowerCase();if(!D(nk)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let i=D(tm).getToken(),r=D(A5);return i!=null&&!t.headers.has(r)&&(t=t.clone({headers:t.headers.set(r,i)})),e(t)}var ik=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(ik||{});function R5(t,e){return{\u0275kind:t,\u0275providers:e}}function p0(...t){let e=[zo,Z1,X1,{provide:Pu,useExisting:X1},{provide:Xp,useExisting:Z1},{provide:f0,useValue:k5,multi:!0},{provide:nk,useValue:!0},{provide:tm,useClass:M5}];for(let n of t)e.push(...n.\u0275providers);return xl(e)}var ek=new M("LEGACY_INTERCEPTOR_FN");function N5(){return R5(ik.LegacyInterceptors,[{provide:ek,useFactory:I5},{provide:f0,useExisting:ek,multi:!0}])}var rk=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=$({providers:[p0(N5())]});let t=e;return t})();var y0=class extends Yp{constructor(){super(...arguments),this.supportsDOMEvents=!0}},v0=class t extends y0{static makeCurrent(){B1(new t)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=P5();return n==null?null:O5(n)}resetBaseElement(){Fu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Qp(document.cookie,e)}},Fu=null;function P5(){return Fu=Fu||document.querySelector("base"),Fu?Fu.getAttribute("href"):null}function O5(t){return new URL(t,"http://a").pathname}var b0=class{addToWindow(e){Lt.getAngularTestability=(i,r=!0)=>{let s=e.findTestabilityInTree(i,r);if(s==null)throw new x(5103,!1);return s},Lt.getAllAngularTestabilities=()=>e.getAllTestabilities(),Lt.getAllAngularRootElements=()=>e.getAllRootElements();let n=i=>{let r=Lt.getAllAngularTestabilities(),s=r.length,o=!1,a=function(l){o=o||l,s--,s==0&&i(o)};r.forEach(l=>{l.whenStable(a)})};Lt.frameworkStabilizers||(Lt.frameworkStabilizers=[]),Lt.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,i){if(n==null)return null;let r=e.getTestability(n);return r??(i?Hi().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},F5=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})(),w0=new M("EventManagerPlugins"),ak=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new x(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(_(w0),_(L))},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})(),nm=class{constructor(e){this._doc=e}},g0="ng-app-id",lk=(()=>{let e=class e{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=l0(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${g0}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(g0),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(g0,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,a=o.get(r)?.elements;a?a.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(_(K),_(bu),_(wu,8),_(Tn))},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})(),_0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},I0=/%COMP%/g,ck="%COMP%",L5=`_nghost-${ck}`,V5=`_ngcontent-${ck}`,B5=!0,j5=new M("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>B5});function U5(t){return V5.replace(I0,t)}function z5(t){return L5.replace(I0,t)}function uk(t,e){return e.map(n=>n.replace(I0,t))}var im=(()=>{let e=class e{constructor(i,r,s,o,a,l,c,u=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=l0(l),this.defaultRenderer=new Lu(i,a,c,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Vi.ShadowDom&&(r=oe(C({},r),{encapsulation:Vi.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof rm?s.applyToHost(i):s instanceof Vu&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let a=this.doc,l=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case Vi.Emulated:o=new rm(c,u,r,this.appId,d,a,l,h);break;case Vi.ShadowDom:return new E0(c,u,i,r,a,l,this.nonce,h);default:o=new Vu(c,u,r,d,a,l,h);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(_(ak),_(lk),_(bu),_(j5),_(K),_(Tn),_(L),_(wu))},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})(),Lu=class{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(_0[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(sk(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(sk(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new x(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let s=_0[r];s?e.setAttributeNS(s,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=_0[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(ji.DashCase|ji.Important)?e.style.setProperty(n,i,r&ji.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&ji.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if(typeof e=="string"&&(e=Hi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function sk(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var E0=class extends Lu{constructor(e,n,i,r,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=uk(r.id,r.styles);for(let u of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Vu=class extends Lu{constructor(e,n,i,r,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=l?uk(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},rm=class extends Vu{constructor(e,n,i,r,s,o,a,l){let c=r+"-"+i.id;super(e,n,i,s,o,a,l,c),this.contentAttr=U5(c),this.hostAttr=z5(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}},$5=(()=>{let e=class e extends nm{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};e.\u0275fac=function(r){return new(r||e)(_(K))},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})(),ok=["alt","control","meta","shift"],H5={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},W5={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},q5=(()=>{let e=class e extends nm{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,s){let o=e.parseEventName(r),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Hi().onAndCancel(i,o.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(r.pop()),a="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),a="code."),ok.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),a+=u+".")}),a+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=s,c.fullKey=a,c}static matchEventFullKeyCode(i,r){let s=H5[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),ok.forEach(a=>{if(a!==s){let l=W5[a];l(i)&&(o+=a+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{e.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(_(K))},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})();function dk(t,e){return x1(C({rootComponent:t},G5(e)))}function G5(t){return{appProviders:[...pk,...t?.providers??[]],platformProviders:J5}}function hk(){return[...fk]}function K5(){v0.makeCurrent()}function Y5(){return new hn}function Q5(){return hM(document),document}var J5=[{provide:Tn,useValue:a0},{provide:Ib,useValue:K5,multi:!0},{provide:K,useFactory:Q5,deps:[]}];var X5=new M(""),fk=[{provide:Mu,useClass:b0,deps:[]},{provide:Yb,useClass:Gp,deps:[L,Kp,Mu]},{provide:Gp,useClass:Gp,deps:[L,Kp,Mu]}],pk=[{provide:Mp,useValue:"root"},{provide:hn,useFactory:Y5,deps:[]},{provide:w0,useClass:$5,multi:!0,deps:[K,L,Tn]},{provide:w0,useClass:q5,multi:!0,deps:[K]},im,lk,ak,{provide:Mo,useExisting:im},{provide:Nl,useClass:F5,deps:[]},[]],C0=(()=>{let e=class e{constructor(i){}static withServerTransition(i){return{ngModule:e,providers:[{provide:bu,useValue:i.appId}]}}};e.\u0275fac=function(r){return new(r||e)(_(X5,12))},e.\u0275mod=H({type:e}),e.\u0275inj=$({providers:[...pk,...fk],imports:[fi,M1]});let t=e;return t})();function Z5(){return new T0(_(K))}var T0=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(_(K))},e.\u0275prov=T({token:e,factory:function(r){let s=null;return r?s=new r:s=Z5(),s},providedIn:"root"});let t=e;return t})();var $o=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=T({token:e,factory:function(r){let s=null;return r?s=new(r||e):s=_(mk),s},providedIn:"root"});let t=e;return t})();function eW(t){return new mk(t.get(K))}var mk=(()=>{let e=class e extends $o{constructor(i){super(),this._doc=i}sanitize(i,r){if(r==null)return null;switch(i){case xt.NONE:return r;case xt.HTML:return xr(r,"HTML")?Wn(r):xb(this._doc,String(r)).toString();case xt.STYLE:return xr(r,"Style")?Wn(r):r;case xt.SCRIPT:if(xr(r,"Script"))return Wn(r);throw new x(5200,!1);case xt.URL:return xr(r,"URL")?Wn(r):Pp(String(r));case xt.RESOURCE_URL:if(xr(r,"ResourceURL"))return Wn(r);throw new x(5201,!1);default:throw new x(5202,!1)}}bypassSecurityTrustHtml(i){return kM(i)}bypassSecurityTrustStyle(i){return RM(i)}bypassSecurityTrustScript(i){return NM(i)}bypassSecurityTrustUrl(i){return PM(i)}bypassSecurityTrustResourceUrl(i){return OM(i)}};e.\u0275fac=function(r){return new(r||e)(_(K))},e.\u0275prov=T({token:e,factory:function(r){let s=null;return r?s=new r:s=eW(_(Se)),s},providedIn:"root"});let t=e;return t})();var ue="primary",ed=Symbol("RouteTitle"),M0=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Bl(t){return new M0(t)}function tW(t,e,n){let i=n.path.split("/");if(i.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||i.length<t.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=t[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function nW(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Gi(t[n],e[n]))return!1;return!0}function Gi(t,e){let n=t?k0(t):void 0,i=e?k0(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let s=0;s<n.length;s++)if(r=n[s],!Tk(t[r],e[r]))return!1;return!0}function k0(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Tk(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),i=[...e].sort();return n.every((r,s)=>i[s]===r)}else return t===e}function Sk(t){return t.length>0?t[t.length-1]:null}function Ps(t){return al(t)?t:Cs(t)?Le(Promise.resolve(t)):F(t)}var iW={exact:xk,subset:Ak},Dk={exact:rW,subset:sW,ignored:()=>!0};function gk(t,e,n){return iW[n.paths](t.root,e.root,n.matrixParams)&&Dk[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function rW(t,e){return Gi(t,e)}function xk(t,e,n){if(!Wo(t.segments,e.segments)||!lm(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!t.children[i]||!xk(t.children[i],e.children[i],n))return!1;return!0}function sW(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Tk(t[n],e[n]))}function Ak(t,e,n){return Mk(t,e,e.segments,n)}function Mk(t,e,n,i){if(t.segments.length>n.length){let r=t.segments.slice(0,n.length);return!(!Wo(r,n)||e.hasChildren()||!lm(r,n,i))}else if(t.segments.length===n.length){if(!Wo(t.segments,n)||!lm(t.segments,n,i))return!1;for(let r in e.children)if(!t.children[r]||!Ak(t.children[r],e.children[r],i))return!1;return!0}else{let r=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Wo(t.segments,r)||!lm(t.segments,r,i)||!t.children[ue]?!1:Mk(t.children[ue],e,s,i)}}function lm(t,e,n){return e.every((i,r)=>Dk[n](t[r].parameters,i.parameters))}var ks=class{constructor(e=new Ae([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bl(this.queryParams)),this._queryParamMap}toString(){return lW.serialize(this)}},Ae=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return cm(this)}},Ho=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=Bl(this.parameters)),this._parameterMap}toString(){return Rk(this)}};function oW(t,e){return Wo(t,e)&&t.every((n,i)=>Gi(n.parameters,e[i].parameters))}function Wo(t,e){return t.length!==e.length?!1:t.every((n,i)=>n.path===e[i].path)}function aW(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===ue&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==ue&&(n=n.concat(e(r,i)))}),n}var td=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=T({token:e,factory:()=>(()=>new Wu)(),providedIn:"root"});let t=e;return t})(),Wu=class{parse(e){let n=new N0(e);return new ks(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Bu(e.root,!0)}`,i=dW(e.queryParams),r=typeof e.fragment=="string"?`#${cW(e.fragment)}`:"";return`${n}${i}${r}`}},lW=new Wu;function cm(t){return t.segments.map(e=>Rk(e)).join("/")}function Bu(t,e){if(!t.hasChildren())return cm(t);if(e){let n=t.children[ue]?Bu(t.children[ue],!1):"",i=[];return Object.entries(t.children).forEach(([r,s])=>{r!==ue&&i.push(`${r}:${Bu(s,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=aW(t,(i,r)=>r===ue?[Bu(t.children[ue],!1)]:[`${r}:${Bu(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[ue]!=null?`${cm(t)}/${n[0]}`:`${cm(t)}/(${n.join("//")})`}}function kk(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function om(t){return kk(t).replace(/%3B/gi,";")}function cW(t){return encodeURI(t)}function R0(t){return kk(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function um(t){return decodeURIComponent(t)}function _k(t){return um(t.replace(/\+/g,"%20"))}function Rk(t){return`${R0(t.path)}${uW(t.parameters)}`}function uW(t){return Object.keys(t).map(e=>`;${R0(e)}=${R0(t[e])}`).join("")}function dW(t){let e=Object.keys(t).map(n=>{let i=t[n];return Array.isArray(i)?i.map(r=>`${om(n)}=${om(r)}`).join("&"):`${om(n)}=${om(i)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}var hW=/^[^\/()?;#]+/;function S0(t){let e=t.match(hW);return e?e[0]:""}var fW=/^[^\/()?;=#]+/;function pW(t){let e=t.match(fW);return e?e[0]:""}var mW=/^[^=?&#]+/;function gW(t){let e=t.match(mW);return e?e[0]:""}var _W=/^[^&#]+/;function yW(t){let e=t.match(_W);return e?e[0]:""}var N0=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ae([],{}):new Ae([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[ue]=new Ae(e,n)),i}parseSegment(){let e=S0(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new x(4009,!1);return this.capture(e),new Ho(um(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=pW(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=S0(this.remaining);r&&(i=r,this.capture(i))}e[um(n)]=um(i)}parseQueryParam(e){let n=gW(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let o=yW(this.remaining);o&&(i=o,this.capture(i))}let r=_k(n),s=_k(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=S0(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new x(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ue);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[ue]:new Ae([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new x(4011,!1)}};function Nk(t){return t.segments.length>0?new Ae([],{[ue]:t}):t}function Pk(t){let e={};for(let i of Object.keys(t.children)){let r=t.children[i],s=Pk(r);if(i===ue&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let n=new Ae(t.segments,e);return vW(n)}function vW(t){if(t.numberOfChildren===1&&t.children[ue]){let e=t.children[ue];return new Ae(t.segments.concat(e.segments),e.children)}return t}function jl(t){return t instanceof ks}function bW(t,e,n=null,i=null){let r=Ok(t);return Fk(r,e,n,i)}function Ok(t){let e;function n(s){let o={};for(let l of s.children){let c=n(l);o[l.outlet]=c}let a=new Ae(s.url,o);return s===t&&(e=a),a}let i=n(t.root),r=Nk(i);return e??r}function Fk(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return D0(r,r,r,n,i);let s=wW(e);if(s.toRoot())return D0(r,r,new Ae([],{}),n,i);let o=EW(s,r,t),a=o.processChildren?zu(o.segmentGroup,o.index,s.commands):Vk(o.segmentGroup,o.index,s.commands);return D0(r,o.segmentGroup,a,n,i)}function dm(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function qu(t){return typeof t=="object"&&t!=null&&t.outlets}function D0(t,e,n,i,r){let s={};i&&Object.entries(i).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let o;t===e?o=n:o=Lk(t,e,n);let a=Nk(Pk(o));return new ks(a,s,r)}function Lk(t,e,n){let i={};return Object.entries(t.children).forEach(([r,s])=>{s===e?i[r]=n:i[r]=Lk(s,e,n)}),new Ae(t.segments,i)}var hm=class{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&dm(i[0]))throw new x(4003,!1);let r=i.find(qu);if(r&&r!==Sk(i))throw new x(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function wW(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new hm(!0,0,t);let e=0,n=!1,i=t.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new hm(n,e,i)}var Ll=class{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}};function EW(t,e,n){if(t.isAbsolute)return new Ll(e,!0,0);if(!n)return new Ll(e,!1,NaN);if(n.parent===null)return new Ll(n,!0,0);let i=dm(t.commands[0])?0:1,r=n.segments.length-1+i;return IW(n,r,t.numberOfDoubleDots)}function IW(t,e,n){let i=t,r=e,s=n;for(;s>r;){if(s-=r,i=i.parent,!i)throw new x(4005,!1);r=i.segments.length}return new Ll(i,!1,r-s)}function CW(t){return qu(t[0])?t[0].outlets:{[ue]:t}}function Vk(t,e,n){if(t||(t=new Ae([],{})),t.segments.length===0&&t.hasChildren())return zu(t,e,n);let i=TW(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let s=new Ae(t.segments.slice(0,i.pathIndex),{});return s.children[ue]=new Ae(t.segments.slice(i.pathIndex),t.children),zu(s,0,r)}else return i.match&&r.length===0?new Ae(t.segments,{}):i.match&&!t.hasChildren()?P0(t,e,n):i.match?zu(t,0,r):P0(t,e,n)}function zu(t,e,n){if(n.length===0)return new Ae(t.segments,{});{let i=CW(n),r={};if(Object.keys(i).some(s=>s!==ue)&&t.children[ue]&&t.numberOfChildren===1&&t.children[ue].segments.length===0){let s=zu(t.children[ue],e,n);return new Ae(t.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=Vk(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new Ae(t.segments,r)}}function TW(t,e,n){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return s;let o=t.segments[r],a=n[i];if(qu(a))break;let l=`${a}`,c=i<n.length-1?n[i+1]:null;if(r>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!vk(l,c,o))return s;i+=2}else{if(!vk(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function P0(t,e,n){let i=t.segments.slice(0,e),r=0;for(;r<n.length;){let s=n[r];if(qu(s)){let l=SW(s.outlets);return new Ae(i,l)}if(r===0&&dm(n[0])){let l=t.segments[e];i.push(new Ho(l.path,yk(n[0]))),r++;continue}let o=qu(s)?s.outlets[ue]:`${s}`,a=r<n.length-1?n[r+1]:null;o&&a&&dm(a)?(i.push(new Ho(o,yk(a))),r+=2):(i.push(new Ho(o,{})),r++)}return new Ae(i,{})}function SW(t){let e={};return Object.entries(t).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[n]=P0(new Ae([],{}),0,i))}),e}function yk(t){let e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function vk(t,e,n){return t==n.path&&Gi(e,n.parameters)}var $u="imperative",qn=class{constructor(e,n){this.id=e,this.url=n}},Ul=class extends qn{constructor(e,n,i="imperative",r=null){super(e,n),this.type=0,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ki=class extends qn{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Rs=class extends qn{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ns=class extends qn{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=16}},Gu=class extends qn{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},fm=class extends qn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},O0=class extends qn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},F0=class extends qn{constructor(e,n,i,r,s){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},L0=class extends qn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},V0=class extends qn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},B0=class{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},j0=class{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},U0=class{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},z0=class{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$0=class{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},H0=class{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pm=class{constructor(e,n,i){this.routerEvent=e,this.position=n,this.anchor=i,this.type=15}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Ku=class{},Yu=class{constructor(e){this.url=e}};var W0=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new nd,this.attachRef=null}},nd=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new W0,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),mm=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=q0(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){let n=q0(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=G0(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return G0(e,this._root).map(n=>n.value)}};function q0(t,e){if(t===e.value)return e;for(let n of e.children){let i=q0(t,n);if(i)return i}return null}function G0(t,e){if(t===e.value)return[e];for(let n of e.children){let i=G0(t,n);if(i.length)return i.unshift(e),i}return[]}var An=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Fl(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var gm=class extends mm{constructor(e,n){super(e),this.snapshot=n,iw(this,e)}toString(){return this.snapshot.toString()}};function Bk(t,e){let n=DW(t,e),i=new ot([new Ho("",{})]),r=new ot({}),s=new ot({}),o=new ot({}),a=new ot(""),l=new Yi(i,r,o,a,s,ue,e,n.root);return l.snapshot=n.root,new gm(new An(l,[]),n)}function DW(t,e){let n={},i={},r={},s="",o=new Qu([],n,r,s,i,ue,e,null,{});return new _m("",new An(o,[]))}var Yi=class{constructor(e,n,i,r,s,o,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(U(c=>c[ed]))??F(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(U(e=>Bl(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(U(e=>Bl(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function nw(t,e,n="emptyOnly"){let i,{routeConfig:r}=t;return e!==null&&(n==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:C(C({},e.params),t.params),data:C(C({},e.data),t.data),resolve:C(C(C(C({},t.data),e.data),r?.data),t._resolvedData)}:i={params:t.params,data:t.data,resolve:C(C({},t.data),t._resolvedData??{})},r&&Uk(r)&&(i.resolve[ed]=r.title),i}var Qu=class{get title(){return this.data?.[ed]}constructor(e,n,i,r,s,o,a,l,c){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Bl(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bl(this.queryParams)),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},_m=class extends mm{constructor(e,n){super(n),this.url=e,iw(this,n)}toString(){return jk(this._root)}};function iw(t,e){e.value._routerState=t,e.children.forEach(n=>iw(t,n))}function jk(t){let e=t.children.length>0?` { ${t.children.map(jk).join(", ")} } `:"";return`${t.value}${e}`}function x0(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Gi(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Gi(e.params,n.params)||t.paramsSubject.next(n.params),nW(e.url,n.url)||t.urlSubject.next(n.url),Gi(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function K0(t,e){let n=Gi(t.params,e.params)&&oW(t.url,e.url),i=!t.parent!=!e.parent;return n&&!i&&(!t.parent||K0(t.parent,e.parent))}function Uk(t){return typeof t.title=="string"||t.title===null}var rw=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ue,this.activateEvents=new ye,this.deactivateEvents=new ye,this.attachEvents=new ye,this.detachEvents=new ye,this.parentContexts=D(nd),this.location=D(Sn),this.changeDetector=D(Mr),this.environmentInjector=D(Jt),this.inputBinder=D(wm,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new x(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new x(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new x(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new x(4013,!1);this._activatedRoute=i;let s=this.location,a=i.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new Y0(i,l,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:c,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ve({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Dt]});let t=e;return t})(),Y0=class{constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===Yi?this.route:e===nd?this.childContexts:this.parent.get(e,n)}},wm=new M(""),bk=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(i){this.unsubscribeFromRouteData(i),this.subscribeToRouteData(i)}unsubscribeFromRouteData(i){this.outletDataSubscriptions.get(i)?.unsubscribe(),this.outletDataSubscriptions.delete(i)}subscribeToRouteData(i){let{activatedRoute:r}=i,s=wo([r.queryParams,r.params,r.data]).pipe(St(([o,a,l],c)=>(l=C(C(C({},o),a),l),c===0?F(l):Promise.resolve(l)))).subscribe(o=>{if(!i.isActivated||!i.activatedComponentRef||i.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(i);return}let a=R1(r.component);if(!a){this.unsubscribeFromRouteData(i);return}for(let{templateName:l}of a.inputs)i.activatedComponentRef.setInput(l,o[l])});this.outletDataSubscriptions.set(i,s)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})();function xW(t,e,n){let i=Ju(t,e._root,n?n._root:void 0);return new gm(i,e)}function Ju(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=e.value;let r=AW(t,e,n);return new An(i,r)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Ju(t,a)),o}}let i=MW(e.value),r=e.children.map(s=>Ju(t,s));return new An(i,r)}}function AW(t,e,n){return e.children.map(i=>{for(let r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return Ju(t,i,r);return Ju(t,i)})}function MW(t){return new Yi(new ot(t.url),new ot(t.params),new ot(t.queryParams),new ot(t.fragment),new ot(t.data),t.outlet,t.component,t)}var zk="ngNavigationCancelingError";function $k(t,e){let{redirectTo:n,navigationBehaviorOptions:i}=jl(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=Hk(!1,0,e);return r.url=n,r.navigationBehaviorOptions=i,r}function Hk(t,e,n){let i=new Error("NavigationCancelingError: "+(t||""));return i[zk]=!0,i.cancellationCode=e,n&&(i.url=n),i}function kW(t){return Wk(t)&&jl(t.url)}function Wk(t){return t&&t[zk]}var RW=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=le({type:e,selectors:[["ng-component"]],standalone:!0,features:[Be],decls:1,vars:0,template:function(r,s){r&1&&J(0,"router-outlet")},dependencies:[rw],encapsulation:2});let t=e;return t})();function NW(t,e){return t.providers&&!t._injector&&(t._injector=Up(t.providers,e,`Route: ${t.path}`)),t._injector??e}function sw(t){let e=t.children&&t.children.map(sw),n=e?oe(C({},t),{children:e}):C({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ue&&(n.component=RW),n}function Qi(t){return t.outlet||ue}function PW(t,e){let n=t.filter(i=>Qi(i)===e);return n.push(...t.filter(i=>Qi(i)!==e)),n}function id(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var OW=(t,e,n,i)=>U(r=>(new Q0(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)),Q0=class{constructor(e,n,i,r,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),x0(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){let r=Fl(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,n,i){let r=e.value,s=n?n.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,i);else s&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=Fl(e);for(let o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=Fl(e);for(let o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){let r=Fl(n);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new H0(s.value.snapshot))}),e.children.length&&this.forwardEvent(new z0(e.value.snapshot))}activateRoutes(e,n,i){let r=e.value,s=n?n.value:null;if(x0(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),x0(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=id(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}},ym=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Vl=class{constructor(e,n){this.component=e,this.route=n}};function FW(t,e,n){let i=t._root,r=e?e._root:null;return ju(i,r,n,[i.value])}function LW(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function $l(t,e){let n=Symbol(),i=e.get(t,n);return i===n?typeof t=="function"&&!sA(t)?t:e.get(t):i}function ju(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Fl(e);return t.children.forEach(o=>{VW(o,s[o.value.outlet],n,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Hu(a,n.getContext(o),r)),r}function VW(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=BW(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new ym(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?ju(t,e,a?a.children:null,i,r):ju(t,e,n,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Vl(a.outlet.component,o))}else o&&Hu(e,a,r),r.canActivateChecks.push(new ym(i)),s.component?ju(t,null,a?a.children:null,i,r):ju(t,null,n,i,r);return r}function BW(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Wo(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Wo(t.url,e.url)||!Gi(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!K0(t,e)||!Gi(t.queryParams,e.queryParams);case"paramsChange":default:return!K0(t,e)}}function Hu(t,e,n){let i=Fl(t),r=t.value;Object.entries(i).forEach(([s,o])=>{r.component?e?Hu(o,e.children.getContext(s),n):Hu(o,null,n):Hu(o,e,n)}),r.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Vl(e.outlet.component,r)):n.canDeactivateChecks.push(new Vl(null,r)):n.canDeactivateChecks.push(new Vl(null,r))}function rd(t){return typeof t=="function"}function jW(t){return typeof t=="boolean"}function UW(t){return t&&rd(t.canLoad)}function zW(t){return t&&rd(t.canActivate)}function $W(t){return t&&rd(t.canActivateChild)}function HW(t){return t&&rd(t.canDeactivate)}function WW(t){return t&&rd(t.canMatch)}function qk(t){return t instanceof Er||t?.name==="EmptyError"}var am=Symbol("INITIAL_VALUE");function zl(){return St(t=>wo(t.map(e=>e.pipe(qe(1),Pi(am)))).pipe(U(e=>{for(let n of e)if(n!==!0){if(n===am)return am;if(n===!1||n instanceof ks)return n}return!0}),Ue(e=>e!==am),qe(1)))}function qW(t,e){return rt(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?F(oe(C({},n),{guardsResult:!0})):GW(o,i,r,t).pipe(rt(a=>a&&jW(a)?KW(i,s,t,e):F(a)),U(a=>oe(C({},n),{guardsResult:a})))})}function GW(t,e,n,i){return Le(t).pipe(rt(r=>ZW(r.component,r.route,n,e,i)),Ni(r=>r!==!0,!0))}function KW(t,e,n,i){return Le(e).pipe(Ir(r=>ds(QW(r.route.parent,i),YW(r.route,i),XW(t,r.path,n),JW(t,r.route,n))),Ni(r=>r!==!0,!0))}function YW(t,e){return t!==null&&e&&e(new $0(t)),F(!0)}function QW(t,e){return t!==null&&e&&e(new U0(t)),F(!0)}function JW(t,e,n){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return F(!0);let r=i.map(s=>hs(()=>{let o=id(e)??n,a=$l(s,o),l=zW(a)?a.canActivate(e,t):zi(o,()=>a(e,t));return Ps(l).pipe(Ni())}));return F(r).pipe(zl())}function XW(t,e,n){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>LW(o)).filter(o=>o!==null).map(o=>hs(()=>{let a=o.guards.map(l=>{let c=id(o.node)??n,u=$l(l,c),d=$W(u)?u.canActivateChild(i,t):zi(c,()=>u(i,t));return Ps(d).pipe(Ni())});return F(a).pipe(zl())}));return F(s).pipe(zl())}function ZW(t,e,n,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return F(!0);let o=s.map(a=>{let l=id(e)??r,c=$l(a,l),u=HW(c)?c.canDeactivate(t,e,n,i):zi(l,()=>c(t,e,n,i));return Ps(u).pipe(Ni())});return F(o).pipe(zl())}function eq(t,e,n,i){let r=e.canLoad;if(r===void 0||r.length===0)return F(!0);let s=r.map(o=>{let a=$l(o,t),l=UW(a)?a.canLoad(e,n):zi(t,()=>a(e,n));return Ps(l)});return F(s).pipe(zl(),Gk(i))}function Gk(t){return Oy(xe(e=>{if(jl(e))throw $k(t,e)}),U(e=>e===!0))}function tq(t,e,n,i){let r=e.canMatch;if(!r||r.length===0)return F(!0);let s=r.map(o=>{let a=$l(o,t),l=WW(a)?a.canMatch(e,n):zi(t,()=>a(e,n));return Ps(l)});return F(s).pipe(zl(),Gk(i))}var Xu=class{constructor(e){this.segmentGroup=e||null}},vm=class extends Error{constructor(e){super(),this.urlTree=e}};function Ol(t){return ri(new Xu(t))}function nq(t){return ri(new x(4e3,!1))}function iq(t){return ri(Hk(!1,3))}var J0=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new x(4002,!1)}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return F(i);if(r.numberOfChildren>1||!r.children[ue])return nq(e.redirectTo);r=r.children[ue]}}applyRedirectCommands(e,n,i){let r=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i);if(n.startsWith("/"))throw new vm(r);return r}applyRedirectCreateUrlTree(e,n,i,r){let s=this.createSegmentGroup(e,n.root,i,r);return new ks(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);i[r]=n[a]}else i[r]=s}),i}createSegmentGroup(e,n,i,r){let s=this.createSegments(e,n.segments,i,r),o={};return Object.entries(n.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,i,r)}),new Ae(s,o)}createSegments(e,n,i,r){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,n,i){let r=i[n.path.substring(1)];if(!r)throw new x(4001,!1);return r}findOrReturn(e,n){let i=0;for(let r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}},X0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function rq(t,e,n,i,r){let s=ow(t,e,n);return s.matched?(i=NW(e,i),tq(i,e,n,r).pipe(U(o=>o===!0?s:C({},X0)))):F(s)}function ow(t,e,n){if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?C({},X0):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(e.matcher||tW)(n,t,e);if(!r)return C({},X0);let s={};Object.entries(r.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=r.consumed.length>0?C(C({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function wk(t,e,n,i){return n.length>0&&aq(t,n,i)?{segmentGroup:new Ae(e,oq(i,new Ae(n,t.children))),slicedSegments:[]}:n.length===0&&lq(t,n,i)?{segmentGroup:new Ae(t.segments,sq(t,e,n,i,t.children)),slicedSegments:n}:{segmentGroup:new Ae(t.segments,t.children),slicedSegments:n}}function sq(t,e,n,i,r){let s={};for(let o of i)if(Em(t,n,o)&&!r[Qi(o)]){let a=new Ae([],{});s[Qi(o)]=a}return C(C({},r),s)}function oq(t,e){let n={};n[ue]=e;for(let i of t)if(i.path===""&&Qi(i)!==ue){let r=new Ae([],{});n[Qi(i)]=r}return n}function aq(t,e,n){return n.some(i=>Em(t,e,i)&&Qi(i)!==ue)}function lq(t,e,n){return n.some(i=>Em(t,e,i))}function Em(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function cq(t,e,n,i){return Qi(t)!==i&&(i===ue||!Em(e,n,t))?!1:t.path==="**"?!0:ow(e,t,n).matched}function uq(t,e,n){return e.length===0&&!t.children[n]}var Z0=class{};function dq(t,e,n,i,r,s,o="emptyOnly"){return new ew(t,e,n,i,r,o,s).recognize()}var hq=31,ew=class{constructor(e,n,i,r,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new J0(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new x(4002,!1)}recognize(){let e=wk(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(U(n=>{let i=new Qu([],Object.freeze({}),Object.freeze(C({},this.urlTree.queryParams)),this.urlTree.fragment,{},ue,this.rootComponentType,null,{}),r=new An(i,n),s=new _m("",r),o=bW(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,ue).pipe(cn(i=>{if(i instanceof vm)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Xu?this.noMatchError(i):i}))}inheritParamsAndData(e,n){let i=e.value,r=nw(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s,i))}processSegmentGroup(e,n,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,n,i):this.processSegment(e,n,i,i.segments,r,!0).pipe(U(s=>s instanceof An?[s]:[]))}processChildren(e,n,i){let r=[];for(let s of Object.keys(i.children))s==="primary"?r.unshift(s):r.push(s);return Le(r).pipe(Ir(s=>{let o=i.children[s],a=PW(n,s);return this.processSegmentGroup(e,a,o,s)}),qy((s,o)=>(s.push(...o),s)),fs(null),Wy(),rt(s=>{if(s===null)return Ol(i);let o=Kk(s);return fq(o),F(o)}))}processSegment(e,n,i,r,s,o){return Le(n).pipe(Ir(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,i,r,s,o).pipe(cn(l=>{if(l instanceof Xu)return F(null);throw l}))),Ni(a=>!!a),cn(a=>{if(qk(a))return uq(i,r,s)?F(new Z0):Ol(i);throw a}))}processSegmentAgainstRoute(e,n,i,r,s,o,a){return cq(i,r,s,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,s,o):Ol(r):Ol(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,s,o){let{matched:a,consumedSegments:l,positionalParamSegments:c,remainingSegments:u}=r.path==="**"?Ek(s):ow(n,r,s);if(!a)return Ol(n);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>hq&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,c);return this.applyRedirects.lineralizeSegments(r,d).pipe(rt(h=>this.processSegment(e,i,n,h.concat(u),o,!1)))}matchSegmentAgainstRoute(e,n,i,r,s){let o;return i.path==="**"?(o=F(Ek(r)),n.children={}):o=rq(n,i,r,e,this.urlSerializer),o.pipe(St(a=>a.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(St(({routes:l})=>{let c=i._loadedInjector??e,{consumedSegments:u,remainingSegments:d,parameters:h}=a,p=new Qu(u,h,Object.freeze(C({},this.urlTree.queryParams)),this.urlTree.fragment,mq(i),Qi(i),i.component??i._loadedComponent??null,i,gq(i)),{segmentGroup:f,slicedSegments:m}=wk(n,u,d,l);if(m.length===0&&f.hasChildren())return this.processChildren(c,l,f).pipe(U(w=>w===null?null:new An(p,w)));if(l.length===0&&m.length===0)return F(new An(p,[]));let g=Qi(i)===s;return this.processSegment(c,l,f,m,g?ue:s,!0).pipe(U(w=>new An(p,w instanceof An?[w]:[])))}))):Ol(n)))}getChildConfig(e,n,i){return n.children?F({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?F({routes:n._loadedRoutes,injector:n._loadedInjector}):eq(e,n,i,this.urlSerializer).pipe(rt(r=>r?this.configLoader.loadChildren(e,n).pipe(xe(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):iq(n))):F({routes:[],injector:e})}};function fq(t){t.sort((e,n)=>e.value.outlet===ue?-1:n.value.outlet===ue?1:e.value.outlet.localeCompare(n.value.outlet))}function pq(t){let e=t.value.routeConfig;return e&&e.path===""}function Kk(t){let e=[],n=new Set;for(let i of t){if(!pq(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):e.push(i)}for(let i of n){let r=Kk(i.children);e.push(new An(i.value,r))}return e.filter(i=>!n.has(i))}function mq(t){return t.data||{}}function gq(t){return t.resolve||{}}function Ek(t){return{matched:!0,parameters:t.length>0?Sk(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function _q(t,e,n,i,r,s){return rt(o=>dq(t,e,n,i,o.extractedUrl,r,s).pipe(U(({state:a,tree:l})=>oe(C({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function yq(t,e){return rt(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return F(n);let s=new Set(r.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let c of Yk(l))o.add(c);let a=0;return Le(o).pipe(Ir(l=>s.has(l)?vq(l,i,t,e):(l.data=nw(l,l.parent,t).resolve,F(void 0))),xe(()=>a++),dl(1),rt(l=>a===o.size?F(n):an))})}function Yk(t){let e=t.children.map(n=>Yk(n)).flat();return[t,...e]}function vq(t,e,n,i){let r=t.routeConfig,s=t._resolve;return r?.title!==void 0&&!Uk(r)&&(s[ed]=r.title),bq(s,t,e,i).pipe(U(o=>(t._resolvedData=o,t.data=nw(t,t.parent,n).resolve,null)))}function bq(t,e,n,i){let r=k0(t);if(r.length===0)return F({});let s={};return Le(r).pipe(rt(o=>wq(t[o],e,n,i).pipe(Ni(),xe(a=>{s[o]=a}))),dl(1),Hy(s),cn(o=>qk(o)?an:ri(o)))}function wq(t,e,n,i){let r=id(e)??i,s=$l(t,r),o=s.resolve?s.resolve(e,n):zi(r,()=>s(e,n));return Ps(o)}function A0(t){return St(e=>{let n=t(e);return n?Le(n).pipe(U(()=>e)):F(e)})}var Qk=(()=>{let e=class e{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===ue);return r}getResolvedTitleForRoute(i){return i.data[ed]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=T({token:e,factory:()=>(()=>D(Eq))(),providedIn:"root"});let t=e;return t})(),Eq=(()=>{let e=class e extends Qk{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(_(T0))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),sd=new M("",{providedIn:"root",factory:()=>({})}),Zu=new M("ROUTES"),aw=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=D(qp)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return F(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=Ps(i.loadComponent()).pipe(U(Jk),xe(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),Ri(()=>{this.componentLoaders.delete(i)})),s=new nl(r,()=>new Z).pipe(tl());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return F({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=Iq(r,this.compiler,i,this.onLoadEndListener).pipe(Ri(()=>{this.childrenLoaders.delete(r)})),a=new nl(o,()=>new Z).pipe(tl());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Iq(t,e,n,i){return Ps(t.loadChildren()).pipe(U(Jk),rt(r=>r instanceof du||Array.isArray(r)?F(r):Le(e.compileModuleAsync(r))),U(r=>{i&&i(t);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(n).injector,o=s.get(Zu,[],{optional:!0,self:!0}).flat()),{routes:o.map(sw),injector:s}}))}function Cq(t){return t&&typeof t=="object"&&"default"in t}function Jk(t){return Cq(t)?t.default:t}var lw=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=T({token:e,factory:()=>(()=>D(Tq))(),providedIn:"root"});let t=e;return t})(),Tq=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Xk=new M(""),Zk=new M("");function Sq(t,e,n){let i=t.get(Zk),r=t.get(K);return t.get(L).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,Promise.resolve();let s,o=new Promise(c=>{s=c}),a=r.startViewTransition(()=>(s(),Dq(t))),{onViewTransitionCreated:l}=i;return l&&zi(t,()=>l({transition:a,from:e,to:n})),o})}function Dq(t){return new Promise(e=>{$b(e,{injector:t})})}var cw=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Z,this.transitionAbortSubject=new Z,this.configLoader=D(aw),this.environmentInjector=D(Jt),this.urlSerializer=D(td),this.rootContexts=D(nd),this.location=D(Wi),this.inputBindingEnabled=D(wm,{optional:!0})!==null,this.titleStrategy=D(Qk),this.options=D(sd,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=D(lw),this.createViewTransition=D(Xk,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>F(void 0),this.rootComponentType=null;let i=s=>this.events.next(new B0(s)),r=s=>this.events.next(new j0(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(oe(C(C({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new ot({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:$u,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ue(o=>o.id!==0),U(o=>oe(C({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),St(o=>{this.currentTransition=o;let a=!1,l=!1;return F(o).pipe(xe(c=>{this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?oe(C({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),St(c=>{let u=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new Ns(c.id,this.urlSerializer.serialize(c.rawUrl),h,0)),c.resolve(null),an}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return F(c).pipe(St(h=>{let p=this.transitions?.getValue();return this.events.next(new Ul(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),p!==this.transitions?.getValue()?an:Promise.resolve(h)}),_q(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),xe(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=oe(C({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let p=new fm(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:h,extractedUrl:p,source:f,restoredState:m,extras:g}=c,w=new Ul(h,this.urlSerializer.serialize(p),f,m);this.events.next(w);let O=Bk(p,this.rootComponentType).snapshot;return this.currentTransition=o=oe(C({},c),{targetSnapshot:O,urlAfterRedirects:p,extras:oe(C({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=p,F(o)}else{let h="";return this.events.next(new Ns(c.id,this.urlSerializer.serialize(c.extractedUrl),h,1)),c.resolve(null),an}}),xe(c=>{let u=new O0(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),U(c=>(this.currentTransition=o=oe(C({},c),{guards:FW(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),qW(this.environmentInjector,c=>this.events.next(c)),xe(c=>{if(o.guardsResult=c.guardsResult,jl(c.guardsResult))throw $k(this.urlSerializer,c.guardsResult);let u=new F0(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),Ue(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",3),!1)),A0(c=>{if(c.guards.canActivateChecks.length)return F(c).pipe(xe(u=>{let d=new L0(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),St(u=>{let d=!1;return F(u).pipe(yq(this.paramsInheritanceStrategy,this.environmentInjector),xe({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",2)}}))}),xe(u=>{let d=new V0(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),A0(c=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(xe(p=>{d.component=p}),U(()=>{})));for(let p of d.children)h.push(...u(p));return h};return wo(u(c.targetSnapshot.root)).pipe(fs(),qe(1))}),A0(()=>this.afterPreactivation()),St(()=>{let{currentSnapshot:c,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return d?Le(d).pipe(U(()=>o)):F(o)}),U(c=>{let u=xW(i.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=oe(C({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),xe(()=>{this.events.next(new Ku)}),OW(this.rootContexts,i.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),qe(1),xe({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ki(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),jn(this.transitionAbortSubject.pipe(xe(c=>{throw c}))),Ri(()=>{if(!a&&!l){let c="";this.cancelNavigationTransition(o,c,1)}this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),cn(c=>{if(l=!0,Wk(c))this.events.next(new Rs(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),kW(c)?this.events.next(new Yu(c.url)):o.resolve(!1);else{this.events.next(new Gu(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0));try{o.resolve(i.errorHandler(c))}catch(u){o.reject(u)}}return an}))}))}cancelNavigationTransition(i,r,s){let o=new Rs(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function xq(t){return t!==$u}var Aq=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=T({token:e,factory:()=>(()=>D(Mq))(),providedIn:"root"});let t=e;return t})(),tw=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},Mq=(()=>{let e=class e extends tw{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ws(e)))(s||e)}})(),e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),eR=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=T({token:e,factory:()=>(()=>D(kq))(),providedIn:"root"});let t=e;return t})(),kq=(()=>{let e=class e extends eR{constructor(){super(...arguments),this.location=D(Wi),this.urlSerializer=D(td),this.options=D(sd,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=D(lw),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ks,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Bk(this.currentUrlTree,null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof Ul)this.stateMemento=this.createStateMemento();else if(i instanceof Ns)this.rawUrlTree=r.initialUrl;else if(i instanceof fm){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(s,r)}}else i instanceof Ku?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof Rs&&(i.code===3||i.code===2)?this.restoreHistory(r):i instanceof Gu?this.restoreHistory(r,!0):i instanceof Ki&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,a=C(C({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",a)}else{let o=C(C({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ws(e)))(s||e)}})(),e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Uu=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Uu||{});function tR(t,e){t.events.pipe(Ue(n=>n instanceof Ki||n instanceof Rs||n instanceof Gu||n instanceof Ns),U(n=>n instanceof Ki||n instanceof Ns?Uu.COMPLETE:(n instanceof Rs?n.code===0||n.code===1:!1)?Uu.REDIRECTING:Uu.FAILED),Ue(n=>n!==Uu.REDIRECTING),qe(1)).subscribe(()=>{e()})}function Rq(t){throw t}var Nq={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Pq={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},$e=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=D(Hp),this.stateManager=D(eR),this.options=D(sd,{optional:!0})||{},this.pendingTasks=D(Rl),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=D(cw),this.urlSerializer=D(td),this.location=D(Wi),this.urlHandlingStrategy=D(lw),this._events=new Z,this.errorHandler=this.options.errorHandler||Rq,this.navigated=!1,this.routeReuseStrategy=D(Aq),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=D(Zu,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!D(wm,{optional:!0}),this.eventsSubscription=new Fe,this.isNgZoneEnabled=D(L)instanceof L&&L.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Rs&&r.code!==0&&r.code!==1)this.navigated=!0;else if(r instanceof Ki)this.navigated=!0;else if(r instanceof Yu){let a=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),l={skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||xq(s.source)};this.scheduleNavigation(a,$u,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}Fq(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),$u,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)}))}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let c=C({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let l=this.parseUrl(i);this.scheduleNavigation(l,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(sw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:a,d=null;switch(l){case"merge":d=C(C({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let p=s?s.snapshot:this.routerState.snapshot.root;h=Ok(p)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),h=this.currentUrlTree.root}return Fk(h,i,d,u??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=jl(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,$u,null,r)}navigate(i,r={skipLocationChange:!1}){return Oq(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=C({},Nq):r===!1?s=C({},Pq):s=r,jl(i))return gk(this.currentUrlTree,i,s);let o=this.parseUrl(i);return gk(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.keys(i).reduce((r,s)=>{let o=i[s];return o!=null&&(r[s]=o),r},{})}scheduleNavigation(i,r,s,o,a){if(this.disposed)return Promise.resolve(!1);let l,c,u;a?(l=a.resolve,c=a.reject,u=a.promise):u=new Promise((h,p)=>{l=h,c=p});let d=this.pendingTasks.add();return tR(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:l,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Oq(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new x(4008,!1)}function Fq(t){return!(t instanceof Ku)&&!(t instanceof Yu)}var Ji=(()=>{let e=class e{constructor(i,r,s,o,a,l){this.router=i,this.route=r,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=l,this.href=null,this.commands=null,this.onChanges=new Z,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let c=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=i.events.subscribe(u=>{u instanceof Ki&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(i){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",i)}ngOnChanges(i){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(i){i!=null?(this.commands=Array.isArray(i)?i:[i],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(i,r,s,o,a){if(this.urlTree===null||this.isAnchorElement&&(i!==0||r||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state};return this.router.navigateByUrl(this.urlTree,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=this.urlTree!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;let i=this.href===null?null:jM(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(i,r){let s=this.renderer,o=this.el.nativeElement;r!==null?s.setAttribute(o,i,r):s.removeAttribute(o,i)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(r){return new(r||e)(y($e),y(Yi),gu("tabindex"),y(ui),y(ce),y(Nr))},e.\u0275dir=ve({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,s){r&1&&B("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&Xt("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",pn],skipLocationChange:["skipLocationChange","skipLocationChange",pn],replaceUrl:["replaceUrl","replaceUrl",pn],routerLink:"routerLink"},standalone:!0,features:[$i,Dt]});let t=e;return t})();var bm=class{};var Lq=(()=>{let e=class e{constructor(i,r,s,o,a){this.router=i,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Ue(i=>i instanceof Ki),Ir(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,r){let s=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Up(o.providers,i,`Route: ${o.path}`));let a=o._injector??i,l=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(l,o.children??o._loadedRoutes))}return Le(s).pipe(us())}preloadConfig(i,r){return this.preloadingStrategy.preload(r,()=>{let s;r.loadChildren&&r.canLoad===void 0?s=this.loader.loadChildren(i,r):s=F(null);let o=s.pipe(rt(a=>a===null?F(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??i,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(r);return Le([o,a]).pipe(us())}else return o})}};e.\u0275fac=function(r){return new(r||e)(_($e),_(qp),_(Jt),_(bm),_(aw))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),nR=new M(""),Vq=(()=>{let e=class e{constructor(i,r,s,o,a={}){this.urlSerializer=i,this.transitions=r,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration=a.scrollPositionRestoration||"disabled",a.anchorScrolling=a.anchorScrolling||"disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof Ul?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof Ki?(this.lastId=i.id,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.urlAfterRedirects).fragment)):i instanceof Ns&&i.code===0&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof pm&&(i.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(i.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new pm(i,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(r){Op()},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})();function iR(t,...e){return xl([{provide:Zu,multi:!0,useValue:t},[],{provide:Yi,useFactory:rR,deps:[$e]},{provide:ku,multi:!0,useFactory:sR},e.map(n=>n.\u0275providers)])}function rR(t){return t.routerState.root}function od(t,e){return{\u0275kind:t,\u0275providers:e}}function sR(){let t=D(Se);return e=>{let n=t.get(Dn);if(e!==n.components[0])return;let i=t.get($e),r=t.get(oR);t.get(uw)===1&&i.initialNavigation(),t.get(aR,null,me.Optional)?.setUpPreloading(),t.get(nR,null,me.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var oR=new M("",{factory:()=>new Z}),uw=new M("",{providedIn:"root",factory:()=>1});function Bq(){return od(2,[{provide:uw,useValue:0},{provide:$p,multi:!0,deps:[Se],useFactory:e=>{let n=e.get(j1,Promise.resolve());return()=>n.then(()=>new Promise(i=>{let r=e.get($e),s=e.get(oR);tR(r,()=>{i(!0)}),e.get(cw).afterPreactivation=()=>(i(!0),s.closed?F(void 0):s),r.initialNavigation()}))}}])}function jq(){return od(3,[{provide:$p,multi:!0,useFactory:()=>{let e=D($e);return()=>{e.setUpLocationChangeListener()}}},{provide:uw,useValue:2}])}var aR=new M("");function Uq(t){return od(0,[{provide:aR,useExisting:Lq},{provide:bm,useExisting:t}])}function zq(){return od(8,[bk,{provide:wm,useExisting:bk}])}function $q(t){let e=[{provide:Xk,useValue:Sq},{provide:Zk,useValue:C({skipNextTransition:!!t?.skipInitialTransition},t)}];return od(9,e)}var Ik=new M("ROUTER_FORROOT_GUARD"),Hq=[Wi,{provide:td,useClass:Wu},$e,nd,{provide:Yi,useFactory:rR,deps:[$e]},aw,[]],lR=(()=>{let e=class e{constructor(i){}static forRoot(i,r){return{ngModule:e,providers:[Hq,[],{provide:Zu,multi:!0,useValue:i},{provide:Ik,useFactory:Kq,deps:[[$e,new Xe,new yu]]},{provide:sd,useValue:r||{}},r?.useHash?qq():Gq(),Wq(),r?.preloadingStrategy?Uq(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?Yq(r):[],r?.bindToComponentInputs?zq().\u0275providers:[],r?.enableViewTransitions?$q().\u0275providers:[],Qq()]}}static forChild(i){return{ngModule:e,providers:[{provide:Zu,multi:!0,useValue:i}]}}};e.\u0275fac=function(r){return new(r||e)(_(Ik,8))},e.\u0275mod=H({type:e}),e.\u0275inj=$({});let t=e;return t})();function Wq(){return{provide:nR,useFactory:()=>{let t=D(G1),e=D(L),n=D(sd),i=D(cw),r=D(td);return n.scrollOffset&&t.setOffset(n.scrollOffset),new Vq(r,i,t,e,n)}}}function qq(){return{provide:Nr,useClass:z1}}function Gq(){return{provide:Nr,useClass:o0}}function Kq(t){return"guarded"}function Yq(t){return[t.initialNavigation==="disabled"?jq().\u0275providers:[],t.initialNavigation==="enabledBlocking"?Bq().\u0275providers:[]]}var Ck=new M("");function Qq(){return[{provide:Ck,useFactory:sR},{provide:ku,multi:!0,useExisting:Ck}]}var hw;try{hw=typeof Intl<"u"&&Intl.v8BreakIterator}catch{hw=!1}var pt=(()=>{let e=class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?q1(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||hw)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(_(Tn))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ad;function Jq(){if(ad==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ad=!0}))}finally{ad=ad||!1}return ad}function Hl(t){return Jq()?t:!!t.capture}var Go;function cR(){if(Go==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Go=!1,Go;if("scrollBehavior"in document.documentElement.style)Go=!0;else{let t=Element.prototype.scrollTo;t?Go=!/\{\s*\[native code\]\s*\}/.test(t.toString()):Go=!1}}return Go}var dw;function Xq(){if(dw==null){let t=typeof document<"u"?document.head:null;dw=!!(t&&(t.createShadowRoot||t.attachShadow))}return dw}function uR(t){if(Xq()){let e=t.getRootNode?t.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function ld(){let t=typeof document<"u"&&document?document.activeElement:null;for(;t&&t.shadowRoot;){let e=t.shadowRoot.activeElement;if(e===t)break;t=e}return t}function pi(t){return t.composedPath?t.composedPath()[0]:t.target}function cd(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var Xi="*";function dR(t,e=null){return{type:2,steps:t,options:e}}function fw(t){return{type:6,styles:t,offset:null}}var Os=class{constructor(e=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}},ud=class{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let n=0,i=0,r=0,s=this.players.length;s==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++n==s&&this._onFinish()}),o.onDestroy(()=>{++i==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){let n=e*this.totalTime;this.players.forEach(i=>{let r=i.totalTime?Math.min(1,n/i.totalTime):1;i.setPosition(r)})}getPosition(){let e=this.players.reduce((n,i)=>n===null||i.totalTime>n.totalTime?i:n,null);return e!=null?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){let n=e=="start"?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}},Im="!";function hR(t){return new x(3e3,!1)}function Zq(){return new x(3100,!1)}function eG(){return new x(3101,!1)}function tG(t){return new x(3001,!1)}function nG(t){return new x(3003,!1)}function iG(t){return new x(3004,!1)}function rG(t,e){return new x(3005,!1)}function sG(){return new x(3006,!1)}function oG(){return new x(3007,!1)}function aG(t,e){return new x(3008,!1)}function lG(t){return new x(3002,!1)}function cG(t,e,n,i,r){return new x(3010,!1)}function uG(){return new x(3011,!1)}function dG(){return new x(3012,!1)}function hG(){return new x(3200,!1)}function fG(){return new x(3202,!1)}function pG(){return new x(3013,!1)}function mG(t){return new x(3014,!1)}function gG(t){return new x(3015,!1)}function _G(t){return new x(3016,!1)}function yG(t,e){return new x(3404,!1)}function vG(t){return new x(3502,!1)}function bG(t){return new x(3503,!1)}function wG(){return new x(3300,!1)}function EG(t){return new x(3504,!1)}function IG(t){return new x(3301,!1)}function CG(t,e){return new x(3302,!1)}function TG(t){return new x(3303,!1)}function SG(t,e){return new x(3400,!1)}function DG(t){return new x(3401,!1)}function xG(t){return new x(3402,!1)}function AG(t,e){return new x(3505,!1)}function Fs(t){switch(t.length){case 0:return new Os;case 1:return t[0];default:return new ud(t)}}function SR(t,e,n=new Map,i=new Map){let r=[],s=[],o=-1,a=null;if(e.forEach(l=>{let c=l.get("offset"),u=c==o,d=u&&a||new Map;l.forEach((h,p)=>{let f=p,m=h;if(p!=="offset")switch(f=t.normalizePropertyName(f,r),m){case Im:m=n.get(p);break;case Xi:m=i.get(p);break;default:m=t.normalizeStyleValue(p,f,m,r);break}d.set(f,m)}),u||s.push(d),a=d,o=c}),r.length)throw vG(r);return s}function Ow(t,e,n,i){switch(e){case"start":t.onStart(()=>i(n&&pw(n,"start",t)));break;case"done":t.onDone(()=>i(n&&pw(n,"done",t)));break;case"destroy":t.onDestroy(()=>i(n&&pw(n,"destroy",t)));break}}function pw(t,e,n){let i=n.totalTime,r=!!n.disabled,s=Fw(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,i??t.totalTime,r),o=t._data;return o!=null&&(s._data=o),s}function Fw(t,e,n,i,r="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function kn(t,e,n){let i=t.get(e);return i||t.set(e,i=n),i}function fR(t){let e=t.indexOf(":"),n=t.substring(1,e),i=t.slice(e+1);return[n,i]}var MG=(()=>typeof document>"u"?null:document.documentElement)();function Lw(t){let e=t.parentNode||t.host||null;return e===MG?null:e}function kG(t){return t.substring(1,6)=="ebkit"}var Ko=null,pR=!1;function RG(t){Ko||(Ko=NG()||{},pR=Ko.style?"WebkitAppearance"in Ko.style:!1);let e=!0;return Ko.style&&!kG(t)&&(e=t in Ko.style,!e&&pR&&(e="Webkit"+t.charAt(0).toUpperCase()+t.slice(1)in Ko.style)),e}function NG(){return typeof document<"u"?document.body:null}function DR(t,e){for(;e;){if(e===t)return!0;e=Lw(e)}return!1}function xR(t,e,n){if(n)return Array.from(t.querySelectorAll(e));let i=t.querySelector(e);return i?[i]:[]}var Vw=(()=>{let e=class e{validateStyleProperty(i){return RG(i)}matchesElement(i,r){return!1}containsElement(i,r){return DR(i,r)}getParentElement(i){return Lw(i)}query(i,r,s){return xR(i,r,s)}computeStyle(i,r,s){return s||""}animate(i,r,s,o,a,l=[],c){return new Os(s,o)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})(),_d=(()=>{let e=class e{};e.NOOP=new Vw;let t=e;return t})(),Jo=class{};var PG=1e3,AR="{{",OG="}}",MR="ng-enter",bw="ng-leave",Cm="ng-trigger",Am=".ng-trigger",mR="ng-animating",ww=".ng-animating";function Pr(t){if(typeof t=="number")return t;let e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Ew(parseFloat(e[1]),e[2])}function Ew(t,e){switch(e){case"s":return t*PG;default:return t}}function Mm(t,e,n){return t.hasOwnProperty("duration")?t:FG(t,e,n)}function FG(t,e,n){let i=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i,r,s=0,o="";if(typeof t=="string"){let a=t.match(i);if(a===null)return e.push(hR(t)),{duration:0,delay:0,easing:""};r=Ew(parseFloat(a[1]),a[2]);let l=a[3];l!=null&&(s=Ew(parseFloat(l),a[4]));let c=a[5];c&&(o=c)}else r=t;if(!n){let a=!1,l=e.length;r<0&&(e.push(Zq()),a=!0),s<0&&(e.push(eG()),a=!0),a&&e.splice(l,0,hR(t))}return{duration:r,delay:s,easing:o}}function yd(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function kR(t){let e=new Map;return Object.keys(t).forEach(n=>{let i=t[n];e.set(n,i)}),e}function LG(t){return t.length?t[0]instanceof Map?t:t.map(e=>kR(e)):[]}function Gl(t,e=new Map,n){if(n)for(let[i,r]of n)e.set(i,r);for(let[i,r]of t)e.set(i,r);return e}function Zi(t,e,n){e.forEach((i,r)=>{let s=Bw(r);n&&!n.has(r)&&n.set(r,t.style[s]),t.style[s]=i})}function Qo(t,e){e.forEach((n,i)=>{let r=Bw(i);t.style[r]=""})}function dd(t){return Array.isArray(t)?t.length==1?t[0]:dR(t):t}function VG(t,e,n){let i=e.params||{},r=RR(t);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||n.push(tG(s))})}var Iw=new RegExp(`${AR}\\s*(.+?)\\s*${OG}`,"g");function RR(t){let e=[];if(typeof t=="string"){let n;for(;n=Iw.exec(t);)e.push(n[1]);Iw.lastIndex=0}return e}function fd(t,e,n){let i=t.toString(),r=i.replace(Iw,(s,o)=>{let a=e[o];return a==null&&(n.push(nG(o)),a=""),a.toString()});return r==i?t:r}function km(t){let e=[],n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}var BG=/-+([a-z0-9])/g;function Bw(t){return t.replace(BG,(...e)=>e[1].toUpperCase())}function jG(t,e){return t===0||e===0}function UG(t,e,n){if(n.size&&e.length){let i=e[0],r=[];if(n.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,NR(t,a)))}}return e}function Mn(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw iG(e.type)}}function NR(t,e){return window.getComputedStyle(t)[e]}var zG=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),Rm=class extends Jo{normalizePropertyName(e,n){return Bw(e)}normalizeStyleValue(e,n,i,r){let s="",o=i.toString().trim();if(zG.has(n)&&i!==0&&i!=="0")if(typeof i=="number")s="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(rG(e,i))}return o+s}};var Nm="*";function $G(t,e){let n=[];return typeof t=="string"?t.split(/\s*,\s*/).forEach(i=>HG(i,n,e)):n.push(t),n}function HG(t,e,n){if(t[0]==":"){let l=WG(t,n);if(typeof l=="function"){e.push(l);return}t=l}let i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return n.push(gG(t)),e;let r=i[1],s=i[2],o=i[3];e.push(gR(r,o));let a=r==Nm&&o==Nm;s[0]=="<"&&!a&&e.push(gR(o,r))}function WG(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,i)=>parseFloat(i)>parseFloat(n);case":decrement":return(n,i)=>parseFloat(i)<parseFloat(n);default:return e.push(_G(t)),"* => *"}}var Tm=new Set(["true","1"]),Sm=new Set(["false","0"]);function gR(t,e){let n=Tm.has(t)||Sm.has(t),i=Tm.has(e)||Sm.has(e);return(r,s)=>{let o=t==Nm||t==r,a=e==Nm||e==s;return!o&&n&&typeof r=="boolean"&&(o=r?Tm.has(t):Sm.has(t)),!a&&i&&typeof s=="boolean"&&(a=s?Tm.has(e):Sm.has(e)),o&&a}}var PR=":self",qG=new RegExp(`s*${PR}s*,?`,"g");function OR(t,e,n,i){return new Cw(t).build(e,n,i)}var _R="",Cw=class{constructor(e){this._driver=e}build(e,n,i){let r=new Tw(n);return this._resetContextStyleTimingState(r),Mn(this,dd(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=_R,e.collectedStyles=new Map,e.collectedStyles.set(_R,new Map),e.currentTime=0}visitTrigger(e,n){let i=n.queryCount=0,r=n.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&n.errors.push(sG()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(n),a.type==0){let l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(u=>{l.name=u,s.push(this.visitState(l,n))}),l.name=c}else if(a.type==1){let l=this.visitTransition(a,n);i+=l.queryCount,r+=l.depCount,o.push(l)}else n.errors.push(oG())}),{type:7,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,n){let i=this.visitStyle(e.styles,n),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){let s=new Set,o=r||{};if(i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{RR(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size){let a=km(s.values());n.errors.push(aG(e.name,a))}}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,n){n.queryCount=0,n.depCount=0;let i=Mn(this,dd(e.animation),n);return{type:1,matchers:$G(e.expr,n.errors),animation:i,queryCount:n.queryCount,depCount:n.depCount,options:Yo(e.options)}}visitSequence(e,n){return{type:2,steps:e.steps.map(i=>Mn(this,i,n)),options:Yo(e.options)}}visitGroup(e,n){let i=n.currentTime,r=0,s=e.steps.map(o=>{n.currentTime=i;let a=Mn(this,o,n);return r=Math.max(r,n.currentTime),a});return n.currentTime=r,{type:3,steps:s,options:Yo(e.options)}}visitAnimate(e,n){let i=QG(e.timings,n.errors);n.currentAnimateTimings=i;let r,s=e.styles?e.styles:fw({});if(s.type==5)r=this.visitKeyframes(s,n);else{let o=e.styles,a=!1;if(!o){a=!0;let c={};i.easing&&(c.easing=i.easing),o=fw(c)}n.currentTime+=i.duration+i.delay;let l=this.visitStyle(o,n);l.isEmptyStep=a,r=l}return n.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,n){let i=this._makeStyleAst(e,n);return this._validateStyleAst(i,n),i}_makeStyleAst(e,n){let i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)typeof a=="string"?a===Xi?i.push(a):n.errors.push(lG(a)):i.push(kR(a));let s=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let l of a.values())if(l.toString().indexOf(AR)>=0){s=!0;break}}}),{type:6,styles:i,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,n){let i=n.currentAnimateTimings,r=n.currentTime,s=n.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,l)=>{let c=n.collectedStyles.get(n.currentQuerySelector),u=c.get(l),d=!0;u&&(s!=r&&s>=u.startTime&&r<=u.endTime&&(n.errors.push(cG(l,u.startTime,u.endTime,s,r)),d=!1),s=u.startTime),d&&c.set(l,{startTime:s,endTime:r}),n.options&&VG(a,n.options,n.errors)})})}visitKeyframes(e,n){let i={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(uG()),i;let r=1,s=0,o=[],a=!1,l=!1,c=0,u=e.steps.map(w=>{let O=this._makeStyleAst(w,n),Y=O.offset!=null?O.offset:YG(O.styles),j=0;return Y!=null&&(s++,j=O.offset=Y),l=l||j<0||j>1,a=a||j<c,c=j,o.push(j),O});l&&n.errors.push(dG()),a&&n.errors.push(hG());let d=e.steps.length,h=0;s>0&&s<d?n.errors.push(fG()):s==0&&(h=r/(d-1));let p=d-1,f=n.currentTime,m=n.currentAnimateTimings,g=m.duration;return u.forEach((w,O)=>{let Y=h>0?O==p?1:h*O:o[O],j=Y*g;n.currentTime=f+m.delay+j,m.duration=j,this._validateStyleAst(w,n),w.offset=Y,i.styles.push(w)}),i}visitReference(e,n){return{type:8,animation:Mn(this,dd(e.animation),n),options:Yo(e.options)}}visitAnimateChild(e,n){return n.depCount++,{type:9,options:Yo(e.options)}}visitAnimateRef(e,n){return{type:10,animation:this.visitReference(e.animation,n),options:Yo(e.options)}}visitQuery(e,n){let i=n.currentQuerySelector,r=e.options||{};n.queryCount++,n.currentQuery=e;let[s,o]=GG(e.selector);n.currentQuerySelector=i.length?i+" "+s:s,kn(n.collectedStyles,n.currentQuerySelector,new Map);let a=Mn(this,dd(e.animation),n);return n.currentQuery=null,n.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Yo(e.options)}}visitStagger(e,n){n.currentQuery||n.errors.push(pG());let i=e.timings==="full"?{duration:0,delay:0,easing:"full"}:Mm(e.timings,n.errors,!0);return{type:12,animation:Mn(this,dd(e.animation),n),timings:i,options:null}}};function GG(t){let e=!!t.split(/\s*,\s*/).find(n=>n==PR);return e&&(t=t.replace(qG,"")),t=t.replace(/@\*/g,Am).replace(/@\w+/g,n=>Am+"-"+n.slice(1)).replace(/:animating/g,ww),[t,e]}function KG(t){return t?yd(t):null}var Tw=class{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}};function YG(t){if(typeof t=="string")return null;let e=null;if(Array.isArray(t))t.forEach(n=>{if(n instanceof Map&&n.has("offset")){let i=n;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(t instanceof Map&&t.has("offset")){let n=t;e=parseFloat(n.get("offset")),n.delete("offset")}return e}function QG(t,e){if(t.hasOwnProperty("duration"))return t;if(typeof t=="number"){let s=Mm(t,e).duration;return mw(s,0,"")}let n=t;if(n.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=mw(0,0,"");return s.dynamic=!0,s.strValue=n,s}let r=Mm(n,e);return mw(r.duration,r.delay,r.easing)}function Yo(t){return t?(t=yd(t),t.params&&(t.params=KG(t.params))):t={},t}function mw(t,e,n){return{duration:t,delay:e,easing:n}}function jw(t,e,n,i,r,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}var pd=class{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,n){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...n)}has(e){return this._map.has(e)}clear(){this._map.clear()}},JG=1,XG=":enter",ZG=new RegExp(XG,"g"),e6=":leave",t6=new RegExp(e6,"g");function FR(t,e,n,i,r,s=new Map,o=new Map,a,l,c=[]){return new Sw().buildKeyframes(t,e,n,i,r,s,o,a,l,c)}var Sw=class{buildKeyframes(e,n,i,r,s,o,a,l,c,u=[]){c=c||new pd;let d=new Dw(e,n,c,r,s,u,[]);d.options=l;let h=l.delay?Pr(l.delay):0;d.currentTimeline.delayNextStep(h),d.currentTimeline.setStyles([o],null,d.errors,l),Mn(this,i,d);let p=d.timelines.filter(f=>f.containsAnimation());if(p.length&&a.size){let f;for(let m=p.length-1;m>=0;m--){let g=p[m];if(g.element===n){f=g;break}}f&&!f.allowOnlyTimelineStyles()&&f.setStyles([a],null,d.errors,l)}return p.length?p.map(f=>f.buildKeyframes()):[jw(n,[],[],[],0,h,"",!1)]}visitTrigger(e,n){}visitState(e,n){}visitTransition(e,n){}visitAnimateChild(e,n){let i=n.subInstructions.get(n.element);if(i){let r=n.createSubContext(e.options),s=n.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&n.transformIntoNewTimeline(o)}n.previousNode=e}visitAnimateRef(e,n){let i=n.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],n,i),this.visitReference(e.animation,i),n.transformIntoNewTimeline(i.currentTimeline.currentTime),n.previousNode=e}_applyAnimationRefDelays(e,n,i){for(let r of e){let s=r?.delay;if(s){let o=typeof s=="number"?s:Pr(fd(s,r?.params??{},n.errors));i.delayNextStep(o)}}}_visitSubInstructions(e,n,i){let s=n.currentTimeline.currentTime,o=i.duration!=null?Pr(i.duration):null,a=i.delay!=null?Pr(i.delay):null;return o!==0&&e.forEach(l=>{let c=n.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,n){n.updateOptions(e.options,!0),Mn(this,e.animation,n),n.previousNode=e}visitSequence(e,n){let i=n.subContextCount,r=n,s=e.options;if(s&&(s.params||s.delay)&&(r=n.createSubContext(s),r.transformIntoNewTimeline(),s.delay!=null)){r.previousNode.type==6&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=Pm);let o=Pr(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Mn(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),n.previousNode=e}visitGroup(e,n){let i=[],r=n.currentTimeline.currentTime,s=e.options&&e.options.delay?Pr(e.options.delay):0;e.steps.forEach(o=>{let a=n.createSubContext(e.options);s&&a.delayNextStep(s),Mn(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>n.currentTimeline.mergeTimelineCollectedStyles(o)),n.transformIntoNewTimeline(r),n.previousNode=e}_visitTiming(e,n){if(e.dynamic){let i=e.strValue,r=n.params?fd(i,n.params,n.errors):i;return Mm(r,n.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,n){let i=n.currentAnimateTimings=this._visitTiming(e.timings,n),r=n.currentTimeline;i.delay&&(n.incrementTime(i.delay),r.snapshotCurrentStyles());let s=e.style;s.type==5?this.visitKeyframes(s,n):(n.incrementTime(i.duration),this.visitStyle(s,n),r.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=e}visitStyle(e,n){let i=n.currentTimeline,r=n.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,n.errors,n.options),n.previousNode=e}visitKeyframes(e,n){let i=n.currentAnimateTimings,r=n.currentTimeline.duration,s=i.duration,a=n.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{let c=l.offset||0;a.forwardTime(c*s),a.setStyles(l.styles,l.easing,n.errors,n.options),a.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(a),n.transformIntoNewTimeline(r+s),n.previousNode=e}visitQuery(e,n){let i=n.currentTimeline.currentTime,r=e.options||{},s=r.delay?Pr(r.delay):0;s&&(n.previousNode.type===6||i==0&&n.currentTimeline.hasCurrentStyleProperties())&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=Pm);let o=i,a=n.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,n.errors);n.currentQueryTotal=a.length;let l=null;a.forEach((c,u)=>{n.currentQueryIndex=u;let d=n.createSubContext(e.options,c);s&&d.delayNextStep(s),c===n.element&&(l=d.currentTimeline),Mn(this,e.animation,d),d.currentTimeline.applyStylesToKeyframe();let h=d.currentTimeline.currentTime;o=Math.max(o,h)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(o),l&&(n.currentTimeline.mergeTimelineCollectedStyles(l),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=e}visitStagger(e,n){let i=n.parentContext,r=n.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(n.currentQueryTotal-1),l=o*n.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime;break}let u=n.currentTimeline;l&&u.delayNextStep(l);let d=u.currentTime;Mn(this,e.animation,n),n.previousNode=e,i.currentStaggerTime=r.currentTime-d+(r.startTime-i.currentTimeline.startTime)}},Pm={},Dw=class t{constructor(e,n,i,r,s,o,a,l){this._driver=e,this.element=n,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Pm,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new Om(this._driver,n,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,n){if(!e)return;let i=e,r=this.options;i.duration!=null&&(r.duration=Pr(i.duration)),i.delay!=null&&(r.delay=Pr(i.delay));let s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!n||!o.hasOwnProperty(a))&&(o[a]=fd(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let n=this.options.params;if(n){let i=e.params={};Object.keys(n).forEach(r=>{i[r]=n[r]})}}return e}createSubContext(e=null,n,i){let r=n||this.element,s=new t(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Pm,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,n,i){let r={duration:n??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new xw(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,n,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=e.replace(ZG,"."+this._enterClassName),e=e.replace(t6,"."+this._leaveClassName);let l=i!=1,c=this._driver.query(this.element,e,l);i!==0&&(c=i<0?c.slice(c.length+i,c.length):c.slice(0,i)),a.push(...c)}return!s&&a.length==0&&o.push(mG(n)),a}},Om=class t{constructor(e,n,i,r){this._driver=e,this.element=n,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let n=this._keyframes.size===1&&this._pendingStyles.size;this.duration||n?(this.forwardTime(this.currentTime+e),n&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,n){return this.applyStylesToKeyframe(),new t(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=JG,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,n){this._localTimelineStyles.set(e,n),this._globalTimelineStyles.set(e,n),this._styleSummary.set(e,{time:this.currentTime,value:n})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[n,i]of this._globalTimelineStyles)this._backFill.set(n,i||Xi),this._currentKeyframe.set(n,Xi);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,n,i,r){n&&this._previousKeyframe.set("easing",n);let s=r&&r.params||{},o=n6(e,this._globalTimelineStyles);for(let[a,l]of o){let c=fd(l,s,i);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??Xi),this._updateStyle(a,c)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,n)=>{this._currentKeyframe.set(n,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,n)=>{this._currentKeyframe.has(n)||this._currentKeyframe.set(n,e)}))}snapshotCurrentStyles(){for(let[e,n]of this._localTimelineStyles)this._pendingStyles.set(e,n),this._updateStyle(e,n)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let n in this._currentKeyframe)e.push(n);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((n,i)=>{let r=this._styleSummary.get(i);(!r||n.time>r.time)&&this._updateStyle(i,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,n=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,l)=>{let c=Gl(a,new Map,this._backFill);c.forEach((u,d)=>{u===Im?e.add(d):u===Xi&&n.add(d)}),i||c.set("offset",l/this.duration),r.push(c)});let s=e.size?km(e.values()):[],o=n.size?km(n.values()):[];if(i){let a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return jw(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}},xw=class extends Om{constructor(e,n,i,r,s,o,a=!1){super(e,n,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:n,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&n){let s=[],o=i+n,a=n/o,l=Gl(e[0]);l.set("offset",0),s.push(l);let c=Gl(e[0]);c.set("offset",yR(a)),s.push(c);let u=e.length-1;for(let d=1;d<=u;d++){let h=Gl(e[d]),p=h.get("offset"),f=n+p*i;h.set("offset",yR(f/o)),s.push(h)}i=o,n=0,r="",e=s}return jw(this.element,e,this.preStyleProps,this.postStyleProps,i,n,r,!0)}};function yR(t,e=3){let n=Math.pow(10,e-1);return Math.round(t*n)/n}function n6(t,e){let n=new Map,i;return t.forEach(r=>{if(r==="*"){i=i||e.keys();for(let s of i)n.set(s,Xi)}else Gl(r,n)}),n}function vR(t,e,n,i,r,s,o,a,l,c,u,d,h){return{type:0,element:t,triggerName:e,isRemovalTransition:r,fromState:n,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:u,totalTime:d,errors:h}}var gw={},Fm=class{constructor(e,n,i){this._triggerName=e,this.ast=n,this._stateStyles=i}match(e,n,i,r){return i6(this.ast.matchers,e,n,i,r)}buildStyles(e,n,i){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(n,i):new Map}build(e,n,i,r,s,o,a,l,c,u){let d=[],h=this.ast.options&&this.ast.options.params||gw,p=a&&a.params||gw,f=this.buildStyles(i,p,d),m=l&&l.params||gw,g=this.buildStyles(r,m,d),w=new Set,O=new Map,Y=new Map,j=r==="void",Ne={params:r6(m,h),delay:this.ast.options?.delay},se=u?[]:FR(e,n,this.ast.animation,s,o,f,g,Ne,c,d),De=0;if(se.forEach(W=>{De=Math.max(W.duration+W.delay,De)}),d.length)return vR(n,this._triggerName,i,r,j,f,g,[],[],O,Y,De,d);se.forEach(W=>{let it=W.element,fo=kn(O,it,new Set);W.preStyleProps.forEach(mo=>fo.add(mo));let po=kn(Y,it,new Set);W.postStyleProps.forEach(mo=>po.add(mo)),it!==n&&w.add(it)});let ct=km(w.values());return vR(n,this._triggerName,i,r,j,f,g,se,ct,O,Y,De)}};function i6(t,e,n,i,r){return t.some(s=>s(e,n,i,r))}function r6(t,e){let n=yd(e);for(let i in t)t.hasOwnProperty(i)&&t[i]!=null&&(n[i]=t[i]);return n}var Aw=class{constructor(e,n,i){this.styles=e,this.defaultParams=n,this.normalizer=i}buildStyles(e,n){let i=new Map,r=yd(this.defaultParams);return Object.keys(e).forEach(s=>{let o=e[s];o!==null&&(r[s]=o)}),this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=fd(o,r,n));let l=this.normalizer.normalizePropertyName(a,n);o=this.normalizer.normalizeStyleValue(a,l,o,n),i.set(a,o)})}),i}};function s6(t,e,n){return new Mw(t,e,n)}var Mw=class{constructor(e,n,i){this.name=e,this.ast=n,this._normalizer=i,this.transitionFactories=[],this.states=new Map,n.states.forEach(r=>{let s=r.options&&r.options.params||{};this.states.set(r.name,new Aw(r.style,s,i))}),bR(this.states,"true","1"),bR(this.states,"false","0"),n.transitions.forEach(r=>{this.transitionFactories.push(new Fm(e,r,this.states))}),this.fallbackTransition=o6(e,this.states,this._normalizer)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,n,i,r){return this.transitionFactories.find(o=>o.match(e,n,i,r))||null}matchStyles(e,n,i){return this.fallbackTransition.buildStyles(e,n,i)}};function o6(t,e,n){let s={type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0};return new Fm(t,s,e)}function bR(t,e,n){t.has(e)?t.has(n)||t.set(n,t.get(e)):t.has(n)&&t.set(e,t.get(n))}var a6=new pd,kw=class{constructor(e,n,i){this.bodyNode=e,this._driver=n,this._normalizer=i,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,n){let i=[],r=[],s=OR(this._driver,n,i,r);if(i.length)throw bG(i);r.length&&void 0,this._animations.set(e,s)}_buildPlayer(e,n,i){let r=e.element,s=SR(this._normalizer,e.keyframes,n,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,n,i={}){let r=[],s=this._animations.get(e),o,a=new Map;if(s?(o=FR(this._driver,n,s,MR,bw,new Map,new Map,i,a6,r),o.forEach(u=>{let d=kn(a,u.element,new Map);u.postStyleProps.forEach(h=>d.set(h,null))})):(r.push(wG()),o=[]),r.length)throw EG(r);a.forEach((u,d)=>{u.forEach((h,p)=>{u.set(p,this._driver.computeStyle(d,p,Xi))})});let l=o.map(u=>{let d=a.get(u.element);return this._buildPlayer(u,new Map,d)}),c=Fs(l);return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){let n=this._getPlayer(e);n.destroy(),this._playersById.delete(e);let i=this.players.indexOf(n);i>=0&&this.players.splice(i,1)}_getPlayer(e){let n=this._playersById.get(e);if(!n)throw IG(e);return n}listen(e,n,i,r){let s=Fw(n,"","","");return Ow(this._getPlayer(e),i,s,r),()=>{}}command(e,n,i,r){if(i=="register"){this.register(e,r[0]);return}if(i=="create"){let o=r[0]||{};this.create(e,n,o);return}let s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},wR="ng-animate-queued",l6=".ng-animate-queued",_w="ng-animate-disabled",c6=".ng-animate-disabled",u6="ng-star-inserted",d6=".ng-star-inserted",h6=[],LR={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},f6={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},mi="__ng_removed",md=class{get params(){return this.options.params}constructor(e,n=""){this.namespaceId=n;let i=e&&e.hasOwnProperty("value"),r=i?e.value:e;if(this.value=m6(r),i){let s=yd(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let n=e.params;if(n){let i=this.options.params;Object.keys(n).forEach(r=>{i[r]==null&&(i[r]=n[r])})}}},hd="void",yw=new md(hd),Rw=class{constructor(e,n,i){this.id=e,this.hostElement=n,this._engine=i,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Gn(n,this._hostClassName)}listen(e,n,i,r){if(!this._triggers.has(n))throw CG(i,n);if(i==null||i.length==0)throw TG(n);if(!g6(i))throw SG(i,n);let s=kn(this._elementListeners,e,[]),o={name:n,phase:i,callback:r};s.push(o);let a=kn(this._engine.statesByElement,e,new Map);return a.has(n)||(Gn(e,Cm),Gn(e,Cm+"-"+n),a.set(n,yw)),()=>{this._engine.afterFlush(()=>{let l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(n)||a.delete(n)})}}register(e,n){return this._triggers.has(e)?!1:(this._triggers.set(e,n),!0)}_getTrigger(e){let n=this._triggers.get(e);if(!n)throw DG(e);return n}trigger(e,n,i,r=!0){let s=this._getTrigger(n),o=new gd(this.id,n,e),a=this._engine.statesByElement.get(e);a||(Gn(e,Cm),Gn(e,Cm+"-"+n),this._engine.statesByElement.set(e,a=new Map));let l=a.get(n),c=new md(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(n,c),l||(l=yw),!(c.value===hd)&&l.value===c.value){if(!v6(l.params,c.params)){let m=[],g=s.matchStyles(l.value,l.params,m),w=s.matchStyles(c.value,c.params,m);m.length?this._engine.reportError(m):this._engine.afterFlush(()=>{Qo(e,g),Zi(e,w)})}return}let h=kn(this._engine.playersByElement,e,[]);h.forEach(m=>{m.namespaceId==this.id&&m.triggerName==n&&m.queued&&m.destroy()});let p=s.matchTransition(l.value,c.value,e,c.params),f=!1;if(!p){if(!r)return;p=s.fallbackTransition,f=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:n,transition:p,fromState:l,toState:c,player:o,isFallbackTransition:f}),f||(Gn(e,wR),o.onStart(()=>{ql(e,wR)})),o.onDone(()=>{let m=this.players.indexOf(o);m>=0&&this.players.splice(m,1);let g=this._engine.playersByElement.get(e);if(g){let w=g.indexOf(o);w>=0&&g.splice(w,1)}}),this.players.push(o),h.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(n=>n.delete(e)),this._elementListeners.forEach((n,i)=>{this._elementListeners.set(i,n.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let n=this._engine.playersByElement.get(e);n&&(n.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,n){let i=this._engine.driver.query(e,Am,!0);i.forEach(r=>{if(r[mi])return;let s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,n,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,n,i,r){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){let u=this.trigger(e,c,hd,r);u&&a.push(u)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,n,o),i&&Fs(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let n=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(n&&i){let r=new Set;n.forEach(s=>{let o=s.name;if(r.has(o))return;r.add(o);let l=this._triggers.get(o).fallbackTransition,c=i.get(o)||yw,u=new md(hd),d=new gd(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:u,player:d,isFallbackTransition:!0})})}}removeNode(e,n){let i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,n),this.triggerLeaveAnimation(e,n,!0))return;let r=!1;if(i.totalAnimations){let s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,n);else{let s=e[mi];(!s||s===LR)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,n))}}insertNode(e,n){Gn(e,this._hostClassName)}drainQueuedTransitions(e){let n=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){let l=Fw(s,i.triggerName,i.fromState.value,i.toState.value);l._data=e,Ow(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):n.push(i)}),this._queue=[],n.sort((i,r)=>{let s=i.transition.ast.depCount,o=r.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},Nw=class{_onRemovalComplete(e,n){this.onRemovalComplete(e,n)}constructor(e,n,i){this.bodyNode=e,this.driver=n,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){let e=[];return this._namespaceList.forEach(n=>{n.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,n){let i=new Rw(e,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(i,n):(this.newHostElements.set(n,i),this.collectEnterElement(n)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,n){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(n);for(;a;){let l=r.get(a);if(l){let c=i.indexOf(l);i.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(e)}else i.push(e);return r.set(n,e),e}register(e,n){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,n)),i}registerTrigger(e,n,i){let r=this._namespaceLookup[e];r&&r.register(n,i)&&this.totalAnimations++}destroy(e,n){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(n),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let n=new Set,i=this.statesByElement.get(e);if(i){for(let r of i.values())if(r.namespaceId){let s=this._fetchNamespace(r.namespaceId);s&&n.add(s)}}return n}trigger(e,n,i,r){if(Dm(n)){let s=this._fetchNamespace(e);if(s)return s.trigger(n,i,r),!0}return!1}insertNode(e,n,i,r){if(!Dm(n))return;let s=n[mi];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(n);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(n,i)}r&&this.collectEnterElement(n)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,n){n?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Gn(e,_w)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),ql(e,_w))}removeNode(e,n,i){if(Dm(n)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(n,i):this.markElementAsRemoved(e,n,!1,i);let s=this.namespacesByHostElement.get(n);s&&s.id!==e&&s.removeNode(n,i)}else this._onRemovalComplete(n,i)}markElementAsRemoved(e,n,i,r,s){this.collectedLeaveElements.push(n),n[mi]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,n,i,r,s){return Dm(n)?this._fetchNamespace(e).listen(n,i,r,s):()=>{}}_buildInstruction(e,n,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,n,s)}destroyInnerAnimations(e){let n=this.driver.query(e,Am,!0);n.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(n=this.driver.query(e,ww,!0),n.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){let n=this.playersByElement.get(e);n&&n.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){let n=this.playersByQueriedElement.get(e);n&&n.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Fs(this.players).onDone(()=>e());e()})}processLeaveNode(e){let n=e[mi];if(n&&n.setForRemoval){if(e[mi]=LR,n.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(n.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}e.classList?.contains(_w)&&this.markElementAsDisabled(e,!1),this.driver.query(e,c6,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];Gn(r,u6)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{n=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],n.length?Fs(n).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw xG(e)}_flushAnimations(e,n){let i=new pd,r=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,u=new Set;this.disabledNodes.forEach(V=>{u.add(V);let z=this.driver.query(V,l6,!0);for(let Q=0;Q<z.length;Q++)u.add(z[Q])});let d=this.bodyNode,h=Array.from(this.statesByElement.keys()),p=CR(h,this.collectedEnterElements),f=new Map,m=0;p.forEach((V,z)=>{let Q=MR+m++;f.set(z,Q),V.forEach(Ce=>Gn(Ce,Q))});let g=[],w=new Set,O=new Set;for(let V=0;V<this.collectedLeaveElements.length;V++){let z=this.collectedLeaveElements[V],Q=z[mi];Q&&Q.setForRemoval&&(g.push(z),w.add(z),Q.hasAnimation?this.driver.query(z,d6,!0).forEach(Ce=>w.add(Ce)):O.add(z))}let Y=new Map,j=CR(h,Array.from(w));j.forEach((V,z)=>{let Q=bw+m++;Y.set(z,Q),V.forEach(Ce=>Gn(Ce,Q))}),e.push(()=>{p.forEach((V,z)=>{let Q=f.get(z);V.forEach(Ce=>ql(Ce,Q))}),j.forEach((V,z)=>{let Q=Y.get(z);V.forEach(Ce=>ql(Ce,Q))}),g.forEach(V=>{this.processLeaveNode(V)})});let Ne=[],se=[];for(let V=this._namespaceList.length-1;V>=0;V--)this._namespaceList[V].drainQueuedTransitions(n).forEach(Q=>{let Ce=Q.player,_t=Q.element;if(Ne.push(Ce),this.collectedEnterElements.length){let Ot=_t[mi];if(Ot&&Ot.setForMove){if(Ot.previousTriggersValues&&Ot.previousTriggersValues.has(Q.triggerName)){let go=Ot.previousTriggersValues.get(Q.triggerName),Bn=this.statesByElement.get(Q.element);if(Bn&&Bn.has(Q.triggerName)){let df=Bn.get(Q.triggerName);df.value=go,Bn.set(Q.triggerName,df)}}Ce.destroy();return}}let Mi=!d||!this.driver.containsElement(d,_t),bn=Y.get(_t),ss=f.get(_t),Qe=this._buildInstruction(Q,i,ss,bn,Mi);if(Qe.errors&&Qe.errors.length){se.push(Qe);return}if(Mi){Ce.onStart(()=>Qo(_t,Qe.fromStyles)),Ce.onDestroy(()=>Zi(_t,Qe.toStyles)),r.push(Ce);return}if(Q.isFallbackTransition){Ce.onStart(()=>Qo(_t,Qe.fromStyles)),Ce.onDestroy(()=>Zi(_t,Qe.toStyles)),r.push(Ce);return}let PD=[];Qe.timelines.forEach(Ot=>{Ot.stretchStartingKeyframe=!0,this.disabledNodes.has(Ot.element)||PD.push(Ot)}),Qe.timelines=PD,i.append(_t,Qe.timelines);let Hj={instruction:Qe,player:Ce,element:_t};o.push(Hj),Qe.queriedElements.forEach(Ot=>kn(a,Ot,[]).push(Ce)),Qe.preStyleProps.forEach((Ot,go)=>{if(Ot.size){let Bn=l.get(go);Bn||l.set(go,Bn=new Set),Ot.forEach((df,Ty)=>Bn.add(Ty))}}),Qe.postStyleProps.forEach((Ot,go)=>{let Bn=c.get(go);Bn||c.set(go,Bn=new Set),Ot.forEach((df,Ty)=>Bn.add(Ty))})});if(se.length){let V=[];se.forEach(z=>{V.push(AG(z.triggerName,z.errors))}),Ne.forEach(z=>z.destroy()),this.reportError(V)}let De=new Map,ct=new Map;o.forEach(V=>{let z=V.element;i.has(z)&&(ct.set(z,z),this._beforeAnimationBuild(V.player.namespaceId,V.instruction,De))}),r.forEach(V=>{let z=V.element;this._getPreviousPlayers(z,!1,V.namespaceId,V.triggerName,null).forEach(Ce=>{kn(De,z,[]).push(Ce),Ce.destroy()})});let W=g.filter(V=>TR(V,l,c)),it=new Map;IR(it,this.driver,O,c,Xi).forEach(V=>{TR(V,l,c)&&W.push(V)});let po=new Map;p.forEach((V,z)=>{IR(po,this.driver,new Set(V),l,Im)}),W.forEach(V=>{let z=it.get(V),Q=po.get(V);it.set(V,new Map([...z?.entries()??[],...Q?.entries()??[]]))});let mo=[],RD=[],ND={};o.forEach(V=>{let{element:z,player:Q,instruction:Ce}=V;if(i.has(z)){if(u.has(z)){Q.onDestroy(()=>Zi(z,Ce.toStyles)),Q.disabled=!0,Q.overrideTotalTime(Ce.totalTime),r.push(Q);return}let _t=ND;if(ct.size>1){let bn=z,ss=[];for(;bn=bn.parentNode;){let Qe=ct.get(bn);if(Qe){_t=Qe;break}ss.push(bn)}ss.forEach(Qe=>ct.set(Qe,_t))}let Mi=this._buildAnimation(Q.namespaceId,Ce,De,s,po,it);if(Q.setRealPlayer(Mi),_t===ND)mo.push(Q);else{let bn=this.playersByElement.get(_t);bn&&bn.length&&(Q.parentPlayer=Fs(bn)),r.push(Q)}}else Qo(z,Ce.fromStyles),Q.onDestroy(()=>Zi(z,Ce.toStyles)),RD.push(Q),u.has(z)&&r.push(Q)}),RD.forEach(V=>{let z=s.get(V.element);if(z&&z.length){let Q=Fs(z);V.setRealPlayer(Q)}}),r.forEach(V=>{V.parentPlayer?V.syncPlayerEvents(V.parentPlayer):V.destroy()});for(let V=0;V<g.length;V++){let z=g[V],Q=z[mi];if(ql(z,bw),Q&&Q.hasAnimation)continue;let Ce=[];if(a.size){let Mi=a.get(z);Mi&&Mi.length&&Ce.push(...Mi);let bn=this.driver.query(z,ww,!0);for(let ss=0;ss<bn.length;ss++){let Qe=a.get(bn[ss]);Qe&&Qe.length&&Ce.push(...Qe)}}let _t=Ce.filter(Mi=>!Mi.destroyed);_t.length?_6(this,z,_t):this.processLeaveNode(z)}return g.length=0,mo.forEach(V=>{this.players.push(V),V.onDone(()=>{V.destroy();let z=this.players.indexOf(V);this.players.splice(z,1)}),V.play()}),mo}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,n,i,r,s){let o=[];if(n){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let l=!s||s==hd;a.forEach(c=>{c.queued||!l&&c.triggerName!=r||o.push(c)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,n,i){let r=n.triggerName,s=n.element,o=n.isRemovalTransition?void 0:e,a=n.isRemovalTransition?void 0:r;for(let l of n.timelines){let c=l.element,u=c!==s,d=kn(i,c,[]);this._getPreviousPlayers(c,u,o,a,n.toState).forEach(p=>{let f=p.getRealPlayer();f.beforeDestroy&&f.beforeDestroy(),p.destroy(),d.push(p)})}Qo(s,n.fromStyles)}_buildAnimation(e,n,i,r,s,o){let a=n.triggerName,l=n.element,c=[],u=new Set,d=new Set,h=n.timelines.map(f=>{let m=f.element;u.add(m);let g=m[mi];if(g&&g.removedBeforeQueried)return new Os(f.duration,f.delay);let w=m!==l,O=y6((i.get(m)||h6).map(De=>De.getRealPlayer())).filter(De=>{let ct=De;return ct.element?ct.element===m:!1}),Y=s.get(m),j=o.get(m),Ne=SR(this._normalizer,f.keyframes,Y,j),se=this._buildPlayer(f,Ne,O);if(f.subTimeline&&r&&d.add(m),w){let De=new gd(e,a,m);De.setRealPlayer(se),c.push(De)}return se});c.forEach(f=>{kn(this.playersByQueriedElement,f.element,[]).push(f),f.onDone(()=>p6(this.playersByQueriedElement,f.element,f))}),u.forEach(f=>Gn(f,mR));let p=Fs(h);return p.onDestroy(()=>{u.forEach(f=>ql(f,mR)),Zi(l,n.toStyles)}),d.forEach(f=>{kn(r,f,[]).push(p)}),p}_buildPlayer(e,n,i){return n.length>0?this.driver.animate(e.element,n,e.duration,e.delay,e.easing,i):new Os(e.duration,e.delay)}},gd=class{constructor(e,n,i){this.namespaceId=e,this.triggerName=n,this.element=i,this._player=new Os,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((n,i)=>{n.forEach(r=>Ow(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let n=this._player;n.triggerCallback&&e.onStart(()=>n.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,n){kn(this._queuedCallbacks,e,[]).push(n)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let n=this._player;n.triggerCallback&&n.triggerCallback(e)}};function p6(t,e,n){let i=t.get(e);if(i){if(i.length){let r=i.indexOf(n);i.splice(r,1)}i.length==0&&t.delete(e)}return i}function m6(t){return t??null}function Dm(t){return t&&t.nodeType===1}function g6(t){return t=="start"||t=="done"}function ER(t,e){let n=t.style.display;return t.style.display=e??"none",n}function IR(t,e,n,i,r){let s=[];n.forEach(l=>s.push(ER(l)));let o=[];i.forEach((l,c)=>{let u=new Map;l.forEach(d=>{let h=e.computeStyle(c,d,r);u.set(d,h),(!h||h.length==0)&&(c[mi]=f6,o.push(c))}),t.set(c,u)});let a=0;return n.forEach(l=>ER(l,s[a++])),o}function CR(t,e){let n=new Map;if(t.forEach(a=>n.set(a,[])),e.length==0)return n;let i=1,r=new Set(e),s=new Map;function o(a){if(!a)return i;let l=s.get(a);if(l)return l;let c=a.parentNode;return n.has(c)?l=c:r.has(c)?l=i:l=o(c),s.set(a,l),l}return e.forEach(a=>{let l=o(a);l!==i&&n.get(l).push(a)}),n}function Gn(t,e){t.classList?.add(e)}function ql(t,e){t.classList?.remove(e)}function _6(t,e,n){Fs(n).onDone(()=>t.processLeaveNode(e))}function y6(t){let e=[];return VR(t,e),e}function VR(t,e){for(let n=0;n<t.length;n++){let i=t[n];i instanceof ud?VR(i.players,e):e.push(i)}}function v6(t,e){let n=Object.keys(t),i=Object.keys(e);if(n.length!=i.length)return!1;for(let r=0;r<n.length;r++){let s=n[r];if(!e.hasOwnProperty(s)||t[s]!==e[s])return!1}return!0}function TR(t,e,n){let i=n.get(t);if(!i)return!1;let r=e.get(t);return r?i.forEach(s=>r.add(s)):e.set(t,i),n.delete(t),!0}var Kl=class{constructor(e,n,i){this._driver=n,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new Nw(e.body,n,i),this._timelineEngine=new kw(e.body,n,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,n,i,r,s){let o=e+"-"+r,a=this._triggerCache[o];if(!a){let l=[],c=[],u=OR(this._driver,s,l,c);if(l.length)throw yG(r,l);c.length&&void 0,a=s6(r,u,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(n,r,a)}register(e,n){this._transitionEngine.register(e,n)}destroy(e,n){this._transitionEngine.destroy(e,n)}onInsert(e,n,i,r){this._transitionEngine.insertNode(e,n,i,r)}onRemove(e,n,i){this._transitionEngine.removeNode(e,n,i)}disableAnimations(e,n){this._transitionEngine.markElementAsDisabled(e,n)}process(e,n,i,r){if(i.charAt(0)=="@"){let[s,o]=fR(i),a=r;this._timelineEngine.command(s,n,o,a)}else this._transitionEngine.trigger(e,n,i,r)}listen(e,n,i,r,s){if(i.charAt(0)=="@"){let[o,a]=fR(i);return this._timelineEngine.listen(o,n,a,s)}return this._transitionEngine.listen(e,n,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function b6(t,e){let n=null,i=null;return Array.isArray(e)&&e.length?(n=vw(e[0]),e.length>1&&(i=vw(e[e.length-1]))):e instanceof Map&&(n=vw(e)),n||i?new w6(t,n,i):null}var w6=(()=>{let e=class e{constructor(i,r,s){this._element=i,this._startStyles=r,this._endStyles=s,this._state=0;let o=e.initialStylesByElement.get(i);o||e.initialStylesByElement.set(i,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&Zi(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Zi(this._element,this._initialStyles),this._endStyles&&(Zi(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(Qo(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Qo(this._element,this._endStyles),this._endStyles=null),Zi(this._element,this._initialStyles),this._state=3)}};e.initialStylesByElement=new WeakMap;let t=e;return t})();function vw(t){let e=null;return t.forEach((n,i)=>{E6(i)&&(e=e||new Map,e.set(i,n))}),e}function E6(t){return t==="display"||t==="position"}var Lm=class{constructor(e,n,i,r){this.element=e,this.keyframes=n,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let n=()=>this._onFinish();this.domPlayer.addEventListener("finish",n),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",n)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let n=[];return e.forEach(i=>{n.push(Object.fromEntries(i))}),n}_triggerWebAnimation(e,n,i){return e.animate(this._convertKeyframesToObject(n),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&e.set(r,this._finished?i:NR(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let n=e==="start"?this._onStartFns:this._onDoneFns;n.forEach(i=>i()),n.length=0}},Vm=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,n){return!1}containsElement(e,n){return DR(e,n)}getParentElement(e){return Lw(e)}query(e,n,i){return xR(e,n,i)}computeStyle(e,n,i){return window.getComputedStyle(e)[n]}animate(e,n,i,r,s,o=[]){let a=r==0?"both":"forwards",l={duration:i,delay:r,fill:a};s&&(l.easing=s);let c=new Map,u=o.filter(p=>p instanceof Lm);jG(i,r)&&u.forEach(p=>{p.currentSnapshot.forEach((f,m)=>c.set(m,f))});let d=LG(n).map(p=>Gl(p));d=UG(e,d,c);let h=b6(e,d);return new Lm(e,d,l,h)}};var xm="@",BR="@.disabled",Bm=class{constructor(e,n,i,r){this.namespaceId=e,this.delegate=n,this.engine=i,this._onDestroy=r,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,n){this.delegate.appendChild(e,n),this.engine.onInsert(this.namespaceId,n,e,!1)}insertBefore(e,n,i,r=!0){this.delegate.insertBefore(e,n,i),this.engine.onInsert(this.namespaceId,n,e,r)}removeChild(e,n,i){this.engine.onRemove(this.namespaceId,n,this.delegate)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,i,r){this.delegate.setAttribute(e,n,i,r)}removeAttribute(e,n,i){this.delegate.removeAttribute(e,n,i)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,i,r){this.delegate.setStyle(e,n,i,r)}removeStyle(e,n,i){this.delegate.removeStyle(e,n,i)}setProperty(e,n,i){n.charAt(0)==xm&&n==BR?this.disableAnimations(e,!!i):this.delegate.setProperty(e,n,i)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,i){return this.delegate.listen(e,n,i)}disableAnimations(e,n){this.engine.disableAnimations(e,n)}},Pw=class extends Bm{constructor(e,n,i,r,s){super(n,i,r,s),this.factory=e,this.namespaceId=n}setProperty(e,n,i){n.charAt(0)==xm?n.charAt(1)=="."&&n==BR?(i=i===void 0?!0:!!i,this.disableAnimations(e,i)):this.engine.process(this.namespaceId,e,n.slice(1),i):this.delegate.setProperty(e,n,i)}listen(e,n,i){if(n.charAt(0)==xm){let r=I6(e),s=n.slice(1),o="";return s.charAt(0)!=xm&&([s,o]=C6(s)),this.engine.listen(this.namespaceId,r,s,o,a=>{let l=a._data||-1;this.factory.scheduleListenerCallback(l,i,a)})}return this.delegate.listen(e,n,i)}};function I6(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}function C6(t){let e=t.indexOf("."),n=t.substring(0,e),i=t.slice(e+1);return[n,i]}var jm=class{constructor(e,n,i){this.delegate=e,this.engine=n,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,n.onRemovalComplete=(r,s)=>{let o=s?.parentNode(r);o&&s.removeChild(o,r)}}createRenderer(e,n){let i="",r=this.delegate.createRenderer(e,n);if(!e||!n?.data?.animation){let c=this._rendererCache,u=c.get(r);if(!u){let d=()=>c.delete(r);u=new Bm(i,r,this.engine,d),c.set(r,u)}return u}let s=n.id,o=n.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=c=>{Array.isArray(c)?c.forEach(a):this.engine.registerTrigger(s,o,e,c.name,c)};return n.data.animation.forEach(a),new Pw(this,o,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,n,i){if(e>=0&&e<this._microtaskId){this._zone.run(()=>n(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),r.push([n,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}};var S6=(()=>{let e=class e extends Kl{constructor(i,r,s,o){super(i,r,s)}ngOnDestroy(){this.flush()}};e.\u0275fac=function(r){return new(r||e)(_(K),_(_d),_(Jo),_(Dn))},e.\u0275prov=T({token:e,factory:e.\u0275fac});let t=e;return t})();function D6(){return new Rm}function x6(t,e,n){return new jm(t,e,n)}var jR=[{provide:Jo,useFactory:D6},{provide:Kl,useClass:S6},{provide:Mo,useFactory:x6,deps:[im,Kl,L]}],A6=[{provide:_d,useFactory:()=>new Vm},{provide:Vt,useValue:"BrowserAnimations"},...jR],ame=[{provide:_d,useClass:Vw},{provide:Vt,useValue:"NoopAnimations"},...jR];function UR(){return[...A6]}function Um(t,...e){return e.length?e.some(n=>t[n]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}function Uw(t){return t!=null&&`${t}`!="false"}function vd(t,e=0){return M6(t)?Number(t):e}function M6(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}function Yl(t){return Array.isArray(t)?t:[t]}function lt(t){return t==null?"":typeof t=="string"?t:`${t}px`}function Or(t){return t instanceof ce?t.nativeElement:t}var k6=(()=>{let e=class e{create(i){return typeof MutationObserver>"u"?null:new MutationObserver(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var zR=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=$({providers:[k6]});let t=e;return t})();var $R=new Set,Xo,R6=(()=>{let e=class e{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):P6}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&N6(i,this._nonce),this._matchMedia(i)}};e.\u0275fac=function(r){return new(r||e)(_(pt),_(wu,8))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function N6(t,e){if(!$R.has(t))try{Xo||(Xo=document.createElement("style"),e&&(Xo.nonce=e),Xo.setAttribute("type","text/css"),document.head.appendChild(Xo)),Xo.sheet&&(Xo.sheet.insertRule(`@media ${t} {body{ }}`,0),$R.add(t))}catch(n){console.error(n)}}function P6(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var WR=(()=>{let e=class e{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new Z}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return HR(Yl(i)).some(s=>this._registerQuery(s).mql.matches)}observe(i){let s=HR(Yl(i)).map(a=>this._registerQuery(a).observable),o=wo(s);return o=ds(o.pipe(qe(1)),o.pipe(iu(1),Of(0))),o.pipe(U(a=>{let l={matches:!1,breakpoints:{}};return a.forEach(({matches:c,query:u})=>{l.matches=l.matches||c,l.breakpoints[u]=c}),l}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),o={observable:new X(a=>{let l=c=>this._zone.run(()=>a.next(c));return r.addListener(l),()=>{r.removeListener(l)}}).pipe(Pi(r),U(({matches:a})=>({query:i,matches:a})),jn(this._destroySubject)),mql:r};return this._queries.set(i,o),o}};e.\u0275fac=function(r){return new(r||e)(_(R6),_(L))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function HR(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}var bd=(()=>{let e=class e{constructor(i){this._platform=i}isDisabled(i){return i.hasAttribute("disabled")}isVisible(i){return F6(i)&&getComputedStyle(i).visibility==="visible"}isTabbable(i){if(!this._platform.isBrowser)return!1;let r=O6(H6(i));if(r&&(qR(r)===-1||!this.isVisible(r)))return!1;let s=i.nodeName.toLowerCase(),o=qR(i);return i.hasAttribute("contenteditable")?o!==-1:s==="iframe"||s==="object"||this._platform.WEBKIT&&this._platform.IOS&&!z6(i)?!1:s==="audio"?i.hasAttribute("controls")?o!==-1:!1:s==="video"?o===-1?!1:o!==null?!0:this._platform.FIREFOX||i.hasAttribute("controls"):i.tabIndex>=0}isFocusable(i,r){return $6(i)&&!this.isDisabled(i)&&(r?.ignoreVisibility||this.isVisible(i))}};e.\u0275fac=function(r){return new(r||e)(_(pt))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function O6(t){try{return t.frameElement}catch{return null}}function F6(t){return!!(t.offsetWidth||t.offsetHeight||typeof t.getClientRects=="function"&&t.getClientRects().length)}function L6(t){let e=t.nodeName.toLowerCase();return e==="input"||e==="select"||e==="button"||e==="textarea"}function V6(t){return j6(t)&&t.type=="hidden"}function B6(t){return U6(t)&&t.hasAttribute("href")}function j6(t){return t.nodeName.toLowerCase()=="input"}function U6(t){return t.nodeName.toLowerCase()=="a"}function YR(t){if(!t.hasAttribute("tabindex")||t.tabIndex===void 0)return!1;let e=t.getAttribute("tabindex");return!!(e&&!isNaN(parseInt(e,10)))}function qR(t){if(!YR(t))return null;let e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}function z6(t){let e=t.nodeName.toLowerCase(),n=e==="input"&&t.type;return n==="text"||n==="password"||e==="select"||e==="textarea"}function $6(t){return V6(t)?!1:L6(t)||B6(t)||t.hasAttribute("contenteditable")||YR(t)}function H6(t){return t.ownerDocument&&t.ownerDocument.defaultView||window}var $w=class{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,n,i,r,s=!1){this._element=e,this._checker=n,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){let e=this._startAnchor,n=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){let n=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return e=="start"?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){let n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){let i=this._getFirstTabbableElement(n);return i?.focus(e),!!i}return n.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){let n=this._getRegionBoundary("start");return n&&n.focus(e),!!n}focusLastTabbableElement(e){let n=this._getRegionBoundary("end");return n&&n.focus(e),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let n=e.children;for(let i=0;i<n.length;i++){let r=n[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[i]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;let n=e.children;for(let i=n.length-1;i>=0;i--){let r=n[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[i]):null;if(r)return r}return null}_createAnchor(){let e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,n){e?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(qe(1)).subscribe(e)}},$m=(()=>{let e=class e{constructor(i,r,s){this._checker=i,this._ngZone=r,this._document=s}create(i,r=!1){return new $w(i,this._checker,this._ngZone,this._document,r)}};e.\u0275fac=function(r){return new(r||e)(_(bd),_(L),_(K))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Hw(t){return t.buttons===0||t.detail===0}function Ww(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var W6=new M("cdk-input-modality-detector-options"),q6={ignoreKeys:[18,17,224,91,16]},QR=650,Ql=Hl({passive:!0,capture:!0}),G6=(()=>{let e=class e{get mostRecentModality(){return this._modality.value}constructor(i,r,s,o){this._platform=i,this._mostRecentTarget=null,this._modality=new ot(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(l=>l===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=pi(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<QR||(this._modality.next(Hw(a)?"keyboard":"mouse"),this._mostRecentTarget=pi(a))},this._onTouchstart=a=>{if(Ww(a)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=pi(a)},this._options=C(C({},q6),o),this.modalityDetected=this._modality.pipe(iu(1)),this.modalityChanged=this.modalityDetected.pipe(ul()),i.isBrowser&&r.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,Ql),s.addEventListener("mousedown",this._onMousedown,Ql),s.addEventListener("touchstart",this._onTouchstart,Ql)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Ql),document.removeEventListener("mousedown",this._onMousedown,Ql),document.removeEventListener("touchstart",this._onTouchstart,Ql))}};e.\u0275fac=function(r){return new(r||e)(_(pt),_(L),_(K),_(W6,8))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var K6=new M("cdk-focus-monitor-default-options"),zm=Hl({passive:!0,capture:!0}),Jl=(()=>{let e=class e{constructor(i,r,s,o,a){this._ngZone=i,this._platform=r,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Z,this._rootNodeFocusAndBlurListener=l=>{let c=pi(l);for(let u=c;u;u=u.parentElement)l.type==="focus"?this._onFocus(l,u):this._onBlur(l,u)},this._document=o,this._detectionMode=a?.detectionMode||0}monitor(i,r=!1){let s=Or(i);if(!this._platform.isBrowser||s.nodeType!==1)return F();let o=uR(s)||this._getDocument(),a=this._elementInfo.get(s);if(a)return r&&(a.checkChildren=!0),a.subject;let l={checkChildren:r,subject:new Z,rootNode:o};return this._elementInfo.set(s,l),this._registerGlobalListeners(l),l.subject}stopMonitoring(i){let r=Or(i),s=this._elementInfo.get(r);s&&(s.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(s))}focusVia(i,r,s){let o=Or(i),a=this._getDocument().activeElement;o===a?this._getClosestElementsInfo(o).forEach(([l,c])=>this._originChanged(l,r,c)):(this._setOrigin(r),typeof o.focus=="function"&&o.focus(s))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===1||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused",r==="touch"),i.classList.toggle("cdk-keyboard-focused",r==="keyboard"),i.classList.toggle("cdk-mouse-focused",r==="mouse"),i.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&r,this._detectionMode===0){clearTimeout(this._originTimeoutId);let s=this._originFromTouchInteraction?QR:1;this._originTimeoutId=setTimeout(()=>this._origin=null,s)}})}_onFocus(i,r){let s=this._elementInfo.get(r),o=pi(i);!s||!s.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),s)}_onBlur(i,r){let s=this._elementInfo.get(r);!s||s.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(s,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let r=i.rootNode,s=this._rootNodeFocusListenerCount.get(r)||0;s||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,zm),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,zm)}),this._rootNodeFocusListenerCount.set(r,s+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(jn(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(i){let r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let s=this._rootNodeFocusListenerCount.get(r);s>1?this._rootNodeFocusListenerCount.set(r,s-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,zm),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,zm),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,s){this._setClasses(i,r),this._emitOrigin(s,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){let r=[];return this._elementInfo.forEach((s,o)=>{(o===i||s.checkChildren&&o.contains(i))&&r.push([o,s])}),r}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:r,mostRecentModality:s}=this._inputModalityDetector;if(s!=="mouse"||!r||r===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let o=i.labels;if(o){for(let a=0;a<o.length;a++)if(o[a].contains(r))return!0}return!1}};e.\u0275fac=function(r){return new(r||e)(_(L),_(pt),_(G6),_(K,8),_(K6,8))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var GR="cdk-high-contrast-black-on-white",KR="cdk-high-contrast-white-on-black",zw="cdk-high-contrast-active",qw=(()=>{let e=class e{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=D(WR).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,s=r&&r.getComputedStyle?r.getComputedStyle(i):null,o=(s&&s.backgroundColor||"").replace(/ /g,"");switch(i.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(zw,GR,KR),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===1?i.add(zw,GR):r===2&&i.add(zw,KR)}}};e.\u0275fac=function(r){return new(r||e)(_(pt),_(K))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),JR=(()=>{let e=class e{constructor(i){i._applyBodyHighContrastModeCssClasses()}};e.\u0275fac=function(r){return new(r||e)(_(qw))},e.\u0275mod=H({type:e}),e.\u0275inj=$({imports:[zR]});let t=e;return t})();var Y6=new M("cdk-dir-doc",{providedIn:"root",factory:Q6});function Q6(){return D(K)}var J6=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function X6(t){let e=t?.toLowerCase()||"";return e==="auto"&&typeof navigator<"u"&&navigator?.language?J6.test(navigator.language)?"rtl":"ltr":e==="rtl"?"rtl":"ltr"}var wd=(()=>{let e=class e{constructor(i){if(this.value="ltr",this.change=new ye,i){let r=i.body?i.body.dir:null,s=i.documentElement?i.documentElement.dir:null;this.value=X6(r||s||"ltr")}}ngOnDestroy(){this.change.complete()}};e.\u0275fac=function(r){return new(r||e)(_(Y6,8))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ls=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=$({});let t=e;return t})();function e8(){return!0}var t8=new M("mat-sanity-checks",{providedIn:"root",factory:e8}),gi=(()=>{let e=class e{constructor(i,r,s){this._sanityChecks=r,this._document=s,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return cd()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};e.\u0275fac=function(r){return new(r||e)(_(qw),_(t8,8),_(K))},e.\u0275mod=H({type:e}),e.\u0275inj=$({imports:[Ls,Ls]});let t=e;return t})();function oN(t,e){return class extends t{get color(){return this._color}set color(n){let i=n||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}constructor(...n){super(...n),this.defaultColor=e,this.color=e}}}var Qw=class{constructor(e,n,i,r=!1){this._renderer=e,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}},XR=Hl({passive:!0,capture:!0}),Jw=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let n=pi(e);n&&this._events.get(e.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,n,i,r){let s=this._events.get(n);if(s){let o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,XR)})}removeHandler(e,n,i){let r=this._events.get(e);if(!r)return;let s=r.get(n);s&&(s.delete(i),s.size===0&&r.delete(n),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,XR)))}},ZR={enterDuration:225,exitDuration:150},n8=800,eN=Hl({passive:!0,capture:!0}),tN=["mousedown","touchstart"],nN=["mouseup","mouseleave","touchend","touchcancel"],Ed=class Ed{constructor(e,n,i,r){this._target=e,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Or(i))}fadeInRipple(e,n,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=C(C({},ZR),i.animation);i.centered&&(e=r.left+r.width/2,n=r.top+r.height/2);let o=i.radius||i8(e,n,r),a=e-r.left,l=n-r.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${a-o}px`,u.style.top=`${l-o}px`,u.style.height=`${o*2}px`,u.style.width=`${o*2}px`,i.color!=null&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);let d=window.getComputedStyle(u),h=d.transitionProperty,p=d.transitionDuration,f=h==="none"||p==="0s"||p==="0s, 0s"||r.width===0&&r.height===0,m=new Qw(this,u,i,f);u.style.transform="scale3d(1, 1, 1)",m.state=0,i.persistent||(this._mostRecentTransientRipple=m);let g=null;return!f&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let w=()=>this._finishRippleTransition(m),O=()=>this._destroyRipple(m);u.addEventListener("transitionend",w),u.addEventListener("transitioncancel",O),g={onTransitionEnd:w,onTransitionCancel:O}}),this._activeRipples.set(m,g),(f||!c)&&this._finishRippleTransition(m),m}fadeOutRipple(e){if(e.state===2||e.state===3)return;let n=e.element,i=C(C({},ZR),e.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let n=Or(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,tN.forEach(i=>{Ed._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{nN.forEach(n=>{this._triggerElement.addEventListener(n,this,eN)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===0?this._startFadeOutTransition(e):e.state===2&&this._destroyRipple(e)}_startFadeOutTransition(e){let n=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=1,!i&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,n!==null&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){let n=Hw(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+n8;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Ww(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=e.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let n=e.state===1||e.config.terminateOnPointerUp&&e.state===0;!e.config.persistent&&n&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(tN.forEach(n=>Ed._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&nN.forEach(n=>e.removeEventListener(n,this,eN)))}};Ed._eventManager=new Jw;var Xw=Ed;function i8(t,e,n){let i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}var aN=new M("mat-ripple-global-options"),r8=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(i){i&&this.fadeOutAllNonPersistent(),this._disabled=i,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(i){this._trigger=i,this._setupTriggerEventsIfEnabled()}constructor(i,r,s,o,a){this._elementRef=i,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new Xw(this,r,i,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:C(C(C({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(i,r=0,s){return typeof i=="number"?this._rippleRenderer.fadeInRipple(i,r,C(C({},this.rippleConfig),s)):this._rippleRenderer.fadeInRipple(0,0,C(C({},this.rippleConfig),i))}};e.\u0275fac=function(r){return new(r||e)(y(ce),y(L),y(pt),y(aN,8),y(Vt,8))},e.\u0275dir=ve({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,s){r&2&&ht("mat-ripple-unbounded",s.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]});let t=e;return t})(),lN=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=$({imports:[gi,gi]});let t=e;return t})();var iN={capture:!0},rN=["focus","click","mouseenter","touchstart"],Kw="mat-ripple-loader-uninitialized",Yw="mat-ripple-loader-class-name",sN="mat-ripple-loader-centered",Hm="mat-ripple-loader-disabled",cN=(()=>{let e=class e{constructor(){this._document=D(K,{optional:!0}),this._animationMode=D(Vt,{optional:!0}),this._globalRippleOptions=D(aN,{optional:!0}),this._platform=D(pt),this._ngZone=D(L),this._hosts=new Map,this._onInteraction=i=>{if(!(i.target instanceof HTMLElement))return;let s=i.target.closest(`[${Kw}]`);s&&this._createRipple(s)},this._ngZone.runOutsideAngular(()=>{for(let i of rN)this._document?.addEventListener(i,this._onInteraction,iN)})}ngOnDestroy(){let i=this._hosts.keys();for(let r of i)this.destroyRipple(r);for(let r of rN)this._document?.removeEventListener(r,this._onInteraction,iN)}configureRipple(i,r){i.setAttribute(Kw,""),(r.className||!i.hasAttribute(Yw))&&i.setAttribute(Yw,r.className||""),r.centered&&i.setAttribute(sN,""),r.disabled&&i.setAttribute(Hm,"")}getRipple(i){return this._hosts.get(i)||this._createRipple(i)}setDisabled(i,r){let s=this._hosts.get(i);if(s){s.disabled=r;return}r?i.setAttribute(Hm,""):i.removeAttribute(Hm)}_createRipple(i){if(!this._document)return;let r=this._hosts.get(i);if(r)return r;i.querySelector(".mat-ripple")?.remove();let s=this._document.createElement("span");s.classList.add("mat-ripple",i.getAttribute(Yw)),i.append(s);let o=new r8(new ce(s),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return o._isInitialized=!0,o.trigger=i,o.centered=i.hasAttribute(sN),o.disabled=i.hasAttribute(Hm),this.attachRipple(i,o),o}attachRipple(i,r){i.removeAttribute(Kw),this._hosts.set(i,r)}destroyRipple(i){let r=this._hosts.get(i);r&&(r.ngOnDestroy(),this._hosts.delete(i))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var s8=".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}";var o8=["mat-icon-button",""],a8=["*"];var l8=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],c8=(()=>{let e=class e{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(i){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,i)}get disableRipple(){return this._disableRipple}set disableRipple(i){this._disableRipple=i,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._updateRippleDisabled()}constructor(i,r,s,o){this._elementRef=i,this._platform=r,this._ngZone=s,this._animationMode=o,this._focusMonitor=D(Jl),this._rippleLoader=D(cN),this._isFab=!1,this._disableRipple=!1,this._disabled=!1,this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-button-ripple"});let a=this._elementRef.nativeElement,l=a.classList;for(let{attribute:c,mdcClasses:u}of l8)a.hasAttribute(c)&&l.add(...u)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(i="program",r){i?this._focusMonitor.focusVia(this._elementRef.nativeElement,i,r):this._elementRef.nativeElement.focus(r)}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};e.\u0275fac=function(r){Op()},e.\u0275dir=ve({type:e,inputs:{color:"color",disableRipple:["disableRipple","disableRipple",pn],disabled:["disabled","disabled",pn]},features:[$i]});let t=e;return t})();var uN=(()=>{let e=class e extends c8{constructor(i,r,s,o){super(i,r,s,o),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}};e.\u0275fac=function(r){return new(r||e)(y(ce),y(pt),y(L),y(Vt,8))},e.\u0275cmp=le({type:e,selectors:[["button","mat-icon-button",""]],hostVars:9,hostBindings:function(r,s){r&2&&(Xt("disabled",s.disabled||null),hi(s.color?"mat-"+s.color:""),ht("_mat-animation-noopable",s._animationMode==="NoopAnimations")("mat-unthemed",!s.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],features:[Ze],attrs:o8,ngContentSelectors:a8,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,s){r&1&&(Ts(),J(0,"span",0),Ss(1),J(2,"span",1)(3,"span",2))},styles:['.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size);width:var(--mdc-icon-button-state-layer-size);color:var(--mdc-icon-button-icon-color);--mdc-icon-button-state-layer-size:48px;--mdc-icon-button-icon-size:24px}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button{padding:12px;border-radius:50%;flex-shrink:0;text-align:center;font-size:var(--mdc-icon-button-icon-size);-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color)}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color)}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity)}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity)}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity)}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',s8],encapsulation:2,changeDetection:0});let t=e;return t})();var Xl=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=$({imports:[gi,lN,gi]});let t=e;return t})();var d8=["*"],Wm;function h8(){if(Wm===void 0&&(Wm=null,typeof window<"u")){let t=window;t.trustedTypes!==void 0&&(Wm=t.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return Wm}function Id(t){return h8()?.createHTML(t)||t}function dN(t){return Error(`Unable to find icon with the name "${t}"`)}function f8(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}function hN(t){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${t}".`)}function fN(t){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${t}".`)}var Fr=class{constructor(e,n,i){this.url=e,this.svgText=n,this.options=i}},p8=(()=>{let e=class e{constructor(i,r,s,o){this._httpClient=i,this._sanitizer=r,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=s}addSvgIcon(i,r,s){return this.addSvgIconInNamespace("",i,r,s)}addSvgIconLiteral(i,r,s){return this.addSvgIconLiteralInNamespace("",i,r,s)}addSvgIconInNamespace(i,r,s,o){return this._addSvgIconConfig(i,r,new Fr(s,null,o))}addSvgIconResolver(i){return this._resolvers.push(i),this}addSvgIconLiteralInNamespace(i,r,s,o){let a=this._sanitizer.sanitize(xt.HTML,s);if(!a)throw fN(s);let l=Id(a);return this._addSvgIconConfig(i,r,new Fr("",l,o))}addSvgIconSet(i,r){return this.addSvgIconSetInNamespace("",i,r)}addSvgIconSetLiteral(i,r){return this.addSvgIconSetLiteralInNamespace("",i,r)}addSvgIconSetInNamespace(i,r,s){return this._addSvgIconSetConfig(i,new Fr(r,null,s))}addSvgIconSetLiteralInNamespace(i,r,s){let o=this._sanitizer.sanitize(xt.HTML,r);if(!o)throw fN(r);let a=Id(o);return this._addSvgIconSetConfig(i,new Fr("",a,s))}registerFontClassAlias(i,r=i){return this._fontCssClassesByAlias.set(i,r),this}classNameForFontAlias(i){return this._fontCssClassesByAlias.get(i)||i}setDefaultFontSetClass(...i){return this._defaultFontSetClass=i,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(i){let r=this._sanitizer.sanitize(xt.RESOURCE_URL,i);if(!r)throw hN(i);let s=this._cachedIconsByUrl.get(r);return s?F(qm(s)):this._loadSvgIconFromConfig(new Fr(i,null)).pipe(xe(o=>this._cachedIconsByUrl.set(r,o)),U(o=>qm(o)))}getNamedSvgIcon(i,r=""){let s=pN(r,i),o=this._svgIconConfigs.get(s);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,i),o)return this._svgIconConfigs.set(s,o),this._getSvgFromConfig(o);let a=this._iconSetConfigs.get(r);return a?this._getSvgFromIconSetConfigs(i,a):ri(dN(s))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(i){return i.svgText?F(qm(this._svgElementFromConfig(i))):this._loadSvgIconFromConfig(i).pipe(U(r=>qm(r)))}_getSvgFromIconSetConfigs(i,r){let s=this._extractIconWithNameFromAnySet(i,r);if(s)return F(s);let o=r.filter(a=>!a.svgText).map(a=>this._loadSvgIconSetFromConfig(a).pipe(cn(l=>{let u=`Loading icon set URL: ${this._sanitizer.sanitize(xt.RESOURCE_URL,a.url)} failed: ${l.message}`;return this._errorHandler.handleError(new Error(u)),F(null)})));return wn(o).pipe(U(()=>{let a=this._extractIconWithNameFromAnySet(i,r);if(!a)throw dN(i);return a}))}_extractIconWithNameFromAnySet(i,r){for(let s=r.length-1;s>=0;s--){let o=r[s];if(o.svgText&&o.svgText.toString().indexOf(i)>-1){let a=this._svgElementFromConfig(o),l=this._extractSvgIconFromSet(a,i,o.options);if(l)return l}}return null}_loadSvgIconFromConfig(i){return this._fetchIcon(i).pipe(xe(r=>i.svgText=r),U(()=>this._svgElementFromConfig(i)))}_loadSvgIconSetFromConfig(i){return i.svgText?F(null):this._fetchIcon(i).pipe(xe(r=>i.svgText=r))}_extractSvgIconFromSet(i,r,s){let o=i.querySelector(`[id="${r}"]`);if(!o)return null;let a=o.cloneNode(!0);if(a.removeAttribute("id"),a.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(a,s);if(a.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(a),s);let l=this._svgElementFromString(Id("<svg></svg>"));return l.appendChild(a),this._setSvgAttributes(l,s)}_svgElementFromString(i){let r=this._document.createElement("DIV");r.innerHTML=i;let s=r.querySelector("svg");if(!s)throw Error("<svg> tag not found");return s}_toSvgElement(i){let r=this._svgElementFromString(Id("<svg></svg>")),s=i.attributes;for(let o=0;o<s.length;o++){let{name:a,value:l}=s[o];a!=="id"&&r.setAttribute(a,l)}for(let o=0;o<i.childNodes.length;o++)i.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(i.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(i,r){return i.setAttribute("fit",""),i.setAttribute("height","100%"),i.setAttribute("width","100%"),i.setAttribute("preserveAspectRatio","xMidYMid meet"),i.setAttribute("focusable","false"),r&&r.viewBox&&i.setAttribute("viewBox",r.viewBox),i}_fetchIcon(i){let{url:r,options:s}=i,o=s?.withCredentials??!1;if(!this._httpClient)throw f8();if(r==null)throw Error(`Cannot fetch icon from URL "${r}".`);let a=this._sanitizer.sanitize(xt.RESOURCE_URL,r);if(!a)throw hN(r);let l=this._inProgressUrlFetches.get(a);if(l)return l;let c=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(U(u=>Id(u)),Ri(()=>this._inProgressUrlFetches.delete(a)),hl());return this._inProgressUrlFetches.set(a,c),c}_addSvgIconConfig(i,r,s){return this._svgIconConfigs.set(pN(i,r),s),this}_addSvgIconSetConfig(i,r){let s=this._iconSetConfigs.get(i);return s?s.push(r):this._iconSetConfigs.set(i,[r]),this}_svgElementFromConfig(i){if(!i.svgElement){let r=this._svgElementFromString(i.svgText);this._setSvgAttributes(r,i.options),i.svgElement=r}return i.svgElement}_getIconConfigFromResolvers(i,r){for(let s=0;s<this._resolvers.length;s++){let o=this._resolvers[s](r,i);if(o)return m8(o)?new Fr(o.url,null,o.options):new Fr(o,null)}}};e.\u0275fac=function(r){return new(r||e)(_(zo,8),_($o),_(K,8),_(hn))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function qm(t){return t.cloneNode(!0)}function pN(t,e){return t+":"+e}function m8(t){return!!(t.url&&t.options)}var g8=oN(class{constructor(t){this._elementRef=t}}),_8=new M("MAT_ICON_DEFAULT_OPTIONS"),y8=new M("mat-icon-location",{providedIn:"root",factory:v8});function v8(){let t=D(K),e=t?t.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}var mN=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],b8=mN.map(t=>`[${t}]`).join(", "),w8=/^url\(['"]?#(.*?)['"]?\)$/,gN=(()=>{let e=class e extends g8{get inline(){return this._inline}set inline(i){this._inline=Uw(i)}get svgIcon(){return this._svgIcon}set svgIcon(i){i!==this._svgIcon&&(i?this._updateSvgIcon(i):this._svgIcon&&this._clearSvgElement(),this._svgIcon=i)}get fontSet(){return this._fontSet}set fontSet(i){let r=this._cleanupFontValue(i);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(i){let r=this._cleanupFontValue(i);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(i,r,s,o,a,l){super(i),this._iconRegistry=r,this._location=o,this._errorHandler=a,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Fe.EMPTY,l&&(l.color&&(this.color=this.defaultColor=l.color),l.fontSet&&(this.fontSet=l.fontSet)),s||i.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(i){if(!i)return["",""];let r=i.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${i}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let i=this._elementsWithExternalReferences;if(i&&i.size){let r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(i){this._clearSvgElement();let r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(i),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(i)}_clearSvgElement(){let i=this._elementRef.nativeElement,r=i.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){let s=i.childNodes[r];(s.nodeType!==1||s.nodeName.toLowerCase()==="svg")&&s.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let i=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(s=>s.length>0);this._previousFontSetClass.forEach(s=>i.classList.remove(s)),r.forEach(s=>i.classList.add(s)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&i.classList.remove(this._previousFontIconClass),this.fontIcon&&i.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(i){return typeof i=="string"?i.trim().split(" ")[0]:i}_prependPathToReferences(i){let r=this._elementsWithExternalReferences;r&&r.forEach((s,o)=>{s.forEach(a=>{o.setAttribute(a.name,`url('${i}#${a.value}')`)})})}_cacheChildrenWithExternalReferences(i){let r=i.querySelectorAll(b8),s=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)mN.forEach(a=>{let l=r[o],c=l.getAttribute(a),u=c?c.match(w8):null;if(u){let d=s.get(l);d||(d=[],s.set(l,d)),d.push({name:a,value:u[1]})}})}_updateSvgIcon(i){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),i){let[r,s]=this._splitIconName(i);r&&(this._svgNamespace=r),s&&(this._svgName=s),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(s,r).pipe(qe(1)).subscribe(o=>this._setSvgElement(o),o=>{let a=`Error retrieving icon ${r}:${s}! ${o.message}`;this._errorHandler.handleError(new Error(a))})}}};e.\u0275fac=function(r){return new(r||e)(y(ce),y(p8),gu("aria-hidden"),y(y8),y(hn),y(_8,8))},e.\u0275cmp=le({type:e,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(r,s){r&2&&(Xt("data-mat-icon-type",s._usingFontIcon()?"font":"svg")("data-mat-icon-name",s._svgName||s.fontIcon)("data-mat-icon-namespace",s._svgNamespace||s.fontSet)("fontIcon",s._usingFontIcon()?s.fontIcon:null),ht("mat-icon-inline",s.inline)("mat-icon-no-color",s.color!=="primary"&&s.color!=="accent"&&s.color!=="warn"))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[Ze],ngContentSelectors:d8,decls:1,vars:0,template:function(r,s){r&1&&(Ts(),Ss(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0});let t=e;return t})(),Gm=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=$({imports:[gi,gi]});let t=e;return t})();var I8=20,yN=(()=>{let e=class e{constructor(i,r,s){this._ngZone=i,this._platform=r,this._scrolled=new Z,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(i){this.scrollContainers.has(i)||this.scrollContainers.set(i,i.elementScrolled().subscribe(()=>this._scrolled.next(i)))}deregister(i){let r=this.scrollContainers.get(i);r&&(r.unsubscribe(),this.scrollContainers.delete(i))}scrolled(i=I8){return this._platform.isBrowser?new X(r=>{this._globalSubscription||this._addGlobalListener();let s=i>0?this._scrolled.pipe(Pf(i)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):F()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((i,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(i,r){let s=this.getAncestorScrollContainers(i);return this.scrolled(r).pipe(Ue(o=>!o||s.indexOf(o)>-1))}getAncestorScrollContainers(i){let r=[];return this.scrollContainers.forEach((s,o)=>{this._scrollableContainsElement(o,i)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(i,r){let s=Or(r),o=i.getElementRef().nativeElement;do if(s==o)return!0;while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let i=this._getWindow();return cl(i.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}};e.\u0275fac=function(r){return new(r||e)(_(L),_(pt),_(K,8))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var C8=20,Zw=(()=>{let e=class e{constructor(i,r,s){this._platform=i,this._change=new Z,this._changeListener=o=>{this._change.next(o)},this._document=s,r.runOutsideAngular(()=>{if(i.isBrowser){let o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let i=this._getWindow();i.removeEventListener("resize",this._changeListener),i.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let i={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),i}getViewportRect(){let i=this.getViewportScrollPosition(),{width:r,height:s}=this.getViewportSize();return{top:i.top,left:i.left,bottom:i.top+s,right:i.left+r,height:s,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let i=this._document,r=this._getWindow(),s=i.documentElement,o=s.getBoundingClientRect(),a=-o.top||i.body.scrollTop||r.scrollY||s.scrollTop||0,l=-o.left||i.body.scrollLeft||r.scrollX||s.scrollLeft||0;return{top:a,left:l}}change(i=C8){return i>0?this._change.pipe(Pf(i)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let i=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:i.innerWidth,height:i.innerHeight}:{width:0,height:0}}};e.\u0275fac=function(r){return new(r||e)(_(pt),_(L),_(K,8))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var _N=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=$({});let t=e;return t})(),eE=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=$({imports:[Ls,_N,Ls,_N]});let t=e;return t})();var Cd=class{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;e!=null&&(this._attachedHost=null,e.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(e){this._attachedHost=e}},Zl=class extends Cd{constructor(e,n,i,r,s){super(),this.component=e,this.viewContainerRef=n,this.injector=i,this.componentFactoryResolver=r,this.projectableNodes=s}},ec=class extends Cd{constructor(e,n,i,r){super(),this.templateRef=e,this.viewContainerRef=n,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}},tE=class extends Cd{constructor(e){super(),this.element=e instanceof ce?e.nativeElement:e}},tc=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){if(e instanceof Zl)return this._attachedPortal=e,this.attachComponentPortal(e);if(e instanceof ec)return this._attachedPortal=e,this.attachTemplatePortal(e);if(this.attachDomPortal&&e instanceof tE)return this._attachedPortal=e,this.attachDomPortal(e)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Km=class extends tc{constructor(e,n,i,r,s){super(),this.outletElement=e,this._componentFactoryResolver=n,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=o=>{this._document;let a=o.element;a.parentNode;let l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(e){let i=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(i,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=i.create(e.injector||this._defaultInjector||Se.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let n=e.viewContainerRef,i=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(i);r!==-1&&n.remove(r)}),this._attachedPortal=e,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}};var nc=(()=>{let e=class e extends tc{constructor(i,r,s){super(),this._componentFactoryResolver=i,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new ye,this.attachDomPortal=o=>{this._document;let a=o.element;a.parentNode;let l=this._document.createComment("dom-portal");o.setAttachedHost(this),a.parentNode.insertBefore(l,a),this._getRootNode().appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}get portal(){return this._attachedPortal}set portal(i){this.hasAttached()&&!i&&!this._isInitialized||(this.hasAttached()&&super.detach(),i&&super.attach(i),this._attachedPortal=i||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(i){i.setAttachedHost(this);let r=i.viewContainerRef!=null?i.viewContainerRef:this._viewContainerRef,o=(i.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(i.component),a=r.createComponent(o,r.length,i.injector||r.injector,i.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(a.hostView.rootNodes[0]),super.setDisposeFn(()=>a.destroy()),this._attachedPortal=i,this._attachedRef=a,this.attached.emit(a),a}attachTemplatePortal(i){i.setAttachedHost(this);let r=this._viewContainerRef.createEmbeddedView(i.templateRef,i.context,{injector:i.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=i,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){let i=this._viewContainerRef.element.nativeElement;return i.nodeType===i.ELEMENT_NODE?i:i.parentNode}};e.\u0275fac=function(r){return new(r||e)(y(Is),y(Sn),y(K))},e.\u0275dir=ve({type:e,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[Ze]});let t=e;return t})();var Lr=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=$({});let t=e;return t})();var bN=cR(),nE=class{constructor(e,n){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){let e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=lt(-this._previousScrollPosition.left),e.style.top=lt(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let e=this._document.documentElement,n=this._document.body,i=e.style,r=n.style,s=i.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),bN&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),bN&&(i.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let n=this._document.body,i=this._viewportRuler.getViewportSize();return n.scrollHeight>i.height||n.scrollWidth>i.width}};var iE=class{constructor(e,n,i,r){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(this._scrollSubscription)return;let e=this._scrollDispatcher.scrolled(0).pipe(Ue(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{let n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Ym=class{enable(){}disable(){}attach(){}};function rE(t,e){return e.some(n=>{let i=t.bottom<n.top,r=t.top>n.bottom,s=t.right<n.left,o=t.left>n.right;return i||r||s||o})}function wN(t,e){return e.some(n=>{let i=t.top<n.top,r=t.bottom>n.bottom,s=t.left<n.left,o=t.right>n.right;return i||r||s||o})}var sE=class{constructor(e,n,i,r){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef,this._overlayRef=e}enable(){if(!this._scrollSubscription){let e=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(e).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();rE(n,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},S8=(()=>{let e=class e{constructor(i,r,s,o){this._scrollDispatcher=i,this._viewportRuler=r,this._ngZone=s,this.noop=()=>new Ym,this.close=a=>new iE(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new nE(this._viewportRuler,this._document),this.reposition=a=>new sE(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=o}};e.\u0275fac=function(r){return new(r||e)(_(yN),_(Zw),_(L),_(K))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Td=class{constructor(e){if(this.scrollStrategy=new Ym,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){let n=Object.keys(e);for(let i of n)e[i]!==void 0&&(this[i]=e[i])}}};var oE=class{constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}};var SN=(()=>{let e=class e{constructor(i){this._attachedOverlays=[],this._document=i}ngOnDestroy(){this.detach()}add(i){this.remove(i),this._attachedOverlays.push(i)}remove(i){let r=this._attachedOverlays.indexOf(i);r>-1&&this._attachedOverlays.splice(r,1),this._attachedOverlays.length===0&&this.detach()}};e.\u0275fac=function(r){return new(r||e)(_(K))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),D8=(()=>{let e=class e extends SN{constructor(i,r){super(i),this._ngZone=r,this._keydownListener=s=>{let o=this._attachedOverlays;for(let a=o.length-1;a>-1;a--)if(o[a]._keydownEvents.observers.length>0){let l=o[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>l.next(s)):l.next(s);break}}}add(i){super.add(i),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}};e.\u0275fac=function(r){return new(r||e)(_(K),_(L,8))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),x8=(()=>{let e=class e extends SN{constructor(i,r,s){super(i),this._platform=r,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=pi(o)},this._clickListener=o=>{let a=pi(o),l=o.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;let c=this._attachedOverlays.slice();for(let u=c.length-1;u>-1;u--){let d=c[u];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(a)||d.overlayElement.contains(l))break;let h=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>h.next(o)):h.next(o)}}}add(i){if(super.add(i),!this._isAttached){let r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let i=this._document.body;i.removeEventListener("pointerdown",this._pointerDownListener,!0),i.removeEventListener("click",this._clickListener,!0),i.removeEventListener("auxclick",this._clickListener,!0),i.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(i.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(i){i.addEventListener("pointerdown",this._pointerDownListener,!0),i.addEventListener("click",this._clickListener,!0),i.addEventListener("auxclick",this._clickListener,!0),i.addEventListener("contextmenu",this._clickListener,!0)}};e.\u0275fac=function(r){return new(r||e)(_(K),_(pt),_(L,8))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ic=(()=>{let e=class e{constructor(i,r){this._platform=r,this._document=i}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let i="cdk-overlay-container";if(this._platform.isBrowser||cd()){let s=this._document.querySelectorAll(`.${i}[platform="server"], .${i}[platform="test"]`);for(let o=0;o<s.length;o++)s[o].remove()}let r=this._document.createElement("div");r.classList.add(i),cd()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}};e.\u0275fac=function(r){return new(r||e)(_(K),_(pt))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Vr=class{constructor(e,n,i,r,s,o,a,l,c,u=!1){this._portalOutlet=e,this._host=n,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=u,this._backdropElement=null,this._backdropClick=new Z,this._attachments=new Z,this._detachments=new Z,this._locationChanges=Fe.EMPTY,this._backdropClickHandler=d=>this._backdropClick.next(d),this._backdropTransitionendHandler=d=>{this._disposeBackdrop(d.target)},this._keydownEvents=new Z,this._outsidePointerEvents=new Z,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(qe(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof n?.onDestroy=="function"&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){let e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config=C(C({},this._config),e),this._updateElementSize()}setDirection(e){this._config=oe(C({},this._config),{direction:e}),this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){let e=this._config.direction;return e?typeof e=="string"?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let e=this._pane.style;e.width=lt(this._config.width),e.height=lt(this._config.height),e.minWidth=lt(this._config.minWidth),e.minHeight=lt(this._config.minHeight),e.maxWidth=lt(this._config.maxWidth),e.maxHeight=lt(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){let e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let e=this._backdropElement;if(e){if(this._animationsDisabled){this._disposeBackdrop(e);return}e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,n,i){let r=Yl(n||[]).filter(s=>!!s);r.length&&(i?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{let e=this._ngZone.onStable.pipe(jn(Eo(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){let e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},EN="cdk-overlay-connected-position-bounding-box",A8=/([A-Za-z%]+)$/,aE=class{get positions(){return this._preferredPositions}constructor(e,n,i,r,s){this._viewportRuler=n,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Z,this._resizeSubscription=Fe.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._overlayRef&&this._overlayRef,this._validatePositions(),e.hostElement.classList.add(EN),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._originRect,n=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[],o;for(let a of this._preferredPositions){let l=this._getOriginPoint(e,r,a),c=this._getOverlayPoint(l,n,a),u=this._getOverlayFit(c,n,i,a);if(u.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,l);return}if(this._canFitWithFlexibleDimensions(u,c,i)){s.push({position:a,origin:l,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(l,a)});continue}(!o||o.overlayFit.visibleArea<u.visibleArea)&&(o={overlayFit:u,overlayPoint:c,originPoint:l,position:a,overlayRect:n})}if(s.length){let a=null,l=-1;for(let c of s){let u=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);u>l&&(l=u,a=c)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Zo(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(EN),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,e.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,i){let r;if(i.originX=="center")r=e.left+e.width/2;else{let o=this._isRtl()?e.right:e.left,a=this._isRtl()?e.left:e.right;r=i.originX=="start"?o:a}n.left<0&&(r-=n.left);let s;return i.originY=="center"?s=e.top+e.height/2:s=i.originY=="top"?e.top:e.bottom,n.top<0&&(s-=n.top),{x:r,y:s}}_getOverlayPoint(e,n,i){let r;i.overlayX=="center"?r=-n.width/2:i.overlayX==="start"?r=this._isRtl()?-n.width:0:r=this._isRtl()?0:-n.width;let s;return i.overlayY=="center"?s=-n.height/2:s=i.overlayY=="top"?0:-n.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,n,i,r){let s=CN(n),{x:o,y:a}=e,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let u=0-o,d=o+s.width-i.width,h=0-a,p=a+s.height-i.height,f=this._subtractOverflows(s.width,u,d),m=this._subtractOverflows(s.height,h,p),g=f*m;return{visibleArea:g,isCompletelyWithinViewport:s.width*s.height===g,fitsInViewportVertically:m===s.height,fitsInViewportHorizontally:f==s.width}}_canFitWithFlexibleDimensions(e,n,i){if(this._hasFlexibleDimensions){let r=i.bottom-n.y,s=i.right-n.x,o=IN(this._overlayRef.getConfig().minHeight),a=IN(this._overlayRef.getConfig().minWidth),l=e.fitsInViewportVertically||o!=null&&o<=r,c=e.fitsInViewportHorizontally||a!=null&&a<=s;return l&&c}return!1}_pushOverlayOnScreen(e,n,i){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};let r=CN(n),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),a=Math.max(e.y+r.height-s.height,0),l=Math.max(s.top-i.top-e.y,0),c=Math.max(s.left-i.left-e.x,0),u=0,d=0;return r.width<=s.width?u=c||-o:u=e.x<this._viewportMargin?s.left-i.left-e.x:0,r.height<=s.height?d=l||-a:d=e.y<this._viewportMargin?s.top-i.top-e.y:0,this._previousPushAmount={x:u,y:d},{x:e.x+u,y:e.y+d}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){let i=this._getScrollVisibility(),r=new oE(e,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;let n=this._boundingBox.querySelectorAll(this._transformOriginSelector),i,r=e.overlayY;e.overlayX==="center"?i="center":this._isRtl()?i=e.overlayX==="start"?"right":"left":i=e.overlayX==="start"?"left":"right";for(let s=0;s<n.length;s++)n[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(e,n){let i=this._viewportRect,r=this._isRtl(),s,o,a;if(n.overlayY==="top")o=e.y,s=i.height-o+this._viewportMargin;else if(n.overlayY==="bottom")a=i.height-e.y+this._viewportMargin*2,s=i.height-a+this._viewportMargin;else{let p=Math.min(i.bottom-e.y+i.top,e.y),f=this._lastBoundingBoxSize.height;s=p*2,o=e.y-p,s>f&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-f/2)}let l=n.overlayX==="start"&&!r||n.overlayX==="end"&&r,c=n.overlayX==="end"&&!r||n.overlayX==="start"&&r,u,d,h;if(c)h=i.width-e.x+this._viewportMargin,u=e.x-this._viewportMargin;else if(l)d=e.x,u=i.right-e.x;else{let p=Math.min(i.right-e.x+i.left,e.x),f=this._lastBoundingBoxSize.width;u=p*2,d=e.x-p,u>f&&!this._isInitialRender&&!this._growAfterOpen&&(d=e.x-f/2)}return{top:o,left:d,bottom:a,right:h,width:u,height:s}}_setBoundingBoxStyles(e,n){let i=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=lt(i.height),r.top=lt(i.top),r.bottom=lt(i.bottom),r.width=lt(i.width),r.left=lt(i.left),r.right=lt(i.right),n.overlayX==="center"?r.alignItems="center":r.alignItems=n.overlayX==="end"?"flex-end":"flex-start",n.overlayY==="center"?r.justifyContent="center":r.justifyContent=n.overlayY==="bottom"?"flex-end":"flex-start",s&&(r.maxHeight=lt(s)),o&&(r.maxWidth=lt(o))}this._lastBoundingBoxSize=i,Zo(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Zo(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Zo(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){let i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){let u=this._viewportRuler.getViewportScrollPosition();Zo(i,this._getExactOverlayY(n,e,u)),Zo(i,this._getExactOverlayX(n,e,u))}else i.position="static";let a="",l=this._getOffset(n,"x"),c=this._getOffset(n,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),i.transform=a.trim(),o.maxHeight&&(r?i.maxHeight=lt(o.maxHeight):s&&(i.maxHeight="")),o.maxWidth&&(r?i.maxWidth=lt(o.maxWidth):s&&(i.maxWidth="")),Zo(this._pane.style,i)}_getExactOverlayY(e,n,i){let r={top:"",bottom:""},s=this._getOverlayPoint(n,this._overlayRect,e);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),e.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;r.bottom=`${o-(s.y+this._overlayRect.height)}px`}else r.top=lt(s.y);return r}_getExactOverlayX(e,n,i){let r={left:"",right:""},s=this._getOverlayPoint(n,this._overlayRect,e);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i));let o;if(this._isRtl()?o=e.overlayX==="end"?"left":"right":o=e.overlayX==="end"?"right":"left",o==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(s.x+this._overlayRect.width)}px`}else r.left=lt(s.x);return r}_getScrollVisibility(){let e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:wN(e,i),isOriginOutsideView:rE(e,i),isOverlayClipped:wN(n,i),isOverlayOutsideView:rE(n,i)}}_subtractOverflows(e,...n){return n.reduce((i,r)=>i-Math.max(r,0),e)}_getNarrowedViewportRect(){let e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+e-this._viewportMargin,bottom:i.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return n==="x"?e.offsetX==null?this._offsetX:e.offsetX:e.offsetY==null?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&Yl(e).forEach(n=>{n!==""&&this._appliedPanelClasses.indexOf(n)===-1&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){let e=this._origin;if(e instanceof ce)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();let n=e.width||0,i=e.height||0;return{top:e.y,bottom:e.y+i,left:e.x,right:e.x+n,height:i,width:n}}};function Zo(t,e){for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function IN(t){if(typeof t!="number"&&t!=null){let[e,n]=t.split(A8);return!n||n==="px"?parseFloat(e):null}return t||null}function CN(t){return{top:Math.floor(t.top),right:Math.floor(t.right),bottom:Math.floor(t.bottom),left:Math.floor(t.left),width:Math.floor(t.width),height:Math.floor(t.height)}}var TN="cdk-global-overlay-wrapper",lE=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){let n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(TN),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=i,l=(r==="100%"||r==="100vw")&&(!o||o==="100%"||o==="100vw"),c=(s==="100%"||s==="100vh")&&(!a||a==="100%"||a==="100vh"),u=this._xPosition,d=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",p="",f="",m="";l?m="flex-start":u==="center"?(m="center",h?f=d:p=d):h?u==="left"||u==="end"?(m="flex-end",p=d):(u==="right"||u==="start")&&(m="flex-start",f=d):u==="left"||u==="start"?(m="flex-start",p=d):(u==="right"||u==="end")&&(m="flex-end",f=d),e.position=this._cssPosition,e.marginLeft=l?"0":p,e.marginTop=c?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=l?"0":f,n.justifyContent=m,n.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,i=n.style;n.classList.remove(TN),i.justifyContent=i.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}},M8=(()=>{let e=class e{constructor(i,r,s,o){this._viewportRuler=i,this._document=r,this._platform=s,this._overlayContainer=o}global(){return new lE}flexibleConnectedTo(i){return new aE(i,this._viewportRuler,this._document,this._platform,this._overlayContainer)}};e.\u0275fac=function(r){return new(r||e)(_(Zw),_(K),_(pt),_(ic))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),k8=0,_i=(()=>{let e=class e{constructor(i,r,s,o,a,l,c,u,d,h,p,f){this.scrollStrategies=i,this._overlayContainer=r,this._componentFactoryResolver=s,this._positionBuilder=o,this._keyboardDispatcher=a,this._injector=l,this._ngZone=c,this._document=u,this._directionality=d,this._location=h,this._outsideClickDispatcher=p,this._animationsModuleType=f}create(i){let r=this._createHostElement(),s=this._createPaneElement(r),o=this._createPortalOutlet(s),a=new Td(i);return a.direction=a.direction||this._directionality.value,new Vr(o,r,s,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations")}position(){return this._positionBuilder}_createPaneElement(i){let r=this._document.createElement("div");return r.id=`cdk-overlay-${k8++}`,r.classList.add("cdk-overlay-pane"),i.appendChild(r),r}_createHostElement(){let i=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(i),i}_createPortalOutlet(i){return this._appRef||(this._appRef=this._injector.get(Dn)),new Km(i,this._componentFactoryResolver,this._appRef,this._injector,this._document)}};e.\u0275fac=function(r){return new(r||e)(_(S8),_(ic),_(Is),_(M8),_(D8),_(Se),_(L),_(K),_(wd),_(Wi),_(x8),_(Vt,8))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var R8=new M("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let t=D(_i);return()=>t.scrollStrategies.reposition()}});function N8(t){return()=>t.scrollStrategies.reposition()}var P8={provide:R8,deps:[_i],useFactory:N8},Qm=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=$({providers:[_i,P8],imports:[Ls,Lr,eE,eE]});let t=e;return t})();function O8(t,e){}var ea=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}};var Jm=(()=>{let e=class e extends tc{constructor(i,r,s,o,a,l,c,u){super(),this._elementRef=i,this._focusTrapFactory=r,this._config=o,this._interactivityChecker=a,this._ngZone=l,this._overlayRef=c,this._focusMonitor=u,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this.attachDomPortal=d=>{this._portalOutlet.hasAttached();let h=this._portalOutlet.attachDomPortal(d);return this._contentAttached(),h},this._document=s,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(i){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachComponentPortal(i);return this._contentAttached(),r}attachTemplatePortal(i){this._portalOutlet.hasAttached();let r=this._portalOutlet.attachTemplatePortal(i);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(i,r){this._interactivityChecker.isFocusable(i)||(i.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let s=()=>{i.removeEventListener("blur",s),i.removeEventListener("mousedown",s),i.removeAttribute("tabindex")};i.addEventListener("blur",s),i.addEventListener("mousedown",s)})),i.focus(r)}_focusByCssSelector(i,r){let s=this._elementRef.nativeElement.querySelector(i);s&&this._forceFocus(s,r)}_trapFocus(){let i=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||i.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}}_restoreFocus(){let i=this._config.restoreFocus,r=null;if(typeof i=="string"?r=this._document.querySelector(i):typeof i=="boolean"?r=i?this._elementFocusedBeforeDialogWasOpened:null:i&&(r=i),this._config.restoreFocus&&r&&typeof r.focus=="function"){let s=ld(),o=this._elementRef.nativeElement;(!s||s===this._document.body||s===o||o.contains(s))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let i=this._elementRef.nativeElement,r=ld();return i===r||i.contains(r)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=ld())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}};e.\u0275fac=function(r){return new(r||e)(y(ce),y($m),y(K,8),y(ea),y(bd),y(L),y(Vr),y(Jl))},e.\u0275cmp=le({type:e,selectors:[["cdk-dialog-container"]],viewQuery:function(r,s){if(r&1&&Bo(nc,7),r&2){let o;Ds(o=xs())&&(s._portalOutlet=o.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(r,s){r&2&&Xt("id",s._config.id||null)("role",s._config.role)("aria-modal",s._config.ariaModal)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null)},standalone:!0,features:[Ze,Be],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(r,s){r&1&&he(0,O8,0,0,"ng-template",0)},dependencies:[Lr,nc],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2});let t=e;return t})(),Sd=class{constructor(e,n){this.overlayRef=e,this.config=n,this.closed=new Z,this.disableClose=n.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(i=>{i.keyCode===27&&!this.disableClose&&!Um(i)&&(i.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{n.closeOnOverlayDetachments!==!1&&this.close()})}close(e,n){if(this.containerInstance){let i=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),i.next(e),i.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",n=""){return this.overlayRef.updateSize({width:e,height:n}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}},F8=new M("DialogScrollStrategy",{providedIn:"root",factory:()=>{let t=D(_i);return()=>t.scrollStrategies.block()}}),L8=new M("DialogData"),V8=new M("DefaultDialogConfig");var B8=0,dE=(()=>{let e=class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(i,r,s,o,a,l){this._overlay=i,this._injector=r,this._defaultOptions=s,this._parentDialog=o,this._overlayContainer=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Z,this._afterOpenedAtThisLevel=new Z,this._ariaHiddenElements=new Map,this.afterAllClosed=hs(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Pi(void 0))),this._scrollStrategy=l}open(i,r){let s=this._defaultOptions||new ea;r=C(C({},s),r),r.id=r.id||`cdk-dialog-${B8++}`,r.id&&this.getDialogById(r.id);let o=this._getOverlayConfig(r),a=this._overlay.create(o),l=new Sd(a,r),c=this._attachContainer(a,l,r);return l.containerInstance=c,this._attachDialogContent(i,l,c,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(l),l.closed.subscribe(()=>this._removeOpenDialog(l,!0)),this.afterOpened.next(l),l}closeAll(){cE(this.openDialogs,i=>i.close())}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){cE(this._openDialogsAtThisLevel,i=>{i.config.closeOnDestroy===!1&&this._removeOpenDialog(i,!1)}),cE(this._openDialogsAtThisLevel,i=>i.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(i){let r=new Td({positionStrategy:i.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:i.scrollStrategy||this._scrollStrategy(),panelClass:i.panelClass,hasBackdrop:i.hasBackdrop,direction:i.direction,minWidth:i.minWidth,minHeight:i.minHeight,maxWidth:i.maxWidth,maxHeight:i.maxHeight,width:i.width,height:i.height,disposeOnNavigation:i.closeOnNavigation});return i.backdropClass&&(r.backdropClass=i.backdropClass),r}_attachContainer(i,r,s){let o=s.injector||s.viewContainerRef?.injector,a=[{provide:ea,useValue:s},{provide:Sd,useValue:r},{provide:Vr,useValue:i}],l;s.container?typeof s.container=="function"?l=s.container:(l=s.container.type,a.push(...s.container.providers(s))):l=Jm;let c=new Zl(l,s.viewContainerRef,Se.create({parent:o||this._injector,providers:a}),s.componentFactoryResolver);return i.attach(c).instance}_attachDialogContent(i,r,s,o){if(i instanceof zn){let a=this._createInjector(o,r,s,void 0),l={$implicit:o.data,dialogRef:r};o.templateContext&&(l=C(C({},l),typeof o.templateContext=="function"?o.templateContext():o.templateContext)),s.attachTemplatePortal(new ec(i,null,l,a))}else{let a=this._createInjector(o,r,s,this._injector),l=s.attachComponentPortal(new Zl(i,o.viewContainerRef,a,o.componentFactoryResolver));r.componentRef=l,r.componentInstance=l.instance}}_createInjector(i,r,s,o){let a=i.injector||i.viewContainerRef?.injector,l=[{provide:L8,useValue:i.data},{provide:Sd,useValue:r}];return i.providers&&(typeof i.providers=="function"?l.push(...i.providers(r,i,s)):l.push(...i.providers)),i.direction&&(!a||!a.get(wd,null,{optional:!0}))&&l.push({provide:wd,useValue:{value:i.direction,change:F()}}),Se.create({parent:a||o,providers:l})}_removeOpenDialog(i,r){let s=this.openDialogs.indexOf(i);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,a)=>{o?a.setAttribute("aria-hidden",o):a.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let i=this._overlayContainer.getContainerElement();if(i.parentElement){let r=i.parentElement.children;for(let s=r.length-1;s>-1;s--){let o=r[s];o!==i&&o.nodeName!=="SCRIPT"&&o.nodeName!=="STYLE"&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}};e.\u0275fac=function(r){return new(r||e)(_(_i),_(Se),_(V8,8),_(e,12),_(ic),_(F8))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function cE(t,e){let n=t.length;for(;n--;)e(t[n])}var xN=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=$({providers:[dE],imports:[Qm,Lr,JR,Jm,Lr]});let t=e;return t})();function j8(t,e){}var Dd=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}},hE="mdc-dialog--open",AN="mdc-dialog--opening",MN="mdc-dialog--closing",U8=150,z8=75,NN=(()=>{let e=class e extends Jm{constructor(i,r,s,o,a,l,c,u,d){super(i,r,s,o,a,l,c,d),this._animationMode=u,this._animationStateChanged=new ye,this._animationsEnabled=this._animationMode!=="NoopAnimations",this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?RN(this._config.enterAnimationDuration)??U8:0,this._exitAnimationDuration=this._animationsEnabled?RN(this._config.exitAnimationDuration)??z8:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(kN,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(AN,hE)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(hE),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(hE),this._animationsEnabled?(this._hostElement.style.setProperty(kN,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(MN)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(AN,MN)}_waitForAnimationToComplete(i,r){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,i)}_requestAnimationFrame(i){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(i):i()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(i){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(i){let r=super.attachComponentPortal(i);return r.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),r}};e.\u0275fac=function(r){return new(r||e)(y(ce),y($m),y(K,8),y(Dd),y(bd),y(L),y(Vr),y(Vt,8),y(Jl))},e.\u0275cmp=le({type:e,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(r,s){r&2&&(Bp("id",s._config.id),Xt("aria-modal",s._config.ariaModal)("role",s._config.role)("aria-labelledby",s._config.ariaLabel?null:s._ariaLabelledByQueue[0])("aria-label",s._config.ariaLabel)("aria-describedby",s._config.ariaDescribedBy||null),ht("_mat-animation-noopable",!s._animationsEnabled))},standalone:!0,features:[Ze,Be],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(r,s){r&1&&(b(0,"div",0)(1,"div",1),he(2,j8,0,0,"ng-template",2),v()())},dependencies:[Lr,nc],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{width:100%;height:100%}.mat-mdc-dialog-component-host{display:contents}.mat-mdc-dialog-container{--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2});let t=e;return t})(),kN="--mat-dialog-transition-duration";function RN(t){return t==null?null:typeof t=="number"?t:t.endsWith("ms")?vd(t.substring(0,t.length-2)):t.endsWith("s")?vd(t.substring(0,t.length-1))*1e3:t==="0"?0:null}var xd=class{constructor(e,n,i){this._ref=e,this._containerInstance=i,this._afterOpened=new Z,this._beforeClosed=new Z,this._state=0,this.disableClose=n.disableClose,this.id=e.id,i._animationStateChanged.pipe(Ue(r=>r.state==="opened"),qe(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),i._animationStateChanged.pipe(Ue(r=>r.state==="closed"),qe(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),Eo(this.backdropClick(),this.keydownEvents().pipe(Ue(r=>r.keyCode===27&&!this.disableClose&&!Um(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),$8(this,r.type==="keydown"?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Ue(n=>n.state==="closing"),qe(1)).subscribe(n=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),n.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let n=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?n.left(e.left):n.right(e.right):n.centerHorizontally(),e&&(e.top||e.bottom)?e.top?n.top(e.top):n.bottom(e.bottom):n.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",n=""){return this._ref.updateSize(e,n),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function $8(t,e,n){return t._closeInteractionType=e,t.close(n)}var H8=new M("MatMdcDialogData"),W8=new M("mat-mdc-dialog-default-options"),q8=new M("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let t=D(_i);return()=>t.scrollStrategies.block()}});var G8=0,ta=(()=>{let e=class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let i=this._parentDialog;return i?i._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(i,r,s,o,a,l,c,u){this._overlay=i,this._defaultOptions=o,this._scrollStrategy=a,this._parentDialog=l,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Z,this._afterOpenedAtThisLevel=new Z,this.dialogConfigClass=Dd,this.afterAllClosed=hs(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Pi(void 0))),this._dialog=r.get(dE),this._dialogRefConstructor=xd,this._dialogContainerType=NN,this._dialogDataToken=H8}open(i,r){let s;r=C(C({},this._defaultOptions||new Dd),r),r.id=r.id||`mat-mdc-dialog-${G8++}`,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();let o=this._dialog.open(i,oe(C({},r),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:ea,useValue:r}]},templateContext:()=>({dialogRef:s}),providers:(a,l,c)=>(s=new this._dialogRefConstructor(a,r,c),s.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:c},{provide:this._dialogDataToken,useValue:l.data},{provide:this._dialogRefConstructor,useValue:s}])}));return s.componentRef=o.componentRef,s.componentInstance=o.componentInstance,this.openDialogs.push(s),this.afterOpened.next(s),s.afterClosed().subscribe(()=>{let a=this.openDialogs.indexOf(s);a>-1&&(this.openDialogs.splice(a,1),this.openDialogs.length||this._getAfterAllClosed().next())}),s}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(i){return this.openDialogs.find(r=>r.id===i)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(i){let r=i.length;for(;r--;)i[r].close()}};e.\u0275fac=function(r){return new(r||e)(_(_i),_(Se),_(Wi,8),_(W8,8),_(q8),_(e,12),_(ic),_(Vt,8))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var PN=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=$({providers:[ta],imports:[xN,Qm,Lr,gi,NN,gi]});let t=e;return t})();var K8=()=>["/signup"],rc=(()=>{let e=class e{constructor(i,r){this.dialogRef=i,this.router=r}closeDialog(){this.dialogRef.close()}navigateToSignUp(){this.dialogRef.close(),this.router.navigate(["/signup"])}};e.\u0275fac=function(r){return new(r||e)(y(xd),y($e))},e.\u0275cmp=le({type:e,selectors:[["app-dialog-login"]],standalone:!0,features:[Be],decls:17,vars:2,consts:[[1,"netflix-dialog-container"],[1,"netflix-title"],[1,"netflix-content"],[1,"netflix-actions"],[1,"netflix-button","maybe-later",3,"click"],[1,"netflix-button","join-now",3,"routerLink","click"]],template:function(r,s){r&1&&(b(0,"div",0)(1,"h1",1),S(2,"Unlock Premium Features!"),v(),b(3,"div",2)(4,"p"),S(5,"Discover a world of exclusive content and personalized experiences by signing up or logging in."),v(),b(6,"p"),S(7,"\u{1F31F} Enjoy premium features like saving your favorite items to access them anytime, anywhere!"),v(),b(8,"p"),S(9,"\u{1F680} Elevate your experience and tailor your preferences to make the most out of our platform."),v(),b(10,"p"),S(11,"Join our community today and unlock a new level of convenience and customization!"),v()(),b(12,"div",3)(13,"button",4),B("click",function(){return s.closeDialog()}),S(14,"Maybe Later"),v(),b(15,"button",5),B("click",function(){return s.closeDialog()}),S(16,"Join Now"),v()()()),r&2&&(I(15),A("routerLink",kr(1,K8)))},dependencies:[PN,Xl,Ji],styles:[".netflix-dialog-container[_ngcontent-%COMP%]{width:400px;padding:20px;background-color:#000;color:#fff;border-radius:8px;box-shadow:0 0 10px #00000080;text-align:center;font-family:Arial,sans-serif}.netflix-title[_ngcontent-%COMP%]{font-size:28px;font-weight:700;margin-bottom:20px}.netflix-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:10px}.netflix-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:20px}.netflix-button[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:25px;font-size:16px;font-weight:700;text-transform:uppercase;cursor:pointer}.netflix-button.maybe-later[_ngcontent-%COMP%]{background-color:#e50914;color:#fff;margin-right:10px}.netflix-button.maybe-later[_ngcontent-%COMP%]:hover{background-color:#ff3d3d}.netflix-button.join-now[_ngcontent-%COMP%]{background-color:#fff;color:#000}.netflix-button.join-now[_ngcontent-%COMP%]:hover{background-color:#f3f3f3}"]});let t=e;return t})();var er=(()=>{let e=class e{constructor(i){this.http=i,this.baseurl="https://api.themoviedb.org/3/discover/movie",this.apikey="4722616a8836f0b929a9cb3a04f6a6a4",this.secondBaseUrl="http://localhost:9999/Commentaire",this.favoritesUrl="http://localhost:9999/api",this.number_page=100}extractMovieIdsFromFavorites(i){return i.map(r=>r.movieId)}getFavoriteMovieIds(){return this.http.get(`${this.favoritesUrl}/favorite`).pipe(U(i=>{console.log("Received favorite movies:",i);let r=this.extractMovieIdsFromFavorites(i);return console.log("Extracted movie IDs:",r),r}))}getFavoriteMovieIdsByEmail(i){return this.http.get(`${this.favoritesUrl}/favorite/${i}`).pipe(U(r=>{console.log("Received favorite movie IDs for email",i,":",r);let s=r.map(o=>o.movieId);return console.log("Extracted movie IDs:",s),s}))}addFavoriteMovie(i,r){return this.http.post(`${this.favoritesUrl}/add/${i}/${r}`,{})}removeFavoriteMovie(i){return this.http.delete(`${this.favoritesUrl}/delete/${i}`)}getCommentaire(){return this.http.get(`${this.secondBaseUrl}/commentaires`)}getCommentaireFiltred(i){return this.http.get(`${this.secondBaseUrl}/find/${i}`)}addComment(i){return this.http.post(`${this.secondBaseUrl}/add`,i)}deleteComment(i){return this.http.delete(`${this.secondBaseUrl}/delete/${i}`)}getPopularMovies(){let i=[];for(let r=1;r<=this.number_page;r++){let s=this.http.get(`${this.baseurl}?api_key=${this.apikey}&page=${r}`);i.push(s)}return wn(i)}getPopularMoviesById(i){let r=`https://api.themoviedb.org/3/movie/${i}?api_key=${this.apikey}`;return this.http.get(r)}getimagefromapi(i){return"https://image.tmdb.org/t/p/w300"+i}searchMovies(i){let r=`https://api.themoviedb.org/3/search/movie?api_key=${this.apikey}&language=en-US&query=${i}%20&page=1&include_adult=true`;return this.http.get(r).pipe(U(s=>s.results))}};e.\u0275fac=function(r){return new(r||e)(_(zo))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Md=class{constructor(e,n,i,r,s,o,a){this.email=e,this.password=n,this._token=i,this._tokenExpirationDate=r,this.status=s,this.id=o,this.username=a}get token(){return!this._tokenExpirationDate||new Date>this._tokenExpirationDate?null:this._token}};var fE={production:!0,apiUrl:"AIzaSyBp9w4oil77XT3FYITOpZrQ5Iozpq4y3_g"};var mn=(()=>{let e=class e{constructor(i,r){this.http=i,this.router=r,this.userSubject=new ot(null)}signUp(i,r){return this.http.post("https://identitytoolkit.googleapis.com/v1/accounts:signUp?key="+fE.apiUrl,{email:i,password:r,returnSecureToken:!0}).pipe(cn(this.handleError),xe(s=>this.handleAuthentication(s.email,s.localId,s.idToken,+s.expiresIn)))}logout(){this.userSubject.next(null),this.router.navigate(["/"]),localStorage.removeItem("userData"),this.tokenExpirationTime&&clearTimeout(this.tokenExpirationTime),this.tokenExpirationTime=null}autoLogout(i){this.tokenExpirationTime=setTimeout(()=>{this.logout()},i)}autoLogin(){let i=JSON.parse(localStorage.getItem("userData"));if(!i)return;let r=new Md(i.email,i.id,i._token,new Date(i._tokenExpirationDate));if(r.token){let s=new Date(i._tokenExpirationDate).getTime()-new Date().getTime();this.autoLogout(s),this.userSubject.next(r)}}login(i,r){return this.http.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key="+fE.apiUrl,{email:i,password:r,returnSecureToken:!0}).pipe(cn(this.handleError),xe(s=>{this.handleAuthentication(s.email,s.localId,s.idToken,+s.expiresIn)}))}handleAuthentication(i,r,s,o){{let a=new Md(i,r,s,new Date(new Date().getTime()+o*1e3));this.userSubject.next(a),localStorage.setItem("userData",JSON.stringify(a)),this.router.navigate(["/"]),this.autoLogout(o*1e3)}}handleError(i){let r="An unknown error occurred!";if(!i.error||!i.error.error)return ri(()=>r);switch(i.error.error.message){case"EMAIL_NOT_FOUND":r="This email does not exist";break;case"INVALID_PASSWORD":r="This password is not correct";break;case"USER_DISABLED":r="This user has been disabled";break;case"EMAIL_EXISTS":r="This email exists already";break;case"OPERATION_NOT_ALLOWED":r="Password sign-in is disabled for this project";break;case"TOO_MANY_ATTEMPTS_TRY_LATER":r="We have blocked all requests from this device due to unusual activity. Try again later";break;default:r="An error has occurred";break}return ri(()=>r)}getEmailFromLocalStorage(){return this.userSubject.value.email}};e.\u0275fac=function(r){return new(r||e)(_(zo),_($e))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Y8=t=>["/details",t],Zm=(()=>{let e=class e{constructor(i,r,s,o){this.filmService=i,this.userService=r,this.router=s,this.dialog=o,this.favoriteRemoved=new ye,this.isAuthenticated=!1}ngOnInit(){this.checkFavoriteStatus(this.film),this.userSub=this.userService.userSubject.subscribe(i=>{console.log("user",i),this.isAuthenticated=!!i})}getUrl(i){return this.filmService.getimagefromapi(i)}toggleFavorite(i){if(this.isAuthenticated){i.favorite=!i.favorite;let r=this.userService.getEmailFromLocalStorage();i.favorite?this.filmService.addFavoriteMovie(i.id,r).subscribe(()=>{console.log("Movie added to favorites:",i.id)},s=>{console.error("Error adding movie to favorites:",s)}):this.filmService.removeFavoriteMovie(i.id).subscribe(()=>{console.log("Movie removed from favorites: AAAAAAAAAAAA",i.id),this.favoriteRemoved.emit(i.id)},s=>{console.error("Error removing movie from favorites:",s)})}else this.dialog.open(rc).afterClosed().subscribe(s=>{s&&this.router.navigate(["/signup"])})}checkFavoriteStatus(i){let r=this.userService.getEmailFromLocalStorage();r?this.filmService.getFavoriteMovieIdsByEmail(r).subscribe(s=>{s.includes(i.id)?i.favorite=!0:i.favorite=!1},s=>{console.error("Error retrieving favorite movie IDs:",s)}):i.favorite=!1}};e.\u0275fac=function(r){return new(r||e)(y(er),y(mn),y($e),y(ta))},e.\u0275cmp=le({type:e,selectors:[["app-home-film"]],inputs:{film:"film"},outputs:{favoriteRemoved:"favoriteRemoved"},standalone:!0,features:[Be],decls:16,vars:9,consts:[[1,"movie-card"],[1,"movie-poster"],[1,"poster-img",3,"src","alt"],[1,"overlay"],[1,"btn","detail","btn-primary",3,"routerLink"],[1,"movie-details"],[1,"movie-title"],[1,"release-date"],[1,"vote-average"],["mat-icon-button","",3,"click"],[1,"text-danger"]],template:function(r,s){r&1&&(b(0,"div",0)(1,"div",1),J(2,"img",2),b(3,"div",3)(4,"a",4),S(5,"Details"),v()()(),b(6,"div",5)(7,"h3",6),S(8),v(),b(9,"p",7),S(10),v(),b(11,"p",8),S(12),v(),b(13,"button",9),B("click",function(){return s.toggleFavorite(s.film)}),b(14,"mat-icon",10),S(15),v()()()()),r&2&&(I(2),xu("alt",s.film.title),A("src",s.getUrl(s.film.poster_path),Fo),I(2),A("routerLink",Au(7,Y8,s.film.id)),I(4),at(s.film.title),I(2),ze("Release Date: ",s.film.release_date,""),I(2),ze("Vote Average: ",s.film.vote_average,""),I(3),at(s.film.favorite?"favorite":"favorite_border"))},dependencies:[Ji,Xl,uN,Gm,gN],styles:[".movie-card[_ngcontent-%COMP%]{width:300px;margin:20px auto;position:relative;border-radius:8px;overflow:hidden;box-shadow:0 4px 8px #00000080;transition:transform .3s ease}.movie-card[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.movie-poster[_ngcontent-%COMP%]{position:relative;overflow:hidden;border-radius:8px 8px 0 0}.movie-poster[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;transition:transform .3s ease}.movie-poster[_ngcontent-%COMP%]:hover   img[_ngcontent-%COMP%]{transform:scale(1.05)}.overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:rgba(0,0,0,.6);display:flex;justify-content:center;align-items:center;opacity:0;transition:opacity .3s ease}.movie-card[_ngcontent-%COMP%]:hover   .overlay[_ngcontent-%COMP%]{opacity:1}.detail[_ngcontent-%COMP%]{text-decoration:none;color:#fff;padding:8px 16px;border-radius:4px;background-color:#e50914;transition:background-color .3s ease}.detail[_ngcontent-%COMP%]:hover{background-color:#88020f}"]});let t=e;return t})();var $N=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(y(ui),y(ce))},e.\u0275dir=ve({type:e});let t=e;return t})(),HN=(()=>{let e=class e extends $N{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ws(e)))(s||e)}})(),e.\u0275dir=ve({type:e,features:[Ze]});let t=e;return t})(),lc=new M("NgValueAccessor"),Q8={provide:lc,useExisting:$n(()=>_E),multi:!0},_E=(()=>{let e=class e extends HN{writeValue(i){this.setProperty("checked",i)}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ws(e)))(s||e)}})(),e.\u0275dir=ve({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,s){r&1&&B("change",function(a){return s.onChange(a.target.checked)})("blur",function(){return s.onTouched()})},features:[Zt([Q8]),Ze]});let t=e;return t})(),J8={provide:lc,useExisting:$n(()=>yi),multi:!0};function X8(){let t=Hi()?Hi().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var Z8=new M("CompositionEventMode"),yi=(()=>{let e=class e extends $N{constructor(i,r,s){super(i,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!X8())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(y(ui),y(ce),y(Z8,8))},e.\u0275dir=ve({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&B("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[Zt([J8]),Ze]});let t=e;return t})();function Vs(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function WN(t){return t!=null&&typeof t.length=="number"}var Pd=new M("NgValidators"),lg=new M("NgAsyncValidators"),e9=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,At=class{static min(e){return t9(e)}static max(e){return n9(e)}static required(e){return qN(e)}static requiredTrue(e){return i9(e)}static email(e){return r9(e)}static minLength(e){return s9(e)}static maxLength(e){return o9(e)}static pattern(e){return a9(e)}static nullValidator(e){return tg(e)}static compose(e){return XN(e)}static composeAsync(e){return ZN(e)}};function t9(t){return e=>{if(Vs(e.value)||Vs(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function n9(t){return e=>{if(Vs(e.value)||Vs(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function qN(t){return Vs(t.value)?{required:!0}:null}function i9(t){return t.value===!0?null:{required:!0}}function r9(t){return Vs(t.value)||e9.test(t.value)?null:{email:!0}}function s9(t){return e=>Vs(e.value)||!WN(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function o9(t){return e=>WN(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function a9(t){if(!t)return tg;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),i=>{if(Vs(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}function tg(t){return null}function GN(t){return t!=null}function KN(t){return Cs(t)?Le(t):t}function YN(t){let e={};return t.forEach(n=>{e=n!=null?C(C({},e),n):e}),Object.keys(e).length===0?null:e}function QN(t,e){return e.map(n=>n(t))}function l9(t){return!t.validate}function JN(t){return t.map(e=>l9(e)?e:n=>e.validate(n))}function XN(t){if(!t)return null;let e=t.filter(GN);return e.length==0?null:function(n){return YN(QN(n,e))}}function yE(t){return t!=null?XN(JN(t)):null}function ZN(t){if(!t)return null;let e=t.filter(GN);return e.length==0?null:function(n){let i=QN(n,e).map(KN);return wn(i).pipe(U(YN))}}function vE(t){return t!=null?ZN(JN(t)):null}function ON(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function eP(t){return t._rawValidators}function tP(t){return t._rawAsyncValidators}function pE(t){return t?Array.isArray(t)?t:[t]:[]}function ng(t,e){return Array.isArray(t)?t.includes(e):t===e}function FN(t,e){let n=pE(e);return pE(t).forEach(r=>{ng(n,r)||n.push(r)}),n}function LN(t,e){return pE(e).filter(n=>!ng(t,n))}var ig=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=yE(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=vE(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Br=class extends ig{get formDirective(){return null}get path(){return null}},na=class extends ig{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},rg=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},c9={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Qye=oe(C({},c9),{"[class.ng-submitted]":"isSubmitted"}),Ur=(()=>{let e=class e extends rg{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(y(na,2))},e.\u0275dir=ve({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&ht("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Ze]});let t=e;return t})(),vi=(()=>{let e=class e extends rg{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(y(Br,10))},e.\u0275dir=ve({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){r&2&&ht("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Ze]});let t=e;return t})();var kd="VALID",eg="INVALID",oc="PENDING",Rd="DISABLED";function bE(t){return(cg(t)?t.validators:t)||null}function u9(t){return Array.isArray(t)?yE(t):t||null}function wE(t,e){return(cg(e)?e.asyncValidators:t)||null}function d9(t){return Array.isArray(t)?vE(t):t||null}function cg(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function nP(t,e,n){let i=t.controls;if(!(e?Object.keys(i):i).length)throw new x(1e3,"");if(!i[n])throw new x(1001,"")}function iP(t,e,n){t._forEachChild((i,r)=>{if(n[r]===void 0)throw new x(1002,"")})}var ac=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===kd}get invalid(){return this.status===eg}get pending(){return this.status==oc}get disabled(){return this.status===Rd}get enabled(){return this.status!==Rd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(FN(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(FN(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(LN(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(LN(e,this._rawAsyncValidators))}hasValidator(e){return ng(this._rawValidators,e)}hasAsyncValidator(e){return ng(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=oc,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Rd,this.errors=null,this._forEachChild(i=>{i.disable(oe(C({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(oe(C({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=kd,this._forEachChild(i=>{i.enable(oe(C({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(oe(C({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===kd||this.status===oc)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Rd:kd}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=oc,this._hasOwnPendingAsyncValidator=!0;let n=KN(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new ye,this.statusChanges=new ye}_calculateStatus(){return this._allControlsDisabled()?Rd:this.errors?eg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(oc)?oc:this._anyControlsHaveStatus(eg)?eg:kd}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){cg(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=u9(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=d9(this._rawAsyncValidators)}},jr=class extends ac{constructor(e,n,i){super(bE(n),wE(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,i={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){iP(this,!0,e),Object.keys(e).forEach(i=>{nP(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,i)=>(e[i]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&e(i,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(e,n){let i=e;return this._forEachChild((r,s)=>{i=n(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var mE=class extends jr{};var Od=new M("CallSetDisabledState",{providedIn:"root",factory:()=>ug}),ug="always";function rP(t,e){return[...e.path,t]}function sg(t,e,n=ug){EE(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),f9(t,e),m9(t,e),p9(t,e),h9(t,e)}function VN(t,e,n=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),ag(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function og(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function h9(t,e){if(e.valueAccessor.setDisabledState){let n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function EE(t,e){let n=eP(t);e.validator!==null?t.setValidators(ON(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let i=tP(t);e.asyncValidator!==null?t.setAsyncValidators(ON(i,e.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();og(e._rawValidators,r),og(e._rawAsyncValidators,r)}function ag(t,e){let n=!1;if(t!==null){if(e.validator!==null){let r=eP(t);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.validator);s.length!==r.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let r=tP(t);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(n=!0,t.setAsyncValidators(s))}}}let i=()=>{};return og(e._rawValidators,i),og(e._rawAsyncValidators,i),n}function f9(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&sP(t,e)})}function p9(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&sP(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function sP(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function m9(t,e){let n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function oP(t,e){t==null,EE(t,e)}function g9(t,e){return ag(t,e)}function aP(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function _9(t){return Object.getPrototypeOf(t.constructor)===HN}function lP(t,e){t._syncPendingControls(),e.forEach(n=>{let i=n.control;i.updateOn==="submit"&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function cP(t,e){if(!e)return null;Array.isArray(e);let n,i,r;return e.forEach(s=>{s.constructor===yi?n=s:_9(s)?i=s:r=s}),r||i||n||null}function y9(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var v9={provide:Br,useExisting:$n(()=>Fd)},Nd=(()=>Promise.resolve())(),Fd=(()=>{let e=class e extends Br{constructor(i,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new ye,this.form=new jr({},yE(i),vE(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(i){Nd.then(()=>{let r=this._findContainer(i.path);i.control=r.registerControl(i.name,i.control),sg(i.control,i,this.callSetDisabledState),i.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(i)})}getControl(i){return this.form.get(i.path)}removeControl(i){Nd.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name),this._directives.delete(i)})}addFormGroup(i){Nd.then(()=>{let r=this._findContainer(i.path),s=new jr({});oP(s,i),r.registerControl(i.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(i){Nd.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name)})}getFormGroup(i){return this.form.get(i.path)}updateModel(i,r){Nd.then(()=>{this.form.get(i.path).setValue(r)})}setValue(i){this.control.setValue(i)}onSubmit(i){return this.submitted=!0,lP(this.form,this._directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(i){return i.pop(),i.length?this.form.get(i):this.form}};e.\u0275fac=function(r){return new(r||e)(y(Pd,10),y(lg,10),y(Od,8))},e.\u0275dir=ve({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,s){r&1&&B("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Zt([v9]),Ze]});let t=e;return t})();function BN(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function jN(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Kn=class extends ac{constructor(e=null,n,i){super(bE(n),wE(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),cg(n)&&(n.nonNullable||n.initialValueIsDefault)&&(jN(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){BN(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){BN(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){jN(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var b9=t=>t instanceof Kn;var w9={provide:na,useExisting:$n(()=>IE)},UN=(()=>Promise.resolve())(),IE=(()=>{let e=class e extends na{constructor(i,r,s,o,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new Kn,this._registered=!1,this.name="",this.update=new ye,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=cP(this,o)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),aP(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){sg(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){UN.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,s=r!==0&&pn(r);UN.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?rP(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)(y(Br,9),y(Pd,10),y(lg,10),y(lc,10),y(Mr,8),y(Od,8))},e.\u0275dir=ve({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Zt([w9]),Ze,Dt]});let t=e;return t})(),bi=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ve({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var E9=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=$({});let t=e;return t})();var uP=new M("NgModelWithFormControlWarning");var I9={provide:Br,useExisting:$n(()=>Bs)},Bs=(()=>{let e=class e extends Br{constructor(i,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ye,this._setValidators(i),this._setAsyncValidators(r)}ngOnChanges(i){this._checkFormPresent(),i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ag(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){let r=this.form.get(i.path);return sg(r,i,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),r}getControl(i){return this.form.get(i.path)}removeControl(i){VN(i.control||null,i,!1),y9(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,r){this.form.get(i.path).setValue(r)}onSubmit(i){return this.submitted=!0,lP(this.form,this.directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_updateDomValue(){this.directives.forEach(i=>{let r=i.control,s=this.form.get(i.path);r!==s&&(VN(r||null,i),b9(s)&&(sg(s,i,this.callSetDisabledState),i.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){let r=this.form.get(i.path);oP(r,i),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){let r=this.form.get(i.path);r&&g9(r,i)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){EE(this.form,this),this._oldForm&&ag(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(r){return new(r||e)(y(Pd,10),y(lg,10),y(Od,8))},e.\u0275dir=ve({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,s){r&1&&B("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Zt([I9]),Ze,Dt]});let t=e;return t})();var C9={provide:na,useExisting:$n(()=>js)},js=(()=>{let e=class e extends na{set isDisabled(i){}constructor(i,r,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new ye,this._ngModelWarningSent=!1,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=cP(this,o)}ngOnChanges(i){this._added||this._setUpControl(),aP(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return rP(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(y(Br,13),y(Pd,10),y(lg,10),y(lc,10),y(uP,8))},e.\u0275dir=ve({type:e,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[Zt([C9]),Ze,Dt]});let t=e;return t})();var T9=(()=>{let e=class e{constructor(){this._validator=tg}ngOnChanges(i){if(this.inputName in i){let r=this.normalizeInput(i[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):tg,this._onChange&&this._onChange()}}validate(i){return this._validator(i)}registerOnValidatorChange(i){this._onChange=i}enabled(i){return i!=null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ve({type:e,features:[Dt]});let t=e;return t})();var S9={provide:Pd,useExisting:$n(()=>CE),multi:!0};var CE=(()=>{let e=class e extends T9{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=pn,this.createValidator=i=>qN}enabled(i){return i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ws(e)))(s||e)}})(),e.\u0275dir=ve({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,s){r&2&&Xt("required",s._enabled?"":null)},inputs:{required:"required"},features:[Zt([S9]),Ze]});let t=e;return t})();var dP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=$({imports:[E9]});let t=e;return t})(),gE=class extends ac{constructor(e,n,i){super(bE(n),wE(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,i={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,n={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),n&&(this.controls.splice(r,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){iP(this,!1,e),e.forEach((i,r)=>{nP(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,i)=>i._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,i)=>{e(n,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function zN(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var cc=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let i=new e;return i.useNonNullable=!0,i}group(i,r=null){let s=this._reduceControls(i),o={};return zN(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new jr(s,o)}record(i,r=null){let s=this._reduceControls(i);return new mE(s,r)}control(i,r,s){let o={};return this.useNonNullable?(zN(r)?o=r:(o.validators=r,o.asyncValidators=s),new Kn(i,oe(C({},o),{nonNullable:!0}))):new Kn(i,r,s)}array(i,r,s){let o=i.map(a=>this._createControl(a));return new gE(o,r,s)}_reduceControls(i){let r={};return Object.keys(i).forEach(s=>{r[s]=this._createControl(i[s])}),r}_createControl(i){if(i instanceof Kn)return i;if(i instanceof ac)return i;if(Array.isArray(i)){let r=i[0],s=i.length>1?i[1]:null,o=i.length>2?i[2]:null;return this.control(r,s,o)}else return this.control(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var dg=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:Od,useValue:i.callSetDisabledState??ug}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=$({imports:[dP]});let t=e;return t})(),uc=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:uP,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:Od,useValue:i.callSetDisabledState??ug}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=$({imports:[dP]});let t=e;return t})();function D9(t,e){if(t&1&&(b(0,"div",12),J(1,"app-home-film",13),v()),t&2){let n=e.$implicit;I(1),A("film",n)}}var TE=(()=>{let e=class e{constructor(i){this.filmservice=i,this.id_gender=[],this.genres=["Action","Adventure","Animation","Comedy","Crime","Documentary","Drama","Family","Fantasy","History","Horror","Music","Mystery","Romance","Science Fiction","Thriller","TV Movie","War","Western"],this.selectedGenre="",this.currentPage=1,this.isFavorite=!1}ngOnInit(){this.getAllDatils()}getAllDatilss(){this.filmservice.getPopularMovies().subscribe(i=>{if(this.films=i.results,this.filmsfiltred=i.results,this.all_ids=this.films.map(r=>r.id),this.all_ids.length>0){let r=this.all_ids.map(s=>this.filmservice.getPopularMoviesById(s));wn(r).subscribe(s=>{s.forEach((o,a)=>{this.id_gender.push({idfilm:this.all_ids[a],genre:o.genres})})})}})}getAllDatils(){this.filmservice.getPopularMovies().subscribe(i=>{if(this.films=i[this.currentPage-1].results,this.filmsfiltred=i[this.currentPage-1].results,this.all_ids=this.films.map(r=>r.id),this.all_ids.length>0){let r=this.all_ids.map(s=>this.filmservice.getPopularMoviesById(s));wn(r).subscribe(s=>{s.forEach((o,a)=>{this.id_gender.push({idfilm:this.all_ids[a],genres:o.genres})})})}})}loadNextPage(){this.currentPage++,this.getAllDatils()}loadPreviousPage(){this.currentPage>1&&(this.currentPage--,this.getAllDatils())}getUrl(i){return this.filmservice.getimagefromapi(i)}filterResults(i){if(!i){this.filmsfiltred=this.films;return}this.filmservice.searchMovies(i).subscribe(r=>{this.filmsfiltred=r})}toggleFavorite(){this.isFavorite=!this.isFavorite}filterResultsGenre(i){if(console.log(i),console.log("zlk",this.id_gender),!i){this.filmsfiltred=this.films;return}}};e.\u0275fac=function(r){return new(r||e)(y(er))},e.\u0275cmp=le({type:e,selectors:[["app-home"]],standalone:!0,features:[Be],decls:16,vars:3,consts:[[1,"container","mt-3"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"d-flex",3,"ngSubmit"],["type","search","placeholder","Search movie","aria-label","Search",1,"form-control","custom-input","mr-2",3,"change"],["filter",""],["type","submit",1,"btn","custom-btn"],[1,"row","row-cols-1","row-cols-sm-2","row-cols-md-3","row-cols-lg-3","g-4"],["class","col",4,"ngFor","ngForOf"],[1,"pagination-container"],[1,"pagination-button",3,"disabled","click"],[1,"pagination-span"],[1,"pagination-button",3,"click"],[1,"col"],[3,"film"]],template:function(r,s){if(r&1){let o=ft();b(0,"div",0)(1,"div",1)(2,"form",2),B("ngSubmit",function(){Ge(o);let l=kl(4);return Ke(s.filterResults(l.value))}),b(3,"input",3,4),B("change",function(){Ge(o);let l=kl(4);return Ke(s.filterResults(l.value))}),v(),b(5,"button",5),S(6,"Search"),v()()(),b(7,"div",6),he(8,D9,2,1,"div",7),v(),b(9,"div",8)(10,"button",9),B("click",function(){return s.loadPreviousPage()}),S(11," Previous Page "),v(),b(12,"span",10),S(13),v(),b(14,"button",11),B("click",function(){return s.loadNextPage()}),S(15," Next Page "),v()()()}r&2&&(I(8),A("ngForOf",s.filmsfiltred),I(2),A("disabled",s.currentPage===1),I(3),at(s.currentPage))},dependencies:[fi,qi,Zm,rk,dg,bi,vi,Fd],styles:[".container[_ngcontent-%COMP%]{padding-top:20px;background-color:#000;color:#fff}.d-flex[_ngcontent-%COMP%]{margin-bottom:20px}.custom-input[_ngcontent-%COMP%], .custom-select[_ngcontent-%COMP%]{height:40px;line-height:1.5;border:none;border-radius:4px;padding:8px;width:500px;flex-grow:1;color:#fff;background-color:#fff}.custom-btn[_ngcontent-%COMP%]{background-color:#e50914;color:#fff;border-radius:4px;padding:8px 20px;border:none;transition:background-color .3s ease}.custom-btn[_ngcontent-%COMP%]:hover{background-color:#ff0f23}@media (max-width: 576px){.d-flex[_ngcontent-%COMP%]{flex-direction:column}}.pagination-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;margin-top:50px}.pagination-button[_ngcontent-%COMP%]{padding:10px 20px;font-size:16px;border:none;border-radius:5px;background-color:#e50914;color:#fff;cursor:pointer;margin:0 10px;transition:background-color .3s ease}.pagination-button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.pagination-span[_ngcontent-%COMP%]{font-size:18px;margin:0 10px}"]});let t=e;return t})();function x9(t,e){if(t&1){let n=ft();b(0,"li",10)(1,"a",12),B("click",function(){Ge(n);let r=G();return Ke(r.onLogout())}),S(2,"Logout"),v()()}}function A9(t,e){if(t&1){let n=ft();b(0,"li",10)(1,"a",12),B("click",function(){Ge(n);let r=G();return Ke(r.onLogin())}),S(2,"SingIn"),v()()}}var hP=()=>["/"],fP=(()=>{let e=class e{constructor(i,r,s,o){this.userLoginService=i,this.router=r,this.dialog=s,this.filmService=o,this.title="movie-app",this.destroy$=new Z,this.isAuthenticated=!1}ngOnInit(){this.userLoginService.autoLogin(),this.userSub=this.userLoginService.userSubject.subscribe(i=>{console.log("user",i),this.isAuthenticated=!!i})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.userSub.unsubscribe()}onOpenFavorites(){console.log("this.isAuthenticated",this.isAuthenticated),this.isAuthenticated?this.router.navigate(["/favorited"]):this.dialog.open(rc).afterClosed().subscribe(r=>{r&&this.router.navigate(["/signup"])})}onLogout(){this.userLoginService.logout()}onLogin(){this.router.navigate(["/login"])}};e.\u0275fac=function(r){return new(r||e)(y(mn),y($e),y(ta),y(er))},e.\u0275cmp=le({type:e,selectors:[["app-root"]],standalone:!0,features:[Be],decls:25,vars:6,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1"],["rel","stylesheet","href","https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"],[1,"navbar","navbar-expand-lg","navbar-dark","bg-black"],[1,"container-fluid"],[1,"navbar-brand","emi-movies-logo",3,"routerLink"],[1,"emi"],[1,"movies"],[1,"navbar-nav"],[1,"nav-item"],[1,"nav-link","fs-5",3,"routerLink"],[1,"nav-link","fs-5",3,"click"],["class","nav-item",4,"ngIf"]],template:function(r,s){r&1&&(b(0,"html",0)(1,"head"),J(2,"meta",1)(3,"meta",2)(4,"link",3),b(5,"title"),S(6,"EMI MOVIES"),v()(),b(7,"body")(8,"nav",4)(9,"div",5)(10,"a",6)(11,"span",7),S(12,"EMI"),v(),b(13,"span",8),S(14,"MOVIES"),v()(),b(15,"ul",9)(16,"li",10)(17,"a",11),S(18,"Home"),v()(),b(19,"li",10)(20,"a",12),B("click",function(){return s.onOpenFavorites()}),S(21,"Favorited"),v()(),he(22,x9,3,0,"li",13)(23,A9,3,0,"li",13),v()()(),J(24,"router-outlet"),v()()),r&2&&(I(10),A("routerLink",kr(4,hP)),I(7),A("routerLink",kr(5,hP)),I(5),A("ngIf",s.isAuthenticated),I(1),A("ngIf",!s.isAuthenticated))},dependencies:[fi,xn,rw,lR,Ji],styles:[".main-content[_ngcontent-%COMP%]{background-color:#000;min-height:100vh;overflow-x:hidden}[_nghost-%COMP%]{display:block;background-color:#000;min-height:100vh;overflow-x:hidden}.bg-black[_ngcontent-%COMP%]{background-color:#000!important}.emi-movies-logo[_ngcontent-%COMP%]{font-weight:700;font-size:2.2rem;padding-right:100px;text-align:right}body[_ngcontent-%COMP%]{background-color:#000;color:#fff}.navbar-brand[_ngcontent-%COMP%]{font-weight:700;font-size:2.2rem;padding-right:40px;text-align:right;color:#fff}.navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{font-size:1.2rem;padding:8px 20px;color:#9c9c9c;transition:all .3s ease-in-out}.navbar-nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]:hover{color:#fc0}.active[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:#fc0!important;font-weight:700}.emi[_ngcontent-%COMP%]{color:#fff}.movies[_ngcontent-%COMP%]{color:red;font-weight:700}",`body[_ngcontent-%COMP%] {
      background-color: black;
      color: white; 

    }

    .bg-black[_ngcontent-%COMP%] {
      background-color: black !important;
    }

    .emi-movies-link[_ngcontent-%COMP%] {
      font-weight: bold; 

      color: #ffcc00;   

    }

    .navbar-nav[_ngcontent-%COMP%] {
      margin-left: -600px;
    }`]});let t=e;return t})();var DE={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var R=function(t,e){if(!t)throw ra(e)},ra=function(t){return new Error("Firebase Database ("+DE.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var mP=function(t){let e=[],n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},M9=function(t){let e=[],n=0,i=0;for(;n<t.length;){let r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{let s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},fg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){let s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,u=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(h=64)),i.push(n[u],n[d],n[h],n[p])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(mP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):M9(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){let s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;let c=r<t.length?n[t.charAt(r)]:64;++r;let d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||c==null||d==null)throw new xE;let h=s<<2|a>>4;if(i.push(h),c!==64){let p=a<<4&240|c>>2;if(i.push(p),d!==64){let f=c<<6&192|d;i.push(f)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},xE=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},ME=function(t){let e=mP(t);return fg.encodeByteArray(e,!0)},Vd=function(t){return ME(t).replace(/\./g,"")},Bd=function(t){try{return fg.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function gP(t){return _P(void 0,t)}function _P(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!k9(n)||(t[n]=_P(t[n],e[n]));return t}function k9(t){return t!=="__proto__"}function R9(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var N9=()=>R9().__FIREBASE_DEFAULTS__,P9=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},O9=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Bd(t[1]);return e&&JSON.parse(e)},kE=()=>{try{return N9()||P9()||O9()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},RE=t=>{var e,n;return(n=(e=kE())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},pg=t=>{let e=RE(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},NE=()=>{var t;return(t=kE())===null||t===void 0?void 0:t.config},PE=t=>{var e;return(e=kE())===null||e===void 0?void 0:e[`_${t}`]};var ia=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}};function mg(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Vd(JSON.stringify(n)),Vd(JSON.stringify(o)),a].join(".")}function yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jd(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yt())}function yP(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function gg(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vP(){let t=yt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function tr(){return DE.NODE_CLIENT===!0||DE.NODE_ADMIN===!0}function OE(){try{return typeof indexedDB=="object"}catch{return!1}}function bP(){return new Promise((t,e)=>{try{let n=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var F9="FirebaseError",Rn=class t extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=F9,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,zr.prototype.create)}},zr=class{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){let i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?L9(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Rn(r,a,i)}};function L9(t,e){return t.replace(V9,(n,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var V9=/\{\$([^}]+)}/g;function dc(t){return JSON.parse(t)}function vt(t){return JSON.stringify(t)}var wP=function(t){let e={},n={},i={},r="";try{let s=t.split(".");e=dc(Bd(s[0])||""),n=dc(Bd(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:r}};var EP=function(t){let e=wP(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},IP=function(t){let e=wP(t).claims;return typeof e=="object"&&e.admin===!0};function nr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function sa(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Ud(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function zd(t,e,n){let i={};for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function oa(t,e){if(t===e)return!0;let n=Object.keys(t),i=Object.keys(e);for(let r of n){if(!i.includes(r))return!1;let s=t[r],o=e[r];if(pP(s)&&pP(o)){if(!oa(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!n.includes(r))return!1;return!0}function pP(t){return t!==null&&typeof t=="object"}function aa(t){let e=[];for(let[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}var hg=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let i=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)i[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)i[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let h=i[d-3]^i[d-8]^i[d-14]^i[d-16];i[d]=(h<<1|h>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):d<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);let h=(r<<5|r>>>27)+c+l+u+i[d]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=r,r=h}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let i=n-this.blockSize,r=0,s=this.buf_,o=this.inbuf_;for(;r<n;){if(o===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(s[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}else for(;r<n;)if(s[o]=e[r],++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)e[i]=this.chain_[r]>>s&255,++i;return e}};function CP(t,e){let n=new AE(t,e);return n.subscribe.bind(n)}var AE=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");B9(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=SE),r.error===void 0&&(r.error=SE),r.complete===void 0&&(r.complete=SE);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function B9(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function SE(){}function TP(t,e){return`${t} failed: ${e} argument `}var SP=function(t){let e=[],n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);if(r>=55296&&r<=56319){let s=r-55296;i++,R(i<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(i)-56320;r=65536+(s<<10)+o}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},$d=function(t){let e=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};var fve=4*60*60*1e3;function wi(t){return t&&t._delegate?t._delegate:t}var gn=class{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var la="[DEFAULT]";var _g=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let i=new ia;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(U9(e))try{this.getOrInitializeService({instanceIdentifier:la})}catch{}for(let[n,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=la){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return E(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=la){return this.instances.has(e)}getOptions(e=la){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;let r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let i=this.onInitCallbacks.get(n);if(i)for(let r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:j9(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=la){return this.component?this.component.multipleInstances?e:la:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function j9(t){return t===la?void 0:t}function U9(t){return t.instantiationMode==="EAGER"}var Hd=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new _g(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var z9=[],Te=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(Te||{}),$9={debug:Te.DEBUG,verbose:Te.VERBOSE,info:Te.INFO,warn:Te.WARN,error:Te.ERROR,silent:Te.SILENT},H9=Te.INFO,W9={[Te.DEBUG]:"log",[Te.VERBOSE]:"log",[Te.INFO]:"info",[Te.WARN]:"warn",[Te.ERROR]:"error"},q9=(t,e,...n)=>{if(e<t.logLevel)return;let i=new Date().toISOString(),r=W9[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ir=class{constructor(e){this.name=e,this._logLevel=H9,this._logHandler=q9,this._userLogHandler=null,z9.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$9[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Te.DEBUG,...e),this._logHandler(this,Te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Te.VERBOSE,...e),this._logHandler(this,Te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Te.INFO,...e),this._logHandler(this,Te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Te.WARN,...e),this._logHandler(this,Te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Te.ERROR,...e),this._logHandler(this,Te.ERROR,...e)}};var G9=(t,e)=>e.some(n=>t instanceof n),DP,xP;function K9(){return DP||(DP=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Y9(){return xP||(xP=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var AP=new WeakMap,LE=new WeakMap,MP=new WeakMap,FE=new WeakMap,BE=new WeakMap;function Q9(t){let e=new Promise((n,i)=>{let r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(rr(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&AP.set(n,t)}).catch(()=>{}),BE.set(e,t),e}function J9(t){if(LE.has(t))return;let e=new Promise((n,i)=>{let r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});LE.set(t,e)}var VE={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return LE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||MP.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return rr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kP(t){VE=t(VE)}function X9(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let i=t.call(yg(this),e,...n);return MP.set(i,e.sort?e.sort():[e]),rr(i)}:Y9().includes(t)?function(...e){return t.apply(yg(this),e),rr(AP.get(this))}:function(...e){return rr(t.apply(yg(this),e))}}function Z9(t){return typeof t=="function"?X9(t):(t instanceof IDBTransaction&&J9(t),G9(t,K9())?new Proxy(t,VE):t)}function rr(t){if(t instanceof IDBRequest)return Q9(t);if(FE.has(t))return FE.get(t);let e=Z9(t);return e!==t&&(FE.set(t,e),BE.set(e,t)),e}var yg=t=>BE.get(t);function NP(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(t,e),a=rr(o);return i&&o.addEventListener("upgradeneeded",l=>{i(rr(o.result),l.oldVersion,l.newVersion,rr(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}var eK=["get","getKey","getAll","getAllKeys","count"],tK=["put","add","delete","clear"],jE=new Map;function RP(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jE.get(e))return jE.get(e);let n=e.replace(/FromIndex$/,""),i=e!==n,r=tK.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||eK.includes(n)))return;let s=function(o,...a){return E(this,null,function*(){let l=this.transaction(o,r?"readwrite":"readonly"),c=l.store;return i&&(c=c.index(a.shift())),(yield Promise.all([c[n](...a),r&&l.done]))[0]})};return jE.set(e,s),s}kP(t=>oe(C({},t),{get:(e,n,i)=>RP(e,n)||t.get(e,n,i),has:(e,n)=>!!RP(e,n)||t.has(e,n)}));var zE=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nK(n)){let i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}};function nK(t){let e=t.getComponent();return e?.type==="VERSION"}var $E="@firebase/app",PP="0.9.25";var ca=new ir("@firebase/app"),iK="@firebase/app-compat",rK="@firebase/analytics-compat",sK="@firebase/analytics",oK="@firebase/app-check-compat",aK="@firebase/app-check",lK="@firebase/auth",cK="@firebase/auth-compat",uK="@firebase/database",dK="@firebase/database-compat",hK="@firebase/functions",fK="@firebase/functions-compat",pK="@firebase/installations",mK="@firebase/installations-compat",gK="@firebase/messaging",_K="@firebase/messaging-compat",yK="@firebase/performance",vK="@firebase/performance-compat",bK="@firebase/remote-config",wK="@firebase/remote-config-compat",EK="@firebase/storage",IK="@firebase/storage-compat",CK="@firebase/firestore",TK="@firebase/firestore-compat",SK="firebase",DK="10.7.1";var HE="[DEFAULT]",xK={[$E]:"fire-core",[iK]:"fire-core-compat",[sK]:"fire-analytics",[rK]:"fire-analytics-compat",[aK]:"fire-app-check",[oK]:"fire-app-check-compat",[lK]:"fire-auth",[cK]:"fire-auth-compat",[uK]:"fire-rtdb",[dK]:"fire-rtdb-compat",[hK]:"fire-fn",[fK]:"fire-fn-compat",[pK]:"fire-iid",[mK]:"fire-iid-compat",[gK]:"fire-fcm",[_K]:"fire-fcm-compat",[yK]:"fire-perf",[vK]:"fire-perf-compat",[bK]:"fire-rc",[wK]:"fire-rc-compat",[EK]:"fire-gcs",[IK]:"fire-gcs-compat",[CK]:"fire-fst",[TK]:"fire-fst-compat","fire-js":"fire-js",[SK]:"fire-js-all"};var Wd=new Map,WE=new Map;function AK(t,e){try{t.container.addComponent(e)}catch(n){ca.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function sr(t){let e=t.name;if(WE.has(e))return ca.debug(`There were multiple attempts to register component ${e}.`),!1;WE.set(e,t);for(let n of Wd.values())AK(n,t);return!0}function ua(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}var MK={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Us=new zr("app","Firebase",MK);var qE=class{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new gn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Us.create("app-deleted",{appName:this._name})}};var or=DK;function YE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let i=Object.assign({name:HE,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Us.create("bad-app-name",{appName:String(r)});if(n||(n=NE()),!n)throw Us.create("no-options");let s=Wd.get(r);if(s){if(oa(n,s.options)&&oa(i,s.config))return s;throw Us.create("duplicate-app",{appName:r})}let o=new Hd(r);for(let l of WE.values())o.addComponent(l);let a=new qE(n,i,o);return Wd.set(r,a),a}function zs(t=HE){let e=Wd.get(t);if(!e&&t===HE&&NE())return YE();if(!e)throw Us.create("no-app",{appName:t});return e}function vg(){return Array.from(Wd.values())}function Ye(t,e,n){var i;let r=(i=xK[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);let s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ca.warn(a.join(" "));return}sr(new gn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var kK="firebase-heartbeat-database",RK=1,qd="firebase-heartbeat-store",UE=null;function VP(){return UE||(UE=NP(kK,RK,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(qd)}}}).catch(t=>{throw Us.create("idb-open",{originalErrorMessage:t.message})})),UE}function NK(t){return E(this,null,function*(){try{return yield(yield VP()).transaction(qd).objectStore(qd).get(BP(t))}catch(e){if(e instanceof Rn)ca.warn(e.message);else{let n=Us.create("idb-get",{originalErrorMessage:e?.message});ca.warn(n.message)}}})}function OP(t,e){return E(this,null,function*(){try{let i=(yield VP()).transaction(qd,"readwrite");yield i.objectStore(qd).put(e,BP(t)),yield i.done}catch(n){if(n instanceof Rn)ca.warn(n.message);else{let i=Us.create("idb-set",{originalErrorMessage:n?.message});ca.warn(i.message)}}})}function BP(t){return`${t.name}!${t.options.appId}`}var PK=1024,OK=30*24*60*60*1e3,GE=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new KE(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return E(this,null,function*(){var e,n;let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=FP();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=OK}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return E(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=FP(),{heartbeatsToSend:i,unsentEntries:r}=FK(this._heartbeatsCache.heartbeats),s=Vd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function FP(){return new Date().toISOString().substring(0,10)}function FK(t,e=PK){let n=[],i=t.slice();for(let r of t){let s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),LP(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),LP(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}var KE=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return E(this,null,function*(){return OE()?bP().then(()=>!0).catch(()=>!1):!1})}read(){return E(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield NK(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return E(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return OP(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return E(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return OP(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function LP(t){return Vd(JSON.stringify({version:2,heartbeats:t})).length}function LK(t){sr(new gn("platform-logger",e=>new zE(e),"PRIVATE")),sr(new gn("heartbeat",e=>new GE(e),"PRIVATE")),Ye($E,PP,t),Ye($E,PP,"esm2017"),Ye("fire-js","")}LK("");var VK="firebase",BK="10.7.1";Ye(VK,BK,"app");var $r=new Ui("ANGULARFIRE2_VERSION");function fc(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var ha=(t,e)=>{let n=e?[e]:vg(),i=[];return n.forEach(r=>{r.container.getProvider(t).instances.forEach(o=>{i.includes(o)||i.push(o)})}),i},$s=class{constructor(){return ha(jK)}},jK="app-check";function hc(){}var bg=class{zone;delegate;constructor(e,n=Uy){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,i){let r=this.zone,s=function(o){r.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,i)}},QE=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let i=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",hc,{},hc,hc)),n.pipe(xe({next:i,complete:i,error:i})).subscribe(e).add(i)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Hs=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new bg(Zone.current)),this.insideAngular=n.run(()=>new bg(Zone.current,wr)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(i){return new(i||t)(_(L))};static \u0275prov=T({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function wg(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function UK(t){return wg().ngZone.runOutsideAngular(()=>t())}function da(t){return wg().ngZone.run(()=>t())}function zK(t){return $K(wg())(t)}function $K(t){return function(n){return n=n.lift(new QE(t.ngZone)),n.pipe(cs(t.outsideAngular),ls(t.insideAngular))}}var HK=(t,e)=>function(){let i=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),da(()=>t.apply(void 0,i))},Ws=(t,e)=>function(){let n,i=arguments;for(let s=0;s<arguments.length;s++)typeof i[s]=="function"&&(e&&(n||=da(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",hc,{},hc,hc))),i[s]=HK(i[s],n));let r=UK(()=>t.apply(this,i));if(!e)if(r instanceof X){let s=wg();return r.pipe(cs(s.outsideAngular),ls(s.insideAngular))}else return da(()=>r);return r instanceof X?r.pipe(zK):r instanceof Promise?da(()=>new Promise((s,o)=>r.then(a=>da(()=>s(a)),a=>da(()=>o(a))))):typeof r=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),r.apply(this,arguments)}:da(()=>r)};var Ei=class{constructor(e){return e}},Hr=class{constructor(){return vg()}};function WK(t){return t&&t.length===1?t[0]:new Ei(zs())}var JE=new M("angularfire2._apps"),qK={provide:Ei,useFactory:WK,deps:[[new Xe,JE]]},GK={provide:Hr,deps:[[new Xe,JE]]};function KK(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Ei(i)}}var YK=(()=>{class t{constructor(n){Ye("angularfire",$r.full,"core"),Ye("angularfire",$r.full,"app"),Ye("angular",kb.full,n.toString())}static \u0275fac=function(i){return new(i||t)(_(Tn))};static \u0275mod=H({type:t});static \u0275inj=$({providers:[qK,GK]})}return t})();function jP(t,...e){return{ngModule:YK,providers:[{provide:JE,useFactory:KK(t),multi:!0,deps:[L,Se,Hs,...e]}]}}var UP=Ws(YE,!0);function tO(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var nO=tO,iO=new zr("auth","Firebase",tO());var Dg=new ir("@firebase/auth");function QK(t,...e){Dg.logLevel<=Te.WARN&&Dg.warn(`Auth (${or}): ${t}`,...e)}function Ig(t,...e){Dg.logLevel<=Te.ERROR&&Dg.error(`Auth (${or}): ${t}`,...e)}function Gs(t,...e){throw _I(t,...e)}function fa(t,...e){return _I(t,...e)}function JK(t,e,n){let i=Object.assign(Object.assign({},nO()),{[e]:n});return new zr("auth","Firebase",i).create(e,{appName:t.name})}function _I(t,...e){if(typeof t!="string"){let n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return iO.create(t,...e)}function re(t,e,...n){if(!t)throw _I(e,...n)}function Wr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Ig(e),new Error(e)}function Ks(t,e){t||Wr(e)}function tI(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function XK(){return zP()==="http:"||zP()==="https:"}function zP(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function ZK(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(XK()||yP()||"connection"in navigator)?navigator.onLine:!0}function e7(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var pa=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ks(n>e,"Short delay should be less than long delay!"),this.isMobile=jd()||gg()}get(){return ZK()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function yI(t,e){Ks(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var xg=class{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var t7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var n7=new pa(3e4,6e4);function vI(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function pc(s,o,a,l){return E(this,arguments,function*(t,e,n,i,r={}){return rO(t,r,()=>E(this,null,function*(){let c={},u={};i&&(e==="GET"?u=i:c={body:JSON.stringify(i)});let d=aa(Object.assign({key:t.config.apiKey},u)).slice(1),h=yield t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),xg.fetch()(sO(t,t.config.apiHost,n,d),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},c))}))})}function rO(t,e,n){return E(this,null,function*(){t._canInitEmulator=!1;let i=Object.assign(Object.assign({},t7),e);try{let r=new nI(t),s=yield Promise.race([n(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Eg(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Eg(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Eg(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Eg(t,"user-disabled",o);let u=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw JK(t,u,c);Gs(t,u)}}catch(r){if(r instanceof Rn)throw r;Gs(t,"network-request-failed",{message:String(r)})}})}function i7(s,o,a,l){return E(this,arguments,function*(t,e,n,i,r={}){let c=yield pc(t,e,n,i,r);return"mfaPendingCredential"in c&&Gs(t,"multi-factor-auth-required",{_serverResponse:c}),c})}function sO(t,e,n,i){let r=`${e}${n}?${i}`;return t.config.emulator?yI(t.config,r):`${t.config.apiScheme}://${r}`}var nI=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(fa(this.auth,"network-request-failed")),n7.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Eg(t,e,n){let i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);let r=fa(t,e,i);return r.customData._tokenResponse=n,r}function r7(t,e){return E(this,null,function*(){return pc(t,"POST","/v1/accounts:delete",e)})}function s7(t,e){return E(this,null,function*(){return pc(t,"POST","/v1/accounts:lookup",e)})}function Gd(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function bI(t,e=!1){return E(this,null,function*(){let n=wi(t),i=yield n.getIdToken(e),r=wI(i);re(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:Gd(XE(r.auth_time)),issuedAtTime:Gd(XE(r.iat)),expirationTime:Gd(XE(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function XE(t){return Number(t)*1e3}function wI(t){let[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Ig("JWT malformed, contained fewer than 3 sections"),null;try{let r=Bd(n);return r?JSON.parse(r):(Ig("Failed to decode base64 JWT payload"),null)}catch(r){return Ig("Caught error parsing JWT payload as JSON",r?.toString()),null}}function o7(t){let e=wI(t);return re(e,"internal-error"),re(typeof e.exp<"u","internal-error"),re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Kd(t,e,n=!1){return E(this,null,function*(){if(n)return e;try{return yield e}catch(i){throw i instanceof Rn&&a7(i)&&t.auth.currentUser===t&&(yield t.auth.signOut()),i}})}function a7({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var iI=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>E(this,null,function*(){yield this.iteration()}),n)}iteration(){return E(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ag=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gd(this.lastLoginAt),this.creationTime=Gd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Mg(t){return E(this,null,function*(){var e;let n=t.auth,i=yield t.getIdToken(),r=yield Kd(t,s7(n,{idToken:i}));re(r?.users.length,n,"internal-error");let s=r.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?c7(s.providerUserInfo):[],a=l7(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!a?.length,u=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ag(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)})}function EI(t){return E(this,null,function*(){let e=wi(t);yield Mg(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function l7(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function c7(t){return t.map(e=>{var{providerId:n}=e,i=$y(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function u7(t,e){return E(this,null,function*(){let n=yield rO(t,{},()=>E(this,null,function*(){let i=aa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=sO(t,r,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",xg.fetch()(o,{method:"POST",headers:a,body:i})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function d7(t,e){return E(this,null,function*(){return pc(t,"POST","/v2/accounts:revokeToken",vI(t,e))})}var kg=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){re(e.idToken,"internal-error"),re(typeof e.idToken<"u","internal-error"),re(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):o7(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){return E(this,null,function*(){return re(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return E(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield u7(e,n);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){let{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new t;return i&&(re(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(re(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(re(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Wr("not implemented")}};function qs(t,e){re(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Yd=class t{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=$y(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new iI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ag(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return E(this,null,function*(){let n=yield Kd(this,this.stsTokenManager.getToken(this.auth,e));return re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return bI(this,e)}reload(){return EI(this)}_assign(e){this!==e&&(re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return E(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&(yield Mg(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return E(this,null,function*(){let e=yield this.getIdToken();return yield Kd(this,r7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,c,u;let d=(i=n.displayName)!==null&&i!==void 0?i:void 0,h=(r=n.email)!==null&&r!==void 0?r:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,f=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,O=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:Y,emailVerified:j,isAnonymous:Ne,providerData:se,stsTokenManager:De}=n;re(Y&&De,e,"internal-error");let ct=kg.fromJSON(this.name,De);re(typeof Y=="string",e,"internal-error"),qs(d,e.name),qs(h,e.name),re(typeof j=="boolean",e,"internal-error"),re(typeof Ne=="boolean",e,"internal-error"),qs(p,e.name),qs(f,e.name),qs(m,e.name),qs(g,e.name),qs(w,e.name),qs(O,e.name);let W=new t({uid:Y,auth:e,email:h,emailVerified:j,displayName:d,isAnonymous:Ne,photoURL:f,phoneNumber:p,tenantId:m,stsTokenManager:ct,createdAt:w,lastLoginAt:O});return se&&Array.isArray(se)&&(W.providerData=se.map(it=>Object.assign({},it))),g&&(W._redirectEventId=g),W}static _fromIdTokenResponse(e,n,i=!1){return E(this,null,function*(){let r=new kg;r.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield Mg(s),s})}};var $P=new Map;function qr(t){Ks(t instanceof Function,"Expected a class definition");let e=$P.get(t);return e?(Ks(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$P.set(t,e),e)}var h7=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return E(this,null,function*(){return!0})}_set(n,i){return E(this,null,function*(){this.storage[n]=i})}_get(n){return E(this,null,function*(){let i=this.storage[n];return i===void 0?null:i})}_remove(n){return E(this,null,function*(){delete this.storage[n]})}_addListener(n,i){}_removeListener(n,i){}}return t.type="NONE",t})(),rI=h7;function Cg(t,e,n){return`firebase:${t}:${e}:${n}`}var Rg=class t{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=Cg(this.userKey,r.apiKey,s),this.fullPersistenceKey=Cg("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return E(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Yd._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return E(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,i="authUser"){return E(this,null,function*(){if(!n.length)return new t(qr(rI),e,i);let r=(yield Promise.all(n.map(c=>E(this,null,function*(){if(yield c._isAvailable())return c})))).filter(c=>c),s=r[0]||qr(rI),o=Cg(i,e.config.apiKey,e.name),a=null;for(let c of n)try{let u=yield c._get(o);if(u){let d=Yd._fromJSON(e,u);c!==s&&(a=d),s=c;break}}catch{}let l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new t(s,e,i):(s=l[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(c=>E(this,null,function*(){if(c!==s)try{yield c._remove(o)}catch{}}))),new t(s,e,i))})}};function HP(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(lO(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(oO(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uO(e))return"Blackberry";if(dO(e))return"Webos";if(II(e))return"Safari";if((e.includes("chrome/")||aO(e))&&!e.includes("edge/"))return"Chrome";if(cO(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if(i?.length===2)return i[1]}return"Other"}function oO(t=yt()){return/firefox\//i.test(t)}function II(t=yt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aO(t=yt()){return/crios\//i.test(t)}function lO(t=yt()){return/iemobile/i.test(t)}function cO(t=yt()){return/android/i.test(t)}function uO(t=yt()){return/blackberry/i.test(t)}function dO(t=yt()){return/webos/i.test(t)}function jg(t=yt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function f7(t=yt()){var e;return jg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function p7(){return vP()&&document.documentMode===10}function hO(t=yt()){return jg(t)||cO(t)||dO(t)||uO(t)||/windows phone/i.test(t)||lO(t)}function m7(){try{return!!(window&&window!==window.top)}catch{return!1}}function fO(t,e=[]){let n;switch(t){case"Browser":n=HP(yt());break;case"Worker":n=`${HP(yt())}-${t}`;break;default:n=t}let i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${or}/${i}`}var sI=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let i=s=>new Promise((o,a)=>{try{let l=e(s);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return E(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let i of this.queue)yield i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(let r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function g7(n){return E(this,arguments,function*(t,e={}){return pc(t,"GET","/v2/passwordPolicy",vI(t,e))})}var _7=6,oI=class{constructor(e){var n,i,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:_7,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var aI=class{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ng(this),this.idTokenSubscription=new Ng(this),this.beforeStateQueue=new sI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iO,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=qr(n)),this._initializationPromise=this.queue(()=>E(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield Rg.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return E(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUser(e){return E(this,null,function*(){var n;let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!o||o===a)&&l?.user&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return re(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return E(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return E(this,null,function*(){try{yield Mg(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=e7()}_delete(){return E(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return E(this,null,function*(){let n=e?wi(e):null;return n&&re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return E(this,null,function*(){if(!this._deleted)return e&&re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>E(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return E(this,null,function*(){return yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0)})}setPersistence(e){return this.queue(()=>E(this,null,function*(){yield this.assertedPersistence.setPersistence(qr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return E(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return E(this,null,function*(){let e=yield g7(this),n=new oI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new zr("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},n)}})}revokeAccessToken(e){return E(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),yield d7(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return E(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return E(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&qr(e)||this._popupRedirectResolver;re(n,this,"argument-error"),this.redirectPersistenceManager=yield Rg.create(this,[qr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return E(this,null,function*(){var n,i;return this._isInitialized&&(yield this.queue(()=>E(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return E(this,null,function*(){if(e===this.currentUser)return this.queue(()=>E(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(re(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let l=e.addObserver(n,i,r);return()=>{o=!0,l()}}else{let l=e.addObserver(n);return()=>{o=!0,l()}}}directlySetCurrentUser(e){return E(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=fO(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return E(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(n["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n})}_getAppCheckToken(){return E(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&QK(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function CI(t){return wi(t)}var Ng=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=CP(n=>this.observer=n)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};function y7(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function v7(t){return new Promise((e,n)=>{let i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{let s=fa("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",y7().appendChild(i)})}function pO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function TI(t,e){let n=ua(t,"auth");if(n.isInitialized()){let r=n.getImmediate(),s=n.getOptions();if(oa(s,e??{}))return r;Gs(r,"already-initialized")}return n.initialize({options:e})}function b7(t,e){let n=e?.persistence||[],i=(Array.isArray(n)?n:[n]).map(qr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e?.popupRedirectResolver)}function SI(t,e,n){let i=CI(t);re(i._canInitEmulator,i,"emulator-config-failed"),re(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!n?.disableWarnings,s=mO(e),{host:o,port:a}=w7(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||E7()}function mO(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function w7(t){let e=mO(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:WP(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:WP(o)}}}function WP(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function E7(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var Pg=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wr("not implemented")}_getIdTokenResponse(e){return Wr("not implemented")}_linkToIdToken(e,n){return Wr("not implemented")}_getReauthenticationResolver(e){return Wr("not implemented")}};function ZE(t,e){return E(this,null,function*(){return i7(t,"POST","/v1/accounts:signInWithIdp",vI(t,e))})}var Og=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var lI=class extends Og{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Qd=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,i,r=!1){return E(this,null,function*(){let s=yield Yd._fromIdTokenResponse(e,i,r),o=qP(i);return new t({user:s,providerId:o,_tokenResponse:i,operationType:n})})}static _forOperation(e,n,i){return E(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=qP(i);return new t({user:e,providerId:r,_tokenResponse:i,operationType:n})})}};function qP(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var cI=class t extends Rn{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new t(e,n,i,r)}};function gO(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?cI._fromErrorAndOperation(t,s,e,i):s})}function I7(t,e,n=!1){return E(this,null,function*(){let i=yield Kd(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return Qd._forOperation(t,"link",i)})}function C7(t,e,n=!1){return E(this,null,function*(){let{auth:i}=t,r="reauthenticate";try{let s=yield Kd(t,gO(i,r,e,t),n);re(s.idToken,i,"internal-error");let o=wI(s.idToken);re(o,i,"internal-error");let{sub:a}=o;return re(t.uid===a,i,"user-mismatch"),Qd._forOperation(t,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&Gs(i,"user-mismatch"),s}})}function T7(t,e,n=!1){return E(this,null,function*(){let i="signIn",r=yield gO(t,i,e),s=yield Qd._fromIdTokenResponse(t,i,r);return n||(yield t._updateCurrentUser(s.user)),s})}function DI(t,e,n,i){return wi(t).onIdTokenChanged(e,n,i)}function xI(t,e,n){return wi(t).beforeAuthStateChanged(e,n)}var Fg="__sak";var Lg=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Fg,"1"),this.storage.removeItem(Fg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function S7(){let t=yt();return II(t)||jg(t)}var D7=1e3,x7=10,A7=(()=>{class t extends Lg{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,i)=>this.onStorageEvent(n,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=S7()&&m7(),this.fallbackToPolling=hO(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&n(i,s,r)}}onStorageEvent(n,i=!1){if(!n.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}let r=n.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(r);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(r,n.newValue):this.storage.removeItem(r);else if(this.localCache[r]===n.newValue&&!i)return}let s=()=>{let a=this.storage.getItem(r);!i&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);p7()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,x7):s()}notifyListeners(n,i){this.localCache[n]=i;let r=this.listeners[n];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:i,newValue:r}),!0)})},D7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(i)}_removeListener(n,i){this.listeners[n]&&(this.listeners[n].delete(i),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,i){return E(this,null,function*(){yield as(t.prototype,this,"_set").call(this,n,i),this.localCache[n]=JSON.stringify(i)})}_get(n){return E(this,null,function*(){let i=yield as(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(i),i})}_remove(n){return E(this,null,function*(){yield as(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),_O=A7;var M7=(()=>{class t extends Lg{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,i){}_removeListener(n,i){}}return t.type="SESSION",t})(),AI=M7;function k7(t){return Promise.all(t.map(e=>E(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var R7=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let i=this.receivers.find(s=>s.isListeningto(n));if(i)return i;let r=new t(n);return this.receivers.push(r),r}isListeningto(n){return this.eventTarget===n}handleEvent(n){return E(this,null,function*(){let i=n,{eventId:r,eventType:s,data:o}=i.data,a=this.handlersMap[s];if(!a?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let l=Array.from(a).map(u=>E(this,null,function*(){return u(i.origin,o)})),c=yield k7(l);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})})}_subscribe(n,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(i)}_unsubscribe(n,i){this.handlersMap[n]&&i&&this.handlersMap[n].delete(i),(!i||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function yO(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}var uI=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,i=50){return E(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{let c=yO("",20);r.port1.start();let u=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){let h=d;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(h.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function ar(){return window}function N7(t){ar().location.href=t}function vO(){return typeof ar().WorkerGlobalScope<"u"&&typeof ar().importScripts=="function"}function P7(){return E(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function O7(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function F7(){return vO()?self:null}var bO="firebaseLocalStorageDb",L7=1,Vg="firebaseLocalStorage",wO="fbase_key",ma=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Ug(t,e){return t.transaction([Vg],e?"readwrite":"readonly").objectStore(Vg)}function V7(){let t=indexedDB.deleteDatabase(bO);return new ma(t).toPromise()}function dI(){let t=indexedDB.open(bO,L7);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let i=t.result;try{i.createObjectStore(Vg,{keyPath:wO})}catch(r){n(r)}}),t.addEventListener("success",()=>E(this,null,function*(){let i=t.result;i.objectStoreNames.contains(Vg)?e(i):(i.close(),yield V7(),e(yield dI()))}))})}function GP(t,e,n){return E(this,null,function*(){let i=Ug(t,!0).put({[wO]:e,value:n});return new ma(i).toPromise()})}function B7(t,e){return E(this,null,function*(){let n=Ug(t,!1).get(e),i=yield new ma(n).toPromise();return i===void 0?null:i.value})}function KP(t,e){let n=Ug(t,!0).delete(e);return new ma(n).toPromise()}var j7=800,U7=3,z7=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return E(this,null,function*(){return this.db?this.db:(this.db=yield dI(),this.db)})}_withRetries(n){return E(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield n(r)}catch(r){if(i++>U7)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return E(this,null,function*(){return vO()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return E(this,null,function*(){this.receiver=R7._getInstance(F7()),this.receiver._subscribe("keyChanged",(n,i)=>E(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(n,i)=>E(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return E(this,null,function*(){var n,i;if(this.activeServiceWorker=yield P7(),!this.activeServiceWorker)return;this.sender=new uI(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((n=r[0])===null||n===void 0)&&n.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return E(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||O7()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return E(this,null,function*(){try{if(!indexedDB)return!1;let n=yield dI();return yield GP(n,Fg,"1"),yield KP(n,Fg),!0}catch{}return!1})}_withPendingWrite(n){return E(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,i){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(r=>GP(r,n,i)),this.localCache[n]=i,this.notifyServiceWorker(n)}))})}_get(n){return E(this,null,function*(){let i=yield this._withRetries(r=>B7(r,n));return this.localCache[n]=i,i})}_remove(n){return E(this,null,function*(){return this._withPendingWrite(()=>E(this,null,function*(){return yield this._withRetries(i=>KP(i,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return E(this,null,function*(){let n=yield this._withRetries(s=>{let o=Ug(s,!1).getAll();return new ma(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(n,i){this.localCache[n]=i;let r=this.listeners[n];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>E(this,null,function*(){return this._poll()}),j7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(i)}_removeListener(n,i){this.listeners[n]&&(this.listeners[n].delete(i),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),EO=z7;var sbe=pO("rcb"),obe=new pa(3e4,6e4);function $7(t,e){return e?qr(e):(re(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var Jd=class extends Pg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ZE(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ZE(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ZE(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function H7(t){return T7(t.auth,new Jd(t),t.bypassAuthState)}function W7(t){let{auth:e,user:n}=t;return re(n,e,"internal-error"),C7(n,new Jd(t),t.bypassAuthState)}function q7(t){return E(this,null,function*(){let{auth:e,user:n}=t;return re(n,e,"internal-error"),I7(n,new Jd(t),t.bypassAuthState)})}var hI=class{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>E(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return E(this,null,function*(){let{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(l))}catch(c){this.reject(c)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return H7;case"linkViaPopup":case"linkViaRedirect":return q7;case"reauthViaPopup":case"reauthViaRedirect":return W7;default:Gs(this.auth,"internal-error")}}resolve(e){Ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var abe=new pa(2e3,1e4);var G7="pendingRedirect",Tg=new Map,fI=class t extends hI{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}execute(){return E(this,null,function*(){let e=Tg.get(this.auth._key());if(!e){try{let i=(yield K7(this.resolver,this.auth))?yield as(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Tg.set(this.auth._key(),e)}return this.bypassAuthState||Tg.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return E(this,null,function*(){if(e.type==="signInViaRedirect")return as(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,as(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return E(this,null,function*(){})}cleanUp(){}};function K7(t,e){return E(this,null,function*(){let n=J7(e),i=Q7(t);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(n))==="true";return yield i._remove(n),r})}function Y7(t,e){Tg.set(t._key(),e)}function Q7(t){return qr(t._redirectPersistence)}function J7(t){return Cg(G7,t.config.apiKey,t.name)}function X7(t,e,n=!1){return E(this,null,function*(){let i=CI(t),r=$7(i,e),o=yield new fI(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,e)),o})}var Z7=10*60*1e3,pI=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eY(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!IO(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(fa(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Z7&&this.cachedEventUids.clear(),this.cachedEventUids.has(YP(e))}saveEventToCache(e){this.cachedEventUids.add(YP(e)),this.lastProcessedEventTime=Date.now()}};function YP(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function IO({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function eY(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return IO(t);default:return!1}}function tY(n){return E(this,arguments,function*(t,e={}){return pc(t,"GET","/v1/projects",e)})}var nY=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iY=/^https?/;function rY(t){return E(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield tY(t);for(let n of e)try{if(sY(n))return}catch{}Gs(t,"unauthorized-domain")})}function sY(t){let e=tI(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!iY.test(n))return!1;if(nY.test(t))return i===t;let r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var oY=new pa(3e4,6e4);function QP(){let t=ar().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function aY(t){return new Promise((e,n)=>{var i,r,s;function o(){QP(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{QP(),n(fa(t,"network-request-failed"))},timeout:oY.get()})}if(!((r=(i=ar().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=ar().gapi)===null||s===void 0)&&s.load)o();else{let a=pO("iframefcb");return ar()[a]=()=>{gapi.load?o():n(fa(t,"network-request-failed"))},v7(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw Sg=null,e})}var Sg=null;function lY(t){return Sg=Sg||aY(t),Sg}var cY=new pa(5e3,15e3),uY="__/auth/iframe",dY="emulator/auth/iframe",hY={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fY=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pY(t){let e=t.config;re(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?yI(e,dY):`https://${t.config.authDomain}/${uY}`,i={apiKey:e.apiKey,appName:t.name,v:or},r=fY.get(t.config.apiHost);r&&(i.eid=r);let s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${aa(i).slice(1)}`}function mY(t){return E(this,null,function*(){let e=yield lY(t),n=ar().gapi;return re(n,t,"internal-error"),e.open({where:document.body,url:pY(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hY,dontclear:!0},i=>new Promise((r,s)=>E(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let o=fa(t,"network-request-failed"),a=ar().setTimeout(()=>{s(o)},cY.get());function l(){ar().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})})))})}var gY={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_Y=500,yY=600,vY="_blank",bY="http://localhost",Bg=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function wY(t,e,n,i=_Y,r=yY){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),a="",l=Object.assign(Object.assign({},gY),{width:i.toString(),height:r.toString(),top:s,left:o}),c=yt().toLowerCase();n&&(a=aO(c)?vY:n),oO(c)&&(e=e||bY,l.scrollbars="yes");let u=Object.entries(l).reduce((h,[p,f])=>`${h}${p}=${f},`,"");if(f7(c)&&a!=="_self")return EY(e||"",a),new Bg(null);let d=window.open(e||"",a,u);re(d,t,"popup-blocked");try{d.focus()}catch{}return new Bg(d)}function EY(t,e){let n=document.createElement("a");n.href=t,n.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}var IY="__/auth/handler",CY="emulator/auth/handler",TY=encodeURIComponent("fac");function JP(t,e,n,i,r,s){return E(this,null,function*(){re(t.config.authDomain,t,"auth-domain-config-required"),re(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:or,eventId:r};if(e instanceof Og){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Ud(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof lI){let u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let u of Object.keys(a))a[u]===void 0&&delete a[u];let l=yield t._getAppCheckToken(),c=l?`#${TY}=${encodeURIComponent(l)}`:"";return`${SY(t)}?${aa(a).slice(1)}${c}`})}function SY({config:t}){return t.emulator?yI(t,CY):`https://${t.authDomain}/${IY}`}var eI="webStorageSupport",mI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=AI,this._completeRedirectFn=X7,this._overrideRedirectResult=Y7}_openPopup(e,n,i,r){return E(this,null,function*(){var s;Ks((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield JP(e,n,i,tI(),r);return wY(e,o,yO())})}_openRedirect(e,n,i,r){return E(this,null,function*(){yield this._originValidation(e);let s=yield JP(e,n,i,tI(),r);return N7(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(Ks(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}initAndGetManager(e){return E(this,null,function*(){let n=yield mY(e),i=new pI(e);return n.register("authEvent",r=>(re(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(eI,{type:eI},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[eI];o!==void 0&&n(!!o),Gs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=rY(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return hO()||II()||jg()}},CO=mI;var XP="@firebase/auth",ZP="1.5.1";var gI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return E(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function DY(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function xY(t){sr(new gn("auth",(e,{options:n})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;re(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:fO(t)},c=new aI(i,r,s,l);return b7(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),sr(new gn("auth-internal",e=>{let n=CI(e.getProvider("auth").getImmediate());return(i=>new gI(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ye(XP,ZP,DY(t)),Ye(XP,ZP,"esm2017")}var AY=5*60,MY=PE("authIdTokenMaxAge")||AY,eO=null,kY=t=>e=>E(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>MY)return;let r=n?.token;eO!==r&&(eO=r,yield fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function MI(t=zs()){let e=ua(t,"auth");if(e.isInitialized())return e.getImmediate();let n=TI(t,{popupRedirectResolver:CO,persistence:[EO,_O,AI]}),i=PE("authTokenSyncURL");if(i){let s=kY(i);xI(n,s,()=>s(n.currentUser)),DI(n,o=>s(o))}let r=RE("auth");return r&&SI(n,`http://${r}`),n}xY("Browser");var TO="auth",Xd=class{constructor(e){return e}},ga=class{constructor(){return ha(TO)}};var kI=new M("angularfire2.auth-instances");function TQ(t,e){let n=fc(TO,t,e);return n&&new Xd(n)}function SQ(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Xd(i)}}var DQ={provide:ga,deps:[[new Xe,kI]]},xQ={provide:Xd,useFactory:TQ,deps:[[new Xe,kI],Ei]},AQ=(()=>{class t{constructor(){Ye("angularfire",$r.full,"auth")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=H({type:t});static \u0275inj=$({providers:[xQ,DQ]})}return t})();function SO(t,...e){return{ngModule:AQ,providers:[{provide:kI,useFactory:SQ(t),multi:!0,deps:[L,Se,Hs,Hr,[new Xe,$s],...e]}]}}var DO=Ws(MI,!0);var MQ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ci={},N,ZI=ZI||{},ne=MQ||self;function t_(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function hh(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function kQ(t){return Object.prototype.hasOwnProperty.call(t,RI)&&t[RI]||(t[RI]=++RQ)}var RI="closure_uid_"+(1e9*Math.random()>>>0),RQ=0;function NQ(t,e,n){return t.call.apply(t.bind,arguments)}function PQ(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),t.apply(e,r)}}return function(){return t.apply(e,arguments)}}function Bt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Bt=NQ:Bt=PQ,Bt.apply(null,arguments)}function zg(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var i=n.slice();return i.push.apply(i,arguments),t.apply(this,i)}}function wt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(i,r,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[r].apply(i,o)}}function Ys(){this.s=this.s,this.o=this.o}var OQ=0;Ys.prototype.s=!1;Ys.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),OQ!=0)&&kQ(this)};Ys.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var jO=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function eC(t){let e=t.length;if(0<e){let n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function xO(t,e){for(let n=1;n<arguments.length;n++){let i=arguments[n];if(t_(i)){let r=t.length||0,s=i.length||0;t.length=r+s;for(let o=0;o<s;o++)t[r+o]=i[o]}else t.push(i)}}function jt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}jt.prototype.h=function(){this.defaultPrevented=!0};var FQ=function(){if(!ne.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};ne.addEventListener("test",n,e),ne.removeEventListener("test",n,e)}catch{}return t}();function rh(t){return/^[\s\xa0]*$/.test(t)}function n_(){var t=ne.navigator;return t&&(t=t.userAgent)?t:""}function lr(t){return n_().indexOf(t)!=-1}function tC(t){return tC[" "](t),t}tC[" "]=function(){};function LQ(t,e){var n=TJ;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var VQ=lr("Opera"),yc=lr("Trident")||lr("MSIE"),UO=lr("Edge"),LI=UO||yc,zO=lr("Gecko")&&!(n_().toLowerCase().indexOf("webkit")!=-1&&!lr("Edge"))&&!(lr("Trident")||lr("MSIE"))&&!lr("Edge"),BQ=n_().toLowerCase().indexOf("webkit")!=-1&&!lr("Edge");function $O(){var t=ne.document;return t?t.documentMode:void 0}var VI;e:{if($g="",Hg=function(){var t=n_();if(zO)return/rv:([^\);]+)(\)|;)/.exec(t);if(UO)return/Edge\/([\d\.]+)/.exec(t);if(yc)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(BQ)return/WebKit\/(\S+)/.exec(t);if(VQ)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),Hg&&($g=Hg?Hg[1]:""),yc&&(Wg=$O(),Wg!=null&&Wg>parseFloat($g))){VI=String(Wg);break e}VI=$g}var $g,Hg,Wg,BI;ne.document&&yc?(NI=$O(),BI=NI||parseInt(VI,10)||void 0):BI=void 0;var NI,jQ=BI;function sh(t,e){if(jt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(zO){e:{try{tC(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:UQ[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&sh.$.h.call(this)}}wt(sh,jt);var UQ={2:"touch",3:"pen",4:"mouse"};sh.prototype.h=function(){sh.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var fh="closure_listenable_"+(1e6*Math.random()|0),zQ=0;function $Q(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++zQ,this.fa=this.ia=!1}function i_(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function nC(t,e,n){for(let i in t)e.call(n,t[i],i,t)}function HQ(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function HO(t){let e={};for(let n in t)e[n]=t[n];return e}var AO="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function WO(t,e){let n,i;for(let r=1;r<arguments.length;r++){i=arguments[r];for(n in i)t[n]=i[n];for(let s=0;s<AO.length;s++)n=AO[s],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function r_(t){this.src=t,this.g={},this.h=0}r_.prototype.add=function(t,e,n,i,r){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=UI(t,e,i,r);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new $Q(e,this.src,s,!!i,r),e.ia=n,t.push(e)),e};function jI(t,e){var n=e.type;if(n in t.g){var i=t.g[n],r=jO(i,e),s;(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(i_(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function UI(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==i)return r}return-1}var iC="closure_lm_"+(1e6*Math.random()|0),PI={};function qO(t,e,n,i,r){if(i&&i.once)return KO(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)qO(t,e[s],n,i,r);return null}return n=oC(n),t&&t[fh]?t.O(e,n,hh(i)?!!i.capture:!!i,r):GO(t,e,n,!1,i,r)}function GO(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=hh(r)?!!r.capture:!!r,a=sC(t);if(a||(t[iC]=a=new r_(t)),n=a.add(e,n,i,o,s),n.proxy)return n;if(i=WQ(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)FQ||(r=o),r===void 0&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(QO(e.toString()),i);else if(t.addListener&&t.removeListener)t.addListener(i);else throw Error("addEventListener and attachEvent are unavailable.");return n}function WQ(){function t(n){return e.call(t.src,t.listener,n)}let e=qQ;return t}function KO(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)KO(t,e[s],n,i,r);return null}return n=oC(n),t&&t[fh]?t.P(e,n,hh(i)?!!i.capture:!!i,r):GO(t,e,n,!0,i,r)}function YO(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)YO(t,e[s],n,i,r);else i=hh(i)?!!i.capture:!!i,n=oC(n),t&&t[fh]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=UI(s,n,i,r),-1<n&&(i_(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=sC(t))&&(e=t.g[e.toString()],t=-1,e&&(t=UI(e,n,i,r)),(n=-1<t?e[t]:null)&&rC(n))}function rC(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[fh])jI(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(QO(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=sC(e))?(jI(n,t),n.h==0&&(n.src=null,e[iC]=null)):i_(t)}}}function QO(t){return t in PI?PI[t]:PI[t]="on"+t}function qQ(t,e){if(t.fa)t=!0;else{e=new sh(e,this);var n=t.listener,i=t.la||t.src;t.ia&&rC(t),t=n.call(i,e)}return t}function sC(t){return t=t[iC],t instanceof r_?t:null}var OI="__closure_events_fn_"+(1e9*Math.random()>>>0);function oC(t){return typeof t=="function"?t:(t[OI]||(t[OI]=function(e){return t.handleEvent(e)}),t[OI])}function bt(){Ys.call(this),this.i=new r_(this),this.S=this,this.J=null}wt(bt,Ys);bt.prototype[fh]=!0;bt.prototype.removeEventListener=function(t,e,n,i){YO(this,t,e,n,i)};function kt(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,typeof e=="string")e=new jt(e,t);else if(e instanceof jt)e.target=e.target||t;else{var r=e;e=new jt(i,t),WO(e,r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=qg(o,i,!0,e)&&r}if(o=e.g=t,r=qg(o,i,!0,e)&&r,r=qg(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)o=e.g=n[s],r=qg(o,i,!1,e)&&r}bt.prototype.N=function(){if(bt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)i_(n[i]);delete t.g[e],t.h--}}this.J=null};bt.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)};bt.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};function qg(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&jI(t.i,o),r=a.call(l,i)!==!1&&r}}return r&&!i.defaultPrevented}var aC=ne.JSON.stringify,zI=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function GQ(){var t=lC;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var $I=class{constructor(){this.h=this.g=null}add(e,n){let i=JO.get();i.set(e,n),this.h?this.h.next=i:this.g=i,this.h=i}},JO=new zI(()=>new HI,t=>t.reset()),HI=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function KQ(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function YQ(t){ne.setTimeout(()=>{throw t},0)}var oh,ah=!1,lC=new $I,XO=()=>{let t=ne.Promise.resolve(void 0);oh=()=>{t.then(QQ)}},QQ=()=>{for(var t;t=GQ();){try{t.h.call(t.g)}catch(n){YQ(n)}var e=JO;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ah=!1};function s_(t,e){bt.call(this),this.h=t||1,this.g=e||ne,this.j=Bt(this.qb,this),this.l=Date.now()}wt(s_,bt);N=s_.prototype;N.ga=!1;N.T=null;N.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),kt(this,"tick"),this.ga&&(cC(this),this.start()))}};N.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function cC(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}N.N=function(){s_.$.N.call(this),cC(this),delete this.g};function uC(t,e,n){if(typeof t=="function")n&&(t=Bt(t,n));else if(t&&typeof t.handleEvent=="function")t=Bt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ne.setTimeout(t,e||0)}function ZO(t){t.g=uC(()=>{t.g=null,t.i&&(t.i=!1,ZO(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var WI=class extends Ys{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ZO(this)}N(){super.N(),this.g&&(ne.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function lh(t){Ys.call(this),this.h=t,this.g={}}wt(lh,Ys);var MO=[];function eF(t,e,n,i){Array.isArray(n)||(n&&(MO[0]=n.toString()),n=MO);for(var r=0;r<n.length;r++){var s=qO(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function tF(t){nC(t.g,function(e,n){this.g.hasOwnProperty(n)&&rC(e)},t),t.g={}}lh.prototype.N=function(){lh.$.N.call(this),tF(this)};lh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function o_(){this.g=!0}o_.prototype.Ea=function(){this.g=!1};function JQ(t,e,n,i,r,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&d[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+`
`+n+`
`+o})}function XQ(t,e,n,i,r,s,o){t.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+`
`+n+`
`+s+" "+o})}function gc(t,e,n,i){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+eJ(t,n)+(i?" "+i:"")})}function ZQ(t,e){t.info(function(){return"TIMEOUT: "+e})}o_.prototype.info=function(){};function eJ(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<r.length;o++)r[o]=""}}}}return aC(n)}catch{return e}}var ba={},kO=null;function a_(){return kO=kO||new bt}ba.Ta="serverreachability";function nF(t){jt.call(this,ba.Ta,t)}wt(nF,jt);function ch(t){let e=a_();kt(e,new nF(e))}ba.STAT_EVENT="statevent";function iF(t,e){jt.call(this,ba.STAT_EVENT,t),this.stat=e}wt(iF,jt);function en(t){let e=a_();kt(e,new iF(e,t))}ba.Ua="timingevent";function rF(t,e){jt.call(this,ba.Ua,t),this.size=e}wt(rF,jt);function ph(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ne.setTimeout(function(){t()},e)}var l_={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},sF={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function dC(){}dC.prototype.h=null;function RO(t){return t.h||(t.h=t.i())}function oF(){}var mh={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function hC(){jt.call(this,"d")}wt(hC,jt);function fC(){jt.call(this,"c")}wt(fC,jt);var qI;function c_(){}wt(c_,dC);c_.prototype.g=function(){return new XMLHttpRequest};c_.prototype.i=function(){return{}};qI=new c_;function gh(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new lh(this),this.P=tJ,t=LI?125:void 0,this.V=new s_(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new aF}function aF(){this.i=null,this.g="",this.h=!1}var tJ=45e3,lF={},GI={};N=gh.prototype;N.setTimeout=function(t){this.P=t};function KI(t,e,n){t.L=1,t.A=d_(Kr(e)),t.u=n,t.S=!0,cF(t,null)}function cF(t,e){t.G=Date.now(),_h(t),t.B=Kr(t.A);var n=t.B,i=t.W;Array.isArray(i)||(i=[String(i)]),_F(n.i,"t",i),t.o=0,n=t.l.J,t.h=new aF,t.g=VF(t.l,n?e:null,!t.u),0<t.O&&(t.M=new WI(Bt(t.Pa,t,t.g),t.O)),eF(t.U,t.g,"readystatechange",t.nb),e=t.I?HO(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),ch(),JQ(t.j,t.v,t.B,t.m,t.W,t.u)}N.nb=function(t){t=t.target;let e=this.M;e&&cr(t)==3?e.l():this.Pa(t)};N.Pa=function(t){try{if(t==this.g)e:{let u=cr(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>u)&&(u!=3||LI||this.g&&(this.h.h||this.g.ja()||FO(this.g)))){this.J||u!=4||e==7||(e==8||0>=d?ch(3):ch(2)),u_(this);var n=this.g.da();this.ca=n;t:if(uF(this)){var i=FO(this.g);t="";var r=i.length,s=cr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_a(this),ih(this);var o="";break t}this.h.i=new ne.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,XQ(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rh(a)){var c=a;break t}}c=null}if(n=c)gc(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,YI(this,n);else{this.i=!1,this.s=3,en(12),_a(this),ih(this);break e}}this.S?(dF(this,u,o),LI&&this.i&&u==3&&(eF(this.U,this.V,"tick",this.mb),this.V.start())):(gc(this.j,this.m,o,null),YI(this,o)),u==4&&_a(this),this.i&&!this.J&&(u==4?PF(this.l,this):(this.i=!1,_h(this)))}else EJ(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,en(12)):(this.s=0,en(13)),_a(this),ih(this)}}}catch{}finally{}};function uF(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function dF(t,e,n){let i=!0,r;for(;!t.J&&t.o<n.length;)if(r=nJ(t,n),r==GI){e==4&&(t.s=4,en(14),i=!1),gc(t.j,t.m,null,"[Incomplete Response]");break}else if(r==lF){t.s=4,en(15),gc(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}else gc(t.j,t.m,r,null),YI(t,r);uF(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,en(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),vC(e),e.M=!0,en(11))):(gc(t.j,t.m,n,"[Invalid Chunked Response]"),_a(t),ih(t))}N.mb=function(){if(this.g){var t=cr(this.g),e=this.g.ja();this.o<e.length&&(u_(this),dF(this,t,e),this.i&&t!=4&&_h(this))}};function nJ(t,e){var n=t.o,i=e.indexOf(`
`,n);return i==-1?GI:(n=Number(e.substring(n,i)),isNaN(n)?lF:(i+=1,i+n>e.length?GI:(e=e.slice(i,i+n),t.o=i+n,e)))}N.cancel=function(){this.J=!0,_a(this)};function _h(t){t.Y=Date.now()+t.P,hF(t,t.P)}function hF(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=ph(Bt(t.lb,t),e)}function u_(t){t.C&&(ne.clearTimeout(t.C),t.C=null)}N.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(ZQ(this.j,this.B),this.L!=2&&(ch(),en(17)),_a(this),this.s=2,ih(this)):hF(this,this.Y-t)};function ih(t){t.l.H==0||t.J||PF(t.l,t)}function _a(t){u_(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,cC(t.V),tF(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function YI(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||QI(n.i,t))){if(!t.K&&QI(n.i,t)&&n.H==3){try{var i=n.Ja.g.parse(e)}catch{i=null}if(Array.isArray(i)&&i.length==3){var r=i;if(r[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Jg(n),p_(n);else break e;yC(n),en(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&n.A==0&&!n.v&&(n.v=ph(Bt(n.ib,n),6e3));if(1>=bF(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else ya(n,11)}else if((t.K||n.g==t)&&Jg(n),!rh(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];let u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));let d=c[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=c[5];h!=null&&typeof h=="number"&&0<h&&(i=1.5*h,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;let p=t.g;if(p){let f=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(f){var s=i.i;s.g||f.indexOf("spdy")==-1&&f.indexOf("quic")==-1&&f.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(pC(s,s.h),s.h=null))}if(i.F){let m=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;m&&(i.Da=m,He(i.I,i.F,m))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),i=n;var o=t;if(i.wa=LF(i,i.J?i.pa:null,i.Y),o.K){wF(i.i,o);var a=o,l=i.L;l&&a.setTimeout(l),a.C&&(u_(a),_h(a)),i.g=o}else RF(i);0<n.j.length&&m_(n)}else c[0]!="stop"&&c[0]!="close"||ya(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?ya(n,7):_C(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}ch(4)}catch{}}function iJ(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(t_(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}e=[],n=0;for(i in t)e[n++]=t[i];return e}function rJ(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(t_(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let i in t)e[n++]=i;return e}}}function fF(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(t_(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=rJ(t),i=iJ(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}var pF=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sJ(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function va(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof va){this.h=t.h,Yg(this,t.j),this.s=t.s,this.g=t.g,Qg(this,t.m),this.l=t.l;var e=t.i,n=new uh;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),NO(this,n),this.o=t.o}else t&&(e=String(t).match(pF))?(this.h=!1,Yg(this,e[1]||"",!0),this.s=th(e[2]||""),this.g=th(e[3]||"",!0),Qg(this,e[4]),this.l=th(e[5]||"",!0),NO(this,e[6]||"",!0),this.o=th(e[7]||"")):(this.h=!1,this.i=new uh(null,this.h))}va.prototype.toString=function(){var t=[],e=this.j;e&&t.push(nh(e,PO,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(nh(e,PO,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(nh(n,n.charAt(0)=="/"?lJ:aJ,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",nh(n,uJ)),t.join("")};function Kr(t){return new va(t)}function Yg(t,e,n){t.j=n?th(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Qg(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function NO(t,e,n){e instanceof uh?(t.i=e,dJ(t.i,t.h)):(n||(e=nh(e,cJ)),t.i=new uh(e,t.h))}function He(t,e,n){t.i.set(e,n)}function d_(t){return He(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function th(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function nh(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,oJ),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function oJ(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var PO=/[#\/\?@]/g,aJ=/[#\?:]/g,lJ=/[#\?]/g,cJ=/[#\?@]/g,uJ=/#/g;function uh(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Qs(t){t.g||(t.g=new Map,t.h=0,t.i&&sJ(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}N=uh.prototype;N.add=function(t,e){Qs(this),this.i=null,t=vc(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function mF(t,e){Qs(t),e=vc(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function gF(t,e){return Qs(t),e=vc(t,e),t.g.has(e)}N.forEach=function(t,e){Qs(this),this.g.forEach(function(n,i){n.forEach(function(r){t.call(e,r,i,this)},this)},this)};N.ta=function(){Qs(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){let r=t[i];for(let s=0;s<r.length;s++)n.push(e[i])}return n};N.Z=function(t){Qs(this);let e=[];if(typeof t=="string")gF(this,t)&&(e=e.concat(this.g.get(vc(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};N.set=function(t,e){return Qs(this),this.i=null,t=vc(this,t),gF(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};N.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function _F(t,e,n){mF(t,e),0<n.length&&(t.i=null,t.g.set(vc(t,e),eC(n)),t.h+=n.length)}N.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];let s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;o[i]!==""&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")};function vc(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function dJ(t,e){e&&!t.j&&(Qs(t),t.i=null,t.g.forEach(function(n,i){var r=i.toLowerCase();i!=r&&(mF(this,i),_F(this,r,n))},t)),t.j=e}var hJ=class{constructor(t,e){this.g=t,this.map=e}};function yF(t){this.l=t||fJ,ne.PerformanceNavigationTiming?(t=ne.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ne.g&&ne.g.Ka&&ne.g.Ka()&&ne.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var fJ=10;function vF(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function bF(t){return t.h?1:t.g?t.g.size:0}function QI(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function pC(t,e){t.g?t.g.add(e):t.h=e}function wF(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}yF.prototype.cancel=function(){if(this.i=EF(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function EF(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return eC(t.i)}var pJ=class{stringify(t){return ne.JSON.stringify(t,void 0)}parse(t){return ne.JSON.parse(t,void 0)}};function mJ(){this.g=new pJ}function gJ(t,e,n){let i=n||"";try{fF(t,function(r,s){let o=r;hh(r)&&(o=aC(r)),e.push(i+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function _J(t,e){let n=new o_;if(ne.Image){let i=new Image;i.onload=zg(Gg,n,i,"TestLoadImage: loaded",!0,e),i.onerror=zg(Gg,n,i,"TestLoadImage: error",!1,e),i.onabort=zg(Gg,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=zg(Gg,n,i,"TestLoadImage: timeout",!1,e),ne.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=t}else e(!1)}function Gg(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch{}}function yh(t){this.l=t.ec||null,this.j=t.ob||!1}wt(yh,dC);yh.prototype.g=function(){return new h_(this.l,this.j)};yh.prototype.i=function(t){return function(){return t}}({});function h_(t,e){bt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=mC,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}wt(h_,bt);var mC=0;N=h_.prototype;N.open=function(t,e){if(this.readyState!=mC)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,dh(this)};N.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ne).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};N.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,vh(this)),this.readyState=mC};N.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,dh(this)),this.g&&(this.readyState=3,dh(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ne.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;IF(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function IF(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}N.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?vh(this):dh(this),this.readyState==3&&IF(this)}};N.Za=function(t){this.g&&(this.response=this.responseText=t,vh(this))};N.Ya=function(t){this.g&&(this.response=t,vh(this))};N.ka=function(){this.g&&vh(this)};function vh(t){t.readyState=4,t.l=null,t.j=null,t.A=null,dh(t)}N.setRequestHeader=function(t,e){this.v.append(t,e)};N.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};N.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function dh(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(h_.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var yJ=ne.JSON.parse;function st(t){bt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=CF,this.L=this.M=!1}wt(st,bt);var CF="",vJ=/^https?$/i,bJ=["POST","PUT"];N=st.prototype;N.Oa=function(t){this.M=t};N.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():qI.g(),this.C=this.u?RO(this.u):RO(qI),this.g.onreadystatechange=Bt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){OO(this,s);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else if(typeof i.keys=="function"&&typeof i.get=="function")for(let s of i.keys())n.set(s,i.get(s));else throw Error("Unknown input type for opt_headers: "+String(i));i=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),r=ne.FormData&&t instanceof ne.FormData,!(0<=jO(bJ,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{DF(this),0<this.B&&((this.L=wJ(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Bt(this.ua,this)):this.A=uC(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){OO(this,s)}};function wJ(t){return yc&&typeof t.timeout=="number"&&t.ontimeout!==void 0}N.ua=function(){typeof ZI<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,kt(this,"timeout"),this.abort(8))};function OO(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,TF(t),f_(t)}function TF(t){t.F||(t.F=!0,kt(t,"complete"),kt(t,"error"))}N.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,kt(this,"complete"),kt(this,"abort"),f_(this))};N.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),f_(this,!0)),st.$.N.call(this)};N.La=function(){this.s||(this.G||this.v||this.l?SF(this):this.kb())};N.kb=function(){SF(this)};function SF(t){if(t.h&&typeof ZI<"u"&&(!t.C[1]||cr(t)!=4||t.da()!=2)){if(t.v&&cr(t)==4)uC(t.La,0,t);else if(kt(t,"readystatechange"),cr(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var i;if(i=o===0){var r=String(t.I).match(pF)[1]||null;!r&&ne.self&&ne.self.location&&(r=ne.self.location.protocol.slice(0,-1)),i=!vJ.test(r?r.toLowerCase():"")}n=i}if(n)kt(t,"complete"),kt(t,"success");else{t.m=6;try{var s=2<cr(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",TF(t)}}finally{f_(t)}}}}function f_(t,e){if(t.g){DF(t);let n=t.g,i=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||kt(t,"ready");try{n.onreadystatechange=i}catch{}}}function DF(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ne.clearTimeout(t.A),t.A=null)}N.isActive=function(){return!!this.g};function cr(t){return t.g?t.g.readyState:0}N.da=function(){try{return 2<cr(this)?this.g.status:-1}catch{return-1}};N.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};N.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),yJ(e)}};function FO(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case CF:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function EJ(t){let e={};t=(t.g&&2<=cr(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let i=0;i<t.length;i++){if(rh(t[i]))continue;var n=KQ(t[i]);let r=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[r]||[];e[r]=s,s.push(n)}HQ(e,function(i){return i.join(", ")})}N.Ia=function(){return this.m};N.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function xF(t){let e="";return nC(t,function(n,i){e+=i,e+=":",e+=n,e+=`\r
`}),e}function gC(t,e,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=xF(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):He(t,e,n))}function Zd(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function AF(t){this.Ga=0,this.j=[],this.l=new o_,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Zd("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Zd("baseRetryDelayMs",5e3,t),this.hb=Zd("retryDelaySeedMs",1e4,t),this.eb=Zd("forwardChannelMaxRetries",2,t),this.xa=Zd("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new yF(t&&t.concurrentRequestLimit),this.Ja=new mJ,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}N=AF.prototype;N.ra=8;N.H=1;function _C(t){if(MF(t),t.H==3){var e=t.W++,n=Kr(t.I);if(He(n,"SID",t.K),He(n,"RID",e),He(n,"TYPE","terminate"),bh(t,n),e=new gh(t,t.l,e),e.L=2,e.A=d_(Kr(n)),n=!1,ne.navigator&&ne.navigator.sendBeacon)try{n=ne.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&ne.Image&&(new Image().src=e.A,n=!0),n||(e.g=VF(e.l,null),e.g.ha(e.A)),e.G=Date.now(),_h(e)}FF(t)}function p_(t){t.g&&(vC(t),t.g.cancel(),t.g=null)}function MF(t){p_(t),t.u&&(ne.clearTimeout(t.u),t.u=null),Jg(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&ne.clearTimeout(t.m),t.m=null)}function m_(t){if(!vF(t.i)&&!t.m){t.m=!0;var e=t.Na;oh||XO(),ah||(oh(),ah=!0),lC.add(e,t),t.C=0}}function IJ(t,e){return bF(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=ph(Bt(t.Na,t,e),OF(t,t.C)),t.C++,!0)}N.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let r=new gh(this,this.l,t),s=this.s;if(this.U&&(s?(s=HO(s),WO(s,this.U)):s=this.U),this.o!==null||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var i=this.j[n];if("__data__"in i.map&&(i=i.map.__data__,typeof i=="string")){i=i.length;break t}i=void 0}if(i===void 0)break;if(e+=i,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=kF(this,r,e),n=Kr(this.I),He(n,"RID",t),He(n,"CVER",22),this.F&&He(n,"X-HTTP-Session-Id",this.F),bh(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(xF(s)))+"&"+e:this.o&&gC(n,this.o,s)),pC(this.i,r),this.bb&&He(n,"TYPE","init"),this.P?(He(n,"$req",e),He(n,"SID","null"),r.aa=!0,KI(r,n,null)):KI(r,n,e),this.H=2}}else this.H==3&&(t?LO(this,t):this.j.length==0||vF(this.i)||LO(this))};function LO(t,e){var n;e?n=e.m:n=t.W++;let i=Kr(t.I);He(i,"SID",t.K),He(i,"RID",n),He(i,"AID",t.V),bh(t,i),t.o&&t.s&&gC(i,t.o,t.s),n=new gh(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=kF(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),pC(t.i,n),KI(n,i,e)}function bh(t,e){t.na&&nC(t.na,function(n,i){He(e,i,n)}),t.h&&fF({},function(n,i){He(e,i,n)})}function kF(t,e,n){n=Math.min(t.j.length,n);var i=t.h?Bt(t.h.Va,t.h,t):null;e:{var r=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=r[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<n;l++){let c=r[l].g,u=r[l].map;if(c-=s,0>c)s=Math.max(0,r[l].g-100),a=!1;else try{gJ(u,o,"req"+c+"_")}catch{i&&i(u)}}if(a){i=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,i}function RF(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;oh||XO(),ah||(oh(),ah=!0),lC.add(e,t),t.A=0}}function yC(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=ph(Bt(t.Ma,t),OF(t,t.A)),t.A++,!0)}N.Ma=function(){if(this.u=null,NF(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=ph(Bt(this.jb,this),t)}};N.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,en(10),p_(this),NF(this))};function vC(t){t.B!=null&&(ne.clearTimeout(t.B),t.B=null)}function NF(t){t.g=new gh(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Kr(t.wa);He(e,"RID","rpc"),He(e,"SID",t.K),He(e,"AID",t.V),He(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&He(e,"TO",t.qa),He(e,"TYPE","xmlhttp"),bh(t,e),t.o&&t.s&&gC(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=d_(Kr(e)),n.u=null,n.S=!0,cF(n,t)}N.ib=function(){this.v!=null&&(this.v=null,p_(this),yC(this),en(19))};function Jg(t){t.v!=null&&(ne.clearTimeout(t.v),t.v=null)}function PF(t,e){var n=null;if(t.g==e){Jg(t),vC(t),t.g=null;var i=2}else if(QI(t.i,e))n=e.F,wF(t.i,e),i=1;else return;if(t.H!=0){if(e.i)if(i==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var r=t.C;i=a_(),kt(i,new rF(i,n)),m_(t)}else RF(t);else if(r=e.s,r==3||r==0&&0<e.ca||!(i==1&&IJ(t,e)||i==2&&yC(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:ya(t,5);break;case 4:ya(t,10);break;case 3:ya(t,6);break;default:ya(t,2)}}}function OF(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function ya(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var i=Bt(t.pb,t);n||(n=new va("//www.google.com/images/cleardot.gif"),ne.location&&ne.location.protocol=="http"||Yg(n,"https"),d_(n)),_J(n.toString(),i)}else en(2);t.H=0,t.h&&t.h.za(e),FF(t),MF(t)}N.pb=function(t){t?(this.l.info("Successfully pinged google.com"),en(2)):(this.l.info("Failed to ping google.com"),en(1))};function FF(t){if(t.H=0,t.ma=[],t.h){let e=EF(t.i);(e.length!=0||t.j.length!=0)&&(xO(t.ma,e),xO(t.ma,t.j),t.i.i.length=0,eC(t.j),t.j.length=0),t.h.ya()}}function LF(t,e,n){var i=n instanceof va?Kr(n):new va(n);if(i.g!="")e&&(i.g=e+"."+i.g),Qg(i,i.m);else{var r=ne.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new va(null);i&&Yg(s,i),e&&(s.g=e),r&&Qg(s,r),n&&(s.l=n),i=s}return n=t.F,e=t.Da,n&&e&&He(i,n,e),He(i,"VER",t.ra),bh(t,i),i}function VF(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new st(new yh({ob:n})):new st(t.va),e.Oa(t.J),e}N.isActive=function(){return!!this.h&&this.h.isActive(this)};function BF(){}N=BF.prototype;N.Ba=function(){};N.Aa=function(){};N.za=function(){};N.ya=function(){};N.isActive=function(){return!0};N.Va=function(){};function Xg(){if(yc&&!(10<=Number(jQ)))throw Error("Environmental error: no available transport.")}Xg.prototype.g=function(t,e){return new Nn(t,e)};function Nn(t,e){bt.call(this),this.g=new AF(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!rh(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!rh(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new bc(this)}wt(Nn,bt);Nn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;en(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=LF(t,null,t.Y),m_(t)};Nn.prototype.close=function(){_C(this.g)};Nn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=aC(t),t=n);e.j.push(new hJ(e.fb++,t)),e.H==3&&m_(e)};Nn.prototype.N=function(){this.g.h=null,delete this.j,_C(this.g),delete this.g,Nn.$.N.call(this)};function jF(t){hC.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}wt(jF,hC);function UF(){fC.call(this),this.status=1}wt(UF,fC);function bc(t){this.g=t}wt(bc,BF);bc.prototype.Ba=function(){kt(this.g,"a")};bc.prototype.Aa=function(t){kt(this.g,new jF(t))};bc.prototype.za=function(t){kt(this.g,new UF)};bc.prototype.ya=function(){kt(this.g,"b")};function CJ(){this.blockSize=-1}function Ii(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}wt(Ii,CJ);Ii.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function FI(t,e,n){n||(n=0);var i=Array(16);if(typeof e=="string")for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[2]+606105819&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[3]+3250441966&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[6]+2821735955&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[7]+4249261313&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[10]+4294925233&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[11]+2304563134&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[14]+2792965006&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[15]+1236535329&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(r^s&(n^r))+i[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[11]+643717713&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[0]+3921069994&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[15]+3634488961&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[4]+3889429448&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[3]+4107603335&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[8]+1163531501&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[7]+1735328473&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[12]+2368359562&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(n^r^s)+i[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[11]+1839030562&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[14]+4259657740&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[7]+4139469664&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[10]+3200236656&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[3]+3572445317&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[6]+76029189&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[15]+530742520&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[2]+3299628645&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(r^(n|~s))+i[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[14]+2878612391&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[5]+4237533241&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[10]+4293915773&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[1]+2240044497&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[6]+2734768916&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[13]+1309151649&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[2]+718787259&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}Ii.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(r==0)for(;s<=n;)FI(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(i[r++]=t.charCodeAt(s++),r==this.blockSize){FI(this,i),r=0;break}}else for(;s<e;)if(i[r++]=t[s++],r==this.blockSize){FI(this,i),r=0;break}}this.h=r,this.i+=e};Ii.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};function Re(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=t[r]|0;i&&s==e||(n[r]=s,i=!1)}this.g=n}var TJ={};function bC(t){return-128<=t&&128>t?LQ(t,function(e){return new Re([e|0],0>e?-1:0)}):new Re([t|0],0>t?-1:0)}function ur(t){if(isNaN(t)||!isFinite(t))return _c;if(0>t)return Mt(ur(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=JI;return new Re(e,0)}function zF(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Mt(zF(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=ur(Math.pow(e,8)),i=_c,r=0;r<t.length;r+=8){var s=Math.min(8,t.length-r),o=parseInt(t.substring(r,r+s),e);8>s?(s=ur(Math.pow(e,s)),i=i.R(s).add(ur(o))):(i=i.R(n),i=i.add(ur(o)))}return i}var JI=4294967296,_c=bC(0),XI=bC(1),VO=bC(16777216);N=Re.prototype;N.ea=function(){if(Yn(this))return-Mt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:JI+i)*e,e*=JI}return t};N.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Gr(this))return"0";if(Yn(this))return"-"+Mt(this).toString(t);for(var e=ur(Math.pow(t,6)),n=this,i="";;){var r=e_(n,e).g;n=Zg(n,r.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=r,Gr(n))return s+i;for(;6>s.length;)s="0"+s;i=s+i}};N.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Gr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Yn(t){return t.h==-1}N.X=function(t){return t=Zg(this,t),Yn(t)?-1:Gr(t)?0:1};function Mt(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new Re(n,~t.h).add(XI)}N.abs=function(){return Yn(this)?Mt(this):this};N.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var s=i+(this.D(r)&65535)+(t.D(r)&65535),o=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new Re(n,n[n.length-1]&-2147483648?-1:0)};function Zg(t,e){return t.add(Mt(e))}N.R=function(t){if(Gr(this)||Gr(t))return _c;if(Yn(this))return Yn(t)?Mt(this).R(Mt(t)):Mt(Mt(this).R(t));if(Yn(t))return Mt(this.R(Mt(t)));if(0>this.X(VO)&&0>t.X(VO))return ur(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var s=this.D(i)>>>16,o=this.D(i)&65535,a=t.D(r)>>>16,l=t.D(r)&65535;n[2*i+2*r]+=o*l,Kg(n,2*i+2*r),n[2*i+2*r+1]+=s*l,Kg(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,Kg(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,Kg(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new Re(n,0)};function Kg(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function eh(t,e){this.g=t,this.h=e}function e_(t,e){if(Gr(e))throw Error("division by zero");if(Gr(t))return new eh(_c,_c);if(Yn(t))return e=e_(Mt(t),e),new eh(Mt(e.g),Mt(e.h));if(Yn(e))return e=e_(t,Mt(e)),new eh(Mt(e.g),e.h);if(30<t.g.length){if(Yn(t)||Yn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=XI,i=e;0>=i.X(t);)n=BO(n),i=BO(i);var r=mc(n,1),s=mc(i,1);for(i=mc(i,2),n=mc(n,2);!Gr(i);){var o=s.add(i);0>=o.X(t)&&(r=r.add(n),s=o),i=mc(i,1),n=mc(n,1)}return e=Zg(t,r.R(e)),new eh(r,e)}for(r=_c;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),s=ur(n),o=s.R(e);Yn(o)||0<o.X(t);)n-=i,s=ur(n),o=s.R(e);Gr(s)&&(s=XI),r=r.add(s),t=Zg(t,o)}return new eh(r,t)}N.gb=function(t){return e_(this,t).h};N.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new Re(n,this.h&t.h)};N.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new Re(n,this.h|t.h)};N.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new Re(n,this.h^t.h)};function BO(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new Re(n,t.h)}function mc(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],s=0;s<i;s++)r[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Re(r,t.h)}Xg.prototype.createWebChannel=Xg.prototype.g;Nn.prototype.send=Nn.prototype.u;Nn.prototype.open=Nn.prototype.m;Nn.prototype.close=Nn.prototype.close;l_.NO_ERROR=0;l_.TIMEOUT=8;l_.HTTP_ERROR=6;sF.COMPLETE="complete";oF.EventType=mh;mh.OPEN="a";mh.CLOSE="b";mh.ERROR="c";mh.MESSAGE="d";bt.prototype.listen=bt.prototype.O;st.prototype.listenOnce=st.prototype.P;st.prototype.getLastError=st.prototype.Sa;st.prototype.getLastErrorCode=st.prototype.Ia;st.prototype.getStatus=st.prototype.da;st.prototype.getResponseJson=st.prototype.Wa;st.prototype.getResponseText=st.prototype.ja;st.prototype.send=st.prototype.ha;st.prototype.setWithCredentials=st.prototype.Oa;Ii.prototype.digest=Ii.prototype.l;Ii.prototype.reset=Ii.prototype.reset;Ii.prototype.update=Ii.prototype.j;Re.prototype.add=Re.prototype.add;Re.prototype.multiply=Re.prototype.R;Re.prototype.modulo=Re.prototype.gb;Re.prototype.compare=Re.prototype.X;Re.prototype.toNumber=Re.prototype.ea;Re.prototype.toString=Re.prototype.toString;Re.prototype.getBits=Re.prototype.D;Re.fromNumber=ur;Re.fromString=zF;var SJ=Ci.createWebChannelTransport=function(){return new Xg},DJ=Ci.getStatEventTarget=function(){return a_()},xJ=Ci.ErrorCode=l_,AJ=Ci.EventType=sF,MJ=Ci.Event=ba,kJ=Ci.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ybe=Ci.FetchXmlHttpFactory=yh,RJ=Ci.WebChannel=oF,NJ=Ci.XhrIo=st,PJ=Ci.Md5=Ii,$F=Ci.Integer=Re;var HF="@firebase/firestore";var Et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");var wh="10.7.0";var Ec=new ir("@firebase/firestore");function Pn(t,...e){if(Ec.logLevel<=Te.DEBUG){let n=e.map(zC);Ec.debug(`Firestore (${wh}): ${t}`,...n)}}function UC(t,...e){if(Ec.logLevel<=Te.ERROR){let n=e.map(zC);Ec.error(`Firestore (${wh}): ${t}`,...n)}}function OJ(t,...e){if(Ec.logLevel<=Te.WARN){let n=e.map(zC);Ec.warn(`Firestore (${wh}): ${t}`,...n)}}function zC(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function _n(t="Unexpected state"){let e=`FIRESTORE (${wh}) INTERNAL ASSERTION FAILED: `+t;throw UC(e),new Error(e)}function EC(t,e){t||_n()}var Rt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},gt=class extends Rn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Xs=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var g_=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},IC=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Et.UNAUTHENTICATED))}shutdown(){}},CC=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},TC=class{constructor(e){this.t=e,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let i=this.i,r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve(),s=new Xs;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Xs,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>E(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},a=l=>{Pn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(Pn("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Xs)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(Pn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(EC(typeof i.accessToken=="string"),new g_(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return EC(e===null||typeof e=="string"),new Et(e)}},SC=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},DC=class{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new SC(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}},xC=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},AC=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let i=s=>{s.error!=null&&Pn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,Pn("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{Pn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):Pn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(EC(typeof n.token=="string"),this.R=n.token,new xC(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function FJ(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}var MC=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=FJ(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}};function KF(t,e){return t<e?-1:t>e?1:0}var kC=class t{constructor(e,n,i){n===void 0?n=0:n>e.length&&_n(),i===void 0?i=e.length-n:i>e.length-n&&_n(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let i=Math.min(e.length,n.length);for(let r=0;r<i;r++){let s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Js=class t extends kC{construct(e,n,i){return new t(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){let n=[];for(let i of e){if(i.indexOf("//")>=0)throw new gt(Rt.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new t(n)}static emptyPath(){return new t([])}};var wa=class t{constructor(e){this.path=e}static fromPath(e){return new t(Js.fromString(e))}static fromName(e){return new t(Js.fromString(e).popFirst(5))}static empty(){return new t(Js.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Js.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Js.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Js(e.slice()))}};var RC=class{constructor(e,n,i,r){this.indexId=e,this.collectionGroup=n,this.fields=i,this.indexState=r}};RC.UNKNOWN_ID=-1;function YF(t){return t.name==="IndexedDbTransactionError"}function LJ(t){return t===0&&1/t==-1/0}var VJ=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],o0e=[...VJ,"documentOverlays"],BJ=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],jJ=BJ,a0e=[...jJ,"indexConfiguration","indexState","indexEntries"];var Ic=class t{constructor(e,n){this.comparator=e,this.root=n||hr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,hr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){let e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wc(this.root,e,this.comparator,!1)}getReverseIterator(){return new wc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wc(this.root,e,this.comparator,!0)}},wc=class{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},hr=class t{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??t.RED,this.left=r??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new t(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return t.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _n();let e=this.left.check();if(e!==this.right.check())throw _n();return e+(this.isRed()?0:1)}};hr.EMPTY=null,hr.RED=!0,hr.BLACK=!1;hr.EMPTY=new class{constructor(){this.size=0}get key(){throw _n()}get value(){throw _n()}get color(){throw _n()}get left(){throw _n()}get right(){throw _n()}copy(e,n,i,r,s){return this}insert(e,n,i){return new hr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var __=class t{constructor(e){this.comparator=e,this.data=new Ic(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new y_(this.data.getIterator())}getIteratorFrom(e){return new y_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){let r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},y_=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var NC=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Cc=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new NC("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return KF(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Cc.EMPTY_BYTE_STRING=new Cc("");var c0e=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function WF(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function UJ(t){return typeof t=="string"?Cc.fromBase64String(t):Cc.fromUint8Array(t)}var PC=class{constructor(e,n,i,r,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}},OC=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};function zJ(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var u0e=new Ic(wa.comparator);var d0e=new Ic(wa.comparator);var h0e=new Ic(wa.comparator),f0e=new __(wa.comparator);var p0e=new __(KF);var qF,we;(we=qF||(qF={}))[we.OK=0]="OK",we[we.CANCELLED=1]="CANCELLED",we[we.UNKNOWN=2]="UNKNOWN",we[we.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",we[we.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",we[we.NOT_FOUND=5]="NOT_FOUND",we[we.ALREADY_EXISTS=6]="ALREADY_EXISTS",we[we.PERMISSION_DENIED=7]="PERMISSION_DENIED",we[we.UNAUTHENTICATED=16]="UNAUTHENTICATED",we[we.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",we[we.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",we[we.ABORTED=10]="ABORTED",we[we.OUT_OF_RANGE=11]="OUT_OF_RANGE",we[we.UNIMPLEMENTED=12]="UNIMPLEMENTED",we[we.INTERNAL=13]="INTERNAL",we[we.UNAVAILABLE=14]="UNAVAILABLE",we[we.DATA_LOSS=15]="DATA_LOSS";var m0e=new $F([4294967295,4294967295],0);var g0e=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),_0e=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),y0e=(()=>({and:"AND",or:"OR"}))();var v_=class{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(WF(e.integerValue));else if("doubleValue"in e){let i=WF(e.doubleValue);isNaN(i)?this.Tt(n,13):(this.Tt(n,15),LJ(i)?n.Et(0):n.Et(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Tt(n,20),typeof i=="string"?n.dt(i):(n.dt(`${i.seconds||""}`),n.Et(i.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(UJ(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){let i=e.geoPointValue;this.Tt(n,45),n.Et(i.latitude||0),n.Et(i.longitude||0)}else"mapValue"in e?zJ(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):_n()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){let i=e.fields||{};this.Tt(n,55);for(let r of Object.keys(i))this.At(r,n),this.Pt(i[r],n)}yt(e,n){let i=e.values||[];this.Tt(n,50);for(let r of i)this.Pt(r,n)}ft(e,n){this.Tt(n,37),wa.fromName(e).path.forEach(i=>{this.Tt(n,60),this.wt(i,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}};v_.St=new v_;var v0e=new Uint8Array(0);var dr=class t{constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};dr.DEFAULT_COLLECTION_PERCENTILE=10,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,dr.DEFAULT=new dr(41943040,dr.DEFAULT_COLLECTION_PERCENTILE,dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),dr.DISABLED=new dr(-1,0,0);function wC(){return typeof document<"u"?document:null}var FC=class{constructor(e,n,i=1e3,r=1.5,s=6e4){this.si=e,this.timerId=n,this.Fo=i,this.Mo=r,this.xo=s,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();let n=Math.floor(this.Oo+this.qo()),i=Math.max(0,Date.now()-this.Bo),r=Math.max(0,n-i);r>0&&Pn("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Oo} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.No=this.si.enqueueAfterDelay(this.timerId,r,()=>(this.Bo=Date.now(),e())),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){this.No!==null&&(this.No.skipDelay(),this.No=null)}cancel(){this.No!==null&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}};var LC=class t{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Xs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){let o=Date.now()+i,a=new t(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new gt(Rt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function $J(t,e){if(UC("AsyncQueue",`${e}: ${t}`),YF(t))return new gt(Rt.UNAVAILABLE,`${e}: ${t}`);throw t}var VC=class{constructor(e,n,i,r){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=Et.UNAUTHENTICATED,this.clientId=MC.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,s=>E(this,null,function*(){Pn("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(Pn("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}getConfiguration(){return E(this,null,function*(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}})}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new gt(Rt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Xs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>E(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let i=$J(n,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function QF(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var GF=new Map;function HJ(t,e,n,i){if(e===!0&&i===!0)throw new gt(Rt.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function WJ(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":_n()}function qJ(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new gt(Rt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=WJ(t);throw new gt(Rt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var b_=class{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new gt(Rt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new gt(Rt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HJ("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=QF((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new gt(Rt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new gt(Rt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new gt(Rt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},w_=class{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new b_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new gt(Rt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new gt(Rt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new b_(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new IC;switch(i.type){case"firstParty":return new DC(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new gt(Rt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let i=GF.get(n);i&&(Pn("ComponentProvider","Removing Datastore"),GF.delete(n),i.terminate())}(this),Promise.resolve()}};function JF(t,e,n,i={}){var r;let s=(t=qJ(t,w_))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&OJ("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=Et.MOCK_USER;else{a=mg(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);let c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new gt(Rt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Et(c)}t._authCredentials=new CC(new g_(a,l))}}var BC=class{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new FC(this,"async_queue_retry"),this.iu=()=>{let n=wC();n&&Pn("AsyncQueue","Visibility state changed to "+n.visibilityState),this.zo.Qo()};let e=wC();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;let n=wC();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise(()=>{});let n=new Xs;return this.ou(()=>this.Za&&this.nu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ya.push(e),this._u()))}_u(){return E(this,null,function*(){if(this.Ya.length!==0){try{yield this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(e){if(!YF(e))throw e;Pn("AsyncQueue","Operation failed with retryable error: "+e)}this.Ya.length>0&&this.zo.ko(()=>this._u())}})}ou(e){let n=this.Ja.then(()=>(this.tu=!0,e().catch(i=>{this.eu=i,this.tu=!1;let r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw UC("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.tu=!1,i))));return this.Ja=n,n}enqueueAfterDelay(e,n,i){this.su(),this.ru.indexOf(e)>-1&&(n=0);let r=LC.createAndSchedule(this,e,n,i,s=>this.au(s));return this.Xa.push(r),r}su(){this.eu&&_n()}verifyOperationInProgress(){}uu(){return E(this,null,function*(){let e;do e=this.Ja,yield e;while(e!==this.Ja)})}cu(e){for(let n of this.Xa)if(n.timerId===e)return!0;return!1}lu(e){return this.uu().then(()=>{this.Xa.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(let n of this.Xa)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.uu()})}hu(e){this.ru.push(e)}au(e){let n=this.Xa.indexOf(e);this.Xa.splice(n,1)}};var jC=class extends w_{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=function(){return new BC}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||GJ(this),this._firestoreClient.terminate()}};function XF(t,e){let n=typeof t=="object"?t:zs(),i=typeof t=="string"?t:e||"(default)",r=ua(n,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=pg("firestore");s&&JF(r,...s)}return r}function GJ(t){var e,n,i;let r=t._freezeSettings(),s=function(a,l,c,u){return new PC(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,QF(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new VC(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}var b0e=new RegExp("[~\\*/\\[\\]]");(function(e,n=!0){(function(r){wh=r})(or),sr(new gn("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),a=new jC(new TC(i.getProvider("auth-internal")),new AC(i.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new gt(Rt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new OC(c.options.projectId,u)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ye(HF,"4.4.0",e),Ye(HF,"4.4.0","esm2017")})();var Eh=class{constructor(e){return e}},ZF="firestore",$C=class{constructor(){return ha(ZF)}};var HC=new M("angularfire2.firestore-instances");function KJ(t,e){let n=fc(ZF,t,e);return n&&new Eh(n)}function YJ(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new Eh(i)}}var QJ={provide:$C,deps:[[new Xe,HC]]},JJ={provide:Eh,useFactory:KJ,deps:[[new Xe,HC],Ei]},XJ=(()=>{class t{constructor(){Ye("angularfire",$r.full,"fst")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=H({type:t});static \u0275inj=$({providers:[JJ,QJ]})}return t})();function eL(t,...e){return{ngModule:XJ,providers:[{provide:HC,useFactory:YJ(t),multi:!0,deps:[L,Se,Hs,Hr,[new Xe,ga],[new Xe,$s],...e]}]}}var tL=Ws(XF,!0);var nL="@firebase/database",iL="1.0.2";var zT="";function ZJ(t){zT=t}var XC=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),vt(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:dc(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var ZC=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return nr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var FL=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new XC(e)}}catch{}return new ZC},Ia=FL("localStorage"),eT=FL("sessionStorage");var xc=new ir("@firebase/database"),eX=function(){let t=1;return function(){return t++}}(),LL=function(t){let e=SP(t),n=new hg;n.update(e);let i=n.digest();return fg.encodeByteArray(i)},Oh=function(...t){let e="";for(let n=0;n<t.length;n++){let i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Oh.apply(null,i):typeof i=="object"?e+=vt(i):e+=i,e+=" "}return e},Ca=null,rL=!0,tX=function(t,e){R(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(xc.logLevel=Te.VERBOSE,Ca=xc.log.bind(xc),e&&eT.set("logging_enabled",!0)):typeof t=="function"?Ca=t:(Ca=null,eT.remove("logging_enabled"))},Ut=function(...t){if(rL===!0&&(rL=!1,Ca===null&&eT.get("logging_enabled")===!0&&tX(!0)),Ca){let e=Oh.apply(null,t);Ca(e)}},Fh=function(t){return function(...e){Ut(t,...e)}},tT=function(...t){let e="FIREBASE INTERNAL ERROR: "+Oh(...t);xc.error(e)},Qr=function(...t){let e=`FIREBASE FATAL ERROR: ${Oh(...t)}`;throw xc.error(e),new Error(e)},On=function(...t){let e="FIREBASE WARNING: "+Oh(...t);xc.warn(e)},nX=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&On("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},VL=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},iX=function(t){if(tr()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Mc="[MIN_NAME]",Ta="[MAX_NAME]",Lc=function(t,e){if(t===e)return 0;if(t===Mc||e===Ta)return-1;if(e===Mc||t===Ta)return 1;{let n=sL(t),i=sL(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},rX=function(t,e){return t===e?0:t<e?-1:1},Ih=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+vt(e))},$T=function(t){if(typeof t!="object"||t===null)return vt(t);let e=[];for(let i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=vt(e[i]),n+=":",n+=$T(t[e[i]]);return n+="}",n},BL=function(t,e){let n=t.length;if(n<=e)return[t];let i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function Xn(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var jL=function(t){R(!VL(t),"Invalid JSON number");let e=11,n=52,i=(1<<e-1)-1,r,s,o,a,l;t===0?(s=0,o=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),i),s=a+i,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-i-n))));let c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(r?1:0),c.reverse();let u=c.join(""),d="";for(l=0;l<64;l+=8){let h=parseInt(u.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},sX=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},oX=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var aX=new RegExp("^-?(0*)\\d{1,10}$"),lX=-2147483648,cX=2147483647,sL=function(t){if(aX.test(t)){let e=Number(t);if(e>=lX&&e<=cX)return e}return null},Lh=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw On("Exception was thrown by user callback.",n),e},Math.floor(0))}},uX=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},xh=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var nT=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){On(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var iT=class{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ut("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',On(e)}},Ah=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),I_="5",UL="v",zL="s",$L="r",HL="f",WL=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,qL="ls",GL="p",rT="ac",KL="websocket",YL="long_polling";var C_=class{constructor(e,n,i,r,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ia.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ia.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function dX(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function QL(t,e,n){R(typeof e=="string","typeof type must == string"),R(typeof n=="object","typeof params must == object");let i;if(e===KL)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===YL)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);dX(t)&&(n.ns=t.namespace);let r=[];return Xn(n,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}var sT=class{constructor(){this.counters_={}}incrementCounter(e,n=1){nr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return gP(this.counters_)}};var WC={},qC={};function HT(t){let e=t.toString();return WC[e]||(WC[e]=new sT),WC[e]}function hX(t,e){let n=t.toString();return qC[n]||(qC[n]=e()),qC[n]}var oT=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Lh(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var oL="start",fX="close",pX="pLPCommand",mX="pRTLPCB",JL="id",XL="pw",ZL="ser",gX="cb",_X="seg",yX="ts",vX="d",bX="dframe",eV=1870,tV=30,wX=eV-tV,EX=25e3,IX=3e4,aT=class t{constructor(e,n,i,r,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Fh(e),this.stats_=HT(n),this.urlFn=l=>(this.appCheckToken&&(l[rT]=this.appCheckToken),QL(n,YL,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new oT(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(IX)),iX(()=>{if(this.isClosed_)return;this.scriptTagHolder=new lT((...s)=>{let[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===oL)this.id=a,this.password=l;else if(o===fX)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let i={};i[oL]="t",i[ZL]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[gX]=this.scriptTagHolder.uniqueCallbackIdentifier),i[UL]=I_,this.transportSessionId&&(i[zL]=this.transportSessionId),this.lastSessionId&&(i[qL]=this.lastSessionId),this.applicationId&&(i[GL]=this.applicationId),this.appCheckToken&&(i[rT]=this.appCheckToken),typeof location<"u"&&location.hostname&&WL.test(location.hostname)&&(i[$L]=HL);let r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return tr()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!sX()&&!oX()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=vt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let i=ME(n),r=BL(i,wX);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(tr())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[bX]="t",i[JL]=e,i[XL]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=vt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},lT=class t{constructor(e,n,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,tr())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=eX(),window[pX+this.uniqueCallbackIdentifier]=e,window[mX+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Ut("frame writing exception"),a.stack&&Ut(a.stack),Ut(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ut("No IE domain setting required")}catch{let i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[JL]=this.myID,e[XL]=this.myPW,e[ZL]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+tV+i.length<=eV;){let o=this.pendingSegs.shift();i=i+"&"+_X+r+"="+o.seg+"&"+yX+r+"="+o.ts+"&"+vX+r+"="+o.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(EX)),s=()=>{clearTimeout(r),i()};this.addTag(e,s)}addTag(e,n){tr()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){let r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Ut("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var CX=16384,TX=45e3,T_=null;typeof MozWebSocket<"u"?T_=MozWebSocket:typeof WebSocket<"u"&&(T_=WebSocket);var Ch=(()=>{class t{constructor(n,i,r,s,o,a,l){this.connId=n,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Fh(this.connId),this.stats_=HT(i),this.connURL=t.connectionURL_(i,a,l,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(n,i,r,s,o){let a={};return a[UL]=I_,!tr()&&typeof location<"u"&&location.hostname&&WL.test(location.hostname)&&(a[$L]=HL),i&&(a[zL]=i),r&&(a[qL]=r),s&&(a[rT]=s),o&&(a[GL]=o),QL(n,KL,a)}open(n,i){this.onDisconnect=i,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ia.set("previous_websocket_failure",!0);try{let r;if(tr()){let s=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${I_}/${zT}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new T_(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(n=!0)}return!n&&T_!==null&&!t.forceDisallow_}static previouslyFailed(){return Ia.isInMemoryStorage||Ia.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ia.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let r=dc(i);this.onMessage(r)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(R(this.frames===null,"We already have a frame buffer"),n.length<=6){let i=Number(n);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let i=n.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(n){this.resetKeepAlive();let i=vt(n);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let r=BL(i,CX);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(TX))}sendString_(n){try{this.mySock.send(n)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),SX=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[aT,Ch]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let i=Ch&&Ch.isAvailable(),r=i&&!Ch.previouslyFailed();if(n.webSocketOnly&&(i||On("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Ch];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),DX=6e4,xX=5e3,AX=10*1024,MX=100*1024,GC="t",aL="d",kX="s",lL="r",RX="e",cL="o",uL="a",dL="n",hL="p",NX="h",cT=class{constructor(e,n,i,r,s,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Fh("c:"+this.id+":"),this.transportManager_=new SX(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));let r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=xh(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>MX?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>AX?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(GC in e){let n=e[GC];n===uL?this.upgradeIfSecondaryHealthy_():n===lL?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===cL&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=Ih("t",e),i=Ih("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:hL,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:uL,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:dL,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=Ih("t",e),i=Ih("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=Ih(GC,e);if(aL in e){let i=e[aL];if(n===NX){let r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===dL){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===kX?this.onConnectionShutdown_(i):n===lL?this.onReset_(i):n===RX?tT("Server Error: "+i):n===cL?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):tT("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),I_!==i&&On("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),xh(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(DX))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):xh(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(xX))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:hL,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ia.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var S_=class{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}};var D_=class{constructor(e){this.allowedEvents_=e,this.listeners_={},R(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});let r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);let r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===n&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(e){R(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var x_=class t extends D_{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!jd()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return R(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var fL=32,pL=768,je=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function Pe(){return new je("")}function Ee(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function eo(t){return t.pieces_.length-t.pieceNum_}function We(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new je(t.pieces_,e)}function nV(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function PX(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function iV(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function rV(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new je(e,0)}function It(t,e){let n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof je)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{let i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new je(n,0)}function be(t){return t.pieceNum_>=t.pieces_.length}function Qn(t,e){let n=Ee(t),i=Ee(e);if(n===null)return e;if(n===i)return Qn(We(t),We(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function sV(t,e){if(eo(t)!==eo(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function Si(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(eo(t)>eo(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}var uT=class{constructor(e,n){this.errorPrefix_=n,this.parts_=iV(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=$d(this.parts_[i]);oV(this)}};function OX(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=$d(e),oV(t)}function FX(t){let e=t.parts_.pop();t.byteLength_-=$d(e),t.parts_.length>0&&(t.byteLength_-=1)}function oV(t){if(t.byteLength_>pL)throw new Error(t.errorPrefix_+"has a key path longer than "+pL+" bytes ("+t.byteLength_+").");if(t.parts_.length>fL)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+fL+") or object contains a cycle "+Ea(t))}function Ea(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var dT=class t extends D_{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new t}getInitialEvent(e){return R(e==="visible","Unknown event type: "+e),[this.visible_]}};var Th=1e3,LX=60*5*1e3,mL=30*1e3,VX=1.3,BX=3e4,jX="server_kill",gL=3,WT=(()=>{class t extends S_{constructor(n,i,r,s,o,a,l,c){if(super(),this.repoInfo_=n,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=t.nextPersistentConnectionId_++,this.log_=Fh("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Th,this.maxReconnectDelay_=LX,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!tr())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");dT.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&x_.getInstance().on("online",this.onOnline_,this)}sendRequest(n,i,r){let s=++this.requestNumber_,o={r:s,a:n,b:i};this.log_(vt(o)),R(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(n){this.initConnection_();let i=new ia,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let l=a.d;a.s==="ok"?i.resolve(l):i.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),i.promise}listen(n,i,r,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),R(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),R(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let l={onComplete:s,hashFn:i,query:n,tag:r};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(n){let i=this.outstandingGets_[n];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(n){let i=n.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);let o={p:r},a="q";n.tag&&(o.q=i._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,l=>{let c=l.d,u=l.s;t.warnOnListenWarnings_(c,i),(this.listens.get(r)&&this.listens.get(r).get(s))===n&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(r,s),n.onComplete&&n.onComplete(u,c))})}static warnOnListenWarnings_(n,i){if(n&&typeof n=="object"&&nr(n,"w")){let r=sa(n,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();On(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||IP(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=mL)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,i=EP(n)?"auth":"gauth",r={cred:n};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let i=n.s,r=n.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(n,i){let r=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),R(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,n._queryObject,i)}sendUnlisten_(n,i,r,s){this.log_("Unlisten on "+n+" for "+i);let o={p:n},a="n";s&&(o.q=r,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,i,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:i,onComplete:r})}onDisconnectMerge(n,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,i,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:i,onComplete:r})}onDisconnectCancel(n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(n,i,r,s){let o={p:i,d:r};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,i,r,s){this.putInternal("p",n,i,r,s)}merge(n,i,r,s){this.putInternal("m",n,i,r,s)}putInternal(n,i,r,s,o){this.initConnection_();let a={p:i,d:r};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+i)}sendPut_(n){let i=this.outstandingPuts_[n].action,r=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(i,r,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let i={c:n};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){let o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+vt(n));let i=n.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,i){this.log_("handleServerMessage",n,i),n==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):n==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):n==="c"?this.onListenRevoked_(i.p,i.q):n==="ac"?this.onAuthRevoked_(i.s,i.d):n==="apc"?this.onAppCheckRevoked_(i.s,i.d):n==="sd"?this.onSecurityDebugPacket_(i):tT("Unrecognized action received from server: "+vt(n)+`
Are you using the latest client?`)}onReady_(n,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){R(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Th,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Th,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>BX&&(this.reconnectDelay_=Th),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-n);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*VX)}this.onConnectStatus_(!1)}establishConnection_(){return E(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,l=null,c=function(){l?l.close():(a=!0,r())},u=function(h){R(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(h)};this.realtime_={close:c,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,p]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?Ut("getToken() completed but was canceled"):(Ut("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=p&&p.token,l=new cT(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,i,r,f=>{On(f+" ("+this.repoInfo_.toString()+")"),this.interrupt(jX)},o))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&On(h),c())}}})}interrupt(n){Ut("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Ut("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Ud(this.interruptReasons_)&&(this.reconnectDelay_=Th,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let i=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let i=this.outstandingPuts_[n];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,i){let r;i?r=i.map(o=>$T(o)).join("$"):r="default";let s=this.removeListen_(n,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,i){let r=new je(n).toString(),s;if(this.listens.has(r)){let o=this.listens.get(r);s=o.get(i),o.delete(i),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(n,i){Ut("Auth token revoked: "+n+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=gL&&(this.reconnectDelay_=mL,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,i){Ut("App check token revoked: "+n+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=gL&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let i of n.values())this.sendListen_(i);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},i="js";tr()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),n["sdk."+i+"."+zT.replace(/\./g,"-")]=1,jd()?n["framework.cordova"]=1:gg()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=x_.getInstance().currentlyOnline();return Ud(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),Ie=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var kc=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let i=new Ie(Mc,e),r=new Ie(Mc,n);return this.compare(i,r)!==0}minPost(){return Ie.MIN}};var E_,A_=class extends kc{static get __EMPTY_NODE(){return E_}static set __EMPTY_NODE(e){E_=e}compare(e,n){return Lc(e.name,n.name)}isDefinedOn(e){throw ra("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ie.MIN}maxPost(){return new Ie(Ta,E_)}makePost(e,n){return R(typeof e=="string","KeyIndex indexValue must always be a string."),new Ie(e,E_)}toString(){return".key"}},Ac=new A_;var Sc=class{constructor(e,n,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?i(e.key,n):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Ti=(()=>{class t{constructor(n,i,r,s,o){this.key=n,this.value=i,this.color=r??t.RED,this.left=s??Jn.EMPTY_NODE,this.right=o??Jn.EMPTY_NODE}copy(n,i,r,s,o){return new t(n??this.key,i??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,i,r){let s=this,o=r(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,i,r),null):o===0?s=s.copy(null,i,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Jn.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,i){let r,s;if(r=this,i(n,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(n,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(n,r.key)===0){if(r.right.isEmpty())return Jn.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(n,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,i)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),hT=class{copy(e,n,i,r,s){return this}insert(e,n,i){return new Ti(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Jn=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ti.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ti.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Sc(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Sc(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Sc(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Sc(this.root_,null,this.comparator_,!0,e)}};Jn.EMPTY_NODE=new hT;function UX(t,e){return Lc(t.name,e.name)}function qT(t,e){return Lc(t,e)}var fT;function zX(t){fT=t}var aV=function(t){return typeof t=="number"?"number:"+jL(t):"string:"+t},lV=function(t){if(t.isLeafNode()){let e=t.val();R(typeof e=="string"||typeof e=="number"||typeof e=="object"&&nr(e,".sv"),"Priority must be a string or number.")}else R(t===fT||t.isEmpty(),"priority of unexpected type.");R(t===fT||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var _L,Rc=(()=>{class t{constructor(n,i=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=i,this.lazyHash_=null,R(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),lV(this.priorityNode_)}static set __childrenNodeConstructor(n){_L=n}static get __childrenNodeConstructor(){return _L}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return be(n)?this:Ee(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,i){return null}updateImmediateChild(n,i){return n===".priority"?this.updatePriority(i):i.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,i).updatePriority(this.priorityNode_)}updateChild(n,i){let r=Ee(n);return r===null?i:i.isEmpty()&&r!==".priority"?this:(R(r!==".priority"||eo(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(We(n),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,i){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+aV(this.priorityNode_.val())+":");let i=typeof this.value_;n+=i+":",i==="number"?n+=jL(this.value_):n+=this.value_,this.lazyHash_=LL(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(R(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let i=typeof n.value_,r=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(i),o=t.VALUE_TYPE_ORDER.indexOf(r);return R(s>=0,"Unknown leaf type: "+i),R(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let i=n;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),cV,uV;function $X(t){cV=t}function HX(t){uV=t}var pT=class extends kc{compare(e,n){let i=e.node.getPriority(),r=n.node.getPriority(),s=i.compareTo(r);return s===0?Lc(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ie.MIN}maxPost(){return new Ie(Ta,new Rc("[PRIORITY-POST]",uV))}makePost(e,n){let i=cV(e);return new Ie(n,new Rc("[PRIORITY-POST]",i))}toString(){return".priority"}},$t=new pT;var WX=Math.log(2),mT=class{constructor(e){let n=s=>parseInt(Math.log(s)/WX,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},M_=function(t,e,n,i){t.sort(e);let r=function(l,c){let u=c-l,d,h;if(u===0)return null;if(u===1)return d=t[l],h=n?n(d):d,new Ti(h,d.node,Ti.BLACK,null,null);{let p=parseInt(u/2,10)+l,f=r(l,p),m=r(p+1,c);return d=t[p],h=n?n(d):d,new Ti(h,d.node,Ti.BLACK,f,m)}},s=function(l){let c=null,u=null,d=t.length,h=function(f,m){let g=d-f,w=d;d-=f;let O=r(g+1,w),Y=t[g],j=n?n(Y):Y;p(new Ti(j,Y.node,m,null,O))},p=function(f){c?(c.left=f,c=f):(u=f,c=f)};for(let f=0;f<l.count;++f){let m=l.nextBitIsOne(),g=Math.pow(2,l.count-(f+1));m?h(g,Ti.BLACK):(h(g,Ti.BLACK),h(g,Ti.RED))}return u},o=new mT(t.length),a=s(o);return new Jn(i||e,a)};var KC,Tc={},Nc=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return R(Tc&&$t,"ChildrenNode.ts has not been loaded"),KC=KC||new t({".priority":Tc},{".priority":$t}),KC}get(e){let n=sa(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Jn?n:null}hasIndex(e){return nr(this.indexSet_,e.toString())}addIndex(e,n){R(e!==Ac,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],r=!1,s=n.getIterator(Ie.Wrap),o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();let a;r?a=M_(i,e.getCompare()):a=Tc;let l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;let u=Object.assign({},this.indexes_);return u[l]=a,new t(u,c)}addToIndexes(e,n){let i=zd(this.indexes_,(r,s)=>{let o=sa(this.indexSet_,s);if(R(o,"Missing index implementation for "+s),r===Tc)if(o.isDefinedOn(e.node)){let a=[],l=n.getIterator(Ie.Wrap),c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),M_(a,o.getCompare())}else return Tc;else{let a=n.get(e.name),l=r;return a&&(l=l.remove(new Ie(e.name,a))),l.insert(e,e.node)}});return new t(i,this.indexSet_)}removeFromIndexes(e,n){let i=zd(this.indexes_,r=>{if(r===Tc)return r;{let s=n.get(e.name);return s?r.remove(new Ie(e.name,s)):r}});return new t(i,this.indexSet_)}};var Sh,nt=(()=>{class t{constructor(n,i,r){this.children_=n,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&lV(this.priorityNode_),this.children_.isEmpty()&&R(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Sh||(Sh=new t(new Jn(qT),null,Nc.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Sh}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let i=this.children_.get(n);return i===null?Sh:i}}getChild(n){let i=Ee(n);return i===null?this:this.getImmediateChild(i).getChild(We(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,i){if(R(i,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(i);{let r=new Ie(n,i),s,o;i.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(n,i),o=this.indexMap_.addToIndexes(r,this.children_));let a=s.isEmpty()?Sh:this.priorityNode_;return new t(s,a,o)}}updateChild(n,i){let r=Ee(n);if(r===null)return i;{R(Ee(n)!==".priority"||eo(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(r).updateChild(We(n),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let i={},r=0,s=0,o=!0;if(this.forEachChild($t,(a,l)=>{i[a]=l.val(n),r++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*r){let a=[];for(let l in i)a[l]=i[l];return a}else return n&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+aV(this.getPriority().val())+":"),this.forEachChild($t,(i,r)=>{let s=r.hash();s!==""&&(n+=":"+i+":"+s)}),this.lazyHash_=n===""?"":LL(n)}return this.lazyHash_}getPredecessorChildName(n,i,r){let s=this.resolveIndex_(r);if(s){let o=s.getPredecessorKey(new Ie(n,i));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let i=this.resolveIndex_(n);if(i){let r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(n){let i=this.getFirstChildName(n);return i?new Ie(i,this.children_.get(i)):null}getLastChildName(n){let i=this.resolveIndex_(n);if(i){let r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(n){let i=this.getLastChildName(n);return i?new Ie(i,this.children_.get(i)):null}forEachChild(n,i){let r=this.resolveIndex_(n);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,i){let r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,Ie.Wrap),o=s.peek();for(;o!=null&&i.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,i){let r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,Ie.Wrap),o=s.peek();for(;o!=null&&i.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Vh?-1:0}withIndex(n){if(n===Ac||this.indexMap_.hasIndex(n))return this;{let i=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,i)}}isIndexed(n){return n===Ac||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let i=n;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let r=this.getIterator($t),s=i.getIterator($t),o=r.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Ac?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),gT=class extends nt{constructor(){super(new Jn(qT),nt.EMPTY_NODE,Nc.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return nt.EMPTY_NODE}isEmpty(){return!1}},Vh=new gT;Object.defineProperties(Ie,{MIN:{value:new Ie(Mc,nt.EMPTY_NODE)},MAX:{value:new Ie(Ta,Vh)}});A_.__EMPTY_NODE=nt.EMPTY_NODE;Rc.__childrenNodeConstructor=nt;zX(Vh);HX(Vh);var qX=!0;function zt(t,e=null){if(t===null)return nt.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),R(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Rc(n,zt(e))}if(!(t instanceof Array)&&qX){let n=[],i=!1;if(Xn(t,(o,a)=>{if(o.substring(0,1)!=="."){let l=zt(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),n.push(new Ie(o,l)))}}),n.length===0)return nt.EMPTY_NODE;let s=M_(n,UX,o=>o.name,qT);if(i){let o=M_(n,$t.getCompare());return new nt(s,zt(e),new Nc({".priority":o},{".priority":$t}))}else return new nt(s,zt(e),Nc.Default)}else{let n=nt.EMPTY_NODE;return Xn(t,(i,r)=>{if(nr(t,i)&&i.substring(0,1)!=="."){let s=zt(r);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(i,s))}}),n.updatePriority(zt(e))}}$X(zt);var _T=class extends kc{constructor(e){super(),this.indexPath_=e,R(!be(e)&&Ee(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let i=this.extractChild(e.node),r=this.extractChild(n.node),s=i.compareTo(r);return s===0?Lc(e.name,n.name):s}makePost(e,n){let i=zt(e),r=nt.EMPTY_NODE.updateChild(this.indexPath_,i);return new Ie(n,r)}maxPost(){let e=nt.EMPTY_NODE.updateChild(this.indexPath_,Vh);return new Ie(Ta,e)}toString(){return iV(this.indexPath_,0).join("/")}};var yT=class extends kc{compare(e,n){let i=e.node.compareTo(n.node);return i===0?Lc(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ie.MIN}maxPost(){return Ie.MAX}makePost(e,n){let i=zt(e);return new Ie(n,i)}toString(){return".value"}},GX=new yT;function KX(t){return{type:"value",snapshotNode:t}}function YX(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function QX(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function yL(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function JX(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var vT=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=$t}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return R(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return R(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Mc}hasEnd(){return this.endSet_}getIndexEndValue(){return R(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return R(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ta}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return R(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===$t}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function vL(t){let e={};if(t.isDefault())return e;let n;if(t.index_===$t?n="$priority":t.index_===GX?n="$value":t.index_===Ac?n="$key":(R(t.index_ instanceof _T,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=vt(n),t.startSet_){let i=t.startAfterSet_?"startAfter":"startAt";e[i]=vt(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+vt(t.indexStartName_))}if(t.endSet_){let i=t.endBeforeSet_?"endBefore":"endAt";e[i]=vt(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+vt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function bL(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==$t&&(e.i=t.index_.toString()),e}var bT=class t extends S_{constructor(e,n,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Fh("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(R(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,r){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,i),a={};this.listens_[o]=a;let l=vL(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let d=u;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(s,d,!1,i),sa(this.listens_,o)===a){let h;c?c===401?h="permission_denied":h="rest_error:"+c:h="ok",r(h,null)}})}unlisten(e,n){let i=t.getListenId_(e,n);delete this.listens_[i]}get(e){let n=vL(e._queryParams),i=e._path.toString(),r=new ia;return this.restRequest_(i+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(n.auth=r.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+aa(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=dc(a.responseText)}catch{On("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else a.status!==401&&a.status!==404&&On("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}};var wT=class{constructor(){this.rootNode_=nt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function k_(){return{value:null,children:new Map}}function dV(t,e,n){if(be(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let i=Ee(e);t.children.has(i)||t.children.set(i,k_());let r=t.children.get(i);e=We(e),dV(r,e,n)}}function ET(t,e,n){t.value!==null?n(e,t.value):XX(t,(i,r)=>{let s=new je(e.toString()+"/"+i);ET(r,s,n)})}function XX(t,e){t.children.forEach((n,i)=>{e(i,n)})}var IT=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Xn(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}};var wL=10*1e3,ZX=30*1e3,eZ=5*60*1e3,CT=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new IT(e);let i=wL+(ZX-wL)*Math.random();xh(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let e=this.statsListener_.get(),n={},i=!1;Xn(e,(r,s)=>{s>0&&nr(this.statsToReport_,r)&&(n[r]=s,i=!0)}),i&&this.server_.reportStats(n),xh(this.reportStats_.bind(this),Math.floor(Math.random()*2*eZ))}};var Yr=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Yr||{});function hV(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function fV(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function pV(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var TT=class t{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=Yr.ACK_USER_WRITE,this.source=hV()}operationForChild(e){if(be(this.path)){if(this.affectedTree.value!=null)return R(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new je(e));return new t(Pe(),n,this.revert)}}else return R(Ee(this.path)===e,"operationForChild called for unrelated child."),new t(We(this.path),this.affectedTree,this.revert)}};var Pc=class t{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=Yr.OVERWRITE}operationForChild(e){return be(this.path)?new t(this.source,Pe(),this.snap.getImmediateChild(e)):new t(this.source,We(this.path),this.snap)}};var R_=class t{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=Yr.MERGE}operationForChild(e){if(be(this.path)){let n=this.children.subtree(new je(e));return n.isEmpty()?null:n.value?new Pc(this.source,Pe(),n.value):new t(this.source,Pe(),n)}else return R(Ee(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,We(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Rh=class{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(be(e))return this.isFullyInitialized()&&!this.filtered_;let n=Ee(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function tZ(t,e,n,i){let r=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(JX(o.childName,o.snapshotNode))}),Dh(t,r,"child_removed",e,i,n),Dh(t,r,"child_added",e,i,n),Dh(t,r,"child_moved",s,i,n),Dh(t,r,"child_changed",e,i,n),Dh(t,r,"value",e,i,n),r}function Dh(t,e,n,i,r,s){let o=i.filter(a=>a.type===n);o.sort((a,l)=>iZ(t,a,l)),o.forEach(a=>{let l=nZ(t,a,s);r.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function nZ(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function iZ(t,e,n){if(e.childName==null||n.childName==null)throw ra("Should only compare child_ events.");let i=new Ie(e.childName,e.snapshotNode),r=new Ie(n.childName,n.snapshotNode);return t.index_.compare(i,r)}function mV(t,e){return{eventCache:t,serverCache:e}}function Mh(t,e,n,i){return mV(new Rh(e,n,i),t.serverCache)}function gV(t,e,n,i){return mV(t.eventCache,new Rh(e,n,i))}function ST(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Sa(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var YC,rZ=()=>(YC||(YC=new Jn(rX)),YC),yn=class t{constructor(e,n=rZ()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return Xn(e,(i,r)=>{n=n.set(new je(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Pe(),value:this.value};if(be(e))return null;{let i=Ee(e),r=this.children.get(i);if(r!==null){let s=r.findRootMostMatchingPathAndValue(We(e),n);return s!=null?{path:It(new je(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(be(e))return this;{let n=Ee(e),i=this.children.get(n);return i!==null?i.subtree(We(e)):new t(null)}}set(e,n){if(be(e))return new t(n,this.children);{let i=Ee(e),s=(this.children.get(i)||new t(null)).set(We(e),n),o=this.children.insert(i,s);return new t(this.value,o)}}remove(e){if(be(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=Ee(e),i=this.children.get(n);if(i){let r=i.remove(We(e)),s;return r.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,r),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(be(e))return this.value;{let n=Ee(e),i=this.children.get(n);return i?i.get(We(e)):null}}setTree(e,n){if(be(e))return n;{let i=Ee(e),s=(this.children.get(i)||new t(null)).setTree(We(e),n),o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),new t(this.value,o)}}fold(e){return this.fold_(Pe(),e)}fold_(e,n){let i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(It(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,Pe(),n)}findOnPath_(e,n,i){let r=this.value?i(n,this.value):!1;if(r)return r;if(be(e))return null;{let s=Ee(e),o=this.children.get(s);return o?o.findOnPath_(We(e),It(n,s),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Pe(),n)}foreachOnPath_(e,n,i){if(be(e))return this;{this.value&&i(n,this.value);let r=Ee(e),s=this.children.get(r);return s?s.foreachOnPath_(We(e),It(n,r),i):new t(null)}}foreach(e){this.foreach_(Pe(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(It(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}};var Di=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new yn(null))}};function kh(t,e,n){if(be(e))return new Di(new yn(n));{let i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){let r=i.path,s=i.value,o=Qn(r,e);return s=s.updateChild(o,n),new Di(t.writeTree_.set(r,s))}else{let r=new yn(n),s=t.writeTree_.setTree(e,r);return new Di(s)}}}function EL(t,e,n){let i=t;return Xn(n,(r,s)=>{i=kh(i,It(e,r),s)}),i}function IL(t,e){if(be(e))return Di.empty();{let n=t.writeTree_.setTree(e,new yn(null));return new Di(n)}}function DT(t,e){return Da(t,e)!=null}function Da(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Qn(n.path,e)):null}function CL(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild($t,(i,r)=>{e.push(new Ie(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new Ie(i,r.value))}),e}function Zs(t,e){if(be(e))return t;{let n=Da(t,e);return n!=null?new Di(new yn(n)):new Di(t.writeTree_.subtree(e))}}function xT(t){return t.writeTree_.isEmpty()}function Oc(t,e){return _V(Pe(),t.writeTree_,e)}function _V(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(R(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):n=_V(It(t,r),s,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(It(t,".priority"),i)),n}}function yV(t,e){return IV(e,t)}function sZ(t,e,n,i,r){R(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=kh(t.visibleWrites,e,n)),t.lastWriteId=i}function oZ(t,e){for(let n=0;n<t.allWrites.length;n++){let i=t.allWrites[n];if(i.writeId===e)return i}return null}function aZ(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);R(n>=0,"removeWrite called with nonexistent writeId.");let i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,s=!1,o=t.allWrites.length-1;for(;r&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&lZ(a,i.path)?r=!1:Si(i.path,a.path)&&(s=!0)),o--}if(r){if(s)return cZ(t),!0;if(i.snap)t.visibleWrites=IL(t.visibleWrites,i.path);else{let a=i.children;Xn(a,l=>{t.visibleWrites=IL(t.visibleWrites,It(i.path,l))})}return!0}else return!1}function lZ(t,e){if(t.snap)return Si(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&Si(It(t.path,n),e))return!0;return!1}function cZ(t){t.visibleWrites=vV(t.allWrites,uZ,Pe()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function uZ(t){return t.visible}function vV(t,e,n){let i=Di.empty();for(let r=0;r<t.length;++r){let s=t[r];if(e(s)){let o=s.path,a;if(s.snap)Si(n,o)?(a=Qn(n,o),i=kh(i,a,s.snap)):Si(o,n)&&(a=Qn(o,n),i=kh(i,Pe(),s.snap.getChild(a)));else if(s.children){if(Si(n,o))a=Qn(n,o),i=EL(i,a,s.children);else if(Si(o,n))if(a=Qn(o,n),be(a))i=EL(i,Pe(),s.children);else{let l=sa(s.children,Ee(a));if(l){let c=l.getChild(We(a));i=kh(i,Pe(),c)}}}else throw ra("WriteRecord should have .snap or .children")}}return i}function bV(t,e,n,i,r){if(!i&&!r){let s=Da(t.visibleWrites,e);if(s!=null)return s;{let o=Zs(t.visibleWrites,e);if(xT(o))return n;if(n==null&&!DT(o,Pe()))return null;{let a=n||nt.EMPTY_NODE;return Oc(o,a)}}}else{let s=Zs(t.visibleWrites,e);if(!r&&xT(s))return n;if(!r&&n==null&&!DT(s,Pe()))return null;{let o=function(c){return(c.visible||r)&&(!i||!~i.indexOf(c.writeId))&&(Si(c.path,e)||Si(e,c.path))},a=vV(t.allWrites,o,e),l=n||nt.EMPTY_NODE;return Oc(a,l)}}}function dZ(t,e,n){let i=nt.EMPTY_NODE,r=Da(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild($t,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(n){let s=Zs(t.visibleWrites,e);return n.forEachChild($t,(o,a)=>{let l=Oc(Zs(s,new je(o)),a);i=i.updateImmediateChild(o,l)}),CL(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{let s=Zs(t.visibleWrites,e);return CL(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function hZ(t,e,n,i,r){R(i||r,"Either existingEventSnap or existingServerSnap must exist");let s=It(e,n);if(DT(t.visibleWrites,s))return null;{let o=Zs(t.visibleWrites,s);return xT(o)?r.getChild(n):Oc(o,r.getChild(n))}}function fZ(t,e,n,i){let r=It(e,n),s=Da(t.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(n)){let o=Zs(t.visibleWrites,r);return Oc(o,i.getNode().getImmediateChild(n))}else return null}function pZ(t,e){return Da(t.visibleWrites,e)}function mZ(t,e,n,i,r,s,o){let a,l=Zs(t.visibleWrites,e),c=Da(l,Pe());if(c!=null)a=c;else if(n!=null)a=Oc(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o),p=h.getNext();for(;p&&u.length<r;)d(p,i)!==0&&u.push(p),p=h.getNext();return u}else return[]}function gZ(){return{visibleWrites:Di.empty(),allWrites:[],lastWriteId:-1}}function AT(t,e,n,i){return bV(t.writeTree,t.treePath,e,n,i)}function wV(t,e){return dZ(t.writeTree,t.treePath,e)}function TL(t,e,n,i){return hZ(t.writeTree,t.treePath,e,n,i)}function N_(t,e){return pZ(t.writeTree,It(t.treePath,e))}function _Z(t,e,n,i,r,s){return mZ(t.writeTree,t.treePath,e,n,i,r,s)}function GT(t,e,n){return fZ(t.writeTree,t.treePath,e,n)}function EV(t,e){return IV(It(t.treePath,e),t.writeTree)}function IV(t,e){return{treePath:t,writeTree:e}}var MT=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,i=e.childName;R(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),R(i!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(i);if(r){let s=r.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(i,yL(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(i,QX(i,r.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(i,YX(i,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(i,yL(i,e.snapshotNode,r.oldSnap));else throw ra("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}};var kT=class{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}},CV=new kT,Nh=class{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let i=this.optCompleteServerCache_!=null?new Rh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return GT(this.writes_,e,i)}}getChildAfterChild(e,n,i){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Sa(this.viewCache_),s=_Z(this.writes_,r,n,1,i,e);return s.length===0?null:s[0]}};function yZ(t,e){R(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),R(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function vZ(t,e,n,i,r){let s=new MT,o,a;if(n.type===Yr.OVERWRITE){let c=n;c.source.fromUser?o=RT(t,e,c.path,c.snap,i,r,s):(R(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!be(c.path),o=P_(t,e,c.path,c.snap,i,r,a,s))}else if(n.type===Yr.MERGE){let c=n;c.source.fromUser?o=wZ(t,e,c.path,c.children,i,r,s):(R(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=NT(t,e,c.path,c.children,i,r,a,s))}else if(n.type===Yr.ACK_USER_WRITE){let c=n;c.revert?o=CZ(t,e,c.path,i,r,s):o=EZ(t,e,c.path,c.affectedTree,i,r,s)}else if(n.type===Yr.LISTEN_COMPLETE)o=IZ(t,e,n.path,i,s);else throw ra("Unknown operation type: "+n.type);let l=s.getChanges();return bZ(e,o,l),{viewCache:o,changes:l}}function bZ(t,e,n){let i=e.eventCache;if(i.isFullyInitialized()){let r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=ST(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(KX(ST(e)))}}function TV(t,e,n,i,r,s){let o=e.eventCache;if(N_(i,n)!=null)return e;{let a,l;if(be(n))if(R(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let c=Sa(e),u=c instanceof nt?c:nt.EMPTY_NODE,d=wV(i,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let c=AT(i,Sa(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{let c=Ee(n);if(c===".priority"){R(eo(n)===1,"Can't have a priority with additional path components");let u=o.getNode();l=e.serverCache.getNode();let d=TL(i,n,u,l);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{let u=We(n),d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();let h=TL(i,n,o.getNode(),l);h!=null?d=o.getNode().getImmediateChild(c).updateChild(u,h):d=o.getNode().getImmediateChild(c)}else d=GT(i,c,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),c,d,u,r,s):a=o.getNode()}}return Mh(e,a,o.isFullyInitialized()||be(n),t.filter.filtersNodes())}}function P_(t,e,n,i,r,s,o,a){let l=e.serverCache,c,u=o?t.filter:t.filter.getIndexedFilter();if(be(n))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){let p=l.getNode().updateChild(n,i);c=u.updateFullNode(l.getNode(),p,null)}else{let p=Ee(n);if(!l.isCompleteForPath(n)&&eo(n)>1)return e;let f=We(n),g=l.getNode().getImmediateChild(p).updateChild(f,i);p===".priority"?c=u.updatePriority(l.getNode(),g):c=u.updateChild(l.getNode(),p,g,f,CV,null)}let d=gV(e,c,l.isFullyInitialized()||be(n),u.filtersNodes()),h=new Nh(r,d,s);return TV(t,d,n,r,h,a)}function RT(t,e,n,i,r,s,o){let a=e.eventCache,l,c,u=new Nh(r,e,s);if(be(n))c=t.filter.updateFullNode(e.eventCache.getNode(),i,o),l=Mh(e,c,!0,t.filter.filtersNodes());else{let d=Ee(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),i),l=Mh(e,c,a.isFullyInitialized(),a.isFiltered());else{let h=We(n),p=a.getNode().getImmediateChild(d),f;if(be(h))f=i;else{let m=u.getCompleteChild(d);m!=null?nV(h)===".priority"&&m.getChild(rV(h)).isEmpty()?f=m:f=m.updateChild(h,i):f=nt.EMPTY_NODE}if(p.equals(f))l=e;else{let m=t.filter.updateChild(a.getNode(),d,f,h,u,o);l=Mh(e,m,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function SL(t,e){return t.eventCache.isCompleteForChild(e)}function wZ(t,e,n,i,r,s,o){let a=e;return i.foreach((l,c)=>{let u=It(n,l);SL(e,Ee(u))&&(a=RT(t,a,u,c,r,s,o))}),i.foreach((l,c)=>{let u=It(n,l);SL(e,Ee(u))||(a=RT(t,a,u,c,r,s,o))}),a}function DL(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function NT(t,e,n,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;be(n)?c=i:c=new yn(null).setTree(n,i);let u=e.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){let p=e.serverCache.getNode().getImmediateChild(d),f=DL(t,p,h);l=P_(t,l,new je(d),f,r,s,o,a)}}),c.children.inorderTraversal((d,h)=>{let p=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!p){let f=e.serverCache.getNode().getImmediateChild(d),m=DL(t,f,h);l=P_(t,l,new je(d),m,r,s,o,a)}}),l}function EZ(t,e,n,i,r,s,o){if(N_(r,n)!=null)return e;let a=e.serverCache.isFiltered(),l=e.serverCache;if(i.value!=null){if(be(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return P_(t,e,n,l.getNode().getChild(n),r,s,a,o);if(be(n)){let c=new yn(null);return l.getNode().forEachChild(Ac,(u,d)=>{c=c.set(new je(u),d)}),NT(t,e,n,c,r,s,a,o)}else return e}else{let c=new yn(null);return i.foreach((u,d)=>{let h=It(n,u);l.isCompleteForPath(h)&&(c=c.set(u,l.getNode().getChild(h)))}),NT(t,e,n,c,r,s,a,o)}}function IZ(t,e,n,i,r){let s=e.serverCache,o=gV(e,s.getNode(),s.isFullyInitialized()||be(n),s.isFiltered());return TV(t,o,n,i,CV,r)}function CZ(t,e,n,i,r,s){let o;if(N_(i,n)!=null)return e;{let a=new Nh(i,e,r),l=e.eventCache.getNode(),c;if(be(n)||Ee(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=AT(i,Sa(e));else{let d=e.serverCache.getNode();R(d instanceof nt,"serverChildren would be complete if leaf node"),u=wV(i,d)}u=u,c=t.filter.updateFullNode(l,u,s)}else{let u=Ee(n),d=GT(i,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),d!=null?c=t.filter.updateChild(l,u,d,We(n),a,s):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,nt.EMPTY_NODE,We(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=AT(i,Sa(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||N_(i,Pe())!=null,Mh(e,c,o,t.filter.filtersNodes())}}function TZ(t,e){let n=Sa(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!be(e)&&!n.getImmediateChild(Ee(e)).isEmpty())?n.getChild(e):null}function xL(t,e,n,i){e.type===Yr.MERGE&&e.source.queryId!==null&&(R(Sa(t.viewCache_),"We should always have a full cache before handling merges"),R(ST(t.viewCache_),"Missing event cache, even though we have a server cache"));let r=t.viewCache_,s=vZ(t.processor_,r,e,n,i);return yZ(t.processor_,s.viewCache),R(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,SZ(t,s.changes,s.viewCache.eventCache.getNode(),null)}function SZ(t,e,n,i){let r=i?[i]:t.eventRegistrations_;return tZ(t.eventGenerator_,e,n,r)}var AL;function DZ(t){R(!AL,"__referenceConstructor has already been defined"),AL=t}function KT(t,e,n,i){let r=e.source.queryId;if(r!==null){let s=t.views.get(r);return R(s!=null,"SyncTree gave us an op for an invalid query."),xL(s,e,n,i)}else{let s=[];for(let o of t.views.values())s=s.concat(xL(o,e,n,i));return s}}function YT(t,e){let n=null;for(let i of t.views.values())n=n||TZ(i,e);return n}var ML;function xZ(t){R(!ML,"__referenceConstructor has already been defined"),ML=t}var O_=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new yn(null),this.pendingWriteTree_=gZ(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function AZ(t,e,n,i,r){return sZ(t.pendingWriteTree_,e,n,i,r),r?L_(t,new Pc(hV(),e,n)):[]}function Dc(t,e,n=!1){let i=oZ(t.pendingWriteTree_,e);if(aZ(t.pendingWriteTree_,e)){let s=new yn(null);return i.snap!=null?s=s.set(Pe(),!0):Xn(i.children,o=>{s=s.set(new je(o),!0)}),L_(t,new TT(i.path,s,n))}else return[]}function F_(t,e,n){return L_(t,new Pc(fV(),e,n))}function MZ(t,e,n){let i=yn.fromObject(n);return L_(t,new R_(fV(),e,i))}function kZ(t,e,n,i){let r=AV(t,i);if(r!=null){let s=MV(r),o=s.path,a=s.queryId,l=Qn(o,e),c=new Pc(pV(a),l,n);return kV(t,o,c)}else return[]}function RZ(t,e,n,i){let r=AV(t,i);if(r){let s=MV(r),o=s.path,a=s.queryId,l=Qn(o,e),c=yn.fromObject(n),u=new R_(pV(a),l,c);return kV(t,o,u)}else return[]}function SV(t,e,n){let r=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let l=Qn(o,e),c=YT(a,l);if(c)return c});return bV(r,e,s,n,!0)}function L_(t,e){return DV(e,t.syncPointTree_,null,yV(t.pendingWriteTree_,Pe()))}function DV(t,e,n,i){if(be(t.path))return xV(t,e,n,i);{let r=e.get(Pe());n==null&&r!=null&&(n=YT(r,Pe()));let s=[],o=Ee(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){let c=n?n.getImmediateChild(o):null,u=EV(i,o);s=s.concat(DV(a,l,c,u))}return r&&(s=s.concat(KT(r,t,i,n))),s}}function xV(t,e,n,i){let r=e.get(Pe());n==null&&r!=null&&(n=YT(r,Pe()));let s=[];return e.children.inorderTraversal((o,a)=>{let l=n?n.getImmediateChild(o):null,c=EV(i,o),u=t.operationForChild(o);u&&(s=s.concat(xV(u,a,l,c)))}),r&&(s=s.concat(KT(r,t,i,n))),s}function AV(t,e){return t.tagToQueryMap.get(e)}function MV(t){let e=t.indexOf("$");return R(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new je(t.substr(0,e))}}function kV(t,e,n){let i=t.syncPointTree_.get(e);R(i,"Missing sync point for query tag that we're tracking");let r=yV(t.pendingWriteTree_,e);return KT(i,n,r,null)}var PT=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},OT=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=It(this.path_,e);return new t(this.syncTree_,n)}node(){return SV(this.syncTree_,this.path_)}},NZ=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},kL=function(t,e,n){if(!t||typeof t!="object")return t;if(R(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return PZ(t[".sv"],e,n);if(typeof t[".sv"]=="object")return OZ(t[".sv"],e);R(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},PZ=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:R(!1,"Unexpected server value: "+t)}},OZ=function(t,e,n){t.hasOwnProperty("increment")||R(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let i=t.increment;typeof i!="number"&&R(!1,"Unexpected increment value: "+i);let r=e.node();if(R(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;let o=r.getValue();return typeof o!="number"?i:o+i},FZ=function(t,e,n,i){return QT(e,new OT(n,t),i)},LZ=function(t,e,n){return QT(t,new PT(e),n)};function QT(t,e,n){let i=t.getPriority().val(),r=kL(i,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=kL(o.getValue(),e,n);return a!==o.getValue()||r!==o.getPriority().val()?new Rc(a,zt(r)):t}else{let o=t;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new Rc(r))),o.forEachChild($t,(a,l)=>{let c=QT(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}var Ph=class{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}};function JT(t,e){let n=e instanceof je?e:new je(e),i=t,r=Ee(n);for(;r!==null;){let s=sa(i.node.children,r)||{children:{},childCount:0};i=new Ph(r,i,s),n=We(n),r=Ee(n)}return i}function Vc(t){return t.node.value}function RV(t,e){t.node.value=e,FT(t)}function NV(t){return t.node.childCount>0}function VZ(t){return Vc(t)===void 0&&!NV(t)}function V_(t,e){Xn(t.node.children,(n,i)=>{e(new Ph(n,t,i))})}function PV(t,e,n,i){n&&!i&&e(t),V_(t,r=>{PV(r,e,!0,i)}),n&&i&&e(t)}function BZ(t,e,n){let i=n?t:t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Bh(t){return new je(t.parent===null?t.name:Bh(t.parent)+"/"+t.name)}function FT(t){t.parent!==null&&jZ(t.parent,t.name,t)}function jZ(t,e,n){let i=VZ(n),r=nr(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,FT(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,FT(t))}var UZ=/[\[\].#$\/\u0000-\u001F\u007F]/,zZ=/[\[\].#$\u0000-\u001F\u007F]/,QC=10*1024*1024,OV=function(t){return typeof t=="string"&&t.length!==0&&!UZ.test(t)},$Z=function(t){return typeof t=="string"&&t.length!==0&&!zZ.test(t)},HZ=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),$Z(t)};var FV=function(t,e,n){let i=n instanceof je?new uT(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ea(i));if(typeof e=="function")throw new Error(t+"contains a function "+Ea(i)+" with contents = "+e.toString());if(VL(e))throw new Error(t+"contains "+e.toString()+" "+Ea(i));if(typeof e=="string"&&e.length>QC/3&&$d(e)>QC)throw new Error(t+"contains a string greater than "+QC+" utf8 bytes "+Ea(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(Xn(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!OV(o)))throw new Error(t+" contains an invalid key ("+o+") "+Ea(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);OX(i,o),FV(t,a,i),FX(i)}),r&&s)throw new Error(t+' contains ".value" child '+Ea(i)+" in addition to actual children.")}};var WZ=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!OV(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!HZ(n))throw new Error(TP(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var LT=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function qZ(t,e){let n=null;for(let i=0;i<e.length;i++){let r=e[i],s=r.getPath();n!==null&&!sV(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(r)}n&&t.eventLists_.push(n)}function xa(t,e,n){qZ(t,n),GZ(t,i=>Si(i,e)||Si(e,i))}function GZ(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){let r=t.eventLists_[i];if(r){let s=r.path;e(s)?(KZ(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function KZ(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let i=n.getEventRunner();Ca&&Ut("event: "+n.toString()),Lh(i)}}}var YZ="repo_interrupt",QZ=25,VT=class{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new LT,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=k_(),this.transactionQueueTree_=new Ph,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function JZ(t,e,n){if(t.stats_=HT(t.repoInfo_),t.forceRestClient_||uX())t.server_=new bT(t.repoInfo_,(i,r,s,o)=>{RL(t,i,r,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>NL(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{vt(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new WT(t.repoInfo_,e,(i,r,s,o)=>{RL(t,i,r,s,o)},i=>{NL(t,i)},i=>{ZZ(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=hX(t.repoInfo_,()=>new CT(t.stats_,t.server_)),t.infoData_=new wT,t.infoSyncTree_=new O_({startListening:(i,r,s,o)=>{let a=[],l=t.infoData_.getNode(i._path);return l.isEmpty()||(a=F_(t.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),XT(t,"connected",!1),t.serverSyncTree_=new O_({startListening:(i,r,s,o)=>(t.server_.listen(i,s,r,(a,l)=>{let c=o(a,l);xa(t.eventQueue_,i._path,c)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function XZ(t){let n=t.infoData_.getNode(new je(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function LV(t){return NZ({timestamp:XZ(t)})}function RL(t,e,n,i,r){t.dataUpdateCount++;let s=new je(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(r)if(i){let l=zd(n,c=>zt(c));o=RZ(t.serverSyncTree_,s,l,r)}else{let l=zt(n);o=kZ(t.serverSyncTree_,s,l,r)}else if(i){let l=zd(n,c=>zt(c));o=MZ(t.serverSyncTree_,s,l)}else{let l=zt(n);o=F_(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=eS(t,s)),xa(t.eventQueue_,a,o)}function NL(t,e){XT(t,"connected",e),e===!1&&tee(t)}function ZZ(t,e){Xn(e,(n,i)=>{XT(t,n,i)})}function XT(t,e,n){let i=new je("/.info/"+e),r=zt(n);t.infoData_.updateSnapshot(i,r);let s=F_(t.infoSyncTree_,i,r);xa(t.eventQueue_,i,s)}function eee(t){return t.nextWriteId_++}function tee(t){VV(t,"onDisconnectEvents");let e=LV(t),n=k_();ET(t.onDisconnect_,Pe(),(r,s)=>{let o=FZ(r,s,t.serverSyncTree_,e);dV(n,r,o)});let i=[];ET(n,Pe(),(r,s)=>{i=i.concat(F_(t.serverSyncTree_,r,s));let o=see(t,r);eS(t,o)}),t.onDisconnect_=k_(),xa(t.eventQueue_,Pe(),i)}function nee(t){t.persistentConnection_&&t.persistentConnection_.interrupt(YZ)}function VV(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Ut(n,...e)}function BV(t,e,n){return SV(t.serverSyncTree_,e,n)||nt.EMPTY_NODE}function ZT(t,e=t.transactionQueueTree_){if(e||B_(t,e),Vc(e)){let n=UV(t,e);R(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&iee(t,Bh(e),n)}else NV(e)&&V_(e,n=>{ZT(t,n)})}function iee(t,e,n){let i=n.map(c=>c.currentWriteId),r=BV(t,e,i),s=r,o=r.hash();for(let c=0;c<n.length;c++){let u=n[c];R(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=Qn(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}let a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{VV(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){let d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(Dc(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();B_(t,JT(t.transactionQueueTree_,e)),ZT(t,t.transactionQueueTree_),xa(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)Lh(d[h])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{On("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}eS(t,e)}},o)}function eS(t,e){let n=jV(t,e),i=Bh(n),r=UV(t,n);return ree(t,r,i),i}function ree(t,e,n){if(e.length===0)return;let i=[],r=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let l=e[a],c=Qn(n,l.path),u=!1,d;if(R(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,d=l.abortReason,r=r.concat(Dc(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=QZ)u=!0,d="maxretry",r=r.concat(Dc(t.serverSyncTree_,l.currentWriteId,!0));else{let h=BV(t,l.path,o);l.currentInputSnapshot=h;let p=e[a].update(h.val());if(p!==void 0){FV("transaction failed: Data returned ",p,l.path);let f=zt(p);typeof p=="object"&&p!=null&&nr(p,".priority")||(f=f.updatePriority(h.getPriority()));let g=l.currentWriteId,w=LV(t),O=LZ(f,h,w);l.currentOutputSnapshotRaw=f,l.currentOutputSnapshotResolved=O,l.currentWriteId=eee(t),o.splice(o.indexOf(g),1),r=r.concat(AZ(t.serverSyncTree_,l.path,O,l.currentWriteId,l.applyLocally)),r=r.concat(Dc(t.serverSyncTree_,g,!0))}else u=!0,d="nodata",r=r.concat(Dc(t.serverSyncTree_,l.currentWriteId,!0))}xa(t.eventQueue_,n,r),r=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(d),!1,null))))}B_(t,t.transactionQueueTree_);for(let a=0;a<i.length;a++)Lh(i[a]);ZT(t,t.transactionQueueTree_)}function jV(t,e){let n,i=t.transactionQueueTree_;for(n=Ee(e);n!==null&&Vc(i)===void 0;)i=JT(i,n),e=We(e),n=Ee(e);return i}function UV(t,e){let n=[];return zV(t,e,n),n.sort((i,r)=>i.order-r.order),n}function zV(t,e,n){let i=Vc(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);V_(e,r=>{zV(t,r,n)})}function B_(t,e){let n=Vc(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,RV(e,n.length>0?n:void 0)}V_(e,i=>{B_(t,i)})}function see(t,e){let n=Bh(jV(t,e)),i=JT(t.transactionQueueTree_,e);return BZ(i,r=>{JC(t,r)}),JC(t,i),PV(i,r=>{JC(t,r)}),n}function JC(t,e){let n=Vc(e);if(n){let i=[],r=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(R(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(R(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(Dc(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&i.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?RV(e,void 0):n.length=s+1,xa(t.eventQueue_,Bh(e),r);for(let o=0;o<i.length;o++)Lh(i[o])}}function oee(t){let e="",n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function aee(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):On(`Invalid query segment '${n}' in query '${t}'`)}return e}var PL=function(t,e){let n=lee(t),i=n.namespace;n.domain==="firebase.com"&&Qr(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&Qr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||nX();let r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new C_(n.host,n.secure,i,r,e,"",i!==n.subdomain),path:new je(n.pathString)}},lee=function(t){let e="",n="",i="",r="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(r=oee(t.substring(u,d)));let h=aee(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;let p=e.slice(0,c);if(p.toLowerCase()==="localhost")n="localhost";else if(p.split(".").length<=2)n=p;else{let f=e.indexOf(".");i=e.substring(0,f).toLowerCase(),n=e.substring(f+1),s=i}"ns"in h&&(s=h.ns)}return{host:e,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};var OL="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Qwe=function(){let t=0,e=[];return function(n){let i=n===t;t=n;let r,s=new Array(8);for(r=7;r>=0;r--)s[r]=OL.charAt(n%64),n=Math.floor(n/64);R(n===0,"Cannot push at time == 0");let o=s.join("");if(i){for(r=11;r>=0&&e[r]===63;r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(Math.random()*64);for(r=0;r<12;r++)o+=OL.charAt(e[r]);return R(o.length===20,"nextPushId: Length should be 20."),o}}();var BT=class t{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return be(this._path)?null:nV(this._path)}get ref(){return new Fc(this._repo,this._path)}get _queryIdentifier(){let e=bL(this._queryParams),n=$T(e);return n==="{}"?"default":n}get _queryObject(){return bL(this._queryParams)}isEqual(e){if(e=wi(e),!(e instanceof t))return!1;let n=this._repo===e._repo,i=sV(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+PX(this._path)}};var Fc=class t extends BT{constructor(e,n){super(e,n,new vT,!1)}get parent(){let e=rV(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};DZ(Fc);xZ(Fc);var cee="FIREBASE_DATABASE_EMULATOR_HOST",jT={},uee=!1;function dee(t,e,n,i){t.repoInfo_=new C_(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function hee(t,e,n,i,r){let s=i||t.options.databaseURL;s===void 0&&(t.options.projectId||Qr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ut("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=PL(s,r),a=o.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[cee]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=PL(s,r),a=o.repoInfo):l=!o.repoInfo.secure;let u=r&&l?new Ah(Ah.OWNER):new iT(t.name,t.options,e);WZ("Invalid Firebase Database URL",o),be(o.path)||Qr("Database URL must point to the root of a Firebase Database (not including a child path).");let d=pee(a,t,u,new nT(t.name,n));return new UT(d,t)}function fee(t,e){let n=jT[e];(!n||n[t.key]!==t)&&Qr(`Database ${e}(${t.repoInfo_}) has already been deleted.`),nee(t),delete n[t.key]}function pee(t,e,n,i){let r=jT[e.name];r||(r={},jT[e.name]=r);let s=r[t.toURLString()];return s&&Qr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new VT(t,uee,n,i),r[t.toURLString()]=s,s}var UT=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(JZ(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Fc(this._repo,Pe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(fee(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Qr("Cannot call "+e+" on a deleted database.")}};function $V(t=zs(),e){let n=ua(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let i=pg("database");i&&HV(n,...i)}return n}function HV(t,e,n,i={}){t=wi(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Qr("Cannot call useEmulator() after instance has already been initialized.");let r=t._repoInternal,s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Qr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ah(Ah.OWNER);else if(i.mockUserToken){let o=typeof i.mockUserToken=="string"?i.mockUserToken:mg(i.mockUserToken,t.app.options.projectId);s=new Ah(o)}dee(r,e,n,s)}function mee(t){ZJ(or),sr(new gn("database",(e,{instanceIdentifier:n})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return hee(i,r,s,n)},"PUBLIC").setMultipleInstances(!0)),Ye(nL,iL,t),Ye(nL,iL,"esm2017")}WT.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};WT.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};mee();var jh=class{constructor(e){return e}},WV="database",tS=class{constructor(){return ha(WV)}};var nS=new M("angularfire2.database-instances");function gee(t,e){let n=fc(WV,t,e);return n&&new jh(n)}function _ee(t){return(e,n)=>{let i=e.runOutsideAngular(()=>t(n));return new jh(i)}}var yee={provide:tS,deps:[[new Xe,nS]]},vee={provide:jh,useFactory:gee,deps:[[new Xe,nS],Ei]},bee=(()=>{class t{constructor(){Ye("angularfire",$r.full,"rtdb")}static \u0275fac=function(i){return new(i||t)};static \u0275mod=H({type:t});static \u0275inj=$({providers:[vee,yee]})}return t})();function qV(t,...e){return{ngModule:bee,providers:[{provide:nS,useFactory:_ee(t),multi:!0,deps:[L,Se,Hs,Hr,[new Xe,ga],[new Xe,$s],...e]}]}}var GV=Ws($V,!0);var KV=t=>typeof t>"u"||t===null,wee=t=>t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`),Eee=t=>{let e={};return Object.keys(t).forEach(n=>{t[n]&&(e[n]=t[n])}),e},iS=t=>{let e=Eee(t);return Object.entries(e).map(([n,i])=>`${wee(n)}:${i}`).join(";")},Bc=class extends Error{constructor(e){super(e),this.name=this.constructor.name}};function Ht(t){this.content=t}Ht.prototype={constructor:Ht,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var i=n&&n!=t?this.remove(n):this,r=i.find(t),s=i.content.slice();return r==-1?s.push(n||t,e):(s[r+1]=e,n&&(s[r]=n)),new Ht(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Ht(n)},addToStart:function(t,e){return new Ht([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Ht(n)},addBefore:function(t,e,n){var i=this.remove(e),r=i.content.slice(),s=i.find(t);return r.splice(s==-1?r.length:s,0,e,n),new Ht(r)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Ht.from(t),t.size?new Ht(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Ht.from(t),t.size?new Ht(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Ht.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Ht.from=function(t){if(t instanceof Ht)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Ht(e)};var rS=Ht;function t2(t,e,n){for(let i=0;;i++){if(i==t.childCount||i==e.childCount)return t.childCount==e.childCount?null:n;let r=t.child(i),s=e.child(i);if(r==s){n+=r.nodeSize;continue}if(!r.sameMarkup(s))return n;if(r.isText&&r.text!=s.text){for(let o=0;r.text[o]==s.text[o];o++)n++;return n}if(r.content.size||s.content.size){let o=t2(r.content,s.content,n+1);if(o!=null)return o}n+=r.nodeSize}}function n2(t,e,n,i){for(let r=t.childCount,s=e.childCount;;){if(r==0||s==0)return r==s?null:{a:n,b:i};let o=t.child(--r),a=e.child(--s),l=o.nodeSize;if(o==a){n-=l,i-=l;continue}if(!o.sameMarkup(a))return{a:n,b:i};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,i--;return{a:n,b:i}}if(o.content.size||a.content.size){let c=n2(o.content,a.content,n-1,i-1);if(c)return c}n-=l,i-=l}}var k=class t{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let i=0;i<e.length;i++)this.size+=e[i].nodeSize}nodesBetween(e,n,i,r=0,s){for(let o=0,a=0;a<n;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&i(l,r+a,s||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,n-u),i,r+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,i,r){let s="",o=!0;return this.nodesBetween(e,n,(a,l)=>{a.isText?(s+=a.text.slice(Math.max(e,l)-l,n-l),o=!i):a.isLeaf?(r?s+=typeof r=="function"?r(a):r:a.type.spec.leafText&&(s+=a.type.spec.leafText(a)),o=!i):!o&&a.isBlock&&(s+=i,o=!0)},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,i=e.firstChild,r=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(i)&&(r[r.length-1]=n.withText(n.text+i.text),s=1);s<e.content.length;s++)r.push(e.content[s]);return new t(r,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let i=[],r=0;if(n>e)for(let s=0,o=0;o<n;s++){let a=this.content[s],l=o+a.nodeSize;l>e&&((o<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,n-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,n-o-1))),i.push(a),r+=a.nodeSize),o=l}return new t(i,r)}cutByIndex(e,n){return e==n?t.empty:e==0&&n==this.content.length?this:new t(this.content.slice(e,n))}replaceChild(e,n){let i=this.content[e];if(i==n)return this;let r=this.content.slice(),s=this.size+n.nodeSize-i.nodeSize;return r[e]=n,new t(r,s)}addToStart(e){return new t([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new t(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,i=0;n<this.content.length;n++){let r=this.content[n];e(r,i,n),i+=r.nodeSize}}findDiffStart(e,n=0){return t2(this,e,n)}findDiffEnd(e,n=this.size,i=e.size){return n2(this,e,n,i)}findIndex(e,n=-1){if(e==0)return j_(0,e);if(e==this.size)return j_(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let i=0,r=0;;i++){let s=this.child(i),o=r+s.nodeSize;if(o>=e)return o==e||n>0?j_(i+1,o):j_(i,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return t.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new t(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return t.empty;let n,i=0;for(let r=0;r<e.length;r++){let s=e[r];i+=s.nodeSize,r&&s.isText&&e[r-1].sameMarkup(s)?(n||(n=e.slice(0,r)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new t(n||e,i)}static from(e){if(!e)return t.empty;if(e instanceof t)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new t([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};k.empty=new k([],0);var sS={index:0,offset:0};function j_(t,e){return sS.index=t,sS.offset=e,sS}function U_(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!U_(t[i],e[i]))return!1}else{for(let i in t)if(!(i in e)||!U_(t[i],e[i]))return!1;for(let i in e)if(!(i in t))return!1}return!0}var Me=(()=>{class t{constructor(n,i){this.type=n,this.attrs=i}addToSet(n){let i,r=!1;for(let s=0;s<n.length;s++){let o=n[s];if(this.eq(o))return n;if(this.type.excludes(o.type))i||(i=n.slice(0,s));else{if(o.type.excludes(this.type))return n;!r&&o.type.rank>this.type.rank&&(i||(i=n.slice(0,s)),i.push(this),r=!0),i&&i.push(o)}}return i||(i=n.slice()),r||i.push(this),i}removeFromSet(n){for(let i=0;i<n.length;i++)if(this.eq(n[i]))return n.slice(0,i).concat(n.slice(i+1));return n}isInSet(n){for(let i=0;i<n.length;i++)if(this.eq(n[i]))return!0;return!1}eq(n){return this==n||this.type==n.type&&U_(this.attrs,n.attrs)}toJSON(){let n={type:this.type.name};for(let i in this.attrs){n.attrs=this.attrs;break}return n}static fromJSON(n,i){if(!i)throw new RangeError("Invalid input for Mark.fromJSON");let r=n.marks[i.type];if(!r)throw new RangeError(`There is no mark type ${i.type} in this schema`);return r.create(i.attrs)}static sameSet(n,i){if(n==i)return!0;if(n.length!=i.length)return!1;for(let r=0;r<n.length;r++)if(!n[r].eq(i[r]))return!1;return!0}static setFrom(n){if(!n||Array.isArray(n)&&n.length==0)return t.none;if(n instanceof t)return[n];let i=n.slice();return i.sort((r,s)=>r.type.rank-s.type.rank),i}}return t.none=[],t})(),ka=class extends Error{},P=class t{constructor(e,n,i){this.content=e,this.openStart=n,this.openEnd=i}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let i=r2(this.content,e+this.openStart,n);return i&&new t(i,this.openStart,this.openEnd)}removeBetween(e,n){return new t(i2(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return t.empty;let i=n.openStart||0,r=n.openEnd||0;if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new t(k.fromJSON(e,n.content),i,r)}static maxOpen(e,n=!0){let i=0,r=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)i++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)r++;return new t(e,i,r)}};P.empty=new P(k.empty,0,0);function i2(t,e,n){let{index:i,offset:r}=t.findIndex(e),s=t.maybeChild(i),{index:o,offset:a}=t.findIndex(n);if(r==e||s.isText){if(a!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(i!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(i,s.copy(i2(s.content,e-r-1,n-r-1)))}function r2(t,e,n,i){let{index:r,offset:s}=t.findIndex(e),o=t.maybeChild(r);if(s==e||o.isText)return i&&!i.canReplace(r,r,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=r2(o.content,e-s-1,n);return a&&t.replaceChild(r,o.copy(a))}function Iee(t,e,n){if(n.openStart>t.depth)throw new ka("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new ka("Inconsistent open depths");return s2(t,e,n,0)}function s2(t,e,n,i){let r=t.index(i),s=t.node(i);if(r==e.index(i)&&i<t.depth-n.openStart){let o=s2(t,e,n,i+1);return s.copy(s.content.replaceChild(r,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==i&&e.depth==i){let o=t.parent,a=o.content;return Ma(o,a.cut(0,t.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=Cee(n,t);return Ma(s,a2(t,o,a,e,i))}else return Ma(s,z_(t,e,i))}function o2(t,e){if(!e.type.compatibleContent(t.type))throw new ka("Cannot join "+e.type.name+" onto "+t.type.name)}function cS(t,e,n){let i=t.node(n);return o2(i,e.node(n)),i}function Aa(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Uh(t,e,n,i){let r=(e||t).node(n),s=0,o=e?e.index(n):r.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(Aa(t.nodeAfter,i),s++));for(let a=s;a<o;a++)Aa(r.child(a),i);e&&e.depth==n&&e.textOffset&&Aa(e.nodeBefore,i)}function Ma(t,e){return t.type.checkContent(e),t.copy(e)}function a2(t,e,n,i,r){let s=t.depth>r&&cS(t,e,r+1),o=i.depth>r&&cS(n,i,r+1),a=[];return Uh(null,t,r,a),s&&o&&e.index(r)==n.index(r)?(o2(s,o),Aa(Ma(s,a2(t,e,n,i,r+1)),a)):(s&&Aa(Ma(s,z_(t,e,r+1)),a),Uh(e,n,r,a),o&&Aa(Ma(o,z_(n,i,r+1)),a)),Uh(i,null,r,a),new k(a)}function z_(t,e,n){let i=[];if(Uh(null,t,n,i),t.depth>n){let r=cS(t,e,n+1);Aa(Ma(r,z_(t,e,n+1)),i)}return Uh(e,null,n,i),new k(i)}function Cee(t,e){let n=e.depth-t.openStart,r=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)r=e.node(s).copy(k.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}var $_=class t{constructor(e,n,i){this.pos=e,this.path=n,this.parentOffset=i,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let i=this.pos-this.path[this.path.length-1],r=e.child(n);return i?e.child(n).cut(i):r}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let i=this.path[n*3],r=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)r+=i.child(s).nodeSize;return r}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Me.none;if(this.textOffset)return e.child(n).marks;let i=e.maybeChild(n-1),r=e.maybeChild(n);if(!i){let a=i;i=r,r=a}let s=i.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!r||!s[o].isInSet(r.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let i=n.marks,r=e.parent.maybeChild(e.index());for(var s=0;s<i.length;s++)i[s].type.spec.inclusive===!1&&(!r||!i[s].isInSet(r.marks))&&(i=i[s--].removeFromSet(i));return i}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let i=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);i>=0;i--)if(e.pos<=this.end(i)&&(!n||n(this.node(i))))return new Ra(this,e,i);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let i=[],r=0,s=n;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(s),c=s-l;if(i.push(o,a,r+l),!c||(o=o.child(a),o.isText))break;s=c-1,r+=l+1}return new t(n,i,s)}static resolveCached(e,n){for(let r=0;r<oS.length;r++){let s=oS[r];if(s.pos==n&&s.doc==e)return s}let i=oS[aS]=t.resolve(e,n);return aS=(aS+1)%Tee,i}},oS=[],aS=0,Tee=12,Ra=class{constructor(e,n,i){this.$from=e,this.$to=n,this.depth=i}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}},See=Object.create(null),fr=class t{constructor(e,n,i,r=Me.none){this.type=e,this.attrs=n,this.marks=r,this.content=i||k.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,i,r=0){this.content.nodesBetween(e,n,i,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,i,r){return this.content.textBetween(e,n,i,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,i){return this.type==e&&U_(this.attrs,n||e.defaultAttrs||See)&&Me.sameSet(this.marks,i||Me.none)}copy(e=null){return e==this.content?this:new t(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new t(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,i=!1){if(e==n)return P.empty;let r=this.resolve(e),s=this.resolve(n),o=i?0:r.sharedDepth(n),a=r.start(o),c=r.node(o).content.cut(r.pos-a,s.pos-a);return new P(c,r.depth-o,s.depth-o)}replace(e,n,i){return Iee(this.resolve(e),this.resolve(n),i)}nodeAt(e){for(let n=this;;){let{index:i,offset:r}=n.content.findIndex(e);if(n=n.maybeChild(i),!n)return null;if(r==e||n.isText)return n;e-=r+1}}childAfter(e){let{index:n,offset:i}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:i}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:i}=this.content.findIndex(e);if(i<e)return{node:this.content.child(n),index:n,offset:i};let r=this.content.child(n-1);return{node:r,index:n-1,offset:i-r.nodeSize}}resolve(e){return $_.resolveCached(this,e)}resolveNoCache(e){return $_.resolve(this,e)}rangeHasMark(e,n,i){let r=!1;return n>e&&this.nodesBetween(e,n,s=>(i.isInSet(s.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),l2(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,i=k.empty,r=0,s=i.childCount){let o=this.contentMatchAt(e).matchFragment(i,r,s),a=o&&o.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=r;l<s;l++)if(!this.type.allowsMarks(i.child(l).marks))return!1;return!0}canReplaceWith(e,n,i,r){if(r&&!this.type.allowsMarks(r))return!1;let s=this.contentMatchAt(e).matchType(i),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content);let e=Me.none;for(let n=0;n<this.marks.length;n++)e=this.marks[n].addToSet(e);if(!Me.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let i=null;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,i)}let r=k.fromJSON(e,n.content);return e.nodeType(n.type).create(n.attrs,r,i)}};fr.prototype.text=void 0;var uS=class t extends fr{constructor(e,n,i,r){if(super(e,n,null,r),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):l2(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new t(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new t(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}};function l2(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var Na=class t{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let i=new dS(e,n);if(i.next==null)return t.empty;let r=c2(i);i.next&&i.err("Unexpected trailing text");let s=Nee(Ree(r));return Pee(s,i),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,i=e.childCount){let r=this;for(let s=n;r&&s<i;s++)r=r.matchType(e.child(s).type);return r}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let i=0;i<e.next.length;i++)if(this.next[n].type==e.next[i].type)return!0;return!1}fillBefore(e,n=!1,i=0){let r=[this];function s(o,a){let l=o.matchFragment(e,i);if(l&&(!n||l.validEnd))return k.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:d}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&r.indexOf(d)==-1){r.push(d);let h=s(d,a.concat(u));if(h)return h}}return null}return s(this,[])}findWrapping(e){for(let i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==e)return this.wrapCache[i+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),i=[{match:this,type:null,via:null}];for(;i.length;){let r=i.shift(),s=r.match;if(s.matchType(e)){let o=[];for(let a=r;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:a,next:l}=s.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!r.type||l.validEnd)&&(i.push({match:a.contentMatch,type:a,via:r}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(i){e.push(i);for(let r=0;r<i.next.length;r++)e.indexOf(i.next[r].next)==-1&&n(i.next[r].next)}return n(this),e.map((i,r)=>{let s=r+(i.validEnd?"*":" ")+" ";for(let o=0;o<i.next.length;o++)s+=(o?", ":"")+i.next[o].type.name+"->"+e.indexOf(i.next[o].next);return s}).join(`
`)}};Na.empty=new Na(!0);var dS=class{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}};function c2(t){let e=[];do e.push(Dee(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Dee(t){let e=[];do e.push(xee(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function xee(t){let e=kee(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=Aee(t,e);else break;return e}function YV(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function Aee(t,e){let n=YV(t),i=n;return t.eat(",")&&(t.next!="}"?i=YV(t):i=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:i,expr:e}}function Mee(t,e){let n=t.nodeTypes,i=n[e];if(i)return[i];let r=[];for(let s in n){let o=n[s];o.groups.indexOf(e)>-1&&r.push(o)}return r.length==0&&t.err("No node type or group '"+e+"' found"),r}function kee(t){if(t.eat("(")){let e=c2(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=Mee(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Ree(t){let e=[[]];return r(s(t,0),n()),e;function n(){return e.push([])-1}function i(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function r(o,a){o.forEach(l=>l.to=a)}function s(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(s(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=s(o.exprs[l],a);if(l==o.exprs.length-1)return c;r(c,a=n())}else if(o.type=="star"){let l=n();return i(a,l),r(s(o.expr,l),l),[i(l)]}else if(o.type=="plus"){let l=n();return r(s(o.expr,a),l),r(s(o.expr,l),l),[i(l)]}else{if(o.type=="opt")return[i(a)].concat(s(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=n();r(s(o.expr,l),u),l=u}if(o.max==-1)r(s(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=n();i(l,u),r(s(o.expr,l),u),l=u}return[i(l)]}else{if(o.type=="name")return[i(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function u2(t,e){return e-t}function QV(t,e){let n=[];return i(e),n.sort(u2);function i(r){let s=t[r];if(s.length==1&&!s[0].term)return i(s[0].to);n.push(r);for(let o=0;o<s.length;o++){let{term:a,to:l}=s[o];!a&&n.indexOf(l)==-1&&i(l)}}}function Nee(t){let e=Object.create(null);return n(QV(t,0));function n(i){let r=[];i.forEach(o=>{t[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<r.length;u++)r[u][0]==a&&(c=r[u][1]);QV(t,l).forEach(u=>{c||r.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[i.join(",")]=new Na(i.indexOf(t.length-1)>-1);for(let o=0;o<r.length;o++){let a=r[o][1].sort(u2);s.next.push({type:r[o][0],next:e[a.join(",")]||n(a)})}return s}}function Pee(t,e){for(let n=0,i=[t];n<i.length;n++){let r=i[n],s=!r.validEnd,o=[];for(let a=0;a<r.next.length;a++){let{type:l,next:c}=r.next[a];o.push(l.name),s&&!(l.isText||l.hasRequiredAttrs())&&(s=!1),i.indexOf(c)==-1&&i.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function d2(t){let e=Object.create(null);for(let n in t){let i=t[n];if(!i.hasDefault)return null;e[n]=i.default}return e}function h2(t,e){let n=Object.create(null);for(let i in t){let r=e&&e[i];if(r===void 0){let s=t[i];if(s.hasDefault)r=s.default;else throw new RangeError("No value supplied for attribute "+i)}n[i]=r}return n}function f2(t){let e=Object.create(null);if(t)for(let n in t)e[n]=new hS(t[n]);return e}var H_=class t{constructor(e,n,i){this.name=e,this.schema=n,this.spec=i,this.markSet=null,this.groups=i.group?i.group.split(" "):[],this.attrs=f2(i.attrs),this.defaultAttrs=d2(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(i.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Na.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:h2(this.attrs,e)}create(e=null,n,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new fr(this,this.computeAttrs(e),k.from(n),Me.setFrom(i))}createChecked(e=null,n,i){return n=k.from(n),this.checkContent(n),new fr(this,this.computeAttrs(e),n,Me.setFrom(i))}createAndFill(e=null,n,i){if(e=this.computeAttrs(e),n=k.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let r=this.contentMatch.matchFragment(n),s=r&&r.fillBefore(k.empty,!0);return s?new fr(this,e,n.append(s),Me.setFrom(i)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let i=0;i<e.childCount;i++)if(!this.allowsMarks(e.child(i).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let i=0;i<e.length;i++)this.allowsMarkType(e[i].type)?n&&n.push(e[i]):n||(n=e.slice(0,i));return n?n.length?n:Me.none:e}static compile(e,n){let i=Object.create(null);e.forEach((s,o)=>i[s]=new t(s,n,o));let r=n.spec.topNode||"doc";if(!i[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(let s in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}},hS=class{constructor(e){this.hasDefault=Object.prototype.hasOwnProperty.call(e,"default"),this.default=e.default}get isRequired(){return!this.hasDefault}},$h=class t{constructor(e,n,i,r){this.name=e,this.rank=n,this.schema=i,this.spec=r,this.attrs=f2(r.attrs),this.excluded=null;let s=d2(this.attrs);this.instance=s?new Me(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Me(this,h2(this.attrs,e))}static compile(e,n){let i=Object.create(null),r=0;return e.forEach((s,o)=>i[s]=new t(s,r++,n,o)),i}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}excludes(e){return this.excluded.indexOf(e)>-1}},W_=class{constructor(e){this.cached=Object.create(null);let n=this.spec={};for(let r in e)n[r]=e[r];n.nodes=rS.from(e.nodes),n.marks=rS.from(e.marks||{}),this.nodes=H_.compile(this.spec.nodes,this),this.marks=$h.compile(this.spec.marks,this);let i=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let s=this.nodes[r],o=s.spec.content||"",a=s.spec.marks;s.contentMatch=i[o]||(i[o]=Na.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.markSet=a=="_"?null:a?JV(this,a.split(" ")):a==""||!s.inlineContent?[]:null}for(let r in this.marks){let s=this.marks[r],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:JV(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,i,r){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof H_){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,i,r)}text(e,n){let i=this.nodes.text;return new uS(i,i.defaultAttrs,e,Me.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return fr.fromJSON(this,e)}markFromJSON(e){return Me.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}};function JV(t,e){let n=[];for(let i=0;i<e.length;i++){let r=e[i],s=t.marks[r],o=s;if(s)n.push(s);else for(let a in t.marks){let l=t.marks[a];(r=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(r)>-1)&&n.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[i]+"'")}return n}var to=class t{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[],n.forEach(i=>{i.tag?this.tags.push(i):i.style&&this.styles.push(i)}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let r=e.nodes[i.node];return r.contentMatch.matchType(r)})}parse(e,n={}){let i=new K_(this,n,!1);return i.addAll(e,n.from,n.to),i.finish()}parseSlice(e,n={}){let i=new K_(this,n,!0);return i.addAll(e,n.from,n.to),P.maxOpen(i.finish())}matchTag(e,n,i){for(let r=i?this.tags.indexOf(i)+1:0;r<this.tags.length;r++){let s=this.tags[r];if(Lee(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,i,r){for(let s=r?this.styles.indexOf(r)+1:0;s<this.styles.length;s++){let o=this.styles[s],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!i.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(o.getAttrs){let l=o.getAttrs(n);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let n=[];function i(r){let s=r.priority==null?50:r.priority,o=0;for(;o<n.length;o++){let a=n[o];if((a.priority==null?50:a.priority)<s)break}n.splice(o,0,r)}for(let r in e.marks){let s=e.marks[r].spec.parseDOM;s&&s.forEach(o=>{i(o=ZV(o)),o.mark||o.ignore||o.clearMark||(o.mark=r)})}for(let r in e.nodes){let s=e.nodes[r].spec.parseDOM;s&&s.forEach(o=>{i(o=ZV(o)),o.node||o.ignore||o.mark||(o.node=r)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new t(e,t.schemaRules(e)))}},p2={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Oee={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},m2={ol:!0,ul:!0},q_=1,G_=2,zh=4;function XV(t,e,n){return e!=null?(e?q_:0)|(e==="full"?G_:0):t&&t.whitespace=="pre"?q_|G_:n&~zh}var jc=class{constructor(e,n,i,r,s,o,a){this.type=e,this.attrs=n,this.marks=i,this.pendingMarks=r,this.solid=s,this.options=a,this.content=[],this.activeMarks=Me.none,this.stashMarks=[],this.match=o||(a&zh?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(k.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let i=this.type.contentMatch,r;return(r=i.findWrapping(e.type))?(this.match=i,r):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&q_)){let i=this.content[this.content.length-1],r;if(i&&i.isText&&(r=/[ \t\r\n\u000c]+$/.exec(i.text))){let s=i;i.text.length==r[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-r[0].length))}}let n=k.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(k.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}popFromStashMark(e){for(let n=this.stashMarks.length-1;n>=0;n--)if(e.eq(this.stashMarks[n]))return this.stashMarks.splice(n,1)[0]}applyPending(e){for(let n=0,i=this.pendingMarks;n<i.length;n++){let r=i[n];(this.type?this.type.allowsMarkType(r.type):Bee(r.type,e))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!p2.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},K_=class{constructor(e,n,i){this.parser=e,this.options=n,this.isOpen=i,this.open=0;let r=n.topNode,s,o=XV(null,n.preserveWhitespace,0)|(i?zh:0);r?s=new jc(r.type,r.attrs,Me.none,Me.none,!0,n.topMatch||r.type.contentMatch,o):i?s=new jc(null,null,Me.none,Me.none,!0,null,o):s=new jc(e.schema.topNodeType,null,Me.none,Me.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e){e.nodeType==3?this.addTextNode(e):e.nodeType==1&&this.addElement(e)}withStyleRules(e,n){let i=e.getAttribute("style");if(!i)return n();let r=this.readStyles(Vee(i));if(!r)return;let[s,o]=r,a=this.top;for(let l=0;l<o.length;l++)this.removePendingMark(o[l],a);for(let l=0;l<s.length;l++)this.addPendingMark(s[l]);n();for(let l=0;l<s.length;l++)this.removePendingMark(s[l],a);for(let l=0;l<o.length;l++)this.addPendingMark(o[l])}addTextNode(e){let n=e.nodeValue,i=this.top;if(i.options&G_||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(i.options&q_)i.options&G_?n=n.replace(/\r\n?/g,`
`):n=n.replace(/\r?\n|\r/g," ");else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let r=i.content[i.content.length-1],s=e.previousSibling;(!r||s&&s.nodeName=="BR"||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n)),this.findInText(e)}else this.findInside(e)}addElement(e,n){let i=e.nodeName.toLowerCase(),r;m2.hasOwnProperty(i)&&this.parser.normalizeLists&&Fee(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(r=this.parser.matchTag(e,this,n));if(s?s.ignore:Oee.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let o,a=this.top,l=this.needsBlock;if(p2.hasOwnProperty(i))a.content.length&&a.content[0].isInline&&this.open&&(this.open--,a=this.top),o=!0,a.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e);return}s&&s.skip?this.addAll(e):this.withStyleRules(e,()=>this.addAll(e)),o&&this.sync(a),this.needsBlock=l}else this.withStyleRules(e,()=>{this.addElementByRule(e,s,s.consuming===!1?r:void 0)})}leafFallback(e){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`))}ignoreFallback(e){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(e){let n=Me.none,i=Me.none;for(let r=0;r<e.length;r+=2)for(let s=void 0;;){let o=this.parser.matchStyle(e[r],e[r+1],this,s);if(!o)break;if(o.ignore)return null;if(o.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach(a=>{o.clearMark(a)&&(i=a.addToSet(i))}):n=this.parser.schema.marks[o.mark].create(o.attrs).addToSet(n),o.consuming===!1)s=o;else break}return[n,i]}addElementByRule(e,n,i){let r,s,o;n.node?(s=this.parser.schema.nodes[n.node],s.isLeaf?this.insertNode(s.create(n.attrs))||this.leafFallback(e):r=this.enter(s,n.attrs||null,n.preserveWhitespace)):(o=this.parser.schema.marks[n.mark].create(n.attrs),this.addPendingMark(o));let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(i)this.addElement(e,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l)}r&&this.sync(a)&&this.open--,o&&this.removePendingMark(o,a)}addAll(e,n,i){let r=n||0;for(let s=n?e.childNodes[n]:e.firstChild,o=i==null?null:e.childNodes[i];s!=o;s=s.nextSibling,++r)this.findAtPoint(e,r),this.addDOM(s);this.findAtPoint(e,r)}findPlace(e){let n,i;for(let r=this.open;r>=0;r--){let s=this.nodes[r],o=s.findWrapping(e);if(o&&(!n||n.length>o.length)&&(n=o,i=s,!o.length)||s.solid)break}if(!n)return!1;this.sync(i);for(let r=0;r<n.length;r++)this.enterInner(n[r],null,!1);return!0}insertNode(e){if(e.isInline&&this.needsBlock&&!this.top.type){let n=this.textblockFromContext();n&&this.enterInner(n)}if(this.findPlace(e)){this.closeExtra();let n=this.top;n.applyPending(e.type),n.match&&(n.match=n.match.matchType(e.type));let i=n.activeMarks;for(let r=0;r<e.marks.length;r++)(!n.type||n.type.allowsMarkType(e.marks[r].type))&&(i=e.marks[r].addToSet(i));return n.content.push(e.mark(i)),!0}return!1}enter(e,n,i){let r=this.findPlace(e.create(n));return r&&this.enterInner(e,n,!0,i),r}enterInner(e,n=null,i=!1,r){this.closeExtra();let s=this.top;s.applyPending(e),s.match=s.match&&s.match.matchType(e);let o=XV(e,r,s.options);s.options&zh&&s.content.length==0&&(o|=zh),this.nodes.push(new jc(e,n,s.activeMarks,s.pendingMarks,i,null,o)),this.open++}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let i=this.nodes[n].content;for(let r=i.length-1;r>=0;r--)e+=i[r].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==e&&this.find[i].offset==n&&(this.find[i].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,i){if(e!=n&&this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&n.compareDocumentPosition(this.find[r].node)&(i?2:4)&&(this.find[r].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),i=this.options.context,r=!this.isOpen&&(!i||i.parent.type==this.nodes[0].type),s=-(i?i.depth+1:0)+(r?0:1),o=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=s;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&r?this.nodes[l].type:i&&l>=s?i.node(l-s).type:null;if(!u||u.name!=c&&u.groups.indexOf(c)==-1)return!1;l--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(let n in this.parser.schema.nodes){let i=this.parser.schema.nodes[n];if(i.isTextblock&&i.defaultAttrs)return i}}addPendingMark(e){let n=jee(e,this.top.pendingMarks);n&&this.top.stashMarks.push(n),this.top.pendingMarks=e.addToSet(this.top.pendingMarks)}removePendingMark(e,n){for(let i=this.open;i>=0;i--){let r=this.nodes[i];if(r.pendingMarks.lastIndexOf(e)>-1)r.pendingMarks=e.removeFromSet(r.pendingMarks);else{r.activeMarks=e.removeFromSet(r.activeMarks);let o=r.popFromStashMark(e);o&&r.type&&r.type.allowsMarkType(o.type)&&(r.activeMarks=o.addToSet(r.activeMarks))}if(r==n)break}}};function Fee(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let i=e.nodeType==1?e.nodeName.toLowerCase():null;i&&m2.hasOwnProperty(i)&&n?(n.appendChild(e),e=n):i=="li"?n=e:i&&(n=null)}}function Lee(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Vee(t){let e=/\s*([\w-]+)\s*:\s*([^;]+)/g,n,i=[];for(;n=e.exec(t);)i.push(n[1],n[2].trim());return i}function ZV(t){let e={};for(let n in t)e[n]=t[n];return e}function Bee(t,e){let n=e.schema.nodes;for(let i in n){let r=n[i];if(!r.allowsMarkType(t))continue;let s=[],o=a=>{s.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(r.contentMatch))return!0}}function jee(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}var Jr=class t{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},i){i||(i=lS(n).createDocumentFragment());let r=i,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let a=0,l=0;for(;a<s.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(s[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<s.length;)r=s.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,n);u&&(s.push([c,r]),r.appendChild(u.dom),r=u.contentDOM||u.dom)}}r.appendChild(this.serializeNodeInner(o,n))}),i}serializeNodeInner(e,n){let{dom:i,contentDOM:r}=t.renderSpec(lS(n),this.nodes[e.type.name](e));if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,r)}return i}serializeNode(e,n={}){let i=this.serializeNodeInner(e,n);for(let r=e.marks.length-1;r>=0;r--){let s=this.serializeMark(e.marks[r],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(i),i=s.dom)}return i}serializeMark(e,n,i={}){let r=this.marks[e.type.name];return r&&t.renderSpec(lS(i),r(e,n))}static renderSpec(e,n,i=null){if(typeof n=="string")return{dom:e.createTextNode(n)};if(n.nodeType!=null)return{dom:n};if(n.dom&&n.dom.nodeType!=null)return n;let r=n[0],s=r.indexOf(" ");s>0&&(i=r.slice(0,s),r=r.slice(s+1));let o,a=i?e.createElementNS(i,r):e.createElement(r),l=n[1],c=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){c=2;for(let u in l)if(l[u]!=null){let d=u.indexOf(" ");d>0?a.setAttributeNS(u.slice(0,d),u.slice(d+1),l[u]):a.setAttribute(u,l[u])}}for(let u=c;u<n.length;u++){let d=n[u];if(d===0){if(u<n.length-1||u>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:h,contentDOM:p}=t.renderSpec(e,d,i);if(a.appendChild(h),p){if(o)throw new RangeError("Multiple content holes");o=p}}}return{dom:a,contentDOM:o}}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new t(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=e2(e.nodes);return n.text||(n.text=i=>i.text),n}static marksFromSchema(e){return e2(e.marks)}};function e2(t){let e={};for(let n in t){let i=t[n].spec.toDOM;i&&(e[n]=i)}return e}function lS(t){return t.document||window.document}var y2=65535,v2=Math.pow(2,16);function Uee(t,e){return t+e*v2}function g2(t){return t&y2}function zee(t){return(t-(t&y2))/v2}var b2=1,w2=2,Y_=4,E2=8,qh=class{constructor(e,n,i){this.pos=e,this.delInfo=n,this.recover=i}get deleted(){return(this.delInfo&E2)>0}get deletedBefore(){return(this.delInfo&(b2|Y_))>0}get deletedAfter(){return(this.delInfo&(w2|Y_))>0}get deletedAcross(){return(this.delInfo&Y_)>0}},Xr=class t{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&t.empty)return t.empty}recover(e){let n=0,i=g2(e);if(!this.inverted)for(let r=0;r<i;r++)n+=this.ranges[r*3+2]-this.ranges[r*3+1];return this.ranges[i*3]+n+zee(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,i){let r=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+s],u=this.ranges[a+o],d=l+c;if(e<=d){let h=c?e==l?-1:e==d?1:n:n,p=l+r+(h<0?0:u);if(i)return p;let f=e==(n<0?l:d)?null:Uee(a/3,e-l),m=e==l?w2:e==d?b2:Y_;return(n<0?e!=l:e!=d)&&(m|=E2),new qh(p,m,f)}r+=u-c}return i?e+r:new qh(e+r,0,null)}touches(e,n){let i=0,r=g2(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?i:0);if(l>e)break;let c=this.ranges[a+s],u=l+c;if(e<=u&&a==r*3)return!0;i+=this.ranges[a+o]-c}return!1}forEach(e){let n=this.inverted?2:1,i=this.inverted?1:2;for(let r=0,s=0;r<this.ranges.length;r+=3){let o=this.ranges[r],a=o-(this.inverted?s:0),l=o+(this.inverted?0:s),c=this.ranges[r+n],u=this.ranges[r+i];e(a,a+c,l,l+u),s+=u-c}}invert(){return new t(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?t.empty:new t(e<0?[0,-e,0]:[0,0,e])}};Xr.empty=new Xr([]);var Gh=class t{constructor(e=[],n,i=0,r=e.length){this.maps=e,this.mirror=n,this.from=i,this.to=r}slice(e=0,n=this.maps.length){return new t(this.maps,this.mirror,e,n)}copy(){return new t(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,i=this.maps.length;n<e.maps.length;n++){let r=e.getMirror(n);this.appendMap(e.maps[n],r!=null&&r<n?i+r:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,i=this.maps.length+e.maps.length;n>=0;n--){let r=e.getMirror(n);this.appendMap(e.maps[n].invert(),r!=null&&r>n?i-r-1:void 0)}}invert(){let e=new t;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let i=this.from;i<this.to;i++)e=this.maps[i].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,i){let r=0;for(let s=this.from;s<this.to;s++){let o=this.maps[s],a=o.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(s);if(l!=null&&l>s&&l<this.to){s=l,e=this.maps[l].recover(a.recover);continue}}r|=a.delInfo,e=a.pos}return i?e:new qh(e,r,null)}},fS=Object.create(null),Ct=class{getMap(){return Xr.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let i=fS[n.stepType];if(!i)throw new RangeError(`No step type ${n.stepType} defined`);return i.fromJSON(e,n)}static jsonID(e,n){if(e in fS)throw new RangeError("Duplicate use of step JSON ID "+e);return fS[e]=n,n.prototype.jsonID=e,n}},Nt=class t{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new t(e,null)}static fail(e){return new t(null,e)}static fromReplace(e,n,i,r){try{return t.ok(e.replace(n,i,r))}catch(s){if(s instanceof ka)return t.fail(s.message);throw s}}};function yS(t,e,n){let i=[];for(let r=0;r<t.childCount;r++){let s=t.child(r);s.content.size&&(s=s.copy(yS(s.content,e,s))),s.isInline&&(s=e(s,n,r)),i.push(s)}return k.fromArray(i)}var Kh=class t extends Ct{constructor(e,n,i){super(),this.from=e,this.to=n,this.mark=i}apply(e){let n=e.slice(this.from,this.to),i=e.resolve(this.from),r=i.node(i.sharedDepth(this.to)),s=new P(yS(n.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),r),n.openStart,n.openEnd);return Nt.fromReplace(e,this.from,this.to,s)}invert(){return new Pa(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return n.deleted&&i.deleted||n.pos>=i.pos?null:new t(n.pos,i.pos,this.mark)}merge(e){return e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))}};Ct.jsonID("addMark",Kh);var Pa=class t extends Ct{constructor(e,n,i){super(),this.from=e,this.to=n,this.mark=i}apply(e){let n=e.slice(this.from,this.to),i=new P(yS(n.content,r=>r.mark(this.mark.removeFromSet(r.marks)),e),n.openStart,n.openEnd);return Nt.fromReplace(e,this.from,this.to,i)}invert(){return new Kh(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return n.deleted&&i.deleted||n.pos>=i.pos?null:new t(n.pos,i.pos,this.mark)}merge(e){return e instanceof t&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new t(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new t(n.from,n.to,e.markFromJSON(n.mark))}};Ct.jsonID("removeMark",Pa);var Yh=class t extends Ct{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Nt.fail("No node at mark step's position");let i=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Nt.fromReplace(e,this.pos,this.pos+1,new P(k.from(i),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let i=this.mark.addToSet(n.marks);if(i.length==n.marks.length){for(let r=0;r<n.marks.length;r++)if(!n.marks[r].isInSet(i))return new t(this.pos,n.marks[r]);return new t(this.pos,this.mark)}}return new Qh(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new t(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new t(n.pos,e.markFromJSON(n.mark))}};Ct.jsonID("addNodeMark",Yh);var Qh=class t extends Ct{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Nt.fail("No node at mark step's position");let i=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Nt.fromReplace(e,this.pos,this.pos+1,new P(k.from(i),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Yh(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new t(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new t(n.pos,e.markFromJSON(n.mark))}};Ct.jsonID("removeNodeMark",Qh);var Fn=class t extends Ct{constructor(e,n,i,r=!1){super(),this.from=e,this.to=n,this.slice=i,this.structure=r}apply(e){return this.structure&&gS(e,this.from,this.to)?Nt.fail("Structure replace would overwrite content"):Nt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Xr([this.from,this.to-this.from,this.slice.size])}invert(e){return new t(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return n.deletedAcross&&i.deletedAcross?null:new t(n.pos,Math.max(n.pos,i.pos),this.slice)}merge(e){if(!(e instanceof t)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?P.empty:new P(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new t(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?P.empty:new P(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new t(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new t(n.from,n.to,P.fromJSON(e,n.slice),!!n.structure)}};Ct.jsonID("replace",Fn);var Tt=class t extends Ct{constructor(e,n,i,r,s,o,a=!1){super(),this.from=e,this.to=n,this.gapFrom=i,this.gapTo=r,this.slice=s,this.insert=o,this.structure=a}apply(e){if(this.structure&&(gS(e,this.from,this.gapFrom)||gS(e,this.gapTo,this.to)))return Nt.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Nt.fail("Gap is not a flat range");let i=this.slice.insertAt(this.insert,n.content);return i?Nt.fromReplace(e,this.from,this.to,i):Nt.fail("Content does not fit in gap")}getMap(){return new Xr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new t(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1),r=e.map(this.gapFrom,-1),s=e.map(this.gapTo,1);return n.deletedAcross&&i.deletedAcross||r<n.pos||s>i.pos?null:new t(n.pos,i.pos,r,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new t(n.from,n.to,n.gapFrom,n.gapTo,P.fromJSON(e,n.slice),n.insert,!!n.structure)}};Ct.jsonID("replaceAround",Tt);function gS(t,e,n){let i=t.resolve(e),r=n-e,s=i.depth;for(;r>0&&s>0&&i.indexAfter(s)==i.node(s).childCount;)s--,r--;if(r>0){let o=i.node(s).maybeChild(i.indexAfter(s));for(;r>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,r--}}return!1}function $ee(t,e,n,i){let r=[],s=[],o,a;t.doc.nodesBetween(e,n,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!i.isInSet(d)&&u.type.allowsMarkType(i.type)){let h=Math.max(c,e),p=Math.min(c+l.nodeSize,n),f=i.addToSet(d);for(let m=0;m<d.length;m++)d[m].isInSet(f)||(o&&o.to==h&&o.mark.eq(d[m])?o.to=p:r.push(o=new Pa(h,p,d[m])));a&&a.to==h?a.to=p:s.push(a=new Kh(h,p,i))}}),r.forEach(l=>t.step(l)),s.forEach(l=>t.step(l))}function Hee(t,e,n,i){let r=[],s=0;t.doc.nodesBetween(e,n,(o,a)=>{if(!o.isInline)return;s++;let l=null;if(i instanceof $h){let c=o.marks,u;for(;u=i.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else i?i.isInSet(o.marks)&&(l=[i]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,n);for(let u=0;u<l.length;u++){let d=l[u],h;for(let p=0;p<r.length;p++){let f=r[p];f.step==s-1&&d.eq(r[p].style)&&(h=f)}h?(h.to=c,h.step=s):r.push({style:d,from:Math.max(a,e),to:c,step:s})}}}),r.forEach(o=>t.step(new Pa(o.from,o.to,o.style)))}function Wee(t,e,n,i=n.contentMatch){let r=t.doc.nodeAt(e),s=[],o=e+1;for(let a=0;a<r.childCount;a++){let l=r.child(a),c=o+l.nodeSize,u=i.matchType(l.type);if(!u)s.push(new Fn(o,c,P.empty));else{i=u;for(let d=0;d<l.marks.length;d++)n.allowsMarkType(l.marks[d].type)||t.step(new Pa(o,c,l.marks[d]));if(l.isText&&!n.spec.code){let d,h=/\r?\n|\r/g,p;for(;d=h.exec(l.text);)p||(p=new P(k.from(n.schema.text(" ",n.allowedMarks(l.marks))),0,0)),s.push(new Fn(o+d.index,o+d.index+d[0].length,p))}}o=c}if(!i.validEnd){let a=i.fillBefore(k.empty,!0);t.replace(o,o,new P(a,0,0))}for(let a=s.length-1;a>=0;a--)t.step(s[a])}function qee(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Oa(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let i=t.depth;;--i){let r=t.$from.node(i),s=t.$from.index(i),o=t.$to.indexAfter(i);if(i<t.depth&&r.canReplace(s,o,n))return i;if(i==0||r.type.spec.isolating||!qee(r,s,o))break}return null}function Gee(t,e,n){let{$from:i,$to:r,depth:s}=e,o=i.before(s+1),a=r.after(s+1),l=o,c=a,u=k.empty,d=0;for(let f=s,m=!1;f>n;f--)m||i.index(f)>0?(m=!0,u=k.from(i.node(f).copy(u)),d++):l--;let h=k.empty,p=0;for(let f=s,m=!1;f>n;f--)m||r.after(f+1)<r.end(f)?(m=!0,h=k.from(r.node(f).copy(h)),p++):c++;t.step(new Tt(l,c,o,a,new P(u.append(h),d,p),u.size-d,!0))}function zc(t,e,n=null,i=t){let r=Kee(t,e),s=r&&Yee(i,e);return s?r.map(_2).concat({type:e,attrs:n}).concat(s.map(_2)):null}function _2(t){return{type:t,attrs:null}}function Kee(t,e){let{parent:n,startIndex:i,endIndex:r}=t,s=n.contentMatchAt(i).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(i,r,o)?s:null}function Yee(t,e){let{parent:n,startIndex:i,endIndex:r}=t,s=n.child(i),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=i;l&&c<r;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:o}function Qee(t,e,n){let i=k.empty;for(let o=n.length-1;o>=0;o--){if(i.size){let a=n[o].type.contentMatch.matchFragment(i);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=k.from(n[o].type.create(n[o].attrs,i))}let r=e.start,s=e.end;t.step(new Tt(r,s,r,s,new P(i,0,0),n.length,!0))}function Jee(t,e,n,i,r){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,a)=>{if(o.isTextblock&&!o.hasMarkup(i,r)&&Xee(t.doc,t.mapping.slice(s).map(a),i)){t.clearIncompatible(t.mapping.slice(s).map(a,1),i);let l=t.mapping.slice(s),c=l.map(a,1),u=l.map(a+o.nodeSize,1);return t.step(new Tt(c,u,c+1,u-1,new P(k.from(i.create(r,null,o.marks)),0,0),1,!0)),!1}})}function Xee(t,e,n){let i=t.resolve(e),r=i.index();return i.parent.canReplaceWith(r,r+1,n)}function Zee(t,e,n,i,r){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(i,null,r||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Tt(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new P(k.from(o),0,0),1,!0))}function no(t,e,n=1,i){let r=t.resolve(e),s=r.depth-n,o=i&&i[i.length-1]||r.parent;if(s<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!o.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let c=r.depth-1,u=n-2;c>s;c--,u--){let d=r.node(c),h=r.index(c);if(d.type.spec.isolating)return!1;let p=d.content.cutByIndex(h,d.childCount),f=i&&i[u+1];f&&(p=p.replaceChild(0,f.type.create(f.attrs)));let m=i&&i[u]||d;if(!d.canReplace(h+1,d.childCount)||!m.type.validContent(p))return!1}let a=r.indexAfter(s),l=i&&i[0];return r.node(s).canReplaceWith(a,a,l?l.type:r.node(s+1).type)}function ete(t,e,n=1,i){let r=t.doc.resolve(e),s=k.empty,o=k.empty;for(let a=r.depth,l=r.depth-n,c=n-1;a>l;a--,c--){s=k.from(r.node(a).copy(s));let u=i&&i[c];o=k.from(u?u.type.create(u.attrs,o):r.node(a).copy(o))}t.step(new Fn(e,e,new P(s.append(o),n,n),!0))}function Fa(t,e){let n=t.resolve(e),i=n.index();return tte(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(i,i+1)}function tte(t,e){return!!(t&&e&&!t.isLeaf&&t.canAppend(e))}function nte(t,e,n){let i=new Fn(e-n,e+n,P.empty,!0);t.step(i)}function ite(t,e,n){let i=t.resolve(e);if(i.parent.canReplaceWith(i.index(),i.index(),n))return e;if(i.parentOffset==0)for(let r=i.depth-1;r>=0;r--){let s=i.index(r);if(i.node(r).canReplaceWith(s,s,n))return i.before(r+1);if(s>0)return null}if(i.parentOffset==i.parent.content.size)for(let r=i.depth-1;r>=0;r--){let s=i.indexAfter(r);if(i.node(r).canReplaceWith(s,s,n))return i.after(r+1);if(s<i.node(r).childCount)return null}return null}function I2(t,e,n){let i=t.resolve(e);if(!n.content.size)return e;let r=n.content;for(let s=0;s<n.openStart;s++)r=r.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=i.depth;o>=0;o--){let a=o==i.depth?0:i.pos<=(i.start(o+1)+i.end(o+1))/2?-1:1,l=i.index(o)+(a>0?1:0),c=i.node(o),u=!1;if(s==1)u=c.canReplace(l,l,r);else{let d=c.contentMatchAt(l).findWrapping(r.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?i.pos:a<0?i.before(o+1):i.after(o+1)}return null}function Z_(t,e,n=e,i=P.empty){if(e==n&&!i.size)return null;let r=t.resolve(e),s=t.resolve(n);return C2(r,s,i)?new Fn(e,n,i):new _S(r,s,i).fit()}function C2(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}var _S=class{constructor(e,n,i){this.$from=e,this.$to=n,this.unplaced=i,this.frontier=[],this.placed=k.empty;for(let r=0;r<=e.depth;r++){let s=e.node(r);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(r))})}for(let r=e.depth;r>0;r--)this.placed=k.from(e.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,i=this.$from,r=this.close(e<0?this.$to:i.doc.resolve(e));if(!r)return null;let s=this.placed,o=i.depth,a=r.depth;for(;o&&a&&s.childCount==1;)s=s.firstChild.content,o--,a--;let l=new P(s,o,a);return e>-1?new Tt(i.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||i.pos!=this.$to.pos?new Fn(i.pos,r.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,i=0,r=this.unplaced.openEnd;i<e;i++){let s=n.firstChild;if(n.childCount>1&&(r=0),s.type.spec.isolating&&r<=i){e=i;break}n=s.content}for(let n=1;n<=2;n++)for(let i=n==1?e:this.unplaced.openStart;i>=0;i--){let r,s=null;i?(s=pS(this.unplaced.content,i-1).firstChild,r=s.content):r=this.unplaced.content;let o=r.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(n==1&&(o?c.matchType(o.type)||(d=c.fillBefore(k.from(o),!1)):s&&l.compatibleContent(s.type)))return{sliceDepth:i,frontierDepth:a,parent:s,inject:d};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:i,frontierDepth:a,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:i}=this.unplaced,r=pS(e,n);return!r.childCount||r.firstChild.isLeaf?!1:(this.unplaced=new P(e,n+1,Math.max(i,r.size+n>=e.size-i?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:i}=this.unplaced,r=pS(e,n);if(r.childCount<=1&&n>0){let s=e.size-n<=n+r.size;this.unplaced=new P(Hh(e,n-1,1),n-1,s?n-1:i)}else this.unplaced=new P(Hh(e,n,1),n,i)}placeNodes({sliceDepth:e,frontierDepth:n,parent:i,inject:r,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let m=0;m<s.length;m++)this.openFrontierNode(s[m]);let o=this.unplaced,a=i?i.content:o.content,l=o.openStart-e,c=0,u=[],{match:d,type:h}=this.frontier[n];if(r){for(let m=0;m<r.childCount;m++)u.push(r.child(m));d=d.matchFragment(r)}let p=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let m=a.child(c),g=d.matchType(m.type);if(!g)break;c++,(c>1||l==0||m.content.size)&&(d=g,u.push(T2(m.mark(h.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?p:-1)))}let f=c==a.childCount;f||(p=-1),this.placed=Wh(this.placed,n,k.from(u)),this.frontier[n].match=d,f&&p<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=a;m<p;m++){let w=g.lastChild;this.frontier.push({type:w.type,match:w.contentMatchAt(w.childCount)}),g=w.content}this.unplaced=f?e==0?P.empty:new P(Hh(o.content,e-1,1),e-1,p<0?o.openEnd:e-1):new P(Hh(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!mS(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:i}=this.$to,r=this.$to.after(i);for(;i>1&&r==this.$to.end(--i);)++r;return r}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:i,type:r}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=mS(e,n,r,i,s);if(o){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=mS(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Wh(this.placed,n.depth,n.fit)),e=n.move;for(let i=n.depth+1;i<=e.depth;i++){let r=e.node(i),s=r.type.contentMatch.fillBefore(r.content,!0,e.index(i));this.openFrontierNode(r.type,r.attrs,s)}return e}openFrontierNode(e,n=null,i){let r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=Wh(this.placed,this.depth,k.from(e.create(n,i))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(k.empty,!0);n.childCount&&(this.placed=Wh(this.placed,this.frontier.length,n))}};function Hh(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Hh(t.firstChild.content,e-1,n)))}function Wh(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Wh(t.lastChild.content,e-1,n)))}function pS(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function T2(t,e,n){if(e<=0)return t;let i=t.content;return e>1&&(i=i.replaceChild(0,T2(i.firstChild,e-1,i.childCount==1?n-1:0))),e>0&&(i=t.type.contentMatch.fillBefore(i).append(i),n<=0&&(i=i.append(t.type.contentMatch.matchFragment(i).fillBefore(k.empty,!0)))),t.copy(i)}function mS(t,e,n,i,r){let s=t.node(e),o=r?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let a=i.fillBefore(s.content,!0,o);return a&&!rte(n,s.content,o)?a:null}function rte(t,e,n){for(let i=n;i<e.childCount;i++)if(!t.allowsMarks(e.child(i).marks))return!0;return!1}function ste(t){return t.spec.defining||t.spec.definingForContent}function ote(t,e,n,i){if(!i.size)return t.deleteRange(e,n);let r=t.doc.resolve(e),s=t.doc.resolve(n);if(C2(r,s,i))return t.step(new Fn(e,n,i));let o=D2(r,t.doc.resolve(n));o[o.length-1]==0&&o.pop();let a=-(r.depth+1);o.unshift(a);for(let h=r.depth,p=r.pos-1;h>0;h--,p--){let f=r.node(h).type.spec;if(f.defining||f.definingAsContext||f.isolating)break;o.indexOf(h)>-1?a=h:r.before(h)==p&&o.splice(1,0,-h)}let l=o.indexOf(a),c=[],u=i.openStart;for(let h=i.content,p=0;;p++){let f=h.firstChild;if(c.push(f),p==i.openStart)break;h=f.content}for(let h=u-1;h>=0;h--){let p=c[h],f=ste(p.type);if(f&&!p.sameMarkup(r.node(Math.abs(a)-1)))u=h;else if(f||!p.type.isTextblock)break}for(let h=i.openStart;h>=0;h--){let p=(h+u+1)%(i.openStart+1),f=c[p];if(f)for(let m=0;m<o.length;m++){let g=o[(m+l)%o.length],w=!0;g<0&&(w=!1,g=-g);let O=r.node(g-1),Y=r.index(g-1);if(O.canReplaceWith(Y,Y,f.type,f.marks))return t.replace(r.before(g),w?s.after(g):n,new P(S2(i.content,0,i.openStart,p),p,i.openEnd))}}let d=t.steps.length;for(let h=o.length-1;h>=0&&(t.replace(e,n,i),!(t.steps.length>d));h--){let p=o[h];p<0||(e=r.before(p),n=s.after(p))}}function S2(t,e,n,i,r){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(S2(s.content,e+1,n,i,s)))}if(e>i){let s=r.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(k.empty,!0))}return t}function ate(t,e,n,i){if(!i.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let r=ite(t.doc,e,i.type);r!=null&&(e=n=r)}t.replaceRange(e,n,new P(k.from(i),0,0))}function lte(t,e,n){let i=t.doc.resolve(e),r=t.doc.resolve(n),s=D2(i,r);for(let o=0;o<s.length;o++){let a=s[o],l=o==s.length-1;if(l&&a==0||i.node(a).type.contentMatch.validEnd)return t.delete(i.start(a),r.end(a));if(a>0&&(l||i.node(a-1).canReplace(i.index(a-1),r.indexAfter(a-1))))return t.delete(i.before(a),r.after(a))}for(let o=1;o<=i.depth&&o<=r.depth;o++)if(e-i.start(o)==i.depth-o&&n>i.end(o)&&r.end(o)-n!=r.depth-o)return t.delete(i.before(o),n);t.delete(e,n)}function D2(t,e){let n=[],i=Math.min(t.depth,e.depth);for(let r=i;r>=0;r--){let s=t.start(r);if(s<t.pos-(t.depth-r)||e.end(r)>e.pos+(e.depth-r)||t.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;(s==e.start(r)||r==t.depth&&r==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&r&&e.start(r-1)==s-1)&&n.push(r)}return n}var Q_=class t extends Ct{constructor(e,n,i){super(),this.pos=e,this.attr=n,this.value=i}apply(e){let n=e.nodeAt(this.pos);if(!n)return Nt.fail("No node at attribute step's position");let i=Object.create(null);for(let s in n.attrs)i[s]=n.attrs[s];i[this.attr]=this.value;let r=n.type.create(i,null,n.marks);return Nt.fromReplace(e,this.pos,this.pos+1,new P(k.from(r),0,n.isLeaf?0:1))}getMap(){return Xr.empty}invert(e){return new t(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new t(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new t(n.pos,n.attr,n.value)}};Ct.jsonID("attr",Q_);var J_=class t extends Ct{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let r in e.attrs)n[r]=e.attrs[r];n[this.attr]=this.value;let i=e.type.create(n,e.content,e.marks);return Nt.ok(i)}getMap(){return Xr.empty}invert(e){return new t(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new t(n.attr,n.value)}};Ct.jsonID("docAttr",J_);var Uc=class extends Error{};Uc=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Uc.prototype=Object.create(Error.prototype);Uc.prototype.constructor=Uc;Uc.prototype.name="TransformError";var X_=class{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Gh}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Uc(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,i=P.empty){let r=Z_(this.doc,e,n,i);return r&&this.step(r),this}replaceWith(e,n,i){return this.replace(e,n,new P(k.from(i),0,0))}delete(e,n){return this.replace(e,n,P.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,i){return ote(this,e,n,i),this}replaceRangeWith(e,n,i){return ate(this,e,n,i),this}deleteRange(e,n){return lte(this,e,n),this}lift(e,n){return Gee(this,e,n),this}join(e,n=1){return nte(this,e,n),this}wrap(e,n){return Qee(this,e,n),this}setBlockType(e,n=e,i,r=null){return Jee(this,e,n,i,r),this}setNodeMarkup(e,n,i=null,r){return Zee(this,e,n,i,r),this}setNodeAttribute(e,n,i){return this.step(new Q_(e,n,i)),this}setDocAttribute(e,n){return this.step(new J_(e,n)),this}addNodeMark(e,n){return this.step(new Yh(e,n)),this}removeNodeMark(e,n){if(!(n instanceof Me)){let i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at position "+e);if(n=n.isInSet(i.marks),!n)return this}return this.step(new Qh(e,n)),this}split(e,n=1,i){return ete(this,e,n,i),this}addMark(e,n,i){return $ee(this,e,n,i),this}removeMark(e,n,i){return Hee(this,e,n,i),this}clearIncompatible(e,n,i){return Wee(this,e,n,i),this}};var vS=Object.create(null),pe=class{constructor(e,n,i){this.$anchor=e,this.$head=n,this.ranges=i||[new wS(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=P.empty){let i=n.content.lastChild,r=null;for(let a=0;a<n.openEnd;a++)r=i,i=i.lastChild;let s=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(s);e.replaceRange(u.map(l.pos),u.map(c.pos),a?P.empty:n),a==0&&M2(e,s,(i?i.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,n){let i=e.steps.length,r=this.ranges;for(let s=0;s<r.length;s++){let{$from:o,$to:a}=r[s],l=e.mapping.slice(i),c=l.map(o.pos),u=l.map(a.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),M2(e,i,n.isInline?-1:1))}}static findFrom(e,n,i=!1){let r=e.parent.inlineContent?new Oe(e):$c(e.node(0),e.parent,e.pos,e.index(),n,i);if(r)return r;for(let s=e.depth-1;s>=0;s--){let o=n<0?$c(e.node(0),e.node(s),e.before(s+1),e.index(s),n,i):$c(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,i);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Ln(e.node(0))}static atStart(e){return $c(e,e,0,0,1)||new Ln(e)}static atEnd(e){return $c(e,e,e.content.size,e.childCount,-1)||new Ln(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let i=vS[n.type];if(!i)throw new RangeError(`No selection type ${n.type} defined`);return i.fromJSON(e,n)}static jsonID(e,n){if(e in vS)throw new RangeError("Duplicate use of selection JSON ID "+e);return vS[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Oe.between(this.$anchor,this.$head).getBookmark()}};pe.prototype.visible=!0;var wS=class{constructor(e,n){this.$from=e,this.$to=n}},x2=!1;function A2(t){!x2&&!t.parent.inlineContent&&(x2=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}var Oe=class t extends pe{constructor(e,n=e){A2(e),A2(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let i=e.resolve(n.map(this.head));if(!i.parent.inlineContent)return pe.near(i);let r=e.resolve(n.map(this.anchor));return new t(r.parent.inlineContent?r:i,i)}replace(e,n=P.empty){if(super.replace(e,n),n==P.empty){let i=this.$from.marksAcross(this.$to);i&&e.ensureMarks(i)}}eq(e){return e instanceof t&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new ty(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new t(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,i=n){let r=e.resolve(n);return new this(r,i==n?r:e.resolve(i))}static between(e,n,i){let r=e.pos-n.pos;if((!i||r)&&(i=r>=0?1:-1),!n.parent.inlineContent){let s=pe.findFrom(n,i,!0)||pe.findFrom(n,-i,!0);if(s)n=s.$head;else return pe.near(n,i)}return e.parent.inlineContent||(r==0?e=n:(e=(pe.findFrom(e,-i,!0)||pe.findFrom(e,i,!0)).$anchor,e.pos<n.pos!=r<0&&(e=n))),new t(e,n)}};pe.jsonID("text",Oe);var ty=class t{constructor(e,n){this.anchor=e,this.head=n}map(e){return new t(e.map(this.anchor),e.map(this.head))}resolve(e){return Oe.between(e.resolve(this.anchor),e.resolve(this.head))}},ee=class t extends pe{constructor(e){let n=e.nodeAfter,i=e.node(0).resolve(e.pos+n.nodeSize);super(e,i),this.node=n}map(e,n){let{deleted:i,pos:r}=n.mapResult(this.anchor),s=e.resolve(r);return i?pe.near(s):new t(s)}content(){return new P(k.from(this.node),0,0)}eq(e){return e instanceof t&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new ES(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new t(e.resolve(n.anchor))}static create(e,n){return new t(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}};ee.prototype.visible=!1;pe.jsonID("node",ee);var ES=class t{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:i}=e.mapResult(this.anchor);return n?new ty(i,i):new t(i)}resolve(e){let n=e.resolve(this.anchor),i=n.nodeAfter;return i&&ee.isSelectable(i)?new ee(n):pe.near(n)}},Ln=class t extends pe{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=P.empty){if(n==P.empty){e.delete(0,e.doc.content.size);let i=pe.atStart(e.doc);i.eq(e.selection)||e.setSelection(i)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new t(e)}map(e){return new t(e)}eq(e){return e instanceof t}getBookmark(){return cte}};pe.jsonID("all",Ln);var cte={map(){return this},resolve(t){return new Ln(t)}};function $c(t,e,n,i,r,s=!1){if(e.inlineContent)return Oe.create(t,n);for(let o=i-(r>0?0:1);r>0?o<e.childCount:o>=0;o+=r){let a=e.child(o);if(a.isAtom){if(!s&&ee.isSelectable(a))return ee.create(t,n-(r<0?a.nodeSize:0))}else{let l=$c(t,a,n+r,r<0?a.childCount:0,r,s);if(l)return l}n+=a.nodeSize*r}return null}function M2(t,e,n){let i=t.steps.length-1;if(i<e)return;let r=t.steps[i];if(!(r instanceof Fn||r instanceof Tt))return;let s=t.mapping.maps[i],o;s.forEach((a,l,c,u)=>{o==null&&(o=u)}),t.setSelection(pe.near(t.doc.resolve(o),n))}var k2=1,ey=2,R2=4,IS=class extends X_{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|k2)&~ey,this.storedMarks=null,this}get selectionSet(){return(this.updated&k2)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=ey,this}ensureMarks(e){return Me.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&ey)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~ey,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let i=this.selection;return n&&(e=e.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||Me.none))),i.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,i){let r=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(i==null&&(i=n),i=i??n,!e)return this.deleteRange(n,i);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=i==n?o.marks():o.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(n,i,r.text(e,s)),this.selection.empty||this.setSelection(pe.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=R2,this}get scrolledIntoView(){return(this.updated&R2)>0}};function N2(t,e){return!e||!t?t:t.bind(e)}var La=class{constructor(e,n,i){this.name=e,this.init=N2(n.init,i),this.apply=N2(n.apply,i)}},ute=[new La("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new La("selection",{init(t,e){return t.selection||pe.atStart(e.doc)},apply(t){return t.selection}}),new La("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,i){return i.selection.$cursor?t.storedMarks:null}}),new La("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})],Jh=class{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=ute.slice(),n&&n.forEach(i=>{if(this.pluginsByKey[i.key])throw new RangeError("Adding different instances of a keyed plugin ("+i.key+")");this.plugins.push(i),this.pluginsByKey[i.key]=i,i.spec.state&&this.fields.push(new La(i.key,i.spec.state,i))})}},ny=class t{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let i=0;i<this.config.plugins.length;i++)if(i!=n){let r=this.config.plugins[i];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],i=this.applyInner(e),r=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=r?r[o].n:0,c=r?r[o].state:this,u=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,i);if(u&&i.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!r){r=[];for(let d=0;d<this.config.plugins.length;d++)r.push(d<o?{state:i,n:n.length}:{state:this,n:0})}n.push(u),i=i.applyInner(u),s=!0}r&&(r[o]={state:i,n:n.length})}}if(!s)return{state:i,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new t(this.config),i=this.config.fields;for(let r=0;r<i.length;r++){let s=i[r];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new IS(this)}static create(e){let n=new Jh(e.doc?e.doc.type.schema:e.schema,e.plugins),i=new t(n);for(let r=0;r<n.fields.length;r++)i[n.fields[r].name]=n.fields[r].init(e,i);return i}reconfigure(e){let n=new Jh(this.schema,e.plugins),i=n.fields,r=new t(n);for(let s=0;s<i.length;s++){let o=i[s].name;r[o]=this.hasOwnProperty(o)?this[o]:i[s].init(e,r)}return r}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(i=>i.toJSON())),e&&typeof e=="object")for(let i in e){if(i=="doc"||i=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[i],s=r.spec.state;s&&s.toJSON&&(n[i]=s.toJSON.call(r,this[r.key]))}return n}static fromJSON(e,n,i){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let r=new Jh(e.schema,e.plugins),s=new t(r);return r.fields.forEach(o=>{if(o.name=="doc")s.doc=fr.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=pe.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(i)for(let a in i){let l=i[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){s[o.name]=c.fromJSON.call(l,e,n[a],s);return}}s[o.name]=o.init(e,s)}}),s}};function P2(t,e,n){for(let i in t){let r=t[i];r instanceof Function?r=r.bind(e):i=="handleDOMEvents"&&(r=P2(r,e,{})),n[i]=r}return n}var Wt=class{constructor(e){this.spec=e,this.props={},e.props&&P2(e.props,this,this.props),this.key=e.key?e.key.key:O2("plugin")}getState(e){return e[this.key]}},bS=Object.create(null);function O2(t){return t in bS?t+"$"+ ++bS[t]:(bS[t]=0,t+"$")}var Vn=class{constructor(e="key"){this.key=O2(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}};var tn=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},nf=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e},F2=null,es=function(t,e,n){let i=F2||(F2=document.createRange());return i.setEnd(t,n??t.nodeValue.length),i.setStart(t,e||0),i},Wa=function(t,e,n,i){return n&&(L2(t,e,n,i,-1)||L2(t,e,n,i,1))},dte=/^(img|br|input|textarea|hr)$/i;function L2(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:pr(t))){let s=t.parentNode;if(!s||s.nodeType!=1||KS(t)||dte.test(t.nodeName)||t.contentEditable=="false")return!1;e=tn(t)+(r<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.contentEditable=="false")return!1;e=r<0?pr(t):0}else return!1}}function pr(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function hte(t,e,n){for(let i=e==0,r=e==pr(t);i||r;){if(t==n)return!0;let s=tn(t);if(t=t.parentNode,!t)return!1;i=i&&s==0,r=r&&s==pr(t)}}function KS(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}var dy=function(t){return t.focusNode&&Wa(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Va(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function fte(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function pte(t,e,n){if(t.caretPositionFromPoint)try{let i=t.caretPositionFromPoint(e,n);if(i)return{node:i.offsetNode,offset:i.offset}}catch{}if(t.caretRangeFromPoint){let i=t.caretRangeFromPoint(e,n);if(i)return{node:i.startContainer,offset:i.startOffset}}}var mr=typeof navigator<"u"?navigator:null,V2=typeof document<"u"?document:null,ao=mr&&mr.userAgent||"",xS=/Edge\/(\d+)/.exec(ao),pB=/MSIE \d/.exec(ao),AS=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ao),vn=!!(pB||AS||xS),so=pB?document.documentMode:AS?+AS[1]:xS?+xS[1]:0,Ai=!vn&&/gecko\/(\d+)/i.test(ao);Ai&&+(/Firefox\/(\d+)/.exec(ao)||[0,0])[1];var MS=!vn&&/Chrome\/(\d+)/.exec(ao),Gt=!!MS,mte=MS?+MS[1]:0,rn=!vn&&!!mr&&/Apple Computer/.test(mr.vendor),Gc=rn&&(/Mobile\/\w+/.test(ao)||!!mr&&mr.maxTouchPoints>2),Zn=Gc||(mr?/Mac/.test(mr.platform):!1),gte=mr?/Win/.test(mr.platform):!1,xi=/Android \d/.test(ao),hy=!!V2&&"webkitFontSmoothing"in V2.documentElement.style,_te=hy?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function yte(t){return{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Zr(t,e){return typeof t=="number"?t:t[e]}function vte(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,i=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*i}}function B2(t,e,n){let i=t.someProp("scrollThreshold")||0,r=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;o=nf(o)){if(o.nodeType!=1)continue;let a=o,l=a==s.body,c=l?yte(s):vte(a),u=0,d=0;if(e.top<c.top+Zr(i,"top")?d=-(c.top-e.top+Zr(r,"top")):e.bottom>c.bottom-Zr(i,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+Zr(r,"top")-c.top:e.bottom-c.bottom+Zr(r,"bottom")),e.left<c.left+Zr(i,"left")?u=-(c.left-e.left+Zr(r,"left")):e.right>c.right-Zr(i,"right")&&(u=e.right-c.right+Zr(r,"right")),u||d)if(l)s.defaultView.scrollBy(u,d);else{let h=a.scrollLeft,p=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let f=a.scrollLeft-h,m=a.scrollTop-p;e={left:e.left-f,top:e.top-m,right:e.right-f,bottom:e.bottom-m}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(o).position))break}}function bte(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),i,r;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=t.root.elementFromPoint(s,o);if(!a||a==t.dom||!t.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){i=a,r=l.top;break}}return{refDOM:i,refTop:r,stack:mB(t.dom)}}function mB(t){let e=[],n=t.ownerDocument;for(let i=t;i&&(e.push({dom:i,top:i.scrollTop,left:i.scrollLeft}),t!=n);i=nf(i));return e}function wte({refDOM:t,refTop:e,stack:n}){let i=t?t.getBoundingClientRect().top:0;gB(n,i==0?0:i-e)}function gB(t,e){for(let n=0;n<t.length;n++){let{dom:i,top:r,left:s}=t[n];i.scrollTop!=r+e&&(i.scrollTop=r+e),i.scrollLeft!=s&&(i.scrollLeft=s)}}var Hc=null;function Ete(t){if(t.setActive)return t.setActive();if(Hc)return t.focus(Hc);let e=mB(t);t.focus(Hc==null?{get preventScroll(){return Hc={preventScroll:!0},!0}}:void 0),Hc||(Hc=!1,gB(e,0))}function _B(t,e){let n,i=2e8,r,s=0,o=e.top,a=e.top,l,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=es(u).getClientRects();else continue;for(let p=0;p<h.length;p++){let f=h[p];if(f.top<=o&&f.bottom>=a){o=Math.max(f.bottom,o),a=Math.min(f.top,a);let m=f.left>e.left?f.left-e.left:f.right<e.left?e.left-f.right:0;if(m<i){n=u,i=m,r=m&&n.nodeType==3?{left:f.right<e.left?f.right:f.left,top:e.top}:e,u.nodeType==1&&m&&(s=d+(e.left>=(f.left+f.right)/2?1:0));continue}}else f.top>e.top&&!l&&f.left<=e.left&&f.right>=e.left&&(l=u,c={left:Math.max(f.left,Math.min(f.right,e.left)),top:f.top});!n&&(e.left>=f.right&&e.top>=f.top||e.left>=f.left&&e.top>=f.bottom)&&(s=d+1)}}return!n&&l&&(n=l,r=c,i=0),n&&n.nodeType==3?Ite(n,r):!n||i&&n.nodeType==1?{node:t,offset:s}:_B(n,r)}function Ite(t,e){let n=t.nodeValue.length,i=document.createRange();for(let r=0;r<n;r++){i.setEnd(t,r+1),i.setStart(t,r);let s=io(i,1);if(s.top!=s.bottom&&YS(e,s))return{node:t,offset:r+(e.left>=(s.left+s.right)/2?1:0)}}return{node:t,offset:0}}function YS(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function Cte(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function Tte(t,e,n){let{node:i,offset:r}=_B(e,n),s=-1;if(i.nodeType==1&&!i.firstChild){let o=i.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(i,r,s)}function Ste(t,e,n,i){let r=-1;for(let s=e,o=!1;s!=t.dom;){let a=t.docView.nearestDesc(s,!0);if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent&&!o||!a.contentDOM)){let l=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&!o&&(o=!0,l.left>i.left||l.top>i.top?r=a.posBefore:(l.right<i.left||l.bottom<i.top)&&(r=a.posAfter)),!a.contentDOM&&r<0&&!a.node.isText)return(a.node.isBlock?i.top<(l.top+l.bottom)/2:i.left<(l.left+l.right)/2)?a.posBefore:a.posAfter}s=a.dom.parentNode}return r>-1?r:t.docView.posFromDOM(e,n,-1)}function yB(t,e,n){let i=t.childNodes.length;if(i&&n.top<n.bottom)for(let r=Math.max(0,Math.min(i-1,Math.floor(i*(e.top-n.top)/(n.bottom-n.top))-2)),s=r;;){let o=t.childNodes[s];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(YS(e,c))return yB(o,e,c)}}if((s=(s+1)%i)==r)break}return t}function Dte(t,e){let n=t.dom.ownerDocument,i,r=0,s=pte(n,e.left,e.top);s&&({node:i,offset:r}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),a;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!YS(e,c)||(o=yB(t.dom,e,c),!o))return null}if(rn)for(let c=o;i&&c;c=nf(c))c.draggable&&(i=void 0);if(o=Cte(o,e),i){if(Ai&&i.nodeType==1&&(r=Math.min(r,i.childNodes.length),r<i.childNodes.length)){let c=i.childNodes[r],u;c.nodeName=="IMG"&&(u=c.getBoundingClientRect()).right<=e.left&&u.bottom>e.top&&r++}i==t.dom&&r==i.childNodes.length-1&&i.lastChild.nodeType==1&&e.top>i.lastChild.getBoundingClientRect().bottom?a=t.state.doc.content.size:(r==0||i.nodeType!=1||i.childNodes[r-1].nodeName!="BR")&&(a=Ste(t,i,r,e))}a==null&&(a=Tte(t,o,e));let l=t.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function j2(t){return t.top<t.bottom||t.left<t.right}function io(t,e){let n=t.getClientRects();if(n.length){let i=n[e<0?0:n.length-1];if(j2(i))return i}return Array.prototype.find.call(n,j2)||t.getBoundingClientRect()}var xte=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function vB(t,e,n){let{node:i,offset:r,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=hy||Ai;if(i.nodeType==3)if(o&&(xte.test(i.nodeValue)||(n<0?!r:r==i.nodeValue.length))){let l=io(es(i,r,r),n);if(Ai&&r&&/\s/.test(i.nodeValue[r-1])&&r<i.nodeValue.length){let c=io(es(i,r-1,r-1),-1);if(c.top==l.top){let u=io(es(i,r,r+1),-1);if(u.top!=l.top)return Xh(u,u.left<c.left)}}return l}else{let l=r,c=r,u=n<0?1:-1;return n<0&&!r?(c++,u=-1):n>=0&&r==i.nodeValue.length?(l--,u=1):n<0?l--:c++,Xh(io(es(i,l,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&r&&(n<0||r==pr(i))){let l=i.childNodes[r-1];if(l.nodeType==1)return CS(l.getBoundingClientRect(),!1)}if(s==null&&r<pr(i)){let l=i.childNodes[r];if(l.nodeType==1)return CS(l.getBoundingClientRect(),!0)}return CS(i.getBoundingClientRect(),n>=0)}if(s==null&&r&&(n<0||r==pr(i))){let l=i.childNodes[r-1],c=l.nodeType==3?es(l,pr(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Xh(io(c,1),!1)}if(s==null&&r<pr(i)){let l=i.childNodes[r];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?es(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return Xh(io(c,-1),!0)}return Xh(io(i.nodeType==3?es(i):i,-n),n>=0)}function Xh(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function CS(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function bB(t,e,n){let i=t.state,r=t.root.activeElement;i!=e&&t.updateState(e),r!=t.dom&&t.focus();try{return n()}finally{i!=e&&t.updateState(i),r!=t.dom&&r&&r.focus()}}function Ate(t,e,n){let i=e.selection,r=n=="up"?i.$from:i.$to;return bB(t,e,()=>{let{node:s}=t.docView.domFromPos(r.pos,n=="up"?-1:1);for(;;){let a=t.docView.nearestDesc(s,!0);if(!a)break;if(a.node.isBlock){s=a.contentDOM||a.dom;break}s=a.dom.parentNode}let o=vB(t,r.pos,1);for(let a=s.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=es(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}var Mte=/[\u0590-\u08ac]/;function kte(t,e,n){let{$head:i}=e.selection;if(!i.parent.isTextblock)return!1;let r=i.parentOffset,s=!r,o=r==i.parent.content.size,a=t.domSelection();return!Mte.test(i.parent.textContent)||!a.modify?n=="left"||n=="backward"?s:o:bB(t,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",n,"character");let p=i.depth?t.docView.domAfterPos(i.before()):t.dom,{focusNode:f,focusOffset:m}=t.domSelectionRange(),g=f&&!p.contains(f.nodeType==1?f:f.parentNode)||l==f&&c==m;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return h!=null&&(a.caretBidiLevel=h),g})}var U2=null,z2=null,$2=!1;function Rte(t,e,n){return U2==e&&z2==n?$2:(U2=e,z2=n,$2=n=="up"||n=="down"?Ate(t,e,n):kte(t,e,n))}var ei=0,H2=1,ja=2,gr=3,qa=class{constructor(e,n,i,r){this.parent=e,this.children=n,this.dom=i,this.contentDOM=r,this.dirty=ei,i.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,i){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,i=this.posAtStart;;n++){let r=this.children[n];if(r==e)return i;i+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,i){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(i<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let r;if(e==this.dom&&this.contentDOM)r=n>tn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){r=!1;break}if(s.previousSibling)break}if(r==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){r=!0;break}if(s.nextSibling)break}}return r??i>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let i=!0,r=e;r;r=r.parentNode){let s=this.getDesc(r),o;if(s&&(!n||s.node))if(i&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))i=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let i=n;i;i=i.parent)if(i==this)return n}posFromDOM(e,n,i){for(let r=e;r;r=r.parentNode){let s=this.getDesc(r);if(s)return s.localPosFromDOM(e,n,i)}return-1}descAt(e){for(let n=0,i=0;n<this.children.length;n++){let r=this.children[n],s=i+r.size;if(i==e&&s!=i){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<s)return r.descAt(e-i-r.border);i=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let i=0,r=0;for(let s=0;i<this.children.length;i++){let o=this.children[i],a=s+o.size;if(a>e||o instanceof sy){r=e-s;break}s=a}if(r)return this.children[i].domFromPos(r-this.children[i].border,n);for(let s;i&&!(s=this.children[i-1]).size&&s instanceof iy&&s.side>=0;i--);if(n<=0){let s,o=!0;for(;s=i?this.children[i-1]:null,!(!s||s.dom.parentNode==this.contentDOM);i--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?tn(s.dom)+1:0}}else{let s,o=!0;for(;s=i<this.children.length?this.children[i]:null,!(!s||s.dom.parentNode==this.contentDOM);i++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?tn(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,i=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,s=-1;for(let o=i,a=0;;a++){let l=this.children[a],c=o+l.size;if(r==-1&&e<=c){let u=o+l.border;if(e>=u&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,u);e=o;for(let d=a;d>0;d--){let h=this.children[d-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){r=tn(h.dom)+1;break}e-=h.size}r==-1&&(r=0)}if(r>-1&&(c>n||a==this.children.length-1)){n=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=tn(d.dom);break}n+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:r,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:i}=this.domFromPos(e,0);if(n.nodeType!=1||i==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[i]}setSelection(e,n,i,r=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let h=0,p=0;h<this.children.length;h++){let f=this.children[h],m=p+f.size;if(s>p&&o<m)return f.setSelection(e-p-f.border,n-p-f.border,i,r);p=m}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=i.getSelection(),u=!1;if((Ai||rn)&&e==n){let{node:h,offset:p}=a;if(h.nodeType==3){if(u=!!(p&&h.nodeValue[p-1]==`
`),u&&p==h.nodeValue.length)for(let f=h,m;f;f=f.parentNode){if(m=f.nextSibling){m.nodeName=="BR"&&(a=l={node:m.parentNode,offset:tn(m)+1});break}let g=f.pmViewDesc;if(g&&g.node&&g.node.isBlock)break}}else{let f=h.childNodes[p-1];u=f&&(f.nodeName=="BR"||f.contentEditable=="false")}}if(Ai&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let h=c.focusNode.childNodes[c.focusOffset];h&&h.contentEditable=="false"&&(r=!0)}if(!(r||u&&rn)&&Wa(a.node,a.offset,c.anchorNode,c.anchorOffset)&&Wa(l.node,l.offset,c.focusNode,c.focusOffset))return;let d=!1;if((c.extend||e==n)&&!u){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),d=!0}catch{}}if(!d){if(e>n){let p=a;a=l,l=p}let h=document.createRange();h.setEnd(l.node,l.offset),h.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let i=0,r=0;r<this.children.length;r++){let s=this.children[r],o=i+s.size;if(i==o?e<=o&&n>=i:e<o&&n>i){let a=i+s.border,l=o-s.border;if(e>=a&&n<=l){this.dirty=e==i||n==o?ja:H2,e==a&&n==l&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=gr:s.markDirty(e-a,n-a);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?ja:gr}i=o}this.dirty=ja}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let i=e==1?ja:H2;n.dirty<i&&(n.dirty=i)}}get domAtom(){return!1}get ignoreForCoords(){return!1}},iy=class extends qa{constructor(e,n,i,r){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(i,()=>{if(!s)return r;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==ei&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}},kS=class extends qa{constructor(e,n,i,r){super(e,[],n,null),this.textDOM=i,this.text=r}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}},Kc=class t extends qa{constructor(e,n,i,r){super(e,[],i,r),this.mark=n}static create(e,n,i,r){let s=r.nodeViews[n.type.name],o=s&&s(n,r,i);return(!o||!o.dom)&&(o=Jr.renderSpec(document,n.type.spec.toDOM(n,i))),new t(e,n,o.dom,o.contentDOM||o.dom)}parseRule(){return this.dirty&gr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=gr&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=ei){let i=this.parent;for(;!i.node;)i=i.parent;i.dirty<this.dirty&&(i.dirty=this.dirty),this.dirty=ei}}slice(e,n,i){let r=t.create(this.parent,this.mark,!0,i),s=this.children,o=this.size;n<o&&(s=FS(s,n,o,i)),e>0&&(s=FS(s,0,e,i));for(let a=0;a<s.length;a++)s[a].parent=r;return r.children=s,r}},oo=class t extends qa{constructor(e,n,i,r,s,o,a,l,c){super(e,[],s,o),this.node=n,this.outerDeco=i,this.innerDeco=r,this.nodeDOM=a}static create(e,n,i,r,s,o){let a=s.nodeViews[n.type.name],l,c=a&&a(n,s,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},i,r),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=Jr.renderSpec(document,n.type.spec.toDOM(n)));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let h=u;return u=IB(u,i,n),c?l=new RS(e,n,i,r,u,d||null,h,c,s,o+1):n.isText?new ry(e,n,i,r,u,h,s):new t(e,n,i,r,u,d||null,h,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let i=this.children[n];if(this.dom.contains(i.dom.parentNode)){e.contentElement=i.dom.parentNode;break}}e.contentElement||(e.getContent=()=>k.empty)}return e}matchesNode(e,n,i){return this.dirty==ei&&e.eq(this.node)&&PS(n,this.outerDeco)&&i.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let i=this.node.inlineContent,r=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,a=s&&s.pos<0,l=new OS(this,o&&o.node,e);Fte(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,i,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?Me.none:this.node.child(u).marks,i,e),l.placeWidget(c,e,r)},(c,u,d,h)=>{l.syncToMarks(c.marks,i,e);let p;l.findNodeMatch(c,u,d,h)||a&&e.state.selection.from>r&&e.state.selection.to<r+c.nodeSize&&(p=l.findIndexWithChild(s.node))>-1&&l.updateNodeAt(c,u,d,p,e)||l.updateNextNode(c,u,d,e,h,r)||l.addNode(c,u,d,e,r),r+=c.nodeSize}),l.syncToMarks([],i,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==ja)&&(o&&this.protectLocalComposition(e,o),wB(this.contentDOM,this.children,e),Gc&&Lte(this.dom))}localCompositionInfo(e,n){let{from:i,to:r}=e.state.selection;if(!(e.state.selection instanceof Oe)||i<n||r>n+this.node.content.size)return null;let s=e.domSelectionRange(),o=Vte(s.focusNode,s.focusOffset);if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let a=o.nodeValue,l=Bte(this.node.content,a,i-n,r-n);return l<0?null:{node:o,pos:l,text:a}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:i,text:r}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new kS(this,s,n,r);e.input.compositionNodes.push(o),this.children=FS(this.children,i,i+r.length,e,o)}update(e,n,i,r){return this.dirty==gr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,i,r),!0)}updateInner(e,n,i,r){this.updateOuterDeco(n),this.node=e,this.innerDeco=i,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=ei}updateOuterDeco(e){if(PS(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,i=this.dom;this.dom=EB(this.dom,this.nodeDOM,NS(this.outerDeco,this.node,n),NS(e,this.node,n)),this.dom!=i&&(i.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}};function W2(t,e,n,i,r){IB(i,e,t);let s=new oo(void 0,t,e,n,i,i,i,r,0);return s.contentDOM&&s.updateChildren(r,0),s}var ry=class t extends oo{constructor(e,n,i,r,s,o,a){super(e,n,i,r,s,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,i,r){return this.dirty==gr||this.dirty!=ei&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=ei||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=ei,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,i){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,i)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,i){let r=this.node.cut(e,n),s=document.createTextNode(r.text);return new t(this.parent,r,this.outerDeco,this.innerDeco,s,s,i)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=gr)}get domAtom(){return!1}},sy=class extends qa{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==ei&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}},RS=class extends oo{constructor(e,n,i,r,s,o,a,l,c,u){super(e,n,i,r,s,o,a,c,u),this.spec=l}update(e,n,i,r){if(this.dirty==gr)return!1;if(this.spec.update){let s=this.spec.update(e,n,i);return s&&this.updateInner(e,n,i,r),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,i,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,i,r){this.spec.setSelection?this.spec.setSelection(e,n,i):super.setSelection(e,n,i,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}};function wB(t,e,n){let i=t.firstChild,r=!1;for(let s=0;s<e.length;s++){let o=e[s],a=o.dom;if(a.parentNode==t){for(;a!=i;)i=q2(i),r=!0;i=i.nextSibling}else r=!0,t.insertBefore(a,i);if(o instanceof Kc){let l=i?i.previousSibling:t.lastChild;wB(o.contentDOM,o.children,n),i=l?l.nextSibling:t.firstChild}}for(;i;)i=q2(i),r=!0;r&&n.trackWrites==t&&(n.trackWrites=null)}var ef=function(t){t&&(this.nodeName=t)};ef.prototype=Object.create(null);var Ua=[new ef];function NS(t,e,n){if(t.length==0)return Ua;let i=n?Ua[0]:new ef,r=[i];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&r.push(i=new ef(o.nodeName));for(let a in o){let l=o[a];l!=null&&(n&&r.length==1&&r.push(i=new ef(e.isInline?"span":"div")),a=="class"?i.class=(i.class?i.class+" ":"")+l:a=="style"?i.style=(i.style?i.style+";":"")+l:a!="nodeName"&&(i[a]=l))}}}return r}function EB(t,e,n,i){if(n==Ua&&i==Ua)return e;let r=e;for(let s=0;s<i.length;s++){let o=i[s],a=n[s];if(s){let l;a&&a.nodeName==o.nodeName&&r!=t&&(l=r.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(r),a=Ua[0]),r=l}Nte(r,a||Ua[0],o)}return r}function Nte(t,e,n){for(let i in e)i!="class"&&i!="style"&&i!="nodeName"&&!(i in n)&&t.removeAttribute(i);for(let i in n)i!="class"&&i!="style"&&i!="nodeName"&&n[i]!=e[i]&&t.setAttribute(i,n[i]);if(e.class!=n.class){let i=e.class?e.class.split(" ").filter(Boolean):[],r=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.remove(i[s]);for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.add(r[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let i=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,r;for(;r=i.exec(e.style);)t.style.removeProperty(r[1])}n.style&&(t.style.cssText+=n.style)}}function IB(t,e,n){return EB(t,t,Ua,NS(e,n,t.nodeType!=1))}function PS(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function q2(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}var OS=class{constructor(e,n,i){this.lock=n,this.view=i,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=Pte(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let i=e;i<n;i++)this.top.children[i].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,i){let r=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;r<o&&(r==s-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&e[r].type.spec.spanning!==!1;)r++;for(;r<s;)this.destroyRest(),this.top.dirty=ei,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=Kc.create(this.top,e[s],n,i);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,i,r){let s=-1,o;if(r>=this.preMatch.index&&(o=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,i))s=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,i)&&!this.preMatch.matched.has(c)){s=a;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,i,r,s){let o=this.top.children[r];return o.dirty==gr&&o.dom==o.contentDOM&&(o.dirty=ja),o.update(e,n,i,s)?(this.destroyBetween(this.index,r),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let i=e.pmViewDesc;if(i){for(let r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==i)return r}return-1}e=n}}updateNextNode(e,n,i,r,s,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof oo){let c=this.preMatch.matched.get(l);if(c!=null&&c!=s)return!1;let u=l.dom,d,h=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=gr&&PS(n,l.outerDeco));if(!h&&l.update(e,n,i,r))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!h&&(d=this.recreateWrapper(l,e,n,i,r,o)))return this.top.children[this.index]=d,d.dirty=ja,d.updateChildren(r,o+1),d.dirty=ei,this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,i,r,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content))return null;let a=oo.create(this.top,n,i,r,s,o);if(!a.contentDOM)return null;a.children=e.children,e.children=[],e.destroy();for(let l of a.children)l.parent=a;return a}addNode(e,n,i,r,s){let o=oo.create(this.top,e,n,i,r,s);o.contentDOM&&o.updateChildren(r,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,i){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(r&&r.matchesWidget(e)&&(e==r.widget||!r.widget.type.toDOM.parentNode))this.index++;else{let s=new iy(this.top,e,n,i);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Kc;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof ry)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((rn||Gt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let i=document.createElement(e);e=="IMG"&&(i.className="ProseMirror-separator",i.alt=""),e=="BR"&&(i.className="ProseMirror-trailingBreak");let r=new sy(this.top,[],i,null);n!=this.top?n.children.push(r):n.children.splice(this.index++,0,r),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}};function Pte(t,e){let n=e,i=n.children.length,r=t.childCount,s=new Map,o=[];e:for(;r>0;){let a;for(;;)if(i){let c=n.children[i-1];if(c instanceof Kc)n=c,i=c.children.length;else{a=c,i--;break}}else{if(n==e)break e;i=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(r-1))break;--r,s.set(a,r),o.push(a)}}return{index:r,matched:s,matches:o.reverse()}}function Ote(t,e){return t.type.side-e.type.side}function Fte(t,e,n,i){let r=e.locals(t),s=0;if(r.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);i(u,r,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){if(o<r.length&&r[o].to==s){let f=r[o++],m;for(;o<r.length&&r[o].to==s;)(m||(m=[f])).push(r[o++]);if(m){m.sort(Ote);for(let g=0;g<m.length;g++)n(m[g],c,!!l)}else n(f,c,!!l)}let u,d;if(l)d=-1,u=l,l=null;else if(c<t.childCount)d=c,u=t.child(c++);else break;for(let f=0;f<a.length;f++)a[f].to<=s&&a.splice(f--,1);for(;o<r.length&&r[o].from<=s&&r[o].to>s;)a.push(r[o++]);let h=s+u.nodeSize;if(u.isText){let f=h;o<r.length&&r[o].from<f&&(f=r[o].from);for(let m=0;m<a.length;m++)a[m].to<f&&(f=a[m].to);f<h&&(l=u.cut(f-s),u=u.cut(0,f-s),h=f,d=-1)}let p=u.isInline&&!u.isLeaf?a.filter(f=>!f.inline):a.slice();i(u,p,e.forChild(s,u),d),s=h}}function Lte(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function Vte(t,e){for(;;){if(t.nodeType==3)return t;if(t.nodeType==1&&e>0){if(t.childNodes.length>e&&t.childNodes[e].nodeType==3)return t.childNodes[e];t=t.childNodes[e-1],e=pr(t)}else if(t.nodeType==1&&e<t.childNodes.length)t=t.childNodes[e],e=0;else return null}}function Bte(t,e,n,i){for(let r=0,s=0;r<t.childCount&&s<=i;){let o=t.child(r++),a=s;if(s+=o.nodeSize,!o.isText)continue;let l=o.text;for(;r<t.childCount;){let c=t.child(r++);if(s+=c.nodeSize,!c.isText)break;l+=c.text}if(s>=n){let c=a<i?l.lastIndexOf(e,i-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==i&&l.length>=i+e.length-a&&l.slice(i-a,i-a+e.length)==e)return i}}return-1}function FS(t,e,n,i,r){let s=[];for(let o=0,a=0;o<t.length;o++){let l=t[o],c=a,u=a+=l.size;c>=n||u<=e?s.push(l):(c<e&&s.push(l.slice(0,e-c,i)),r&&(s.push(r),r=void 0),u>n&&s.push(l.slice(n-c,l.size,i)))}return s}function QS(t,e=null){let n=t.domSelectionRange(),i=t.state.doc;if(!n.focusNode)return null;let r=t.docView.nearestDesc(n.focusNode),s=r&&r.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let a=i.resolve(o),l,c;if(dy(n)){for(l=a;r&&!r.node;)r=r.parent;let u=r.node;if(r&&u.isAtom&&ee.isSelectable(u)&&r.parent&&!(u.isInline&&hte(n.focusNode,n.focusOffset,r.dom))){let d=r.posBefore;c=new ee(o==d?a:i.resolve(d))}}else{let u=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null;l=i.resolve(u)}if(!c){let u=e=="pointer"||t.state.selection.head<a.pos&&!s?1:-1;c=JS(t,l,a,u)}return c}function CB(t){return t.editable?t.hasFocus():SB(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function ts(t,e=!1){let n=t.state.selection;if(TB(t,n),!!CB(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&Gt){let i=t.domSelectionRange(),r=t.domObserver.currentSelection;if(i.anchorNode&&r.anchorNode&&Wa(i.anchorNode,i.anchorOffset,r.anchorNode,r.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)Ute(t);else{let{anchor:i,head:r}=n,s,o;G2&&!(n instanceof Oe)&&(n.$from.parent.inlineContent||(s=K2(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=K2(t,n.to))),t.docView.setSelection(i,r,t.root,e),G2&&(s&&Y2(s),o&&Y2(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&jte(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}var G2=rn||Gt&&mte<63;function K2(t,e){let{node:n,offset:i}=t.docView.domFromPos(e,0),r=i<n.childNodes.length?n.childNodes[i]:null,s=i?n.childNodes[i-1]:null;if(rn&&r&&r.contentEditable=="false")return TS(r);if((!r||r.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(r)return TS(r);if(s)return TS(s)}}function TS(t){return t.contentEditable="true",rn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Y2(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function jte(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),i=n.anchorNode,r=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=i||n.anchorOffset!=r)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!CB(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function Ute(t){let e=t.domSelection(),n=document.createRange(),i=t.cursorWrapper.dom,r=i.nodeName=="IMG";r?n.setEnd(i.parentNode,tn(i)+1):n.setEnd(i,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!r&&!t.state.selection.visible&&vn&&so<=11&&(i.disabled=!0,i.disabled=!1)}function TB(t,e){if(e instanceof ee){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(Q2(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else Q2(t)}function Q2(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function JS(t,e,n,i){return t.someProp("createSelectionBetween",r=>r(t,e,n))||Oe.between(e,n,i)}function J2(t){return t.editable&&!t.hasFocus()?!1:SB(t)}function SB(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function zte(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Wa(e.node,e.offset,n.anchorNode,n.anchorOffset)}function LS(t,e){let{$anchor:n,$head:i}=t.selection,r=e>0?n.max(i):n.min(i),s=r.parent.inlineContent?r.depth?t.doc.resolve(e>0?r.after():r.before()):null:r;return s&&pe.findFrom(s,e)}function Ba(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function X2(t,e,n){let i=t.state.selection;if(i instanceof Oe){if(!i.empty||n.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"forward":"backward")){let r=LS(t.state,e);return r&&r instanceof ee?Ba(t,r):!1}else if(!(Zn&&n.indexOf("m")>-1)){let r=i.$head,s=r.textOffset?null:e<0?r.nodeBefore:r.nodeAfter,o;if(!s||s.isText)return!1;let a=e<0?r.pos-s.nodeSize:r.pos;return s.isAtom||(o=t.docView.descAt(a))&&!o.contentDOM?ee.isSelectable(s)?Ba(t,new ee(e<0?t.state.doc.resolve(r.pos-s.nodeSize):r)):hy?Ba(t,new Oe(t.state.doc.resolve(e<0?a:a+s.nodeSize))):!1:!1}}else{if(i instanceof ee&&i.node.isInline)return Ba(t,new Oe(e>0?i.$to:i.$from));{let r=LS(t.state,e);return r?Ba(t,r):!1}}}function oy(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function tf(t){if(t.contentEditable=="false")return!0;let e=t.pmViewDesc;return e&&e.size==0&&(t.nextSibling||t.nodeName!="BR")}function Zh(t,e){return e<0?$te(t):DB(t)}function $te(t){let e=t.domSelectionRange(),n=e.focusNode,i=e.focusOffset;if(!n)return;let r,s,o=!1;for(Ai&&n.nodeType==1&&i<oy(n)&&tf(n.childNodes[i])&&(o=!0);;)if(i>0){if(n.nodeType!=1)break;{let a=n.childNodes[i-1];if(tf(a))r=n,s=--i;else if(a.nodeType==3)n=a,i=n.nodeValue.length;else break}}else{if(xB(n))break;{let a=n.previousSibling;for(;a&&tf(a);)r=n.parentNode,s=tn(a),a=a.previousSibling;if(a)n=a,i=oy(n);else{if(n=n.parentNode,n==t.dom)break;i=0}}}o?VS(t,n,i):r&&VS(t,r,s)}function DB(t){let e=t.domSelectionRange(),n=e.focusNode,i=e.focusOffset;if(!n)return;let r=oy(n),s,o;for(;;)if(i<r){if(n.nodeType!=1)break;let a=n.childNodes[i];if(tf(a))s=n,o=++i;else break}else{if(xB(n))break;{let a=n.nextSibling;for(;a&&tf(a);)s=a.parentNode,o=tn(a)+1,a=a.nextSibling;if(a)n=a,i=0,r=oy(n);else{if(n=n.parentNode,n==t.dom)break;i=r=0}}}s&&VS(t,s,o)}function xB(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Hte(t,e){for(;t&&e==t.childNodes.length&&!KS(t);)e=tn(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){if(t=t.childNodes[e],t.nodeType==3)return t;e=0}}function Wte(t,e){for(;t&&!e&&!KS(t);)e=tn(t),t=t.parentNode;for(;t&&e;){if(t=t.childNodes[e-1],t.nodeType==3)return t;e=t.childNodes.length}}function VS(t,e,n){if(e.nodeType!=3){let s,o;(o=Hte(e,n))?(e=o,n=0):(s=Wte(e,n))&&(e=s,n=s.nodeValue.length)}let i=t.domSelection();if(dy(i)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),i.removeAllRanges(),i.addRange(s)}else i.extend&&i.extend(e,n);t.domObserver.setCurSelection();let{state:r}=t;setTimeout(()=>{t.state==r&&ts(t)},50)}function Z2(t,e){let n=t.state.doc.resolve(e);if(!(Gt||gte)&&n.parent.inlineContent){let r=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>r.top&&o<r.bottom&&Math.abs(s.left-r.left)>1)return s.left<r.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>r.top&&o<r.bottom&&Math.abs(s.left-r.left)>1)return s.left>r.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function eB(t,e,n){let i=t.state.selection;if(i instanceof Oe&&!i.empty||n.indexOf("s")>-1||Zn&&n.indexOf("m")>-1)return!1;let{$from:r,$to:s}=i;if(!r.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=LS(t.state,e);if(o&&o instanceof ee)return Ba(t,o)}if(!r.parent.inlineContent){let o=e<0?r:s,a=i instanceof Ln?pe.near(o,e):pe.findFrom(o,e);return a?Ba(t,a):!1}return!1}function tB(t,e){if(!(t.state.selection instanceof Oe))return!0;let{$head:n,$anchor:i,empty:r}=t.state.selection;if(!n.sameParent(i))return!0;if(!r)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function nB(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function qte(t){if(!rn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let i=e.firstChild;nB(t,i,"true"),setTimeout(()=>nB(t,i,"false"),20)}return!1}function Gte(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function Kte(t,e){let n=e.keyCode,i=Gte(e);if(n==8||Zn&&n==72&&i=="c")return tB(t,-1)||Zh(t,-1);if(n==46&&!e.shiftKey||Zn&&n==68&&i=="c")return tB(t,1)||Zh(t,1);if(n==13||n==27)return!0;if(n==37||Zn&&n==66&&i=="c"){let r=n==37?Z2(t,t.state.selection.from)=="ltr"?-1:1:-1;return X2(t,r,i)||Zh(t,r)}else if(n==39||Zn&&n==70&&i=="c"){let r=n==39?Z2(t,t.state.selection.from)=="ltr"?1:-1:1;return X2(t,r,i)||Zh(t,r)}else{if(n==38||Zn&&n==80&&i=="c")return eB(t,-1,i)||Zh(t,-1);if(n==40||Zn&&n==78&&i=="c")return qte(t)||eB(t,1,i)||DB(t);if(i==(Zn?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function AB(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let n=[],{content:i,openStart:r,openEnd:s}=e;for(;r>1&&s>1&&i.childCount==1&&i.firstChild.childCount==1;){r--,s--;let p=i.firstChild;n.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),i=p.content}let o=t.someProp("clipboardSerializer")||Jr.fromSchema(t.state.schema),a=OB(),l=a.createElement("div");l.appendChild(o.serializeFragment(i,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=PB[c.nodeName.toLowerCase()]);){for(let p=u.length-1;p>=0;p--){let f=a.createElement(u[p]);for(;l.firstChild;)f.appendChild(l.firstChild);l.appendChild(f),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${r} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let h=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:h}}function MB(t,e,n,i,r){let s=r.parent.type.spec.code,o,a;if(!n&&!e)return null;let l=e&&(i||s||!n);if(l){if(t.someProp("transformPastedText",h=>{e=h(e,s||i,t)}),s)return e?new P(k.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):P.empty;let d=t.someProp("clipboardTextParser",h=>h(e,r,i,t));if(d)a=d;else{let h=r.marks(),{schema:p}=t.state,f=Jr.fromSchema(p);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=o.appendChild(document.createElement("p"));m&&g.appendChild(f.serializeNode(p.text(m,h)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),o=Jte(n),hy&&Xte(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let h=o.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;o=h}if(a||(a=(t.someProp("clipboardParser")||t.someProp("domParser")||to.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:r,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!Yte.test(h.parentNode.nodeName)?{ignore:!0}:null}})),u)a=Zte(iB(a,+u[1],+u[2]),u[4]);else if(a=P.maxOpen(Qte(a.content,r),!0),a.openStart||a.openEnd){let d=0,h=0;for(let p=a.content.firstChild;d<a.openStart&&!p.type.spec.isolating;d++,p=p.firstChild);for(let p=a.content.lastChild;h<a.openEnd&&!p.type.spec.isolating;h++,p=p.lastChild);a=iB(a,d,h)}return t.someProp("transformPasted",d=>{a=d(a,t)}),a}var Yte=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Qte(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(a=>{if(!o)return;let l=r.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&s.length&&RB(l,s,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=NB(o[o.length-1],s.length));let u=kB(a,l);o.push(u),r=r.matchType(u.type),s=l}}),o)return k.from(o)}return t}function kB(t,e,n=0){for(let i=e.length-1;i>=n;i--)t=e[i].create(null,k.from(t));return t}function RB(t,e,n,i,r){if(r<t.length&&r<e.length&&t[r]==e[r]){let s=RB(t,e,n,i.lastChild,r+1);if(s)return i.copy(i.content.replaceChild(i.childCount-1,s));if(i.contentMatchAt(i.childCount).matchType(r==t.length-1?n.type:t[r+1]))return i.copy(i.content.append(k.from(kB(n,t,r+1))))}}function NB(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,NB(t.lastChild,e-1)),i=t.contentMatchAt(t.childCount).fillBefore(k.empty,!0);return t.copy(n.append(i))}function BS(t,e,n,i,r,s){let o=e<0?t.firstChild:t.lastChild,a=o.content;return t.childCount>1&&(s=0),r<i-1&&(a=BS(a,e,n,i,r+1,s)),r>=n&&(a=e<0?o.contentMatchAt(0).fillBefore(a,s<=r).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(k.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(a))}function iB(t,e,n){return e<t.openStart&&(t=new P(BS(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new P(BS(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}var PB={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},rB=null;function OB(){return rB||(rB=document.implementation.createHTMLDocument("title"))}function Jte(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=OB().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(t),r;if((r=i&&PB[i[1].toLowerCase()])&&(t=r.map(s=>"<"+s+">").join("")+t+r.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=t,r)for(let s=0;s<r.length;s++)n=n.querySelector(r[s])||n;return n}function Xte(t){let e=t.querySelectorAll(Gt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let i=e[n];i.childNodes.length==1&&i.textContent=="\xA0"&&i.parentNode&&i.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),i)}}function Zte(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,i;try{i=JSON.parse(e)}catch{return t}let{content:r,openStart:s,openEnd:o}=t;for(let a=i.length-2;a>=0;a-=2){let l=n.nodes[i[a]];if(!l||l.hasRequiredAttrs())break;r=k.from(l.create(i[a+1],r)),s++,o++}return new P(r,s,o)}var sn={},on={},ene={touchstart:!0,touchmove:!0},jS=class{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}};function tne(t){for(let e in sn){let n=sn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=i=>{ine(t,i)&&!XS(t,i)&&(t.editable||!(i.type in on))&&n(t,i)},ene[e]?{passive:!0}:void 0)}rn&&t.dom.addEventListener("input",()=>null),US(t)}function ro(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function nne(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function US(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=i=>XS(t,i))})}function XS(t,e){return t.someProp("handleDOMEvents",n=>{let i=n[e.type];return i?i(t,e)||e.defaultPrevented:!1})}function ine(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function rne(t,e){!XS(t,e)&&sn[e.type]&&(t.editable||!(e.type in on))&&sn[e.type](t,e)}on.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!LB(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(xi&&Gt&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Gc&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let i=Date.now();t.input.lastIOSEnter=i,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==i&&(t.someProp("handleKeyDown",r=>r(t,Va(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",i=>i(t,n))||Kte(t,n)?n.preventDefault():ro(t,"key")};on.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};on.keypress=(t,e)=>{let n=e;if(LB(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Zn&&n.metaKey)return;if(t.someProp("handleKeyPress",r=>r(t,n))){n.preventDefault();return}let i=t.state.selection;if(!(i instanceof Oe)||!i.$from.sameParent(i.$to)){let r=String.fromCharCode(n.charCode);!/[\r\n]/.test(r)&&!t.someProp("handleTextInput",s=>s(t,i.$from.pos,i.$to.pos,r))&&t.dispatch(t.state.tr.insertText(r).scrollIntoView()),n.preventDefault()}};function fy(t){return{left:t.clientX,top:t.clientY}}function sne(t,e){let n=e.x-t.clientX,i=e.y-t.clientY;return n*n+i*i<100}function ZS(t,e,n,i,r){if(i==-1)return!1;let s=t.state.doc.resolve(i);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,a=>o>s.depth?a(t,n,s.nodeAfter,s.before(o),r,!0):a(t,n,s.node(o),s.before(o),r,!1)))return!0;return!1}function qc(t,e,n){t.focused||t.focus();let i=t.state.tr.setSelection(e);n=="pointer"&&i.setMeta("pointer",!0),t.dispatch(i)}function one(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),i=n.nodeAfter;return i&&i.isAtom&&ee.isSelectable(i)?(qc(t,new ee(n),"pointer"),!0):!1}function ane(t,e){if(e==-1)return!1;let n=t.state.selection,i,r;n instanceof ee&&(i=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o);if(ee.isSelectable(a)){i&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?r=s.before(n.$from.depth):r=s.before(o);break}}return r!=null?(qc(t,ee.create(t.state.doc,r),"pointer"),!0):!1}function lne(t,e,n,i,r){return ZS(t,"handleClickOn",e,n,i)||t.someProp("handleClick",s=>s(t,e,i))||(r?ane(t,n):one(t,n))}function cne(t,e,n,i){return ZS(t,"handleDoubleClickOn",e,n,i)||t.someProp("handleDoubleClick",r=>r(t,e,i))}function une(t,e,n,i){return ZS(t,"handleTripleClickOn",e,n,i)||t.someProp("handleTripleClick",r=>r(t,e,i))||dne(t,n,i)}function dne(t,e,n){if(n.button!=0)return!1;let i=t.state.doc;if(e==-1)return i.inlineContent?(qc(t,Oe.create(i,0,i.content.size),"pointer"),!0):!1;let r=i.resolve(e);for(let s=r.depth+1;s>0;s--){let o=s>r.depth?r.nodeAfter:r.node(s),a=r.before(s);if(o.inlineContent)qc(t,Oe.create(i,a+1,a+1+o.content.size),"pointer");else if(ee.isSelectable(o))qc(t,ee.create(i,a),"pointer");else continue;return!0}}function eD(t){return ay(t)}var FB=Zn?"metaKey":"ctrlKey";sn.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let i=eD(t),r=Date.now(),s="singleClick";r-t.input.lastClick.time<500&&sne(n,t.input.lastClick)&&!n[FB]&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:r,x:n.clientX,y:n.clientY,type:s};let o=t.posAtCoords(fy(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new zS(t,o,n,!!i)):(s=="doubleClick"?cne:une)(t,o.pos,o.inside,n)?n.preventDefault():ro(t,"pointer"))};var zS=class{constructor(e,n,i,r){this.view=e,this.pos=n,this.event=i,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!i[FB],this.allowDefault=i.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,o=u.depth?u.before():0}let a=r?null:i.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l?l.dom:null;let{selection:c}=e.state;(i.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof ee&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Ai&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ro(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>ts(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(fy(e))),this.updateAllowDefault(e),this.allowDefault||!n?ro(this.view,"pointer"):lne(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||rn&&this.mightDrag&&!this.mightDrag.node.isAtom||Gt&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(qc(this.view,pe.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):ro(this.view,"pointer")}move(e){this.updateAllowDefault(e),ro(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}};sn.touchstart=t=>{t.input.lastTouch=Date.now(),eD(t),ro(t,"pointer")};sn.touchmove=t=>{t.input.lastTouch=Date.now(),ro(t,"pointer")};sn.contextmenu=t=>eD(t);function LB(t,e){return t.composing?!0:rn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}var hne=xi?5e3:-1;on.compositionstart=on.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(i=>i.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),ay(t,!0),t.markCursor=null;else if(ay(t),Ai&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let i=t.domSelectionRange();for(let r=i.focusNode,s=i.focusOffset;r&&r.nodeType==1&&s!=0;){let o=s<0?r.lastChild:r.childNodes[s-1];if(!o)break;if(o.nodeType==3){t.domSelection().collapse(o,o.nodeValue.length);break}else r=o,s=-1}}t.input.composing=!0}VB(t,hne)};on.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,VB(t,20))};function VB(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>ay(t),e))}function BB(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=fne());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function fne(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function ay(t,e=!1){if(!(xi&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),BB(t),e||t.docView&&t.docView.dirty){let n=QS(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}}function pne(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),r=document.createRange();r.selectNodeContents(e),t.dom.blur(),i.removeAllRanges(),i.addRange(r),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}var Yc=vn&&so<15||Gc&&_te<604;sn.copy=on.cut=(t,e)=>{let n=e,i=t.state.selection,r=n.type=="cut";if(i.empty)return;let s=Yc?null:n.clipboardData,o=i.content(),{dom:a,text:l}=AB(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",a.innerHTML),s.setData("text/plain",l)):pne(t,a),r&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function mne(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function gne(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,i=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus();let r=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),i.parentNode&&i.parentNode.removeChild(i),n?rf(t,i.value,null,r,e):rf(t,i.textContent,i.innerHTML,r,e)},50)}function rf(t,e,n,i,r){let s=MB(t,e,n,i,t.state.selection.$from);if(t.someProp("handlePaste",l=>l(t,r,s||P.empty)))return!0;if(!s)return!1;let o=mne(s),a=o?t.state.tr.replaceSelectionWith(o,i):t.state.tr.replaceSelection(s);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}on.paste=(t,e)=>{let n=e;if(t.composing&&!xi)return;let i=Yc?null:n.clipboardData,r=t.input.shiftKey&&t.input.lastKeyCode!=45;i&&rf(t,i.getData("text/plain"),i.getData("text/html"),r,n)?n.preventDefault():gne(t,n)};var $S=class{constructor(e,n){this.slice=e,this.move=n}},jB=Zn?"altKey":"ctrlKey";sn.dragstart=(t,e)=>{let n=e,i=t.input.mouseDown;if(i&&i.done(),!n.dataTransfer)return;let r=t.state.selection,s=r.empty?null:t.posAtCoords(fy(n));if(!(s&&s.pos>=r.from&&s.pos<=(r instanceof ee?r.to-1:r.to))){if(i&&i.mightDrag)t.dispatch(t.state.tr.setSelection(ee.create(t.state.doc,i.mightDrag.pos)));else if(n.target&&n.target.nodeType==1){let c=t.docView.nearestDesc(n.target,!0);c&&c.node.type.spec.draggable&&c!=t.docView&&t.dispatch(t.state.tr.setSelection(ee.create(t.state.doc,c.posBefore)))}}let o=t.state.selection.content(),{dom:a,text:l}=AB(t,o);n.dataTransfer.clearData(),n.dataTransfer.setData(Yc?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",Yc||n.dataTransfer.setData("text/plain",l),t.dragging=new $S(o,!n[jB])};sn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};on.dragover=on.dragenter=(t,e)=>e.preventDefault();on.drop=(t,e)=>{let n=e,i=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let r=t.posAtCoords(fy(n));if(!r)return;let s=t.state.doc.resolve(r.pos),o=i&&i.slice;o?t.someProp("transformPasted",f=>{o=f(o,t)}):o=MB(t,n.dataTransfer.getData(Yc?"Text":"text/plain"),Yc?null:n.dataTransfer.getData("text/html"),!1,s);let a=!!(i&&!n[jB]);if(t.someProp("handleDrop",f=>f(t,n,o||P.empty,a))){n.preventDefault();return}if(!o)return;n.preventDefault();let l=o?I2(t.state.doc,s.pos,o):s.pos;l==null&&(l=s.pos);let c=t.state.tr;a&&c.deleteSelection();let u=c.mapping.map(l),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,h=c.doc;if(d?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(h))return;let p=c.doc.resolve(u);if(d&&ee.isSelectable(o.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new ee(p));else{let f=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,g,w,O)=>f=O),c.setSelection(JS(t,p,c.doc.resolve(f)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))};sn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&ts(t)},20))};sn.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};sn.beforeinput=(t,e)=>{if(Gt&&xi&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:i}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=i||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Va(8,"Backspace")))))return;let{$cursor:r}=t.state.selection;r&&r.pos>0&&t.dispatch(t.state.tr.delete(r.pos-1,r.pos).scrollIntoView())},50)}};for(let t in on)sn[t]=on[t];function sf(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}var HS=class t{constructor(e,n){this.toDOM=e,this.spec=n||$a,this.side=this.spec.side||0}map(e,n,i,r){let{pos:s,deleted:o}=e.mapResult(n.from+r,this.side<0?-1:1);return o?null:new _r(s-i,s-i,this)}valid(){return!0}eq(e){return this==e||e instanceof t&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&sf(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}},za=class t{constructor(e,n){this.attrs=e,this.spec=n||$a}map(e,n,i,r){let s=e.map(n.from+r,this.spec.inclusiveStart?-1:1)-i,o=e.map(n.to+r,this.spec.inclusiveEnd?1:-1)-i;return s>=o?null:new _r(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof t&&sf(this.attrs,e.attrs)&&sf(this.spec,e.spec)}static is(e){return e.type instanceof t}destroy(){}},WS=class t{constructor(e,n){this.attrs=e,this.spec=n||$a}map(e,n,i,r){let s=e.mapResult(n.from+r,1);if(s.deleted)return null;let o=e.mapResult(n.to+r,-1);return o.deleted||o.pos<=s.pos?null:new _r(s.pos-i,o.pos-i,this)}valid(e,n){let{index:i,offset:r}=e.content.findIndex(n.from),s;return r==n.from&&!(s=e.child(i)).isText&&r+s.nodeSize==n.to}eq(e){return this==e||e instanceof t&&sf(this.attrs,e.attrs)&&sf(this.spec,e.spec)}destroy(){}},_r=class t{constructor(e,n,i){this.from=e,this.to=n,this.type=i}copy(e,n){return new t(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,i){return this.type.map(e,this,n,i)}static widget(e,n,i){return new t(e,e,new HS(n,i))}static inline(e,n,i,r){return new t(e,n,new za(i,r))}static node(e,n,i,r){return new t(e,n,new WS(i,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof za}},Wc=[],$a={},nn=class t{constructor(e,n){this.local=e.length?e:Wc,this.children=n.length?n:Wc}static create(e,n){return n.length?cy(n,e,0,$a):qt}find(e,n,i){let r=[];return this.findInner(e??0,n??1e9,r,0,i),r}findInner(e,n,i,r,s){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=n&&a.to>=e&&(!s||s(a.spec))&&i.push(a.copy(a.from+r,a.to+r))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,n-a,i,r+a,s)}}map(e,n,i){return this==qt||e.maps.length==0?this:this.mapInner(e,n,0,0,i||$a)}mapInner(e,n,i,r,s){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,i,r);l&&l.type.valid(n,l)?(o||(o=[])).push(l):s.onRemove&&s.onRemove(this.local[a].spec)}return this.children.length?_ne(this.children,o||[],e,n,i,r,s):o?new t(o.sort(Ha),Wc):qt}add(e,n){return n.length?this==qt?t.create(e,n):this.addInner(e,n,0):this}addInner(e,n,i){let r,s=0;e.forEach((a,l)=>{let c=l+i,u;if(u=zB(n,a,c)){for(r||(r=this.children.slice());s<r.length&&r[s]<l;)s+=3;r[s]==l?r[s+2]=r[s+2].addInner(a,u,c+1):r.splice(s,0,l,l+a.nodeSize,cy(u,a,c+1,$a)),s+=3}});let o=UB(s?$B(n):n,-i);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new t(o.length?this.local.concat(o).sort(Ha):this.local,r||this.children)}remove(e){return e.length==0||this==qt?this:this.removeInner(e,0)}removeInner(e,n){let i=this.children,r=this.local;for(let s=0;s<i.length;s+=3){let o,a=i[s]+n,l=i[s+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(o||(o=[])).push(d));if(!o)continue;i==this.children&&(i=this.children.slice());let c=i[s+2].removeInner(o,a+1);c!=qt?i[s+2]=c:(i.splice(s,3),s-=3)}if(r.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let a=0;a<r.length;a++)r[a].eq(o,n)&&(r==this.local&&(r=this.local.slice()),r.splice(a--,1))}return i==this.children&&r==this.local?this:r.length||i.length?new t(r,i):qt}forChild(e,n){if(this==qt)return this;if(n.isLeaf)return t.empty;let i,r;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(i=this.children[a+2]);break}let s=e+1,o=s+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>s&&l.type instanceof za){let c=Math.max(s,l.from)-s,u=Math.min(o,l.to)-s;c<u&&(r||(r=[])).push(l.copy(c,u))}}if(r){let a=new t(r.sort(Ha),Wc);return i?new ly([a,i]):a}return i||qt}eq(e){if(this==e)return!0;if(!(e instanceof t)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return tD(this.localsInner(e))}localsInner(e){if(this==qt)return Wc;if(e.inlineContent||!this.local.some(za.is))return this.local;let n=[];for(let i=0;i<this.local.length;i++)this.local[i].type instanceof za||n.push(this.local[i]);return n}};nn.empty=new nn([],[]);nn.removeOverlap=tD;var qt=nn.empty,ly=class t{constructor(e){this.members=e}map(e,n){let i=this.members.map(r=>r.map(e,n,$a));return t.from(i)}forChild(e,n){if(n.isLeaf)return nn.empty;let i=[];for(let r=0;r<this.members.length;r++){let s=this.members[r].forChild(e,n);s!=qt&&(s instanceof t?i=i.concat(s.members):i.push(s))}return t.from(i)}eq(e){if(!(e instanceof t)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,i=!0;for(let r=0;r<this.members.length;r++){let s=this.members[r].localsInner(e);if(s.length)if(!n)n=s;else{i&&(n=n.slice(),i=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?tD(i?n:n.sort(Ha)):Wc}static from(e){switch(e.length){case 0:return qt;case 1:return e[0];default:return new t(e.every(n=>n instanceof nn)?e:e.reduce((n,i)=>n.concat(i instanceof nn?i:i.members),[]))}}};function _ne(t,e,n,i,r,s,o){let a=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let d=0;n.maps[c].forEach((h,p,f,m)=>{let g=m-f-(p-h);for(let w=0;w<a.length;w+=3){let O=a[w+1];if(O<0||h>O+u-d)continue;let Y=a[w]+u-d;p>=Y?a[w+1]=h<=Y?-2:-1:f>=r&&g&&(a[w]+=g,a[w+1]+=g)}d+=g}),u=n.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=n.map(t[c]+s),d=u-r;if(d<0||d>=i.content.size){l=!0;continue}let h=n.map(t[c+1]+s,-1),p=h-r,{index:f,offset:m}=i.content.findIndex(d),g=i.maybeChild(f);if(g&&m==d&&m+g.nodeSize==p){let w=a[c+2].mapInner(n,g,u+1,t[c]+s+1,o);w!=qt?(a[c]=d,a[c+1]=p,a[c+2]=w):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=yne(a,t,e,n,r,s,o),u=cy(c,i,0,o);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,h=0;d<u.children.length;d+=3){let p=u.children[d];for(;h<a.length&&a[h]<p;)h+=3;a.splice(h,0,u.children[d],u.children[d+1],u.children[d+2])}}return new nn(e.sort(Ha),a)}function UB(t,e){if(!e||!t.length)return t;let n=[];for(let i=0;i<t.length;i++){let r=t[i];n.push(new _r(r.from+e,r.to+e,r.type))}return n}function yne(t,e,n,i,r,s,o){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(i,r,c);d?n.push(d):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<t.length;l+=3)t[l+1]==-1&&a(t[l+2],e[l]+s+1);return n}function zB(t,e,n){if(e.isLeaf)return null;let i=n+e.nodeSize,r=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<i&&((r||(r=[])).push(o),t[s]=null);return r}function $B(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function cy(t,e,n,i){let r=[],s=!1;e.forEach((a,l)=>{let c=zB(t,a,l+n);if(c){s=!0;let u=cy(c,a,n+l+1,i);u!=qt&&r.push(l,l+a.nodeSize,u)}});let o=UB(s?$B(t):t,-n).sort(Ha);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(i.onRemove&&i.onRemove(o[a].spec),o.splice(a--,1));return o.length||r.length?new nn(o,r):qt}function Ha(t,e){return t.from-e.from||t.to-e.to}function tD(t){let e=t;for(let n=0;n<e.length-1;n++){let i=e[n];if(i.from!=i.to)for(let r=n+1;r<e.length;r++){let s=e[r];if(s.from==i.from){s.to!=i.to&&(e==t&&(e=t.slice()),e[r]=s.copy(s.from,i.to),sB(e,r+1,s.copy(i.to,s.to)));continue}else{s.from<i.to&&(e==t&&(e=t.slice()),e[n]=i.copy(i.from,s.from),sB(e,r,i.copy(s.from,i.to)));break}}}return e}function sB(t,e,n){for(;e<t.length&&Ha(n,t[e])>0;)e++;t.splice(e,0,n)}function SS(t){let e=[];return t.someProp("decorations",n=>{let i=n(t.state);i&&i!=qt&&e.push(i)}),t.cursorWrapper&&e.push(nn.create(t.state.doc,[t.cursorWrapper.deco])),ly.from(e)}var vne={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},bne=vn&&so<=11,qS=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}},GS=class{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new qS,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(i=>{for(let r=0;r<i.length;r++)this.queue.push(i[r]);vn&&so<=11&&i.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),bne&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,vne)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(J2(this.view)){if(this.suppressingSelectionUpdates)return ts(this.view);if(vn&&so<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Wa(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,i;for(let s=e.focusNode;s;s=nf(s))n.add(s);for(let s=e.anchorNode;s;s=nf(s))if(n.has(s)){i=s;break}let r=i&&this.view.docView.nearestDesc(i);if(r&&r.ignoreMutation({type:"selection",target:i.nodeType==3?i.parentNode:i}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let i=e.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(i)&&J2(e)&&!this.ignoreSelectionChange(i),s=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],l);d&&(s=s<0?d.from:Math.min(d.from,s),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(Ai&&l.length>1){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let d=u[0],h=u[1];d.parentNode&&d.parentNode.parentNode==h.parentNode?h.remove():d.remove()}}let c=null;s<0&&r&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&dy(i)&&(c=QS(e))&&c.eq(pe.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,ts(e),this.currentSelection.set(i),e.scrollToSelection()):(s>-1||r)&&(s>-1&&(e.docView.markDirty(s,o),wne(e)),this.handleDOMChange(s,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(i)||ts(e),this.currentSelection.set(i))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let i=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(i==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!i||i.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++)n.push(e.addedNodes[u]);if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(e.target))return{from:i.posBefore,to:i.posAfter};let r=e.previousSibling,s=e.nextSibling;if(vn&&so<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:h}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(r=d),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(s=h)}let o=r&&r.parentNode==e.target?tn(r)+1:0,a=i.localPosFromDOM(e.target,o,-1),l=s&&s.parentNode==e.target?tn(s):e.target.childNodes.length,c=i.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:{from:i.posAtStart,to:i.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}},oB=new WeakMap,aB=!1;function wne(t){if(!oB.has(t)&&(oB.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Ai,aB)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),aB=!0}}function Ene(t){let e;function n(l){l.preventDefault(),l.stopImmediatePropagation(),e=l.getTargetRanges()[0]}t.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",n,!0);let i=e.startContainer,r=e.startOffset,s=e.endContainer,o=e.endOffset,a=t.domAtPos(t.state.selection.anchor);return Wa(a.node,a.offset,s,o)&&([i,r,s,o]=[s,o,i,r]),{anchorNode:i,anchorOffset:r,focusNode:s,focusOffset:o}}function Ine(t,e,n){let{node:i,fromOffset:r,toOffset:s,from:o,to:a}=t.docView.parseRange(e,n),l=t.domSelectionRange(),c,u=l.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],dy(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Gt&&t.input.lastKeyCode===8)for(let g=s;g>r;g--){let w=i.childNodes[g-1],O=w.pmViewDesc;if(w.nodeName=="BR"&&!O){s=g;break}if(!O||O.size)break}let d=t.state.doc,h=t.someProp("domParser")||to.fromSchema(t.state.schema),p=d.resolve(o),f=null,m=h.parse(i,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:r,to:s,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:Cne,context:p});if(c&&c[0].pos!=null){let g=c[0].pos,w=c[1]&&c[1].pos;w==null&&(w=g),f={anchor:g+o,head:w+o}}return{doc:m,sel:f,from:o,to:a}}function Cne(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(rn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||rn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}var Tne=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Sne(t,e,n,i,r){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let W=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,it=QS(t,W);if(it&&!t.state.selection.eq(it)){if(Gt&&xi&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",po=>po(t,Va(13,"Enter"))))return;let fo=t.state.tr.setSelection(it);W=="pointer"?fo.setMeta("pointer",!0):W=="key"&&fo.scrollIntoView(),s&&fo.setMeta("composition",s),t.dispatch(fo)}return}let o=t.state.doc.resolve(e),a=o.sharedDepth(n);e=o.before(a+1),n=t.state.doc.resolve(n).after(a+1);let l=t.state.selection,c=Ine(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),h,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(h=t.state.selection.to,p="end"):(h=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let f=Ane(d.content,c.doc.content,c.from,h,p);if((Gc&&t.input.lastIOSEnter>Date.now()-225||xi)&&r.some(W=>W.nodeType==1&&!Tne.test(W.nodeName))&&(!f||f.endA>=f.endB)&&t.someProp("handleKeyDown",W=>W(t,Va(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!f)if(i&&l instanceof Oe&&!l.empty&&l.$head.sameParent(l.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))f={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let W=lB(t,t.state.doc,c.sel);if(W&&!W.eq(t.state.selection)){let it=t.state.tr.setSelection(W);s&&it.setMeta("composition",s),t.dispatch(it)}}return}if(Gt&&t.cursorWrapper&&c.sel&&c.sel.anchor==t.cursorWrapper.deco.from&&c.sel.head==c.sel.anchor){let W=f.endB-f.start;c.sel={anchor:c.sel.anchor+W,head:c.sel.anchor+W}}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&f.start==f.endB&&t.state.selection instanceof Oe&&(f.start>t.state.selection.from&&f.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?f.start=t.state.selection.from:f.endA<t.state.selection.to&&f.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(f.endB+=t.state.selection.to-f.endA,f.endA=t.state.selection.to)),vn&&so<=11&&f.endB==f.start+1&&f.endA==f.start&&f.start>c.from&&c.doc.textBetween(f.start-c.from-1,f.start-c.from+1)==" \xA0"&&(f.start--,f.endA--,f.endB--);let m=c.doc.resolveNoCache(f.start-c.from),g=c.doc.resolveNoCache(f.endB-c.from),w=u.resolve(f.start),O=m.sameParent(g)&&m.parent.inlineContent&&w.end()>=f.endA,Y;if((Gc&&t.input.lastIOSEnter>Date.now()-225&&(!O||r.some(W=>W.nodeName=="DIV"||W.nodeName=="P"))||!O&&m.pos<c.doc.content.size&&!m.sameParent(g)&&(Y=pe.findFrom(c.doc.resolve(m.pos+1),1,!0))&&Y.head==g.pos)&&t.someProp("handleKeyDown",W=>W(t,Va(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>f.start&&xne(u,f.start,f.endA,m,g)&&t.someProp("handleKeyDown",W=>W(t,Va(8,"Backspace")))){xi&&Gt&&t.domObserver.suppressSelectionUpdates();return}Gt&&xi&&f.endB==f.start&&(t.input.lastAndroidDelete=Date.now()),xi&&!O&&m.start()!=g.start()&&g.parentOffset==0&&m.depth==g.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==f.endA&&(f.endB-=2,g=c.doc.resolveNoCache(f.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(W){return W(t,Va(13,"Enter"))})},20));let j=f.start,Ne=f.endA,se,De,ct;if(O){if(m.pos==g.pos)vn&&so<=11&&m.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>ts(t),20)),se=t.state.tr.delete(j,Ne),De=u.resolve(f.start).marksAcross(u.resolve(f.endA));else if(f.endA==f.endB&&(ct=Dne(m.parent.content.cut(m.parentOffset,g.parentOffset),w.parent.content.cut(w.parentOffset,f.endA-w.start()))))se=t.state.tr,ct.type=="add"?se.addMark(j,Ne,ct.mark):se.removeMark(j,Ne,ct.mark);else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let W=m.parent.textBetween(m.parentOffset,g.parentOffset);if(t.someProp("handleTextInput",it=>it(t,j,Ne,W)))return;se=t.state.tr.insertText(W,j,Ne)}}if(se||(se=t.state.tr.replace(j,Ne,c.doc.slice(f.start-c.from,f.endB-c.from))),c.sel){let W=lB(t,se.doc,c.sel);W&&!(Gt&&xi&&t.composing&&W.empty&&(f.start!=f.endB||t.input.lastAndroidDelete<Date.now()-100)&&(W.head==j||W.head==se.mapping.map(Ne)-1)||vn&&W.empty&&W.head==j)&&se.setSelection(W)}De&&se.ensureMarks(De),s&&se.setMeta("composition",s),t.dispatch(se.scrollIntoView())}function lB(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:JS(t,e.resolve(n.anchor),e.resolve(n.head))}function Dne(t,e){let n=t.firstChild.marks,i=e.firstChild.marks,r=n,s=i,o,a,l;for(let u=0;u<i.length;u++)r=i[u].removeFromSet(r);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(r.length==1&&s.length==0)a=r[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(r.length==0&&s.length==1)a=s[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(k.from(c).eq(t))return{mark:a,type:o}}function xne(t,e,n,i,r){if(!i.parent.isTextblock||n-e<=r.pos-i.pos||DS(i,!0,!1)<r.pos)return!1;let s=t.resolve(e);if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(DS(s,!0,!0));return!o.parent.isTextblock||o.pos>n||DS(o,!0,!1)<n?!1:i.parent.content.cut(i.parentOffset).eq(o.parent.content)}function DS(t,e,n){let i=t.depth,r=e?t.end():t.pos;for(;i>0&&(e||t.indexAfter(i)==t.node(i).childCount);)i--,r++,e=!1;if(n){let s=t.node(i).maybeChild(t.indexAfter(i));for(;s&&!s.isLeaf;)s=s.firstChild,r++}return r}function Ane(t,e,n,i,r){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if(r=="end"){let l=Math.max(0,s-Math.min(o,a));i-=o+l-s}if(o<s&&t.size<e.size){let l=i<=s&&i>=o?s-i:0;s-=l,a=s+(a-o),o=s}else if(a<s){let l=i<=s&&i>=a?s-i:0;s-=l,o=s+(o-a),a=s}return{start:s,endA:o,endB:a}}var uy=class{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new jS,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(fB),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=dB(this),uB(this),this.nodeViews=hB(this),this.docView=W2(this.state.doc,cB(this),SS(this),this.dom,this),this.domObserver=new GS(this,(i,r,s,o)=>Sne(this,i,r,s,o)),this.domObserver.start(),tne(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&US(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(fB),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let i in this._props)n[i]=this._props[i];n.state=this.state;for(let i in e)n[i]=e[i];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){let i=this.state,r=!1,s=!1;e.storedMarks&&this.composing&&(BB(this),s=!0),this.state=e;let o=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(o||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=hB(this);kne(h,this.nodeViews)&&(this.nodeViews=h,r=!0)}(o||n.handleDOMEvents!=this._props.handleDOMEvents)&&US(this),this.editable=dB(this),uB(this);let a=SS(this),l=cB(this),c=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",u=r||!this.docView.matchesNode(e.doc,l,a);(u||!e.selection.eq(i.selection))&&(s=!0);let d=c=="preserve"&&s&&this.dom.style.overflowAnchor==null&&bte(this);if(s){this.domObserver.stop();let h=u&&(vn||Gt)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&Mne(i.selection,e.selection);if(u){let p=Gt?this.trackWrites=this.domSelectionRange().focusNode:null;(r||!this.docView.update(e.doc,l,a,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=W2(e.doc,l,a,this.dom,this)),p&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&zte(this))?ts(this,h):(TB(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():d&&wte(d)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof ee){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&B2(this,n.getBoundingClientRect(),e)}else B2(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let i=this.directPlugins[n];i.spec.view&&this.pluginViews.push(i.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let i=this.state.plugins[n];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let i=this.pluginViews[n];i.update&&i.update(this,e)}}someProp(e,n){let i=this._props&&this._props[e],r;if(i!=null&&(r=n?n(i):i))return r;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(r=n?n(a):a))return r}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let a=s[o].props[e];if(a!=null&&(r=n?n(a):a))return r}}hasFocus(){if(vn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Ete(this.dom),ts(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}posAtCoords(e){return Dte(this,e)}coordsAtPos(e,n=1){return vB(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,i=-1){let r=this.docView.posFromDOM(e,n,i);if(r==null)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(e,n){return Rte(this,n||this.state,e)}pasteHTML(e,n){return rf(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return rf(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(nne(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],SS(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return this.docView==null}dispatchEvent(e){return rne(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){return rn&&this.root.nodeType===11&&fte(this.dom.ownerDocument)==this.dom?Ene(this):this.domSelection()}domSelection(){return this.root.getSelection()}};function cB(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let i in n)i=="class"?e.class+=" "+n[i]:i=="style"?e.style=(e.style?e.style+";":"")+n[i]:!e[i]&&i!="contenteditable"&&i!="nodeName"&&(e[i]=String(n[i]))}),e.translate||(e.translate="no"),[_r.node(0,t.state.doc.content.size,e)]}function uB(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:_r.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function dB(t){return!t.someProp("editable",e=>e(t.state)===!1)}function Mne(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function hB(t){let e=Object.create(null);function n(i){for(let r in i)Object.prototype.hasOwnProperty.call(e,r)||(e[r]=i[r])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function kne(t,e){let n=0,i=0;for(let r in t){if(t[r]!=e[r])return!0;n++}for(let r in e)i++;return n!=i}function fB(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Rne=["ol",0],Nne=["ul",0],Pne=["li",0],HB={attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs(t){return{order:t.hasAttribute("start")?+t.getAttribute("start"):1}}}],toDOM(t){return t.attrs.order==1?Rne:["ol",{start:t.attrs.order},0]}},WB={parseDOM:[{tag:"ul"}],toDOM(){return Nne}},qB={parseDOM:[{tag:"li"}],toDOM(){return Pne},defining:!0};function GB(t,e=null){return function(n,i){let{$from:r,$to:s}=n.selection,o=r.blockRange(s),a=!1,l=o;if(!o)return!1;if(o.depth>=2&&r.node(o.depth-1).type.compatibleContent(t)&&o.startIndex==0){if(r.index(o.depth-1)==0)return!1;let u=n.doc.resolve(o.start-2);l=new Ra(u,u,o.depth),o.endIndex<o.parent.childCount&&(o=new Ra(r,n.doc.resolve(s.end(o.depth)),o.depth)),a=!0}let c=zc(l,t,e,o);return c?(i&&i(One(n.tr,o,c,a,t).scrollIntoView()),!0):!1}}function One(t,e,n,i,r){let s=k.empty;for(let u=n.length-1;u>=0;u--)s=k.from(n[u].type.create(n[u].attrs,s));t.step(new Tt(e.start-(i?2:0),e.end,e.start,e.end,new P(s,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==r&&(o=u+1);let a=n.length-o,l=e.start+n.length-(i?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,h=!0;u<d;u++,h=!1)!h&&no(t.doc,l,a)&&(t.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return t}function KB(t,e){return function(n,i){let{$from:r,$to:s,node:o}=n.selection;if(o&&o.isBlock||r.depth<2||!r.sameParent(s))return!1;let a=r.node(-1);if(a.type!=t)return!1;if(r.parent.content.size==0&&r.node(-1).childCount==r.indexAfter(-1)){if(r.depth==3||r.node(-3).type!=t||r.index(-2)!=r.node(-2).childCount-1)return!1;if(i){let d=k.empty,h=r.index(-1)?1:r.index(-2)?2:3;for(let w=r.depth-h;w>=r.depth-3;w--)d=k.from(r.node(w).copy(d));let p=r.indexAfter(-1)<r.node(-2).childCount?1:r.indexAfter(-2)<r.node(-3).childCount?2:3;d=d.append(k.from(t.createAndFill()));let f=r.before(r.depth-(h-1)),m=n.tr.replace(f,r.after(-p),new P(d,4-h,0)),g=-1;m.doc.nodesBetween(f,m.doc.content.size,(w,O)=>{if(g>-1)return!1;w.isTextblock&&w.content.size==0&&(g=O+1)}),g>-1&&m.setSelection(pe.near(m.doc.resolve(g))),i(m.scrollIntoView())}return!0}let l=s.pos==r.end()?a.contentMatchAt(0).defaultType:null,c=n.tr.delete(r.pos,s.pos),u=l?[e?{type:t,attrs:e}:null,{type:l}]:void 0;return no(c.doc,r.pos,2,u)?(i&&i(c.split(r.pos,2,u).scrollIntoView()),!0):!1}}function nD(t){return function(e,n){let{$from:i,$to:r}=e.selection,s=i.blockRange(r,o=>o.childCount>0&&o.firstChild.type==t);return s?n?i.node(s.depth-1).type==t?Fne(e,n,t,s):Lne(e,n,s):!0:!1}}function Fne(t,e,n,i){let r=t.tr,s=i.end,o=i.$to.end(i.depth);s<o&&(r.step(new Tt(s-1,o,s,o,new P(k.from(n.create(null,i.parent.copy())),1,0),1,!0)),i=new Ra(r.doc.resolve(i.$from.pos),r.doc.resolve(o),i.depth));let a=Oa(i);if(a==null)return!1;r.lift(i,a);let l=r.mapping.map(s,-1)-1;return Fa(r.doc,l)&&r.join(l),e(r.scrollIntoView()),!0}function Lne(t,e,n){let i=t.tr,r=n.parent;for(let p=n.end,f=n.endIndex-1,m=n.startIndex;f>m;f--)p-=r.child(f).nodeSize,i.delete(p-1,p+1);let s=i.doc.resolve(n.start),o=s.nodeAfter;if(i.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==r.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?k.empty:k.from(r))))return!1;let d=s.pos,h=d+o.nodeSize;return i.step(new Tt(d-(a?1:0),h+(l?1:0),d+1,h-1,new P((a?k.empty:k.from(r.copy(k.empty))).append(l?k.empty:k.from(r.copy(k.empty))),a?0:1,l?0:1),a?0:1)),e(i.scrollIntoView()),!0}function iD(t){return function(e,n){let{$from:i,$to:r}=e.selection,s=i.blockRange(r,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let a=s.parent,l=a.child(o-1);if(l.type!=t)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,u=k.from(c?t.create():null),d=new P(k.from(t.create(null,k.from(a.type.create(null,u)))),c?3:1,0),h=s.start,p=s.end;n(e.tr.step(new Tt(h-(c?3:1),p,h,p,d,1,!0)).scrollIntoView())}return!0}}var Bne={attrs:{href:{},title:{default:null},target:{default:"_blank"}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs(t){return{href:t.getAttribute("href"),title:t.getAttribute("title"),target:t.getAttribute("target")}}}],toDOM(t){let{href:e,title:n,target:i}=t.attrs;return["a",{href:e,title:n,target:i},0]}},jne={parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM(){return["em",0]}},Une={parseDOM:[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:t=>/^(?:bold(?:er)?|[5-9]\d{2,})$/.test(t)&&null}],toDOM(){return["strong",0]}},zne={parseDOM:[{tag:"code"}],toDOM(){return["code",0]}},$ne={parseDOM:[{tag:"u"},{style:"text-decoration=underline",consuming:!1}],toDOM(){return["u",0]}},Hne={parseDOM:[{tag:"s"},{tag:"strike"},{style:"text-decoration=line-through"}],toDOM(){return["s",0]}},Wne={attrs:{color:{default:null}},parseDOM:[{style:"color",getAttrs:t=>({color:t})}],toDOM(t){let{color:e}=t.attrs;return["span",{style:`color:${e};`},0]}},qne={attrs:{backgroundColor:{default:null}},parseDOM:[{style:"background-color",getAttrs:t=>({backgroundColor:t})}],toDOM(t){let{backgroundColor:e}=t.attrs;return["span",{style:`background-color:${e};`},0]}},Gne={link:Bne,em:jne,strong:Une,code:zne,u:$ne,s:Hne,text_color:Wne,text_background_color:qne},Kne={content:"block+"},Yne={group:"inline"},Qne={content:"inline*",group:"block",attrs:{align:{default:null}},parseDOM:[{tag:"p",getAttrs(t){let{textAlign:e}=t.style;return{align:t.getAttribute("align")||e||null}}}],toDOM(t){let{align:e}=t.attrs;return["p",{style:iS({textAlign:e!=="left"?e:null})||null},0]}},Jne={content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM(){return["blockquote",0]}},Xne={group:"block",parseDOM:[{tag:"hr"}],toDOM(){return["hr"]}},Zne={attrs:{level:{default:1},align:{default:null}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs(t){let{textAlign:e}=t.style;return{level:1,align:t.getAttribute("align")||e||null}}},{tag:"h2",getAttrs(t){let{textAlign:e}=t.style;return{level:2,align:t.getAttribute("align")||e||null}}},{tag:"h3",getAttrs(t){let{textAlign:e}=t.style;return{level:3,align:t.getAttribute("align")||e||null}}},{tag:"h4",getAttrs(t){let{textAlign:e}=t.style;return{level:4,align:t.getAttribute("align")||e||null}}},{tag:"h5",getAttrs(t){let{textAlign:e}=t.style;return{level:5,align:t.getAttribute("align")||e||null}}},{tag:"h6",getAttrs(t){let{textAlign:e}=t.style;return{level:6,align:t.getAttribute("align")||e||null}}}],toDOM(t){let{level:e,align:n}=t.attrs,r=iS({textAlign:n!=="left"?n:null})||null;return[`h${e}`,{style:r},0]}},eie={content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM(){return["pre",["code",0]]}},tie={inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM(){return["br"]}},nie={inline:!0,attrs:{src:{},alt:{default:null},title:{default:null},width:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs(t){return{src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt"),width:t.getAttribute("width")}}}],toDOM(t){let{src:e,alt:n,title:i,width:r}=t.attrs;return["img",{src:e,alt:n,title:i,width:r}]}},iie=oe(C({},qB),{content:"paragraph block*"}),rie=oe(C({},HB),{content:"list_item+",group:"block"}),sie=oe(C({},WB),{content:"list_item+",group:"block"}),oie={doc:Kne,text:Yne,paragraph:Qne,blockquote:Jne,horizontal_rule:Xne,heading:Zne,hard_break:tie,code_block:eie,image:nie,list_item:iie,ordered_list:rie,bullet_list:sie},lo=new W_({marks:Gne,nodes:oie});var QB=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function aie(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}var lie=(t,e,n)=>{let i=aie(t,n);if(!i)return!1;let r=JB(i);if(!r){let o=i.blockRange(),a=o&&Oa(o);return a==null?!1:(e&&e(t.tr.lift(o,a).scrollIntoView()),!0)}let s=r.nodeBefore;if(!s.type.spec.isolating&&ej(t,r,e))return!0;if(i.parent.content.size==0&&(Qc(s,"end")||ee.isSelectable(s))){let o=Z_(t.doc,i.before(),i.after(),P.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Qc(s,"end")?pe.findFrom(a.doc.resolve(a.mapping.map(r.pos,-1)),-1):ee.create(a.doc,r.pos-s.nodeSize)),e(a.scrollIntoView())}return!0}}return s.isAtom&&r.depth==i.depth-1?(e&&e(t.tr.delete(r.pos-s.nodeSize,r.pos).scrollIntoView()),!0):!1};function Qc(t,e,n=!1){for(let i=t;i;i=e=="start"?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(n&&i.childCount!=1)return!1}return!1}var cie=(t,e,n)=>{let{$head:i,empty:r}=t.selection,s=i;if(!r)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):i.parentOffset>0)return!1;s=JB(i)}let o=s&&s.nodeBefore;return!o||!ee.isSelectable(o)?!1:(e&&e(t.tr.setSelection(ee.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function JB(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function uie(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}var die=(t,e,n)=>{let i=uie(t,n);if(!i)return!1;let r=XB(i);if(!r)return!1;let s=r.nodeAfter;if(ej(t,r,e))return!0;if(i.parent.content.size==0&&(Qc(s,"start")||ee.isSelectable(s))){let o=Z_(t.doc,i.before(),i.after(),P.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=t.tr.step(o);a.setSelection(Qc(s,"start")?pe.findFrom(a.doc.resolve(a.mapping.map(r.pos)),1):ee.create(a.doc,a.mapping.map(r.pos))),e(a.scrollIntoView())}return!0}}return s.isAtom&&r.depth==i.depth-1?(e&&e(t.tr.delete(r.pos,r.pos+s.nodeSize).scrollIntoView()),!0):!1},hie=(t,e,n)=>{let{$head:i,empty:r}=t.selection,s=i;if(!r)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):i.parentOffset<i.parent.content.size)return!1;s=XB(i)}let o=s&&s.nodeAfter;return!o||!ee.isSelectable(o)?!1:(e&&e(t.tr.setSelection(ee.create(t.doc,s.pos)).scrollIntoView()),!0)};function XB(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}var ZB=(t,e)=>{let{$from:n,$to:i}=t.selection,r=n.blockRange(i),s=r&&Oa(r);return s==null?!1:(e&&e(t.tr.lift(r,s).scrollIntoView()),!0)},sD=(t,e)=>{let{$head:n,$anchor:i}=t.selection;return!n.parent.type.spec.code||!n.sameParent(i)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function oD(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}var aD=(t,e)=>{let{$head:n,$anchor:i}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(i))return!1;let r=n.node(-1),s=n.indexAfter(-1),o=oD(r.contentMatchAt(s));if(!o||!r.canReplaceWith(s,s,o))return!1;if(e){let a=n.after(),l=t.tr.replaceWith(a,a,o.createAndFill());l.setSelection(pe.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},lD=(t,e)=>{let n=t.selection,{$from:i,$to:r}=n;if(n instanceof Ln||i.parent.inlineContent||r.parent.inlineContent)return!1;let s=oD(r.parent.contentMatchAt(r.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!i.parentOffset&&r.index()<r.parent.childCount?i:r).pos,a=t.tr.insert(o,s.createAndFill());a.setSelection(Oe.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},cD=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(no(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let i=n.blockRange(),r=i&&Oa(i);return r==null?!1:(e&&e(t.tr.lift(i,r).scrollIntoView()),!0)};function fie(t){return(e,n)=>{let{$from:i,$to:r}=e.selection;if(e.selection instanceof ee&&e.selection.node.isBlock)return!i.parentOffset||!no(e.doc,i.pos)?!1:(n&&n(e.tr.split(i.pos).scrollIntoView()),!0);if(!i.parent.isBlock)return!1;if(n){let s=r.parentOffset==r.parent.content.size,o=e.tr;(e.selection instanceof Oe||e.selection instanceof Ln)&&o.deleteSelection();let a=i.depth==0?null:oD(i.node(-1).contentMatchAt(i.indexAfter(-1))),l=t&&t(r.parent,s),c=l?[l]:s&&a?[{type:a}]:void 0,u=no(o.doc,o.mapping.map(i.pos),1,c);if(!c&&!u&&no(o.doc,o.mapping.map(i.pos),1,a?[{type:a}]:void 0)&&(a&&(c=[{type:a}]),u=!0),u&&(o.split(o.mapping.map(i.pos),1,c),!s&&!i.parentOffset&&i.parent.type!=a)){let d=o.mapping.map(i.before()),h=o.doc.resolve(d);a&&i.node(-1).canReplaceWith(h.index(),h.index()+1,a)&&o.setNodeMarkup(o.mapping.map(i.before()),a)}n(o.scrollIntoView())}return!0}}var uD=fie();var pie=(t,e)=>(e&&e(t.tr.setSelection(new Ln(t.doc))),!0);function mie(t,e,n){let i=e.nodeBefore,r=e.nodeAfter,s=e.index();return!i||!r||!i.type.compatibleContent(r.type)?!1:!i.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-i.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(r.isTextblock||Fa(t.doc,e.pos))?!1:(n&&n(t.tr.clearIncompatible(e.pos,i.type,i.contentMatchAt(i.childCount)).join(e.pos).scrollIntoView()),!0)}function ej(t,e,n){let i=e.nodeBefore,r=e.nodeAfter,s,o;if(i.type.spec.isolating||r.type.spec.isolating)return!1;if(mie(t,e,n))return!0;let a=e.parent.canReplace(e.index(),e.index()+1);if(a&&(s=(o=i.contentMatchAt(i.childCount)).findWrapping(r.type))&&o.matchType(s[0]||r.type).validEnd){if(n){let d=e.pos+r.nodeSize,h=k.empty;for(let m=s.length-1;m>=0;m--)h=k.from(s[m].create(null,h));h=k.from(i.copy(h));let p=t.tr.step(new Tt(e.pos-1,d,e.pos,d,new P(h,1,0),s.length,!0)),f=d+2*s.length;Fa(p.doc,f)&&p.join(f),n(p.scrollIntoView())}return!0}let l=pe.findFrom(e,1),c=l&&l.$from.blockRange(l.$to),u=c&&Oa(c);if(u!=null&&u>=e.depth)return n&&n(t.tr.lift(c,u).scrollIntoView()),!0;if(a&&Qc(r,"start",!0)&&Qc(i,"end")){let d=i,h=[];for(;h.push(d),!d.isTextblock;)d=d.lastChild;let p=r,f=1;for(;!p.isTextblock;p=p.firstChild)f++;if(d.canReplace(d.childCount,d.childCount,p.content)){if(n){let m=k.empty;for(let w=h.length-1;w>=0;w--)m=k.from(h[w].copy(m));let g=t.tr.step(new Tt(e.pos-h.length,e.pos+r.nodeSize,e.pos+f,e.pos+r.nodeSize-f,new P(m,h.length,0),0,!0));n(g.scrollIntoView())}return!0}}return!1}function tj(t){return function(e,n){let i=e.selection,r=t<0?i.$from:i.$to,s=r.depth;for(;r.node(s).isInline;){if(!s)return!1;s--}return r.node(s).isTextblock?(n&&n(e.tr.setSelection(Oe.create(e.doc,t<0?r.start(s):r.end(s)))),!0):!1}}var gie=tj(-1),_ie=tj(1);function nj(t,e=null){return function(n,i){let{$from:r,$to:s}=n.selection,o=r.blockRange(s),a=o&&zc(o,t,e);return a?(i&&i(n.tr.wrap(o,a).scrollIntoView()),!0):!1}}function py(t,e=null){return function(n,i){let r=!1;for(let s=0;s<n.selection.ranges.length&&!r;s++){let{$from:{pos:o},$to:{pos:a}}=n.selection.ranges[s];n.doc.nodesBetween(o,a,(l,c)=>{if(r)return!1;if(!(!l.isTextblock||l.hasMarkup(t,e)))if(l.type==t)r=!0;else{let u=n.doc.resolve(c),d=u.index();r=u.parent.canReplaceWith(d,d+1,t)}})}if(!r)return!1;if(i){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[o];s.setBlockType(a,l,t,e)}i(s.scrollIntoView())}return!0}}function yie(t,e,n){for(let i=0;i<e.length;i++){let{$from:r,$to:s}=e[i],o=r.depth==0?t.inlineContent&&t.type.allowsMarkType(n):!1;if(t.nodesBetween(r.pos,s.pos,a=>{if(o)return!1;o=a.inlineContent&&a.type.allowsMarkType(n)}),o)return!0}return!1}function Ga(t,e=null){return function(n,i){let{empty:r,$cursor:s,ranges:o}=n.selection;if(r&&!s||!yie(n.doc,o,t))return!1;if(i)if(s)t.isInSet(n.storedMarks||s.marks())?i(n.tr.removeStoredMark(t)):i(n.tr.addStoredMark(t.create(e)));else{let a=!1,l=n.tr;for(let c=0;!a&&c<o.length;c++){let{$from:u,$to:d}=o[c];a=n.doc.rangeHasMark(u.pos,d.pos,t)}for(let c=0;c<o.length;c++){let{$from:u,$to:d}=o[c];if(a)l.removeMark(u.pos,d.pos,t);else{let h=u.pos,p=d.pos,f=u.nodeAfter,m=d.nodeBefore,g=f&&f.isText?/^\s*/.exec(f.text)[0].length:0,w=m&&m.isText?/\s*$/.exec(m.text)[0].length:0;h+g<p&&(h+=g,p-=w),l.addMark(h,p,t.create(e))}}i(l.scrollIntoView())}return!0}}function Jc(...t){return function(e,n,i){for(let r=0;r<t.length;r++)if(t[r](e,n,i))return!0;return!1}}var rD=Jc(QB,lie,cie),YB=Jc(QB,die,hie),ns={Enter:Jc(sD,lD,cD,uD),"Mod-Enter":aD,Backspace:rD,"Mod-Backspace":rD,"Shift-Backspace":rD,Delete:YB,"Mod-Delete":YB,"Mod-a":pie},ij={"Ctrl-h":ns.Backspace,"Alt-Backspace":ns["Mod-Backspace"],"Ctrl-d":ns.Delete,"Ctrl-Alt-Backspace":ns["Mod-Delete"],"Alt-Delete":ns["Mod-Delete"],"Alt-d":ns["Mod-Delete"],"Ctrl-a":gie,"Ctrl-e":_ie};for(let t in ns)ij[t]=ns[t];var vie=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,rj=vie?ij:ns;var ti=class{constructor(e,n){this.match=e,this.match=e,this.handler=typeof n=="string"?bie(n):n}};function bie(t){return function(e,n,i,r){let s=t;if(n[1]){let o=n[0].lastIndexOf(n[1]);s+=n[0].slice(o+n[1].length),i+=o;let a=i-r;a>0&&(s=n[0].slice(o-a,o)+s,i=r)}return e.tr.insertText(s,i,r)}}var wie=500;function oj({rules:t}){let e=new Wt({state:{init(){return null},apply(n,i){let r=n.getMeta(this);return r||(n.selectionSet||n.docChanged?null:i)}},props:{handleTextInput(n,i,r,s){return sj(n,i,r,s,t,e)},handleDOMEvents:{compositionend:n=>{setTimeout(()=>{let{$cursor:i}=n.state.selection;i&&sj(n,i.pos,i.pos,"",t,e)})}}},isInputRules:!0});return e}function sj(t,e,n,i,r,s){if(t.composing)return!1;let o=t.state,a=o.doc.resolve(e);if(a.parent.type.spec.code)return!1;let l=a.parent.textBetween(Math.max(0,a.parentOffset-wie),a.parentOffset,null,"\uFFFC")+i;for(let c=0;c<r.length;c++){let u=r[c].match.exec(l),d=u&&r[c].handler(o,u,e-(u[0].length-i.length),n);if(d)return t.dispatch(d.setMeta(s,{transform:d,from:e,to:n,text:i})),!0}return!1}var aj=new ti(/--$/,"\u2014"),lj=new ti(/\.\.\.$/,"\u2026"),Eie=new ti(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"\u201C"),Iie=new ti(/"$/,"\u201D"),Cie=new ti(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"\u2018"),Tie=new ti(/'$/,"\u2019"),cj=[Eie,Iie,Cie,Tie];function my(t,e,n=null,i){return new ti(t,(r,s,o,a)=>{let l=n instanceof Function?n(s):n,c=r.tr.delete(o,a),u=c.doc.resolve(o),d=u.blockRange(),h=d&&zc(d,e,l);if(!h)return null;c.wrap(d,h);let p=c.doc.resolve(o-1).nodeBefore;return p&&p.type==e&&Fa(c.doc,o-1)&&(!i||i(s,p))&&c.join(o-1),c})}function dD(t,e,n=null){return new ti(t,(i,r,s,o)=>{let a=i.doc.resolve(s),l=n instanceof Function?n(r):n;return a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),e)?i.tr.delete(s,o).setBlockType(s,s,e,l):null})}var gy=(t,e)=>{let{from:n,$from:i,to:r,empty:s}=t.selection;return s?!!e.isInSet(t.storedMarks||i.marks()):t.doc.rangeHasMark(n,r,e)},Sie=(t,e)=>{for(let n=e.depth;n>0;n-=1)if(e.node(n).type===t)return e.node(n).type;return null},hD=(t,e,n={})=>{let{selection:i}=t,{$from:r,to:s}=i,o=Sie(e,r);return!Object.entries(n).length||!o?!!o:s<=r.end()&&r.parent.hasMarkup(e,n)},uj=t=>{let e=[],{selection:n,storedMarks:i}=t,{from:r,to:s,empty:o,$from:a}=n;return o?e=i||a.marks():t.doc.nodesBetween(r,s,l=>{e=[...e,...l.marks]}),e},fD=t=>{let e=[],{selection:{from:n,to:i}}=t;return t.doc.nodesBetween(n,i,r=>{e.push(r)}),e},pD=(t,e,n)=>{for(let i of e){let{$from:r,$to:s}=i,o=r.depth===0?t.type.allowsMarkType(n):!1;if(t.nodesBetween(r.pos,s.pos,a=>o?!1:(o=a.inlineContent&&a.type.allowsMarkType(n),!0)),o)return!0}return!1},mD=(t,e,n)=>new ti(t,(i,r,s,o)=>{let{tr:a}=i,l=s,c=o,[u,,d]=r,h=u.search(/\S/);if(d){let p=s+u.indexOf(d),f=p+d.length;f<o&&a.delete(f,o),p>s&&a.delete(s+h,p),c=s+d.length+h}return a.addMark(l,c,e.create(n)),a.removeStoredMark(e),a}),dj=(t,e)=>{let{$from:n}=t.selection;for(let i=n.depth;i>=0;i-=1){let r=n.index(i);if(n.node(i).canReplaceWith(r,r,e))return!0}return!1};var hj=()=>(t,e)=>{let{doc:n,selection:i,tr:r}=t,{$head:{pos:s},from:o,to:a}=i;if(o===a){let l=n.resolve(s),c=s-l.textOffset,u=c+l.parent.child(l.index()).nodeSize;r.removeMark(c,u)}else r.removeMark(o,a);return r.docChanged?(e?.(r),!0):!1},gD=(t,e={})=>(n,i)=>{let{tr:r,selection:s}=n,{empty:o,ranges:a,$from:l,$to:c}=s;if(o&&s instanceof Oe){let{$cursor:u}=s;if(!u||!pD(n.doc,a,t)||(r.addStoredMark(t.create(e)),!r.storedMarksSet))return!1;i?.(r)}else{if(r.addMark(l.pos,c.pos,t.create(e)),!r.docChanged)return!1;i?.(r.scrollIntoView())}return!0},fj=t=>(e,n)=>{let{tr:i,selection:r,storedMarks:s,doc:o}=e,{empty:a,ranges:l}=r;if(a&&r instanceof Oe){let{$cursor:c}=r;if(!c||!pD(e.doc,l,t))return!1;if(t.isInSet(s||c.marks()))return i.removeStoredMark(t),n?.(i),!0}else{for(let c of l){let{$from:u,$to:d}=c;o.rangeHasMark(u.pos,d.pos,t)&&i.removeMark(u.pos,d.pos,t)}if(!i.docChanged)return!1;n?.(i.scrollIntoView())}return!1};var is={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},yy={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Die=typeof navigator<"u"&&/Mac/.test(navigator.platform),xie=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(mt=0;mt<10;mt++)is[48+mt]=is[96+mt]=String(mt);var mt;for(mt=1;mt<=24;mt++)is[mt+111]="F"+mt;var mt;for(mt=65;mt<=90;mt++)is[mt]=String.fromCharCode(mt+32),yy[mt]=String.fromCharCode(mt);var mt;for(_y in is)yy.hasOwnProperty(_y)||(yy[_y]=is[_y]);var _y;function pj(t){var e=Die&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||xie&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?yy:is)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}var Aie=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function Mie(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let i,r,s,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))i=!0;else if(/^(c|ctrl|control)$/i.test(l))r=!0;else if(/^s(hift)?$/i.test(l))s=!0;else if(/^mod$/i.test(l))Aie?o=!0:r=!0;else throw new Error("Unrecognized modifier name: "+l)}return i&&(n="Alt-"+n),r&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function kie(t){let e=Object.create(null);for(let n in t)e[Mie(n)]=t[n];return e}function _D(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function of(t){return new Wt({props:{handleKeyDown:Rie(t)}})}function Rie(t){let e=kie(t);return function(n,i){let r=pj(i),s,o=e[_D(r,i)];if(o&&o(n.state,n.dispatch,n))return!0;if(r.length==1&&r!=" "){if(i.shiftKey){let a=e[_D(r,i,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((i.shiftKey||i.altKey||i.metaKey||r.charCodeAt(0)>127)&&(s=is[i.keyCode])&&s!=r){let a=e[_D(s,i)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}var vy=200,Pt=function(){};Pt.prototype.append=function(e){return e.length?(e=Pt.from(e),!this.length&&e||e.length<vy&&this.leafAppend(e)||this.length<vy&&e.leafPrepend(this)||this.appendInner(e)):this};Pt.prototype.prepend=function(e){return e.length?Pt.from(e).append(this):this};Pt.prototype.appendInner=function(e){return new Nie(this,e)};Pt.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Pt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Pt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Pt.prototype.forEach=function(e,n,i){n===void 0&&(n=0),i===void 0&&(i=this.length),n<=i?this.forEachInner(e,n,i,0):this.forEachInvertedInner(e,n,i,0)};Pt.prototype.map=function(e,n,i){n===void 0&&(n=0),i===void 0&&(i=this.length);var r=[];return this.forEach(function(s,o){return r.push(e(s,o))},n,i),r};Pt.from=function(e){return e instanceof Pt?e:e&&e.length?new mj(e):Pt.empty};var mj=function(t){function e(i){t.call(this),this.values=i}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(r,s){return r==0&&s==this.length?this:new e(this.values.slice(r,s))},e.prototype.getInner=function(r){return this.values[r]},e.prototype.forEachInner=function(r,s,o,a){for(var l=s;l<o;l++)if(r(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,o,a){for(var l=s-1;l>=o;l--)if(r(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(r){if(this.length+r.length<=vy)return new e(this.values.concat(r.flatten()))},e.prototype.leafPrepend=function(r){if(this.length+r.length<=vy)return new e(r.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Pt);Pt.empty=new mj([]);var Nie=function(t){function e(n,i){t.call(this),this.left=n,this.right=i,this.length=n.length+i.length,this.depth=Math.max(n.depth,i.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(i){return i<this.left.length?this.left.get(i):this.right.get(i-this.left.length)},e.prototype.forEachInner=function(i,r,s,o){var a=this.left.length;if(r<a&&this.left.forEachInner(i,r,Math.min(s,a),o)===!1||s>a&&this.right.forEachInner(i,Math.max(r-a,0),Math.min(this.length,s)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(i,r,s,o){var a=this.left.length;if(r>a&&this.right.forEachInvertedInner(i,r-a,Math.max(s,a)-a,o+a)===!1||s<a&&this.left.forEachInvertedInner(i,Math.min(r,a),s,o)===!1)return!1},e.prototype.sliceInner=function(i,r){if(i==0&&r==this.length)return this;var s=this.left.length;return r<=s?this.left.slice(i,r):i>=s?this.right.slice(i-s,r-s):this.left.slice(i,s).append(this.right.slice(0,r-s))},e.prototype.leafAppend=function(i){var r=this.right.leafAppend(i);if(r)return new e(this.left,r)},e.prototype.leafPrepend=function(i){var r=this.left.leafPrepend(i);if(r)return new e(r,this.right)},e.prototype.appendInner=function(i){return this.left.depth>=Math.max(this.right.depth,i.depth)+1?new e(this.left,new e(this.right,i)):new e(this,i)},e}(Pt),yD=Pt;var Pie=500,Ka=class t{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let i=this.items.length;for(;;i--)if(this.items.get(i-1).selection){--i;break}let r,s;n&&(r=this.remapping(i,this.items.length),s=r.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((d,h)=>{if(!d.step){r||(r=this.remapping(i,h+1),s=r.maps.length),s--,u.push(d);return}if(r){u.push(new yr(d.map));let p=d.step.map(r.slice(s)),f;p&&o.maybeStep(p).doc&&(f=o.mapping.maps[o.mapping.maps.length-1],c.push(new yr(f,void 0,void 0,c.length+u.length))),s--,f&&r.appendMap(f,s)}else o.maybeStep(d.step);if(d.selection)return a=r?d.selection.map(r.slice(s)):d.selection,l=new t(this.items.slice(0,i).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,n,i,r){let s=[],o=this.eventCount,a=this.items,l=!r&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),h=new yr(e.mapping.maps[u],d,n),p;(p=l&&l.merge(h))&&(h=p,u?s.pop():a=a.slice(0,a.length-1)),s.push(h),n&&(o++,n=void 0),r||(l=h)}let c=o-i.depth;return c>Fie&&(a=Oie(a,c),o-=c),new t(a.append(s),o)}remapping(e,n){let i=new Gh;return this.items.forEach((r,s)=>{let o=r.mirrorOffset!=null&&s-r.mirrorOffset>=e?i.maps.length-r.mirrorOffset:void 0;i.appendMap(r.map,o)},e,n),i}addMaps(e){return this.eventCount==0?this:new t(this.items.append(e.map(n=>new yr(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let i=[],r=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},r);let l=n;this.items.forEach(h=>{let p=s.getMirror(--l);if(p==null)return;o=Math.min(o,p);let f=s.maps[p];if(h.step){let m=e.steps[p].invert(e.docs[p]),g=h.selection&&h.selection.map(s.slice(l+1,p));g&&a++,i.push(new yr(f,m,g))}else i.push(new yr(f))},r);let c=[];for(let h=n;h<o;h++)c.push(new yr(s.maps[h]));let u=this.items.slice(0,r).append(c).append(i),d=new t(u,a);return d.emptyItemCount()>Pie&&(d=d.compress(this.items.length-i.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),i=n.maps.length,r=[],s=0;return this.items.forEach((o,a)=>{if(a>=e)r.push(o),o.selection&&s++;else if(o.step){let l=o.step.map(n.slice(i)),c=l&&l.getMap();if(i--,c&&n.appendMap(c,i),l){let u=o.selection&&o.selection.map(n.slice(i));u&&s++;let d=new yr(c.invert(),l,u),h,p=r.length-1;(h=r.length&&r[p].merge(d))?r[p]=h:r.push(d)}}else o.map&&i--},this.items.length,0),new t(yD.from(r.reverse()),s)}};Ka.empty=new Ka(yD.empty,0);function Oie(t,e){let n;return t.forEach((i,r)=>{if(i.selection&&e--==0)return n=r,!1}),t.slice(n)}var yr=class t{constructor(e,n,i,r){this.map=e,this.step=n,this.selection=i,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new t(n.getMap().invert(),n,this.selection)}}},vr=class{constructor(e,n,i,r,s){this.done=e,this.undone=n,this.prevRanges=i,this.prevTime=r,this.prevComposition=s}},Fie=20;function Lie(t,e,n,i){let r=n.getMeta(co),s;if(r)return r.historyState;n.getMeta(Bie)&&(t=new vr(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(co))return o.getMeta(co).redo?new vr(t.done.addTransform(n,void 0,i,by(e)),t.undone,gj(n.mapping.maps[n.steps.length-1]),t.prevTime,t.prevComposition):new vr(t.done,t.undone.addTransform(n,void 0,i,by(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=t.prevTime==0||!o&&t.prevComposition!=a&&(t.prevTime<(n.time||0)-i.newGroupDelay||!Vie(n,t.prevRanges)),c=o?vD(t.prevRanges,n.mapping):gj(n.mapping.maps[n.steps.length-1]);return new vr(t.done.addTransform(n,l?e.selection.getBookmark():void 0,i,by(e)),Ka.empty,c,n.time,a??t.prevComposition)}else return(s=n.getMeta("rebased"))?new vr(t.done.rebased(n,s),t.undone.rebased(n,s),vD(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new vr(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),vD(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function Vie(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((i,r)=>{for(let s=0;s<e.length;s+=2)i<=e[s+1]&&r>=e[s]&&(n=!0)}),n}function gj(t){let e=[];return t.forEach((n,i,r,s)=>e.push(r,s)),e}function vD(t,e){if(!t)return null;let n=[];for(let i=0;i<t.length;i+=2){let r=e.map(t[i],1),s=e.map(t[i+1],-1);r<=s&&n.push(r,s)}return n}function yj(t,e,n,i){let r=by(e),s=co.get(e).spec.config,o=(i?t.undone:t.done).popEvent(e,r);if(!o)return;let a=o.selection.resolve(o.transform.doc),l=(i?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),s,r),c=new vr(i?l:o.remaining,i?o.remaining:l,null,0,-1);n(o.transform.setSelection(a).setMeta(co,{redo:i,historyState:c}).scrollIntoView())}var bD=!1,_j=null;function by(t){let e=t.plugins;if(_j!=e){bD=!1,_j=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){bD=!0;break}}return bD}var co=new Vn("history"),Bie=new Vn("closeHistory");function vj(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Wt({key:co,state:{init(){return new vr(Ka.empty,Ka.empty,null,0,-1)},apply(e,n,i){return Lie(n,i,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let i=n.inputType,r=i=="historyUndo"?wD:i=="historyRedo"?wy:null;return r?(n.preventDefault(),r(e.state,e.dispatch)):!1}}}})}var wD=(t,e)=>{let n=co.getState(t);return!n||n.done.eventCount==0?!1:(e&&yj(n,t,e,!1),!0)},wy=(t,e)=>{let n=co.getState(t);return!n||n.undone.eventCount==0?!1:(e&&yj(n,t,e,!0),!0)};var jie=["imgEl"];function Uie(t,e){if(t&1){let n=ft();b(0,"span",4)(1,"span",5),B("mousedown",function(r){Ge(n);let s=G();return Ke(s.startResizing(r,"left"))}),v(),b(2,"span",6),B("mousedown",function(r){Ge(n);let s=G();return Ke(s.startResizing(r,"right"))}),v(),b(3,"span",7),B("mousedown",function(r){Ge(n);let s=G();return Ke(s.startResizing(r,"left"))}),v(),b(4,"span",8),B("mousedown",function(r){Ge(n);let s=G();return Ke(s.startResizing(r,"right"))}),v()()}}var zie=t=>({"NgxEditor__Resizer--Active":t}),$ie=["ngxEditor"],Hie=["*"];function Wie(t,e){if(t&1&&(b(0,"div",12),S(1),v()),t&2){let n=G(2);I(1),ze(" ",(n.href.errors==null?null:n.href.errors.pattern)&&"Please enter valid url."," ")}}function qie(t,e){if(t&1&&(b(0,"div",12),S(1),v()),t&2){let n=G(2);I(1),ze(" ",(n.text.errors==null?null:n.text.errors.required)&&"This is required"," ")}}function Gie(t,e){if(t&1){let n=ft();b(0,"div",2)(1,"form",3),B("ngSubmit",function(r){Ge(n);let s=G();return Ke(s.insertLink(r))}),b(2,"div",4)(3,"div",5)(4,"label",6),S(5),et(6,"async"),v(),J(7,"input",7),he(8,Wie,2,1,"div",8),v()(),b(9,"div",4)(10,"div",5)(11,"label",6),S(12),et(13,"async"),v(),J(14,"input",9),he(15,qie,2,1,"div",8),v()(),b(16,"div",4)(17,"div",5)(18,"label"),J(19,"input",10),S(20),et(21,"async"),v()()(),b(22,"button",11),S(23),et(24,"async"),v()()()}if(t&2){let n=G();I(1),A("formGroup",n.form),I(4),at(tt(6,8,n.getLabel("url"))),I(3),A("ngIf",n.href.touched&&n.href.invalid),I(4),at(tt(13,10,n.getLabel("text"))),I(3),A("ngIf",n.text.touched&&n.text.invalid),I(5),ze(" ",tt(21,12,n.getLabel("openInNewTab"))," "),I(2),A("disabled",!n.form.valid),I(1),at(tt(24,14,n.getLabel("insert")))}}var Kie=(t,e)=>({"NgxEditor__Dropdown--Active":t,"NgxEditor--Disabled":e});function Yie(t,e){if(t&1){let n=ft();b(0,"div",4),B("mousedown",function(r){let o=Ge(n).$implicit,a=G(2);return Ke(a.onClick(r,o))}),S(1),et(2,"async"),v()}if(t&2){let n=e.$implicit,i=G(2);A("ngClass",zp(4,Kie,n===i.activeItem,i.disabledItems.includes(n))),I(1),ze(" ",tt(2,2,i.getName(n))," ")}}function Qie(t,e){if(t&1&&(b(0,"div",2),he(1,Yie,3,7,"div",3),v()),t&2){let n=G();I(1),A("ngForOf",n.items)("ngForTrackBy",n.trackByIndex)}}function Jie(t,e){if(t&1&&(b(0,"div",12),S(1),v()),t&2){let n=G(2);I(1),ze(" ",(n.src.errors==null?null:n.src.errors.pattern)&&"Please enter valid url."," ")}}function Xie(t,e){if(t&1){let n=ft();b(0,"div",2)(1,"form",3),B("ngSubmit",function(r){Ge(n);let s=G();return Ke(s.insertLink(r))}),b(2,"div",4)(3,"div",5)(4,"label",6),S(5),et(6,"async"),v(),J(7,"input",7),he(8,Jie,2,1,"div",8),v()(),b(9,"div",4)(10,"div",5)(11,"label",6),S(12),et(13,"async"),v(),J(14,"input",9),v()(),b(15,"div",4)(16,"div",5)(17,"label",6),S(18),et(19,"async"),v(),J(20,"input",10),v()(),b(21,"button",11),S(22),et(23,"async"),v()()()}if(t&2){let n=G();I(1),A("formGroup",n.form),I(4),at(tt(6,7,n.getLabel("url"))),I(3),A("ngIf",n.src.touched&&n.src.invalid),I(4),at(tt(13,9,n.getLabel("altText"))),I(6),at(tt(19,11,n.getLabel("title"))),I(3),A("disabled",!n.form.valid||!n.form.dirty),I(1),at(tt(23,13,n.getLabel("insert")))}}var Zie=(t,e)=>({backgroundColor:t,color:e}),ere=t=>({"NgxEditor__Color--Active":t});function tre(t,e){if(t&1){let n=ft();b(0,"button",7),B("mousedown",function(r){let o=Ge(n).$implicit,a=G(3);return Ke(a.onColorSelect(r,o))}),v()}if(t&2){let n=e.$implicit,i=G(3);A("ngStyle",zp(3,Zie,n,i.getContrastYIQ(n)))("title",n)("ngClass",Au(6,ere,i.activeColors.includes(n)))}}function nre(t,e){if(t&1&&(b(0,"div",5),he(1,tre,1,8,"button",6),v()),t&2){let n=e.$implicit,i=G(2);I(1),A("ngForOf",n)("ngForTrackBy",i.trackByIndex)}}function ire(t,e){if(t&1){let n=ft();b(0,"div",2),he(1,nre,2,2,"div",3),b(2,"button",4),B("mousedown",function(r){Ge(n);let s=G();return Ke(s.remove(r))}),S(3),et(4,"async"),v()()}if(t&2){let n=G();I(1),A("ngForOf",n.presets)("ngForTrackBy",n.trackByIndex),I(1),A("disabled",!n.isActive),I(1),ze(" ",tt(4,4,n.getLabel("remove"))," ")}}function rre(t,e){if(t&1&&J(0,"ngx-toggle-command",7),t&2){let n=G().$implicit,i=G(2);hi(i.iconContainerClass),A("toolbarItem",n)}}function sre(t,e){if(t&1&&J(0,"ngx-insert-command",7),t&2){let n=G().$implicit,i=G(2);hi(i.iconContainerClass),A("toolbarItem",n)}}function ore(t,e){if(t&1&&J(0,"ngx-link"),t&2){let n=G(3);hi(n.iconContainerClass)}}function are(t,e){if(t&1&&J(0,"ngx-image"),t&2){let n=G(3);hi(n.iconContainerClass)}}function lre(t,e){if(t&1&&J(0,"ngx-dropdown",9),t&2){let n=e.$implicit,i=G(4);hi(i.dropdownContainerClass),A("group",n.key)("items",n.value)}}function cre(t,e){if(t&1&&(Lo(0),he(1,lre,1,4,"ngx-dropdown",8),et(2,"keyvalue"),Vo()),t&2){let n=G().$implicit,i=G(2);I(1),A("ngForOf",tt(2,2,i.getDropdownItems(n)))("ngForTrackBy",i.trackByIndex)}}function ure(t,e){if(t&1&&J(0,"ngx-color-picker",10),t&2){let n=G(3);hi(n.iconContainerClass),A("presets",n.presets)}}function dre(t,e){if(t&1&&J(0,"ngx-color-picker",11),t&2){let n=G(3);hi(n.iconContainerClass),A("presets",n.presets)}}function hre(t,e){if(t&1&&J(0,"div"),t&2){let n=G(3);hi(n.seperatorClass)}}function fre(t,e){if(t&1&&(Lo(0),he(1,rre,1,3,"ngx-toggle-command",3)(2,sre,1,3,"ngx-insert-command",3)(3,ore,1,2,"ngx-link",4)(4,are,1,2,"ngx-image",4)(5,cre,3,4,"ng-container",2)(6,ure,1,3,"ngx-color-picker",5)(7,dre,1,3,"ngx-color-picker",6)(8,hre,1,2,"div",4),Vo()),t&2){let n=e.$implicit,i=e.last,r=G().last,s=G();I(1),A("ngIf",s.toggleCommands.includes(n)),I(1),A("ngIf",s.insertCommands.includes(n)),I(1),A("ngIf",n==="link"),I(1),A("ngIf",n==="image"),I(1),A("ngIf",s.isDropDown(n)),I(1),A("ngIf",n==="text_color"),I(1),A("ngIf",n==="background_color"),I(1),A("ngIf",i&&!r)}}function pre(t,e){if(t&1&&(Lo(0),he(1,fre,9,8,"ng-container",1),Vo()),t&2){let n=e.$implicit,i=G();I(1),A("ngForOf",n)("ngForTrackBy",i.trackByIndex)}}function mre(t,e){if(t&1&&(Lo(0),qb(1,12),Vo()),t&2){let n=G();I(1),A("ngTemplateOutlet",n.customMenuRef)}}var gre=(t,e)=>({"NgxEditor--Disabled":t,"NgxEditor__MenuBar--Reverse":e});var _re=(t=!0)=>new Wt({key:new Vn("editable"),state:{init(){return t},apply(e,n){return e.getMeta("UPDATE_EDITABLE")??n}},props:{editable(e){return this.getState(e)},attributes(e){return this.getState(e)?null:{class:"NgxEditor__Content--Disabled"}}}}),yre="NgxEditor__Placeholder",vre=t=>new Wt({key:new Vn("placeholder"),state:{init(){return t??""},apply(e,n){return e.getMeta("UPDATE_PLACEHOLDER")??n}},props:{decorations(e){let{doc:n}=e,{textContent:i,childCount:r}=n,s=this.getState(e);if(!s||r>1)return nn.empty;let o=[],a=(l,c)=>{if(l.type.isBlock&&l.childCount===0&&i.length===0){let u=c,d=c+l.nodeSize,h=_r.node(u,d,{class:yre,"data-placeholder":s,"data-align":l.attrs.align??null});o.push(h)}return!1};return n.descendants(a),nn.create(n,o)}}}),bre=(t={})=>new Wt({key:new Vn("attributes"),props:{attributes:t}}),wre=t=>new Wt({key:new Vn("focus"),props:{handleDOMEvents:{focus:()=>(t(),!1)}}}),Ere=t=>new Wt({key:new Vn("blur"),props:{handleDOMEvents:{blur:()=>(t(),!1)}}}),Ire=(()=>{let e=class e{constructor(){this.alt="",this.title="",this.outerWidth="",this.selected=!1,this.imageResize=new ye}startResizing(i,r){i.preventDefault(),this.resizeImage(i,r)}resizeImage(i,r){let s=i.pageX,o=this.imgEl.nativeElement.clientWidth,a=r==="left",{width:l}=window.getComputedStyle(this.view.dom),c=parseInt(l,10),u=h=>{let f=h.pageX-s,m=a?o-f:o+f;m>c||m<20||(this.outerWidth=`${m}px`)},d=h=>{h.preventDefault(),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",d),this.imageResize.emit()};document.addEventListener("mousemove",u),document.addEventListener("mouseup",d)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=le({type:e,selectors:[["ngx-image-view"]],viewQuery:function(r,s){if(r&1&&Bo(jie,7),r&2){let o;Ds(o=xs())&&(s.imgEl=o.first)}},inputs:{src:"src",alt:"alt",title:"title",outerWidth:"outerWidth",selected:"selected",view:"view"},outputs:{imageResize:"imageResize"},decls:4,vars:9,consts:[[1,"NgxEditor__ImageWrapper",3,"ngClass"],["class","NgxEditor__ResizeHandle",4,"ngIf"],[3,"src","alt","title"],["imgEl",""],[1,"NgxEditor__ResizeHandle"],[1,"NgxEditor__ResizeHandle--TL",3,"mousedown"],[1,"NgxEditor__ResizeHandle--TR",3,"mousedown"],[1,"NgxEditor__ResizeHandle--BL",3,"mousedown"],[1,"NgxEditor__ResizeHandle--BR",3,"mousedown"]],template:function(r,s){r&1&&(b(0,"span",0),he(1,Uie,5,0,"span",1),J(2,"img",2,3),v()),r&2&&(Du("width",s.outerWidth),A("ngClass",Au(7,zie,s.selected)),I(1),A("ngIf",s.selected),I(1),A("src",s.src,Fo)("alt",s.alt)("title",s.title))},dependencies:[Ru,xn],styles:["*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}img[_ngcontent-%COMP%]{width:100%;height:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;line-height:0;padding:2px}.NgxEditor__ImageWrapper.NgxEditor__Resizer--Active[_ngcontent-%COMP%]{padding:1px;border:1px solid #1a73e8}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{position:absolute;width:7px;height:7px;background-color:#1a73e8;border:1px solid white}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{bottom:-5px;right:-5px;cursor:se-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%]{top:-5px;right:-5px;cursor:ne-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%]{top:-5px;left:-5px;cursor:nw-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%]{bottom:-5px;left:-5px;cursor:sw-resize}"]});let t=e;return t})(),ED=class{constructor(e,n,i,r){this.updating=!1,this.handleResize=()=>{if(this.updating)return;let{state:s,dispatch:o}=this.view,{tr:a}=s,l=a.setNodeMarkup(this.getPos(),void 0,oe(C({},this.node.attrs),{width:this.imageComponentRef.instance.outerWidth})),c=l.doc.resolve(this.getPos()),u=new ee(c);l.setSelection(u),o(l)},this.applicationRef=r.get(Dn),this.imageComponentRef=k1(Ire,{environmentInjector:this.applicationRef.injector}),this.applicationRef.attachView(this.imageComponentRef.hostView),this.setNodeAttributes(e.attrs),this.imageComponentRef.instance.view=n,this.dom=this.imageComponentRef.location.nativeElement,this.view=n,this.node=e,this.getPos=i,this.resizeSubscription=this.imageComponentRef.instance.imageResize.subscribe(()=>{this.handleResize()})}computeChanges(e,n){return JSON.stringify(e)===JSON.stringify(n)}setNodeAttributes(e){this.imageComponentRef.instance.src=e.src,this.imageComponentRef.instance.alt=e.alt,this.imageComponentRef.instance.title=e.title,this.imageComponentRef.instance.outerWidth=e.width}update(e){return e.type!==this.node.type?!1:(this.node=e,this.computeChanges(this.node.attrs,e.attrs)&&(this.updating=!0,this.setNodeAttributes(e.attrs),this.updating=!1),!0)}ignoreMutation(){return!0}selectNode(){this.imageComponentRef.instance.selected=!0}deselectNode(){this.imageComponentRef.instance.selected=!1}destroy(){this.resizeSubscription.unsubscribe(),this.applicationRef.detachView(this.imageComponentRef.hostView)}},Cre=t=>new Wt({key:new Vn("image-resize"),props:{nodeViews:{image:(e,n,i)=>new ED(e,n,i,t)}}}),Tre=/(?:https?:\/\/)?[\w-]+(?:\.[\w-]+)+\.?(?:\d+)?(?:\/\S*)?$/,Sj=t=>{let e=[];return t.forEach(n=>{if(n.isText){let i=n.text,r=0,s=Tre.exec(i);if(s){let o=s.index,a=o+s[0].length,{link:l}=n.type.schema.marks;o>0&&e.push(n.cut(r,o));let c=i.slice(o,a);e.push(n.cut(o,a).mark(l.create({href:c}).addToSet(n.marks))),r=a}r<i.length&&e.push(n.cut(r))}else e.push(n.copy(Sj(n.content)))}),k.fromArray(e)},Sre=()=>new Wt({key:new Vn("linkify"),props:{transformPasted:t=>new P(Sj(t.content),t.openStart,t.openEnd)}}),Dj=t=>typeof t=="string",Dre=()=>window.trustedTypes,xj=t=>Dre()?.isHTML(t)??!1,Aj=t=>Dj(t)||xj(t),Mj={type:"doc",content:[{type:"paragraph"}]},xre=(t,e)=>{let n=e??lo,i=n.nodeFromJSON(t),r=Jr.fromSchema(n).serializeFragment(i.content),s=document.createElement("div");return s.appendChild(r),s.innerHTML},Are=(t,e)=>{let n=e??lo,i=document.createElement("div");return i.innerHTML=t,to.fromSchema(n).parse(i).toJSON()},lf=(t,e)=>{if(!t)return e.nodeFromJSON(Mj);if(!Aj(t))return e.nodeFromJSON(t);let n=Are(t,e);return e.nodeFromJSON(n)},kj=(()=>{let e=class e{constructor(i,r,s){this.renderer=i,this.injector=r,this.elementRef=s,this.placeholder="Type Here...",this.focusOut=new ye,this.focusIn=new ye,this.unsubscribe=new Z,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(i){!this.outputFormat&&Aj(i)&&(this.outputFormat="html"),this.editor.setContent(i??Mj)}registerOnChange(i){this.onChange=i}registerOnTouched(i){this.onTouched=i}setDisabledState(i){this.setMeta("UPDATE_EDITABLE",!i),this.renderer.setProperty(this.elementRef.nativeElement,"disabled",i)}handleChange(i){if(this.outputFormat==="html"){let r=xre(i,this.editor.schema);this.onChange(r);return}this.onChange(i)}setMeta(i,r){let{dispatch:s,state:{tr:o}}=this.editor.view;s(o.setMeta(i,r))}setPlaceholder(i){this.setMeta("UPDATE_PLACEHOLDER",i)}registerPlugins(){this.editor.registerPlugin(_re()),this.editor.registerPlugin(vre(this.placeholder)),this.editor.registerPlugin(bre({class:"NgxEditor__Content"})),this.editor.registerPlugin(wre(()=>{this.focusIn.emit()})),this.editor.registerPlugin(Ere(()=>{this.focusOut.emit(),this.onTouched()})),this.editor.features.resizeImage&&this.editor.registerPlugin(Cre(this.injector)),this.editor.features.linkOnPaste&&this.editor.registerPlugin(Sre())}ngOnInit(){if(!this.editor)throw new Bc("Required editor instance for initializing editor component");this.registerPlugins(),this.renderer.appendChild(this.ngxEditor.nativeElement,this.editor.view.dom),this.editor.valueChanges.pipe(jn(this.unsubscribe)).subscribe(i=>{this.handleChange(i)})}ngOnChanges(i){i.placeholder&&!i.placeholder.isFirstChange()&&this.setPlaceholder(i.placeholder.currentValue)}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}};e.\u0275fac=function(r){return new(r||e)(y(ui),y(Se),y(ce))},e.\u0275cmp=le({type:e,selectors:[["ngx-editor"]],viewQuery:function(r,s){if(r&1&&Bo($ie,7),r&2){let o;Ds(o=xs())&&(s.ngxEditor=o.first)}},inputs:{editor:"editor",outputFormat:"outputFormat",placeholder:"placeholder"},outputs:{focusOut:"focusOut",focusIn:"focusIn"},features:[Zt([{provide:lc,useExisting:$n(()=>e),multi:!0}]),Dt],ngContentSelectors:Hie,decls:3,vars:0,consts:[[1,"NgxEditor"],["ngxEditor",""]],template:function(r,s){r&1&&(Ts(),b(0,"div",0,1),Ss(2),v())},styles:[`.NgxEditor{background:white;color:#000;background-clip:padding-box;border-radius:4px;border:1px solid rgba(0,0,0,.2);position:relative}.NgxEditor--Disabled{opacity:.5;pointer-events:none}.NgxEditor__Placeholder:before{color:#6c757d;opacity:1;-webkit-user-select:none;user-select:none;position:absolute;cursor:text;content:attr(data-placeholder)}.NgxEditor__Placeholder[data-align=right]:before{position:relative}.NgxEditor__Content{padding:8px;white-space:pre-wrap;outline:none;font-variant-ligatures:none;font-feature-settings:"liga" 0}.NgxEditor__Content p{margin:0 0 10px}.NgxEditor__Content blockquote{padding-left:16px;border-left:3px solid #ddd;margin-left:0;margin-right:0}.NgxEditor__Content--Disabled{-webkit-user-select:none;user-select:none;pointer-events:none}.NgxEditor__Wrapper{border:1px solid rgba(0,0,0,.4);border-radius:4px}.NgxEditor__Wrapper .NgxEditor__MenuBar{border-top-left-radius:4px;border-top-right-radius:4px;border-bottom:1px solid rgba(0,0,0,.2)}.NgxEditor__Wrapper .NgxEditor{border-top-left-radius:0;border-top-right-radius:0;border:none}.NgxEditor__MenuBar{display:flex;flex-wrap:wrap;padding:3px;cursor:default;background-color:#fff}.NgxEditor__MenuItem{border-radius:2px;display:flex;align-items:center;justify-content:center;position:relative;flex-shrink:0}.NgxEditor__MenuItem:hover{background-color:#f1f1f1}.NgxEditor__MenuItem.NgxEditor__MenuItem--Icon{height:30px;width:30px;transition:.3s ease-in-out}.NgxEditor__MenuItem.NgxEditor__MenuItem--Icon+.NgxEditor__MenuItem--Icon{margin-left:2px}.NgxEditor__MenuItem .NgxEditor__MenuItem--IconContainer{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.NgxEditor__MenuItem.NgxEditor__MenuItem--Text{padding:0 5px}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active,.NgxEditor__MenuItem .NgxEditor__MenuItem--Active{background-color:#e8f0fe;color:#1a73e8}.NgxEditor__Dropdown{min-width:64px;position:relative;display:flex;align-items:center;flex-shrink:0}.NgxEditor__Dropdown:hover{background-color:#f1f1f1}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text{display:flex;align-items:center;justify-content:center;padding:0 5px;height:100%;width:100%}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:after{display:inline-block;content:"";margin-left:24px;vertical-align:4px;border-top:4px solid;border-right:4px solid transparent;border-bottom:0;border-left:4px solid transparent}.NgxEditor__Dropdown .NgxEditor__Dropdown--DropdownMenu{position:absolute;left:0;box-shadow:#3c404326 0 2px 6px 2px;border-radius:4px;background-color:#fff;z-index:10;width:100%;top:32px}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item{padding:8px;white-space:nowrap;color:inherit}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:hover{background-color:#ececec}.NgxEditor__Dropdown .NgxEditor__Dropdown--Selected,.NgxEditor__Dropdown .NgxEditor__Dropdown--Open{color:#1a73e8;background-color:#e8f0fe}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active{background-color:#f1f1f1}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active:hover{background-color:#e7e7e7}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--DropdownMenu{top:unset;bottom:32px}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--Text:after{transform:rotate(180deg)}.NgxEditor__MenuBar--Reverse .NgxEditor__Popup{top:unset;bottom:32px}.NgxEditor__Popup{position:absolute;top:32px;box-shadow:#3c404326 0 2px 6px 2px;border-radius:4px;background-color:#fff;z-index:10;min-width:192px;padding:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup{margin-bottom:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup label{margin-bottom:3px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=text],.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=url]{padding:2px 4px}.NgxEditor__Popup .NgxEditor__Popup--Col{display:flex;flex-direction:column;position:relative}.NgxEditor__Popup .NgxEditor__Popup--Label{font-size:85%}.NgxEditor__Seperator{border-left:1px solid #ccc;margin:0 5px}.NgxEditor__HelpText{font-size:80%}.NgxEditor__HelpText.NgxEditor__HelpText--Error{color:red}
`],encapsulation:2});let t=e;return t})(),uo=(()=>{let e=class e{constructor(){this.customMenuRefChange=new Z}setCustomMenuRef(i){this.customMenuRefChange.next(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ho=class{constructor(e){this.name=e}apply(){return(e,n)=>{let{schema:i}=e,r=i.marks[this.name];return r?gD(r)(e,n):!1}}toggle(){return(e,n)=>{let{schema:i}=e,r=i.marks[this.name];return r?Ga(r)(e,n):!1}}isActive(e){let{schema:n}=e,i=n.marks[this.name];return i?gy(e,i):!1}canExecute(e){return this.toggle()(e)}},ID=class{toggle(){return(e,n)=>{let{schema:i}=e,r=i.nodes.blockquote;return r?this.isActive(e)?ZB(e,n):nj(r)(e,n):!1}}isActive(e){let{schema:n}=e,i=n.nodes.blockquote;return i?hD(e,i):!1}canExecute(e){return this.toggle()(e)}},CD=class{insert(){return(e,n)=>{let{schema:i,tr:r}=e,s=i.nodes.horizontal_rule;return s?(n(r.replaceSelectionWith(s.create()).scrollIntoView()),!0):!1}}canExecute(e){return dj(e,e.schema.nodes.horizontal_rule)}},Zc=class{constructor(e=!1){this.isBulletList=!1,this.isBulletList=e}getType(e){return this.isBulletList?e.nodes.bullet_list:e.nodes.ordered_list}toggle(){return(e,n)=>{let{schema:i}=e,r=this.getType(i);return r?this.isActive(e)?nD(i.nodes.list_item)(e,n):GB(r)(e,n):!1}}isActive(e){let{schema:n}=e,i=this.getType(n);return i?hD(e,i):!1}canExecute(e){return this.toggle()(e)}},rs=class{constructor(e){this.level=e}apply(){return(e,n)=>{let{schema:i}=e,r=i.nodes.heading;return r?py(r)(e,n):!1}}toggle(){return(e,n)=>{let{schema:i,selection:r,doc:s}=e,o=i.nodes.heading;if(!o)return!1;let a=r.$from.before(1),c=s.nodeAt(a)?.attrs??{};return this.isActive(e)?py(i.nodes.paragraph,c)(e,n):py(o,oe(C({},c),{level:this.level}))(e,n)}}isActive(e){let{schema:n}=e,i=fD(e),r=n.nodes.heading;if(!r)return!1;let s=[r,n.nodes.text,n.nodes.blockquote];return!!i.filter(l=>s.includes(l.type)).find(l=>l.attrs.level===this.level)}canExecute(e){return this.toggle()(e)}},Ya=class{constructor(e){this.align=e}toggle(){return(e,n)=>{let{doc:i,selection:r,tr:s,schema:o}=e,{from:a,to:l}=r,c=!1;return i.nodesBetween(a,l,(u,d)=>{let h=u.type;return[o.nodes.paragraph,o.nodes.heading].includes(h)&&(c=!0,s.setNodeMarkup(d,h,oe(C({},u.attrs),{align:this.align}))),!0}),c?(s.docChanged&&n?.(s),!0):!1}}isActive(e){return!!fD(e).find(r=>r.attrs.align===this.align)}canExecute(e){return this.toggle()(e)}},Mre={strict:!0},TD=class{update(e){return(n,i)=>{let{schema:r,selection:s}=n,o=r.marks.link;return!o||s.empty?!1:Ga(o,e)(n,i)}}insert(e,n){return(i,r)=>{let{schema:s,tr:o}=i;if(!s.marks.link)return!1;let l={href:n.href,title:n.title??e,target:n.target??"_blank"},c=s.text(e,[s.marks.link.create(l)]);return o.replaceSelectionWith(c,!1).scrollIntoView(),o.docChanged?(r?.(o),!0):!1}}isActive(e,n=Mre){if(n.strict)return!0;let{schema:i}=e,r=i.marks.link;return r?gy(e,r):!1}remove(e,n){return hj()(e,n)}canExecute(e){let n={href:""};return this.insert("Exec",n)(e)||this.update(n)(e)}},Rj=class{insert(e,n){return(i,r)=>{let{schema:s,tr:o,selection:a}=i,l=s.nodes.image;if(!l)return!1;let c=C({width:null,src:e},n);!c.width&&a instanceof ee&&a.node.type===l&&(c.width=a.node.attrs.width),o.replaceSelectionWith(l.createAndFill(c));let u=o.doc.resolve(o.selection.anchor-o.selection.$anchor.nodeBefore.nodeSize);return o.setSelection(new ee(u)).scrollIntoView(),o.docChanged?(r?.(o),!0):!1}}isActive(e){let{selection:n}=e;return n instanceof ee?n.node.type.name==="image":!1}},Xc=class{constructor(e,n="color"){this.name=e,this.attrName=n}apply(e){return(n,i)=>{let{schema:r,selection:s,doc:o}=n,a=r.marks[this.name];if(!a)return!1;let{from:l,to:c,empty:u}=s;if(!u&&l+1===c){let d=o.nodeAt(l);if(d?.isAtom&&!d.isText&&d.isLeaf)return!1}return gD(a,e)(n,i)}}isActive(e){let{schema:n}=e,i=n.marks[this.name];return i?gy(e,i):!1}getActiveColors(e){if(!this.isActive(e))return[];let{schema:n}=e;return uj(e).filter(s=>s.type===n.marks[this.name]).map(s=>s.attrs[this.attrName]).filter(Boolean)}remove(){return(e,n)=>{let{schema:i}=e,r=i.marks[this.name];return r?fj(r)(e,n):!1}}canExecute(e){let n=this.name==="text_color"?{color:""}:{backgroundColor:""};return this.apply(n)(e)}},kre=["link"],SD=class{insert(){return(e,n)=>{let{tr:i}=e,{ranges:r,empty:s}=i.selection;return s||(Object.entries(e.schema.marks).forEach(([o,a])=>{kre.includes(o)||r.forEach(l=>{i.removeMark(l.$from.pos,l.$to.pos,a)})}),n(i)),!0}}canExecute(){return!0}},Rre=new ho("strong"),Nre=new ho("em"),Pre=new ho("code"),Ore=new ho("u"),Fre=new ho("s"),Lre=new ID,Vre=new CD,Bre=new SD,jre=new Zc(!0),Ure=new Zc(!1),zre=new rs(1),$re=new rs(2),Hre=new rs(3),Wre=new rs(4),qre=new rs(5),Gre=new rs(6),Kre=new Ya("left"),Yre=new Ya("center"),Qre=new Ya("right"),Jre=new Ya("justify"),Xre=new TD,Zre=new Rj,ese=new Xc("text_color","color"),tse=new Xc("text_background_color","backgroundColor"),Iy={bold:Rre,italic:Nre,code:Pre,underline:Ore,strike:Fre,blockquote:Lre,bullet_list:jre,ordered_list:Ure,h1:zre,h2:$re,h3:Hre,h4:Wre,h5:qre,h6:Gre,align_left:Kre,align_center:Yre,align_right:Qre,align_justify:Jre},bj={horizontal_rule:Vre,format_clear:Bre},af=Xre,wj=Zre,nse=ese,ise=tse,DD={bold:"Bold",italic:"Italic",code:"Code",underline:"Underline",strike:"Strike",blockquote:"Blockquote",bullet_list:"Bullet List",ordered_list:"Ordered List",heading:"Heading",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6",align_left:"Left Align",align_center:"Center Align",align_right:"Right Align",align_justify:"Justify",text_color:"Text Color",background_color:"Background Color",horizontal_rule:"Horizontal rule",format_clear:"Clear Formatting",insertLink:"Insert Link",removeLink:"Remove Link",insertImage:"Insert Image",url:"URL",text:"Text",openInNewTab:"Open in new tab",insert:"Insert",altText:"Alt Text",title:"Title",remove:"Remove"},xD=class{constructor(e={}){this.locals=DD,this.get=n=>{let i=this.locals[n];return i?al(i)?i:F(i):F("")},this.locals=C(C({},DD),e)}},rse=`
  <path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z" />
`,sse=`
  <path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z" />
`,ose=`
<path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>
`,ase=`
<path d="M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"/>
`,lse=`
<path d="M6.85,7.08C6.85,4.37,9.45,3,12.24,3c1.64,0,3,0.49,3.9,1.28c0.77,0.65,1.46,1.73,1.46,3.24h-3.01 c0-0.31-0.05-0.59-0.15-0.85c-0.29-0.86-1.2-1.28-2.25-1.28c-1.86,0-2.34,1.02-2.34,1.7c0,0.48,0.25,0.88,0.74,1.21 C10.97,8.55,11.36,8.78,12,9H7.39C7.18,8.66,6.85,8.11,6.85,7.08z M21,12v-2H3v2h9.62c1.15,0.45,1.96,0.75,1.96,1.97 c0,1-0.81,1.67-2.28,1.67c-1.54,0-2.93-0.54-2.93-2.51H6.4c0,0.55,0.08,1.13,0.24,1.58c0.81,2.29,3.29,3.3,5.67,3.3 c2.27,0,5.3-0.89,5.3-4.05c0-0.3-0.01-1.16-0.48-1.94H21V12z"/>
`,cse=`
<path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"/>
`,use=`
<path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"/>
`,dse=`
<path d="M0 0h24v24H0z" fill="none"/><path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"/>
`,hse=`
<path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
`,fse=`
<path d="M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z"/>
`,pse=`
<path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>
`,mse=`
<path d="M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"/>
`,gse=`
<path d="M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"/>
`,_se=`
<path d="M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"/>
`,yse=`
<path d="M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z"/>
`,vse=`
<path d="M2,20h20v4H2V20z M5.49,17h2.42l1.27-3.58h5.65L16.09,17h2.42L13.25,3h-2.5L5.49,17z M9.91,11.39l2.03-5.79h0.12l2.03,5.79 H9.91z"/>
`,bse=`
<path d="M16.56,8.94L7.62,0L6.21,1.41l2.38,2.38L3.44,8.94c-0.59,0.59-0.59,1.54,0,2.12l5.5,5.5C9.23,16.85,9.62,17,10,17 s0.77-0.15,1.06-0.44l5.5-5.5C17.15,10.48,17.15,9.53,16.56,8.94z M5.21,10L10,5.21L14.79,10H5.21z M19,11.5c0,0-2,2.17-2,3.5 c0,1.1,0.9,2,2,2s2-0.9,2-2C21,13.67,19,11.5,19,11.5z M2,20h20v4H2V20z"/>
`,wse=`
  <g>
    <rect fill="none" fill-rule="evenodd" height="24" width="24"/>
    <rect fill-rule="evenodd" height="2" width="16" x="4" y="11"/>
  </g>
`,Ese=`
<path d="M0 0h24v24H0z" fill="none"/><path d="M3.27 5L2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21 18 19.73 3.55 5.27 3.27 5zM6 5v.18L8.82 8h2.4l-.72 1.68 2.1 2.1L14.21 8H20V5H6z"/>
`,Ise=20,Cse=20,Tse="currentColor",Nj={bold:rse,italic:sse,code:ose,underline:ase,strike:lse,ordered_list:cse,bullet_list:use,blockquote:dse,link:hse,unlink:fse,image:pse,align_left:mse,align_center:gse,align_right:_se,align_justify:yse,text_color:vse,color_fill:bse,horizontal_rule:wse,format_clear:Ese,path:"<path></path>"},AD=class{static get(e,n=Tse){let i=Nj[e];return i&&(i.includes("<path")||i.includes("<g"))?`
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill=${n}
          height=${Ise}
          width=${Cse}
        >
          ${i}
        </svg>
      `:i}},MD=(()=>{let e=class e{constructor(){this.locals={},this.icons={}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Qa=(()=>{let e=class e{constructor(i){this.config=i}get locals(){return new xD(this.config.locals)}getIcon(i){return this.config.icons[i]?this.config.icons[i]:AD.get(i)}};e.\u0275fac=function(r){return new(r||e)(_(MD,8))},e.\u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ej=t=>({locals:t.locals??{},icons:t.icons??{}}),eu=(()=>{let e=class e{constructor(i){this.sanitizer=i}transform(i){return xj(i)?i:this.sanitizer.bypassSecurityTrustHtml(i)}};e.\u0275fac=function(r){return new(r||e)(y($o,16))},e.\u0275pipe=pu({name:"sanitizeHtml",type:e,pure:!0});let t=e;return t})(),Sse=(()=>{let e=class e{get name(){return this.toolbarItem}constructor(i,r){this.ngxeService=i,this.menuService=r,this.isActive=!1,this.disabled=!1,this.update=s=>{let{state:o}=s,a=Iy[this.name];this.isActive=a.isActive(o),this.disabled=!a.canExecute(o)}}toggle(i){if(i.preventDefault(),i.button!==0)return;let{state:r,dispatch:s}=this.editorView;Iy[this.name].toggle()(r,s)}getTitle(i){return this.ngxeService.locals.get(i)}ngOnInit(){this.html=this.ngxeService.getIcon(this.name),this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(i=>{this.update(i)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(y(Qa),y(uo))},e.\u0275cmp=le({type:e,selectors:[["ngx-toggle-command"]],inputs:{toolbarItem:"toolbarItem"},decls:3,vars:10,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"]],template:function(r,s){r&1&&(b(0,"div",0),B("mousedown",function(a){return s.toggle(a)}),et(1,"sanitizeHtml"),et(2,"async"),v()),r&2&&(ht("NgxEditor__MenuItem--Active",s.isActive)("NgxEditor--Disabled",s.disabled),A("innerHTML",tt(1,6,s.html),Es)("title",tt(2,8,s.getTitle(s.name))))},dependencies:[jo,eu]});let t=e;return t})(),Dse=(()=>{let e=class e{get name(){return this.toolbarItem}constructor(i,r){this.ngxeService=i,this.menuService=r,this.disabled=!1,this.update=s=>{let{state:o}=s,a=bj[this.name];this.disabled=!a.canExecute(o)}}insert(i){if(i.preventDefault(),i.button!==0)return;let{state:r,dispatch:s}=this.editorView;bj[this.name].insert()(r,s)}getTitle(i){return this.ngxeService.locals.get(i)}ngOnInit(){this.html=this.ngxeService.getIcon(this.name),this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(i=>{this.update(i)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(y(Qa),y(uo))},e.\u0275cmp=le({type:e,selectors:[["ngx-insert-command"]],inputs:{toolbarItem:"toolbarItem"},decls:3,vars:8,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"]],template:function(r,s){r&1&&(b(0,"div",0),B("mousedown",function(a){return s.insert(a)}),et(1,"sanitizeHtml"),et(2,"async"),v()),r&2&&(ht("NgxEditor--Disabled",s.disabled),A("innerHTML",tt(1,4,s.html),Es)("title",tt(2,6,s.getTitle(s.name))))},dependencies:[jo,eu]});let t=e;return t})(),xse=(()=>{let e=class e{constructor(i,r,s){this.el=i,this.ngxeService=r,this.menuService=s,this.showPopup=!1,this.isActive=!1,this.canExecute=!0,this.setText=()=>{let{state:{selection:o,doc:a}}=this.editorView,{empty:l,from:c,to:u}=o,d=l?"":a.textBetween(c,u);d&&(this.text.patchValue(d),this.text.disable())},this.update=o=>{let{state:a}=o;this.isActive=af.isActive(a,{strict:!1}),this.canExecute=af.canExecute(a)}}get icon(){return this.ngxeService.getIcon(this.isActive?"unlink":"link")}get title(){return this.ngxeService.locals.get(this.isActive?"removeLink":"insertLink")}get href(){return this.form.get("href")}get text(){return this.form.get("text")}onDocumentClick(i){!this.el.nativeElement.contains(i.target)&&this.showPopup&&this.hideForm()}getLabel(i){return this.ngxeService.locals.get(i)}hideForm(){this.showPopup=!1,this.form.reset({href:"",text:"",openInNewTab:!0}),this.text.enable()}onMouseDown(i){if(i.button!==0)return;let{state:r,dispatch:s}=this.editorView;if(this.isActive){af.remove(r,s);return}this.showPopup=!this.showPopup,this.showPopup&&this.setText()}insertLink(i){i.preventDefault();let{text:r,href:s,openInNewTab:o}=this.form.getRawValue(),{dispatch:a,state:l}=this.editorView,{selection:c}=l,u={title:s,href:s,target:o?"_blank":"_self"};c.empty?(af.insert(r,u)(l,a),this.editorView.focus()):af.update(u)(l,a),this.hideForm()}ngOnInit(){this.editorView=this.menuService.editor.view,this.form=new jr({href:new Kn("",[At.required,At.pattern(this.menuService.editor.linkValidationPattern)]),text:new Kn("",[At.required]),openInNewTab:new Kn(!0)}),this.updateSubscription=this.menuService.editor.update.subscribe(i=>{this.update(i)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(y(ce),y(Qa),y(uo))},e.\u0275cmp=le({type:e,selectors:[["ngx-link"]],hostBindings:function(r,s){r&1&&B("mousedown",function(a){return s.onDocumentClick(a)},!1,Eu)},decls:4,vars:11,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],[1,"NgxEditor__Popup--Form",3,"formGroup","ngSubmit"],[1,"NgxEditor__Popup--FormGroup"],[1,"NgxEditor__Popup--Col"],[1,"NgxEditor__Popup--Label"],["type","href","id","href","formControlName","href","autofocus","","autocomplete","off"],["class","NgxEditor__HelpText NgxEditor__HelpText--Error",4,"ngIf"],["type","text","formControlName","text","autocomplete","off"],["type","checkbox","formControlName","openInNewTab"],["type","submit",3,"disabled"],[1,"NgxEditor__HelpText","NgxEditor__HelpText--Error"]],template:function(r,s){r&1&&(b(0,"div",0),B("mousedown",function(a){return s.onMouseDown(a)}),et(1,"sanitizeHtml"),et(2,"async"),v(),he(3,Gie,25,16,"div",1)),r&2&&(ht("NgxEditor__MenuItem--Active",s.isActive||s.showPopup)("NgxEditor--Disabled",!s.canExecute),A("innerHTML",tt(1,7,s.icon),Es)("title",tt(2,9,s.title)),I(3),A("ngIf",s.showPopup))},dependencies:[xn,bi,yi,_E,Ur,vi,Bs,js,jo,eu]});let t=e;return t})(),Ase=(()=>{let e=class e{constructor(i,r,s){this.ngxeService=i,this.menuService=r,this.el=s,this.isDropdownOpen=!1,this.disabledItems=[],this.update=o=>{let{state:a}=o;this.disabledItems=[];let l=[];this.items.forEach(c=>{let u=Iy[c];u.isActive(a)&&l.push(c),u.canExecute(a)||this.disabledItems.push(c)}),l.length===1?[this.activeItem]=l:this.activeItem=null}}get isSelected(){return!!(this.activeItem||this.isDropdownOpen)}get isDropdownDisabled(){return this.disabledItems.length===this.items.length}onDocumentClick(i){!this.el.nativeElement.contains(i)&&this.isDropdownOpen&&(this.isDropdownOpen=!1)}getName(i){return this.ngxeService.locals.get(i)}toggleDropdown(i){i.preventDefault(),this.isDropdownOpen=!this.isDropdownOpen}trackByIndex(i){return i}onClick(i,r){if(i.preventDefault(),i.button!==0)return;let s=Iy[r],{state:o,dispatch:a}=this.editorView;s.toggle()(o,a),this.isDropdownOpen=!1}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(i=>{this.update(i)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(y(Qa),y(uo),y(ce))},e.\u0275cmp=le({type:e,selectors:[["ngx-dropdown"]],hostBindings:function(r,s){r&1&&B("mousedown",function(a){return s.onDocumentClick(a.target)},!1,Eu)},inputs:{group:"group",items:"items"},decls:4,vars:8,consts:[[1,"NgxEditor__Dropdown--Text",3,"mousedown"],["class","NgxEditor__Dropdown--DropdownMenu",4,"ngIf"],[1,"NgxEditor__Dropdown--DropdownMenu"],["class","NgxEditor__Dropdown--Item",3,"ngClass","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],[1,"NgxEditor__Dropdown--Item",3,"ngClass","mousedown"]],template:function(r,s){r&1&&(b(0,"div",0),B("mousedown",function(a){return s.toggleDropdown(a)}),S(1),et(2,"async"),v(),he(3,Qie,2,2,"div",1)),r&2&&(ht("NgxEditor__Dropdown--Selected",s.isSelected)("NgxEditor--Disabled",s.isDropdownDisabled),I(1),ze(" ",tt(2,6,s.getName(s.activeItem||s.group)),`
`),I(2),A("ngIf",s.isDropdownOpen))},dependencies:[Ru,qi,xn,jo]});let t=e;return t})(),Mse=(()=>{let e=class e{constructor(i,r,s){this.el=i,this.ngxeService=r,this.menuService=s,this.showPopup=!1,this.isActive=!1,this.form=new jr({src:new Kn("",[At.required,At.pattern(`(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/??([^#
\r]*)?#?([^
\r]*)`)]),alt:new Kn(""),title:new Kn("")}),this.update=o=>{let{state:a}=o;this.isActive=wj.isActive(a)}}get icon(){return this.ngxeService.getIcon("image")}get src(){return this.form.get("src")}onDocumentClick(i){!this.el.nativeElement.contains(i.target)&&this.showPopup&&this.hideForm()}getLabel(i){return this.ngxeService.locals.get(i)}hideForm(){this.showPopup=!1,this.form.reset({src:"",alt:"",title:""})}onMouseDown(i){i.button===0&&(this.showPopup=!this.showPopup,this.showPopup&&this.fillForm())}fillForm(){let{state:i}=this.editorView,{selection:r}=i;if(r instanceof ee&&this.isActive){let{src:s,alt:o="",title:a=""}=r.node.attrs;this.form.setValue({src:s,alt:o,title:a})}}insertLink(i){i.preventDefault();let{src:r,alt:s,title:o}=this.form.getRawValue(),{dispatch:a,state:l}=this.editorView,c={alt:s,title:o};wj.insert(r,c)(l,a),this.editorView.focus(),this.hideForm()}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(i=>{this.update(i)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(y(ce),y(Qa),y(uo))},e.\u0275cmp=le({type:e,selectors:[["ngx-image"]],hostBindings:function(r,s){r&1&&B("mousedown",function(a){return s.onDocumentClick(a)},!1,Eu)},decls:4,vars:9,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],[1,"NgxEditor__Popup--Form",3,"formGroup","ngSubmit"],[1,"NgxEditor__Popup--FormGroup"],[1,"NgxEditor__Popup--Col"],[1,"NgxEditor__Popup--Label"],["type","href","id","href","formControlName","src","autofocus","","autocomplete","off"],["class","NgxEditor__HelpText NgxEditor__HelpText--Error",4,"ngIf"],["type","text","formControlName","alt","autocomplete","off"],["type","text","formControlName","title","autocomplete","off"],["type","submit",3,"disabled"],[1,"NgxEditor__HelpText","NgxEditor__HelpText--Error"]],template:function(r,s){r&1&&(b(0,"div",0),B("mousedown",function(a){return s.onMouseDown(a)}),et(1,"sanitizeHtml"),et(2,"async"),v(),he(3,Xie,24,15,"div",1)),r&2&&(ht("NgxEditor__MenuItem--Active",s.isActive||s.showPopup),A("innerHTML",tt(1,5,s.icon),Es)("title",tt(2,7,s.getLabel("insertImage"))),I(3),A("ngIf",s.showPopup))},dependencies:[xn,bi,yi,Ur,vi,Bs,js,jo,eu]});let t=e;return t})(),kse=(()=>{let e=class e{constructor(i,r,s){this.el=i,this.menuService=r,this.ngxeService=s,this.showPopup=!1,this.isActive=!1,this.activeColors=[],this.canExecute=!0,this.update=o=>{let{state:a}=o;this.canExecute=this.command.canExecute(a),this.isActive=this.command.isActive(a),this.activeColors=[],this.isActive&&(this.activeColors=this.command.getActiveColors(a))}}get title(){return this.getLabel(this.type==="text_color"?"text_color":"background_color")}get icon(){return this.ngxeService.getIcon(this.type==="text_color"?"text_color":"color_fill")}get command(){return this.type==="text_color"?nse:ise}getContrastYIQ(i){let r=i.replace("#",""),s=parseInt(r.substring(0,2),16),o=parseInt(r.substring(2,4),16),a=parseInt(r.substring(4,6),16);return(s*299+o*587+a*114)/1e3>=128?"black":"white"}onDocumentClick(i){!this.el.nativeElement.contains(i.target)&&this.showPopup&&this.hidePopup()}hidePopup(){this.showPopup=!1}togglePopup(i){i.preventDefault(),i.button===0&&(this.showPopup=!this.showPopup)}remove(i){i.preventDefault();let{state:r,dispatch:s}=this.editorView;this.command.remove()(r,s),this.hidePopup()}trackByIndex(i){return i}onColorSelect(i,r){if(i.preventDefault(),i.button!==0)return;let{state:s,dispatch:o}=this.editorView;if(this.type==="text_color"){let a={color:r};this.command.apply(a)(s,o)}else{let a={backgroundColor:r};this.command.apply(a)(s,o)}this.editorView.hasFocus()||this.editorView.focus(),this.hidePopup()}getLabel(i){return this.ngxeService.locals.get(i)}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(i=>{this.update(i)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(y(ce),y(uo),y(Qa))},e.\u0275cmp=le({type:e,selectors:[["ngx-color-picker"]],hostBindings:function(r,s){r&1&&B("mousedown",function(a){return s.onDocumentClick(a)},!1,Eu)},inputs:{presets:"presets",type:"type"},decls:4,vars:11,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],["class","NgxEditor__ColorContainer",4,"ngFor","ngForOf","ngForTrackBy"],[1,"NgxEditor__MenuItem--Button",3,"disabled","mousedown"],[1,"NgxEditor__ColorContainer"],["class","NgxEditor__Color",3,"ngStyle","title","ngClass","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],[1,"NgxEditor__Color",3,"ngStyle","title","ngClass","mousedown"]],template:function(r,s){r&1&&(b(0,"div",0),B("mousedown",function(a){return s.togglePopup(a)}),et(1,"sanitizeHtml"),et(2,"async"),v(),he(3,ire,5,6,"div",1)),r&2&&(ht("NgxEditor__MenuItem--Active",s.isActive||s.showPopup)("NgxEditor--Disabled",!s.canExecute),A("innerHTML",tt(1,7,s.icon),Es)("title",tt(2,9,s.title)),I(3),A("ngIf",s.showPopup))},dependencies:[Ru,qi,xn,$1,jo,eu],styles:['@charset "UTF-8";.NgxEditor__Popup[_ngcontent-%COMP%]{width:230px}.NgxEditor__ColorContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.NgxEditor__ColorContainer[_ngcontent-%COMP%] + .NgxEditor__ColorContainer[_ngcontent-%COMP%]{margin-top:5px}.NgxEditor__Color[_ngcontent-%COMP%]{border:none;outline:none;border-radius:6px;width:24px;height:24px;flex-shrink:0}.NgxEditor__Color--Active[_ngcontent-%COMP%]:after{content:"\\2714";font-size:90%}.NgxEditor__MenuItem--Button[_ngcontent-%COMP%]{margin-top:5px}']});let t=e;return t})();var Rse=[["bold","italic"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["link","image"],["text_color","background_color"]];var Nse=["#b60205","#d93f0b","#fbca04","#0e8a16","#006b75","#1d76db","#0052cc","#5319e7","#e99695","#f9d0c4","#fef2c0","#c2e0c6","#bfdadc","#c5def5","#bfd4f2","#d4c5f9"],Pj=(()=>{let e=class e{constructor(i){this.menuService=i,this.toolbar=Rse,this.colorPresets=Nse,this.disabled=!1,this.customMenuRef=null,this.dropdownPlacement="bottom",this.toggleCommands=["bold","italic","underline","strike","code","blockquote","ordered_list","bullet_list","align_left","align_center","align_right","align_justify"],this.insertCommands=["horizontal_rule","format_clear"],this.iconContainerClass=["NgxEditor__MenuItem","NgxEditor__MenuItem--Icon"],this.dropdownContainerClass=["NgxEditor__Dropdown"],this.seperatorClass=["NgxEditor__Seperator"]}get presets(){let r=[];return this.colorPresets.forEach((s,o)=>{let a=Math.floor(o/8);r[a]||r.push([]),r[a].push(s)}),r}trackByIndex(i){return i}isDropDown(i){return!!i?.heading}getDropdownItems(i){return i}ngOnInit(){if(!this.editor)throw new Bc("Required editor instance to initialize menu component");this.menuService.editor=this.editor}};e.\u0275fac=function(r){return new(r||e)(y(uo))},e.\u0275cmp=le({type:e,selectors:[["ngx-editor-menu"]],inputs:{toolbar:"toolbar",colorPresets:"colorPresets",disabled:"disabled",editor:"editor",customMenuRef:"customMenuRef",dropdownPlacement:"dropdownPlacement"},features:[Zt([uo])],decls:3,vars:7,consts:[[1,"NgxEditor__MenuBar",3,"ngClass"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"toolbarItem","class",4,"ngIf"],[3,"class",4,"ngIf"],["type","text_color",3,"class","presets",4,"ngIf"],["type","background_color",3,"class","presets",4,"ngIf"],[3,"toolbarItem"],[3,"class","group","items",4,"ngFor","ngForOf","ngForTrackBy"],[3,"group","items"],["type","text_color",3,"presets"],["type","background_color",3,"presets"],[3,"ngTemplateOutlet"]],template:function(r,s){r&1&&(b(0,"div",0),he(1,pre,2,2,"ng-container",1)(2,mre,2,1,"ng-container",2),v()),r&2&&(A("ngClass",zp(4,gre,s.disabled,s.dropdownPlacement==="top")),I(1),A("ngForOf",s.toolbar)("ngForTrackBy",s.trackByIndex),I(1),A("ngIf",s.customMenuRef))},dependencies:[Ru,qi,xn,H1,Sse,Dse,xse,Ase,Mse,kse,W1]});let t=e;return t})();var Pse=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=$({providers:[eu],imports:[fi,uc]});let t=e;return t})(),Ey=new M("NgxEditorConfig"),Ij={locals:DD,icons:Nj},Oj=(()=>{let e=class e{static forRoot(i=Ij){return{ngModule:e,providers:[{provide:Ey,useValue:i},{provide:MD,useFactory:Ej,deps:[Ey]}]}}static forChild(i=Ij){return{ngModule:e,providers:[{provide:Ey,useValue:i},{provide:MD,useFactory:Ej,deps:[Ey]},Qa]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=H({type:e}),e.\u0275inj=$({imports:[fi,Pse]});let t=e;return t})(),Ose=t=>t===null||t.length===0,Cj=t=>t!==null&&typeof t.length=="number",Fse=t=>{if(!t)return!0;let{childCount:e,firstChild:n}=t;return!!(e===1&&n?.isTextblock&&n.content.size===0)},cf=class{static required(e){return n=>{let i=e||lo,r=lf(n.value,i);return Fse(r)?{required:!0}:null}}static maxLength(e,n){return i=>{let r=n||lo,o=lf(i.value,r).textContent;return Cj(o)&&o.length>e?{maxlength:{requiredLength:e,actualLength:o.length}}:null}}static minLength(e,n){return i=>{let r=n||lo,o=lf(i.value,r).textContent;return Ose(o)||!Cj(o)?null:o.length<e?{minlength:{requiredLength:e,actualLength:o.length}}:null}}},ni=(t,e=!1)=>(n,i)=>{let r=new ho(t);return e?r.toggle()(n,i):r.apply()(n,i)},kD=class{constructor(e){if(this.applyTrx=n=>{this.state=this.state.apply(n??this.tr),this.tr=this.state.tr,this.tr.setMeta("APPLIED_TRX",!0)},this.dispatch=n=>{this.applyTrx(n)},!e)throw new Bc("Required view to initialize commands.");this.view=e,this.state=e.state,this.tr=this.view.state.tr}exec(){if(!this.tr.getMeta("APPLIED_TRX"))return!1;let e=!this.view.state.doc.eq(this.state.doc);this.view.updateState(this.state);let n=this.tr.setMeta("FORCE_EMIT",e);return this.view.dispatch(n),!0}focus(e="end"){let n=e==="start"?pe.atStart(this.state.doc):pe.atEnd(this.state.doc);return this.tr.setSelection(n),this.applyTrx(),this.view.focus(),this}scrollIntoView(){return this.tr.scrollIntoView(),this.applyTrx(),this}insertText(e){return this.tr.insertText(e),this.applyTrx(),this}insertNewLine(){return Jc(...[sD,lD,cD,uD])(this.state,this.dispatch),this}applyMark(e){return ni(e,!1)(this.state,this.dispatch),this}toggleMark(e){return ni(e,!0)(this.state,this.dispatch),this}bold(){return ni("strong")(this.state,this.dispatch),this}toggleBold(){return ni("strong",!0)(this.state,this.dispatch),this}italics(){return ni("em")(this.state,this.dispatch),this}toggleItalics(){return ni("em",!0)(this.state,this.dispatch),this}underline(){return ni("u")(this.state,this.dispatch),this}toggleUnderline(){return ni("u",!0)(this.state,this.dispatch),this}strike(){return ni("s")(this.state,this.dispatch),this}toggleStrike(){return ni("s",!0)(this.state,this.dispatch),this}code(){return ni("code")(this.state,this.dispatch),this}toggleCode(){return ni("code",!0)(this.state,this.dispatch),this}toggleOrderedList(){return new Zc(!1).toggle()(this.state,this.dispatch),this}toggleBulletList(){return new Zc(!0).toggle()(this.state,this.dispatch),this}toggleHeading(e){return new rs(e).toggle()(this.state,this.dispatch),this}insertLink(e,n){return new TD().insert(e,n)(this.state,this.dispatch),this}updateLink(e){return new TD().update(e)(this.state,this.dispatch),this}insertImage(e,n={}){return new Rj().insert(e,n)(this.state,this.dispatch),this}textColor(e){return new Xc("text_color").apply({color:e})(this.state,this.dispatch),this}backgroundColor(e){return new Xc("text_background_color").apply({backgroundColor:e})(this.state,this.dispatch),this}removeTextColor(){return new Xc("text_color").remove()(this.state,this.dispatch),this}removeBackgroundColor(){return new Xc("text_background_color").remove()(this.state,this.dispatch),this}align(e){return new Ya(e).toggle()(this.state,this.dispatch),this}insertHTML(e){let{selection:n,schema:i,tr:r}=this.state,{from:s,to:o}=n,a=document.createElement("div");a.innerHTML=Dj(e)?e.trim():e;let l=to.fromSchema(i).parseSlice(a),c=r.replaceRange(s,o,l);return this.applyTrx(c),this}},Lse=typeof navigator<"u"?/Mac/.test(navigator.platform):!1,Vse=t=>my(/^\s*>\s$/,t),Bse=t=>my(/^(?:\d+)\.\s$/,t,e=>({order:Number(e[1])}),(e,n)=>n.childCount+n.attrs.order===Number(e[1])),jse=t=>my(/^\s*(?:[-+*])\s$/,t),Use=t=>dD(/^```$/,t),zse=(t,e)=>dD(new RegExp(`^(#{1,${e}})\\s$`),t,n=>({level:n[1].length})),$se=t=>mD(/(?:^|\s)(?:(\*\*|__)(?:([^*_]+))(\*\*|__))$/,t),Hse=t=>mD(/(?:^|\s)(?:(\*|_)(?:([^*_]+))(\*|_))$/,t),Wse=t=>{let e=cj.concat(lj,aj);return e.push($se(t.marks.strong)),e.push(Hse(t.marks.em)),e.push(Vse(t.nodes.blockquote)),e.push(Bse(t.nodes.ordered_list)),e.push(jse(t.nodes.bullet_list)),e.push(Use(t.nodes.code_block)),e.push(zse(t.nodes.heading,6)),oj({rules:e})},qse=(t,e)=>{let n={};n["Mod-z"]=wD,Lse?n["Shift-Mod-z"]=wy:n["Mod-y"]=wy;let i=[of({"Mod-b":Ga(t.marks.strong),"Mod-i":Ga(t.marks.em),"Mod-u":Ga(t.marks.u),"Mod-`":Ga(t.marks.code)}),of({Enter:KB(t.nodes.list_item),"Shift-Enter":Jc(aD,(r,s)=>{let{tr:o}=r,a=t.nodes.hard_break;return s(o.replaceSelectionWith(a.create()).scrollIntoView()),!0}),"Mod-[":nD(t.nodes.list_item),"Mod-]":iD(t.nodes.list_item),Tab:iD(t.nodes.list_item)}),of(rj)];return e.history&&i.push(of(n)),i},Gse=(t,e)=>{let n=[];return e.keyboardShortcuts&&n.push(...qse(t,{history:e.history})),e.history&&n.push(vj()),e.inputRules&&n.push(Wse(t)),n},Fj={linkOnPaste:!0,resizeImage:!0},Tj={content:null,history:!0,keyboardShortcuts:!0,inputRules:!0,schema:lo,plugins:[],nodeViews:{},attributes:{},features:Fj,handleScrollToSelection:null,linkValidationPattern:`(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/??([^#
\r]*)?#?([^
\r]*)|(mailto:.*[@].*)`},uf=class{constructor(e=Tj){this.valueChangesSubject=new Z,this.updateSubject=new Z,this.options=C(C({},Tj),e),this.createEditor()}get valueChanges(){return this.valueChangesSubject.asObservable()}get update(){return this.updateSubject.asObservable()}get schema(){return this.options.schema||lo}get linkValidationPattern(){return this.options.linkValidationPattern}get commands(){return new kD(this.view)}get features(){return C(C({},Fj),this.options.features)}handleTransactions(e){let n=this.view.state.apply(e);if(this.view.updateState(n),this.updateSubject.next(this.view),!e.docChanged&&!e.getMeta("FORCE_EMIT"))return;let i=n.doc.toJSON();this.valueChangesSubject.next(i)}createEditor(){let{options:e,schema:n}=this,{content:i=null,nodeViews:r}=e,{history:s=!0,keyboardShortcuts:o=!0,inputRules:a=!0}=e,l=lf(i,n),c=e.plugins??[],u=e.attributes??{},d=Gse(n,{history:s,keyboardShortcuts:o,inputRules:a});this.view=new uy(null,{state:ny.create({doc:l,schema:n,plugins:[...d,...c]}),nodeViews:r,dispatchTransaction:this.handleTransactions.bind(this),attributes:u,handleScrollToSelection:e.handleScrollToSelection})}setContent(e){if(KV(e))return;let{state:n}=this.view,{tr:i,doc:r}=n,s=lf(e,this.schema);i.replaceWith(0,n.doc.content.size,s),!r.eq(i.doc)&&i.docChanged&&this.view.dispatch(i)}registerPlugin(e){let{state:n}=this.view,i=[...n.plugins,e],r=n.reconfigure({plugins:i});this.view.updateState(r)}destroy(){this.view.destroy()}};function Yse(t,e){if(t&1&&(b(0,"div",30)(1,"span",31),S(2),v()()),t&2){let n=e.$implicit;I(2),at(n.name)}}function Qse(t,e){if(t&1){let n=ft();b(0,"div",32)(1,"div",33)(2,"div",34)(3,"div",35),S(4),v()(),b(5,"div",36)(6,"strong"),S(7),v(),b(8,"div",37)(9,"button",38),B("click",function(){let s=Ge(n).$implicit,o=G();return Ke(o.deleteComment(s.id))}),S(10," Delete "),v()()()(),b(11,"div",39),J(12,"p",40),v()()}if(t&2){let n=e.$implicit,i=G();I(4),at(i.getInitial(n.name)),I(3),at(n.name),I(5),A("innerHTML",i.sanitizeHTML(n.commentaire),Es)}}var Lj=(()=>{let e=class e{constructor(i,r,s,o,a,l,c){this.filmservice=i,this.activatedRoute=r,this.sanitizer=s,this.formBuilder=o,this.dialog=a,this.router=l,this.userLoginService=c,this.formData={nom:"",comment:""},this.isAuthenticated=!1,this.html="hello world",this.Editor=uf,this.form=this.formBuilder.group({nom:["",cf.required],comment:["",cf.required]})}ngOnInit(){if(this.userLoginService.autoLogin(),this.userSub=this.userLoginService.userSubject.subscribe(i=>{if(console.log("user",i),this.isAuthenticated=!!i,this.isAuthenticated){let r=this.userLoginService.getEmailFromLocalStorage();this.formData.nom=r.split("@")[0]}}),this.getPopularMoviesById(),this.getCommentaire(),this.submit_commentaire(),this.editor=new uf,this.activatedRoute.params.subscribe(i=>{let r=i.id;this.filmId=r,this.getCommentaireFiltred(r)}),this.isAuthenticated){let i=this.userLoginService.getEmailFromLocalStorage();this.formData.nom=i}}submit_commentaire(){let i={idfilm:this.filmId,name:this.formData.nom,commentaire:this.formData.comment};console.log(i),this.filmservice.addComment(i).subscribe(r=>{console.log("Comment added successfully",r),this.getCommentaireFiltred(this.filmId)},r=>{console.error("Error adding comment",r)})}getPopularMoviesById(){this.filmservice.getPopularMoviesById(this.activatedRoute.snapshot.params.id).subscribe(i=>{this.filmdetails=i,this.genre=this.filmdetails.genres})}getCommentaire(){this.filmservice.getCommentaire().subscribe(i=>{this.commentaire=i})}getCommentaireFiltred(i){console.log("now ",this.filmId),this.filmservice.getCommentaireFiltred(i).subscribe(r=>{this.commentaireFiltred=r}),console.log(this.commentaireFiltred)}deleteComment(i){this.isAuthenticated||this.filmservice.deleteComment(i).subscribe(r=>{console.log("Comment deleted successfully",r),this.getCommentaireFiltred(this.filmId)},r=>{console.error("Error adding comment",r)}),this.commentaire.name==this.userLoginService.getEmailFromLocalStorage()&&this.filmservice.deleteComment(i).subscribe(r=>{console.log("Comment deleted successfully",r),this.getCommentaireFiltred(this.filmId)},r=>{console.error("Error adding comment",r)})}ngOnDestroy(){this.editor.destroy()}sanitizeHTML(i){return this.sanitizer.bypassSecurityTrustHtml(i)}onAddComment(){this.isAuthenticated?this.submit_commentaire:this.dialog.open(rc).afterClosed().subscribe(r=>{r&&this.router.navigate(["/signup"])})}getInitial(i){return i?i.charAt(0).toUpperCase():""}};e.\u0275fac=function(r){return new(r||e)(y(er),y(Yi),y($o),y(cc),y(ta),y($e),y(mn))},e.\u0275cmp=le({type:e,selectors:[["app-details"]],standalone:!0,features:[Be],decls:84,vars:24,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],["rel","stylesheet","href","https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css","integrity","sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T","crossorigin","anonymous"],[1,"container","mt-2"],[1,"row"],[1,"col-md-4"],[1,"movie-poster-container"],[1,"movie-poster",3,"src","alt"],[1,"col-md-8"],[1,"mb-4"],[1,"lead"],[1,"tagline"],[1,"additional-info"],["class","d-inline-block mr-2",4,"ngFor","ngForOf"],[1,"container","mt-4"],[1,"mb-3"],[3,"ngSubmit"],["commentForm","ngForm"],["for","nom",1,"form-label"],["type","text","id","nom","name","nom","required","","placeholder","Enter a Title",1,"form-control",3,"ngModel","ngModelChange"],["for","comment",1,"form-label"],[1,"ngx-editor-container"],[1,"ngx-editor-content",3,"editor"],["id","comment","name","comment","required","",2,"height","200px",3,"editor","ngModel","disabled","placeholder","ngModelChange"],["type","submit",1,"btn","btn-primary",3,"disabled","click"],[1,"container","mt-4","mb-4"],[1,"form-label"],[1,"comment-section"],["class","comment",4,"ngFor","ngForOf"],[1,"d-inline-block","mr-2"],[1,"badge","badge-primary"],[1,"comment"],[1,"comment-header"],[1,"profile-icon"],[1,"avatar"],[1,"comment-info"],[1,"comment-actions"],["type","button",1,"btn","btn-danger",3,"click"],[1,"comment-body"],[3,"innerHTML"]],template:function(r,s){if(r&1&&(b(0,"html",0)(1,"head"),J(2,"meta",1)(3,"meta",2),b(4,"title"),S(5,"Film Details"),v(),J(6,"link",3),v(),b(7,"body")(8,"div",4)(9,"div",5)(10,"div",6)(11,"div",7),J(12,"img",8),v()(),b(13,"div",9)(14,"h2",10),S(15),v(),b(16,"p",11)(17,"strong"),S(18,"Release Date:"),v(),S(19),v(),b(20,"p",12),J(21,"strong"),S(22),v(),b(23,"p"),J(24,"strong"),S(25),v(),S(26," \xA0\xA0 \xA0 "),b(27,"p")(28,"strong"),S(29,"Runtime:"),v(),S(30),v(),b(31,"p")(32,"strong"),S(33,"Popularity:"),v(),S(34),v(),b(35,"p")(36,"strong"),S(37,"Vote Average:"),v(),S(38),v(),b(39,"p")(40,"strong"),S(41,"Budget:"),v(),S(42),v(),b(43,"div",13)(44,"p")(45,"strong"),S(46,"Original Title:"),v(),S(47),v(),b(48,"p")(49,"strong"),S(50,"Language:"),v(),S(51),v(),b(52,"p")(53,"strong"),S(54,"Adult:"),v(),S(55),v(),b(56,"p")(57,"strong"),S(58,"Vote Count:"),v(),S(59),v()(),he(60,Yse,3,1,"div",14),v()()(),b(61,"div",15)(62,"div",5)(63,"div",9),J(64,"h3",16),b(65,"form",17,18),B("ngSubmit",function(){return s.submit_commentaire()}),b(67,"div",16)(68,"label",19),S(69,"Title"),v(),b(70,"input",20),B("ngModelChange",function(a){return s.formData.nom=a}),v()(),b(71,"div",16)(72,"label",21),S(73,"Leave a Comment:"),v(),b(74,"div",22),J(75,"ngx-editor-menu",23),b(76,"ngx-editor",24),B("ngModelChange",function(a){return s.formData.comment=a}),v()()(),b(77,"button",25),B("click",function(){return s.onAddComment()}),S(78,"Submit Comment"),v()()()(),b(79,"div",26)(80,"h3",27),S(81,"Comments Section"),v(),b(82,"div",28),he(83,Qse,13,3,"div",29),v()()()()()),r&2){let o=kl(66);I(12),jp("src","https://image.tmdb.org/t/p/w500/",s.filmdetails.poster_path,"",Fo),xu("alt",s.filmdetails.title),I(3),at(s.filmdetails.title),I(4),ze(" ",s.filmdetails.release_date,""),I(3),ze(" ",s.filmdetails.tagline,""),I(3),ze(" ",s.filmdetails.overview,""),I(5),ze(" ",s.filmdetails.runtime," minutes"),I(4),ze(" ",s.filmdetails.popularity,""),I(4),ze(" ",s.filmdetails.vote_average,""),I(4),ze(" ",s.filmdetails.budget,"$"),I(5),ze(" ",s.filmdetails.original_title,""),I(4),ze(" ",s.filmdetails.original_language,""),I(4),ze(" ",s.filmdetails.adult?"Yes":"No",""),I(4),ze(" ",s.filmdetails.vote_count,""),I(1),A("ngForOf",s.genre),I(10),A("ngModel",s.formData.nom),I(5),A("editor",s.editor),I(1),A("editor",s.editor)("ngModel",s.html)("disabled",!1)("ngModel",s.formData.comment)("placeholder","Type here..."),I(1),A("disabled",!o.valid||!s.formData.comment),I(6),A("ngForOf",s.commentaireFiltred)}},dependencies:[fi,qi,Oj,kj,Pj,dg,bi,yi,Ur,vi,CE,IE,Fd],styles:[".ngx-editor-toolbar[_ngcontent-%COMP%]{background-color:#8d0b0b;color:#fd9700}.ngx-editor-content[_ngcontent-%COMP%]{color:#000;background-color:#fff}.form-label[_ngcontent-%COMP%]{font-weight:700;color:#fff}.form-control[_ngcontent-%COMP%]{background-color:#333;color:#fff;border:1px solid #ccc;border-radius:4px;padding:8px;margin-bottom:10px}.btn-primary[_ngcontent-%COMP%]{background-color:#e50914;color:#fff;border-radius:4px;padding:8px 20px;border:none;transition:background-color .3s ease}.btn-primary[_ngcontent-%COMP%]:disabled{background-color:#333;color:#aaa;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#ff0f23}.film-details[_ngcontent-%COMP%]{background-color:#000;color:#fff;padding:20px;border-radius:10px}.film-details[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8em}.film-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1em}.film-details[_ngcontent-%COMP%]   .lead[_ngcontent-%COMP%]{font-size:1.1em;font-weight:700}.film-details[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700}.additional-info[_ngcontent-%COMP%]{margin-top:20px}.tagline[_ngcontent-%COMP%]{font-size:1.5em;font-style:italic;color:gold;margin-bottom:10px}.tagline[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:700}.comment[_ngcontent-%COMP%]{padding:15px;background-color:#1f1f1f;border-radius:8px;margin-bottom:20px}.comment-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.comment-header[_ngcontent-%COMP%]   .profile-icon[_ngcontent-%COMP%]{margin-right:10px}.profile-icon[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background-color:#333;color:#fff;display:flex;justify-content:center;align-items:center;font-weight:700;font-size:1.2em}.comment-info[_ngcontent-%COMP%]{display:flex;align-items:center;flex-grow:1}.comment-actions[_ngcontent-%COMP%]{margin-left:auto}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{background-color:#000;color:#fff;margin:0;padding:0}.container[_ngcontent-%COMP%]{padding-top:20px;background-color:#000;color:#fff}.movie-poster[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:8px;box-shadow:0 4px 8px #00000080;border:8px solid transparent;border-image:linear-gradient(to bottom,rgba(0,0,0,.8),rgba(0,0,0,0)) 1}h2[_ngcontent-%COMP%]{margin-bottom:20px}.lead[_ngcontent-%COMP%]{font-size:1.2rem;font-weight:700}.badge[_ngcontent-%COMP%]{font-size:.8rem;margin-right:5px;margin-bottom:5px}@media (max-width: 768px){img[_ngcontent-%COMP%]{width:100%}}"]});let t=e;return t})();var Vj=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=le({type:e,selectors:[["app-not-found"]],standalone:!0,features:[Be],decls:15,vars:0,consts:[["lang","en"],["charset","UTF-8"],["name","viewport","content","width=device-width, initial-scale=1.0"],["rel","stylesheet","href","https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css","integrity","sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T","crossorigin","anonymous"],[1,"not-found-container"],[1,"not-found-heading"],[1,"not-found-message"],["href","/",1,"btn","btn-primary","back-to-home-btn"]],template:function(r,s){r&1&&(b(0,"html",0)(1,"head"),J(2,"meta",1)(3,"meta",2),b(4,"title"),S(5,"404 Not Found"),v(),J(6,"link",3),v(),b(7,"body")(8,"div",4)(9,"h1",5),S(10,"404"),v(),b(11,"p",6),S(12,"Oops! The page you're looking for could not be found."),v(),b(13,"a",7),S(14,"Back to Home"),v()()()())},styles:[`body[_ngcontent-%COMP%] {
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background-color: #f8f9fa;
    }

    .not-found-container[_ngcontent-%COMP%] {
      text-align: center;
    }

    .not-found-heading[_ngcontent-%COMP%] {
      font-size: 6rem;
      font-weight: bold;
      color: #dc3545;
    }

    .not-found-message[_ngcontent-%COMP%] {
      font-size: 1.5rem;
      margin-bottom: 20px;
    }

    .back-to-home-btn[_ngcontent-%COMP%] {
      font-size: 1rem;
      padding: 10px 20px;
    }`]});let t=e;return t})();function Jse(t,e){if(t&1){let n=ft();b(0,"div",2)(1,"app-home-film",3),B("favoriteRemoved",function(r){Ge(n);let s=G();return Ke(s.onFavoriteRemoved(r))}),v()()}if(t&2){let n=e.$implicit;I(1),A("film",n)}}var Bj=(()=>{let e=class e{constructor(i,r){this.filmService=i,this.userService=r,this.favoriteMovieIds=[],this.favoriteMovies=[]}ngOnInit(){this.loadFavoriteMovies(),console.log(this.favoriteMovies)}loadFavoriteMovies(){let i=this.userService.getEmailFromLocalStorage();console.log("Fetching favorite movies for user with email:",i),this.filmService.getFavoriteMovieIdsByEmail(i).subscribe(r=>{console.log("Favorite movie IDs:",r);let s=[];for(let o=0;o<r.length;o++){let a=r[o];console.log("Fetching details for movie ID:",a);let l=this.filmService.getPopularMoviesById(a);s.push(l)}s.length>0?wn(s).subscribe(o=>{console.log("Favorite movies details:",o);for(let a=0;a<o.length;a++)this.favoriteMovies.push(o[a]);console.log(this.favoriteMovies)},o=>{console.error("Error fetching favorite movies details:",o)}):console.log("No favorite movie IDs found.")})}loadFavoriteMoviessss(){console.log("Fetching favorite movie IDs..."),this.filmService.getFavoriteMovieIds().subscribe(i=>{console.log("Received favorite movie IDs:",i);let r=[];for(let s=0;s<i.length;s++){let o=i[s];console.log("Fetching details for movie ID:",o);let a=this.filmService.getPopularMoviesById(o);r.push(a)}r.length>0?wn(r).subscribe(s=>{console.log("Favorite movies details:",s);for(let o=0;o<s.length;o++)this.favoriteMovies.push(s[o]);console.log(this.favoriteMovies)},s=>{console.error("Error fetching favorite movies details:",s)}):console.log("No favorite movie IDs found.")})}onFavoriteRemoved(i){console.log("Removing favorite movie with ID:",i);let r=this.favoriteMovies.findIndex(s=>s.id===i);r!==-1&&this.favoriteMovies.splice(r,1)}};e.\u0275fac=function(r){return new(r||e)(y(er),y(mn))},e.\u0275cmp=le({type:e,selectors:[["app-favorited"]],standalone:!0,features:[Be],decls:2,vars:1,consts:[[1,"row","row-cols-1","row-cols-sm-2","row-cols-md-3","row-cols-lg-3","g-4"],["class","col",4,"ngFor","ngForOf"],[1,"col"],[3,"film","favoriteRemoved"]],template:function(r,s){r&1&&(b(0,"div",0),he(1,Jse,2,1,"div",1),v()),r&2&&(I(1),A("ngForOf",s.favoriteMovies))},dependencies:[Xl,Gm,Zm,qi]});let t=e;return t})();var Cy=(()=>{let e=class e{constructor(){this.close=new ye}onClose(){this.close.emit()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=le({type:e,selectors:[["app-alert"]],inputs:{message:"message"},outputs:{close:"close"},standalone:!0,features:[Be],decls:7,vars:1,consts:[[1,"backdrop",3,"click"],[1,"alert-box"],[1,"alert-box-actions"],[1,"btn","btn-primary",3,"click"]],template:function(r,s){r&1&&(b(0,"div",0),B("click",function(){return s.onClose()}),v(),b(1,"div",1)(2,"p"),S(3),v(),b(4,"div",2)(5,"button",3),B("click",function(){return s.onClose()}),S(6,"Close"),v()()()),r&2&&(I(3),at(s.message))},styles:[".backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,.75);z-index:50}.alert-box[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:100}.netflix-style[_ngcontent-%COMP%]{background-color:#000;padding:30px;border-radius:10px;box-shadow:0 0 20px #0000004d;text-align:center;color:#fff;max-width:800px;width:80%}.netflix-style[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;line-height:1.5}.alert-box-actions[_ngcontent-%COMP%]{margin-top:20px}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:5px;cursor:pointer;background-color:#e50914;color:#fff;font-size:16px;transition:background-color .3s ease}.btn[_ngcontent-%COMP%]:hover{background-color:#b2070d}"]});let t=e;return t})();function Xse(t,e){if(t&1){let n=ft();b(0,"app-alert",12),B("close",function(){Ge(n);let r=G();return Ke(r.onHandleError())}),v()}if(t&2){let n=G();A("message",n.error)}}function Zse(t,e){t&1&&(b(0,"div",13),S(1," Email is required. "),v())}function eoe(t,e){t&1&&(b(0,"div",13),S(1," Invalid email format. "),v())}function toe(t,e){t&1&&(b(0,"div",13),S(1," Password is required. "),v())}function noe(t,e){t&1&&(b(0,"div",14),S(1," Authentication failed "),v())}var ioe=()=>["/signup"],jj=(()=>{let e=class e{constructor(i,r,s){this.formBuilder=i,this.usersService=r,this.router=s,this.authFailed=!1,this.error=null,this.loginForm=this.formBuilder.group({email:["",[At.required,At.email]],password:["",At.required]})}onSubmitLogin(){this.submitForm()}onHandleError(){this.error=null}submitForm(){let i=this.loginForm;if(i.invalid)return;let r=i.value;this.usersService.login(r.email,r.password).subscribe({next:o=>{this.router.navigate(["/home"]),console.log(o)},error:o=>{this.error=o,console.log(o)}}),i.reset()}};e.\u0275fac=function(r){return new(r||e)(y(cc),y(mn),y($e))},e.\u0275cmp=le({type:e,selectors:[["app-login"]],standalone:!0,features:[Be],decls:19,vars:9,consts:[[1,"container"],[1,"login-container"],[3,"message","close",4,"ngIf"],[1,"login-form"],[3,"formGroup","ngSubmit"],["type","email","formControlName","email","placeholder","Email",1,"form-control"],["class","error-message",4,"ngIf"],["type","password","formControlName","password","placeholder","Password",1,"form-control"],["type","submit",3,"disabled"],["class","alert alert-danger",4,"ngIf"],[1,"signup-link"],[3,"routerLink"],[3,"message","close"],[1,"error-message"],[1,"alert","alert-danger"]],template:function(r,s){r&1&&(b(0,"div",0)(1,"div",1),he(2,Xse,1,1,"app-alert",2),b(3,"div",3)(4,"h1"),S(5,"Sign In"),v(),b(6,"form",4),B("ngSubmit",function(){return s.onSubmitLogin()}),J(7,"input",5),he(8,Zse,2,0,"div",6)(9,eoe,2,0,"div",6),J(10,"input",7),he(11,toe,2,0,"div",6),b(12,"button",8),S(13,"Sign In"),v()(),he(14,noe,2,0,"div",9),b(15,"p",10),S(16," New to EMI MOVIES ? "),b(17,"a",11),S(18,"Sign up now"),v()()()()()),r&2&&(I(2),A("ngIf",s.error),I(4),A("formGroup",s.loginForm),I(2),A("ngIf",s.loginForm.get("email").hasError("required")&&s.loginForm.get("email").touched),I(1),A("ngIf",s.loginForm.get("email").hasError("email")&&s.loginForm.get("email").touched),I(2),A("ngIf",s.loginForm.get("password").hasError("required")&&s.loginForm.get("password").touched),I(1),A("disabled",s.loginForm.invalid),I(2),A("ngIf",s.authFailed),I(3),A("routerLink",kr(8,ioe)))},dependencies:[uc,bi,yi,Ur,vi,Bs,js,xn,Cy,Ji],styles:[".container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;font-family:Arial,sans-serif;background-color:#141414}.login-container[_ngcontent-%COMP%]{width:350px;padding:20px;background-color:#000c;border-radius:8px;box-shadow:0 0 10px #00000080;color:#fff}h1[_ngcontent-%COMP%]{margin-bottom:20px;text-align:center}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], button[_ngcontent-%COMP%]{margin-bottom:15px;padding:10px;border:none;border-radius:5px;font-size:16px;width:100%}button[_ngcontent-%COMP%]{background-color:#e50914;color:#fff;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#ff3d3d}.error-message[_ngcontent-%COMP%]{color:red}.signup-link[_ngcontent-%COMP%]{margin-top:15px;font-size:14px;text-align:center}.signup-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#e50914;text-decoration:none}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0;padding:0}"]});let t=e;return t})();function roe(t,e){if(t&1){let n=ft();b(0,"app-alert",11),B("close",function(){Ge(n);let r=G();return Ke(r.onHandleError())}),v()}if(t&2){let n=G();A("message",n.error)}}function soe(t,e){t&1&&(b(0,"div",12),S(1," Email is required. "),v())}function ooe(t,e){t&1&&(b(0,"div",12),S(1," Invalid email format. "),v())}function aoe(t,e){t&1&&(b(0,"div",13),S(1," Password is required. "),v())}function loe(t,e){t&1&&(b(0,"div",13),S(1," Password must be at least 6 characters long. "),v())}var coe=()=>["/login"],Uj=(()=>{let e=class e{constructor(i,r,s){this.formBuilder=i,this.usersService=r,this.router=s,this.authFailed=!1,this.error=null,this.signUpForm=this.formBuilder.group({email:["",[At.required,At.email]],password:["",[At.required,At.minLength(6)]]})}onSubmitSignUp(){this.submitForm()}onHandleError(){this.error=null}submitForm(){let i=this.signUpForm;if(i.invalid)return;let r=i.value;this.usersService.signUp(r.email,r.password).subscribe({next:o=>{console.log(o)},error:o=>{this.error=o,console.log(o)}}),i.reset()}};e.\u0275fac=function(r){return new(r||e)(y(cc),y(mn),y($e))},e.\u0275cmp=le({type:e,selectors:[["app-signup"]],standalone:!0,features:[Be],decls:18,vars:9,consts:[[1,"signup-container"],[3,"message","close",4,"ngIf"],[1,"signup-form"],[3,"formGroup","ngSubmit"],["type","email","formControlName","email","placeholder","Email",1,"form-control"],["class","error-message",4,"ngIf"],["type","password","formControlName","password","placeholder","Password",1,"form-control"],["class","error-message","style","color: aliceblue !important",4,"ngIf"],["type","submit",1,"btn",3,"disabled"],[1,"login-link"],[3,"routerLink"],[3,"message","close"],[1,"error-message"],[1,"error-message",2,"color","aliceblue !important"]],template:function(r,s){r&1&&(b(0,"div",0),he(1,roe,1,1,"app-alert",1),b(2,"div",2)(3,"h1"),S(4,"Sign Up"),v(),b(5,"form",3),B("ngSubmit",function(){return s.onSubmitSignUp()}),J(6,"input",4),he(7,soe,2,0,"div",5)(8,ooe,2,0,"div",5),J(9,"input",6),he(10,aoe,2,0,"div",7)(11,loe,2,0,"div",7),b(12,"button",8),S(13," Sign up "),v()(),b(14,"p",9),S(15,"Already a member? "),b(16,"a",10),S(17,"Sign in now"),v()()()()),r&2&&(I(1),A("ngIf",s.error),I(4),A("formGroup",s.signUpForm),I(2),A("ngIf",s.signUpForm.get("email").hasError("required")&&s.signUpForm.get("email").touched),I(1),A("ngIf",s.signUpForm.get("email").hasError("email")&&s.signUpForm.get("email").touched),I(2),A("ngIf",s.signUpForm.get("password").hasError("required")&&s.signUpForm.get("password").touched),I(1),A("ngIf",s.signUpForm.get("password").hasError("minlength")&&s.signUpForm.get("password").touched),I(1),A("disabled",s.signUpForm.invalid),I(4),A("routerLink",kr(8,coe)))},dependencies:[uc,bi,yi,Ur,vi,Bs,js,xn,Cy,Ji],styles:[".signup-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;font-family:Arial,sans-serif;background-color:#141414}.signup-form[_ngcontent-%COMP%]{width:350px;padding:20px;background-color:#000c;border-radius:8px;box-shadow:0 0 10px #00000080;color:#fff}h1[_ngcontent-%COMP%]{margin-bottom:20px;text-align:center}form[_ngcontent-%COMP%]{display:flex;flex-direction:column}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], button[_ngcontent-%COMP%]{margin-bottom:15px;padding:10px;border:none;border-radius:5px;font-size:16px}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{width:100%}button[_ngcontent-%COMP%]{background-color:#e50914;color:#fff;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#ff3d3d}.login-link[_ngcontent-%COMP%]{margin-top:15px;font-size:14px;text-align:center}.login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#e50914;text-decoration:none}"]});let t=e;return t})();var zj=(t,e)=>{let n=D(mn),i=D($e);return n.userSubject.pipe(qe(1),U(r=>r?!0:i.createUrlTree(["/login"])))};var uoe=[{path:"home",component:TE},{path:"",component:TE,pathMatch:"full"},{path:"favorited",component:Bj,title:"favorited page",canActivate:[zj]},{path:"details/:id",component:Lj,title:"Home details"},{path:"login",component:jj,title:"Login page"},{path:"signup",component:Uj,title:"Signup page"},{path:"**",component:Vj,title:"Home notfound"}],$j=uoe;dk(fP,{providers:[Ap(C0),p0(),hk(),iR($j),UR(),Ap(jP(()=>UP({apiKey:"AIzaSyBp9w4oil77XT3FYITOpZrQ5Iozpq4y3_g",authDomain:"bricool-ginf.firebaseapp.com",databaseURL:"https://bricool-ginf-default-rtdb.firebaseio.com",projectId:"bricool-ginf",storageBucket:"bricool-ginf.appspot.com",messagingSenderId:"160115731845",appId:"1:160115731845:web:171092878c4d83baf1e8ec",measurementId:"G-75LJXWH7CW"})),SO(()=>DO()),eL(()=>tL()),qV(()=>GV()))]}).catch(t=>console.error(t));
